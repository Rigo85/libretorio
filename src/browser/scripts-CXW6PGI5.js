/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2024 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */(()=>{"use strict";const Y=()=>localStorage.getItem("theme"),G=_=>localStorage.setItem("theme",_),P=()=>{const _=Y();return _||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},g=_=>{_==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",_)};g(P());const E=(_,a=!1)=>{const p=document.querySelector("#bd-theme");if(!p)return;const s=document.querySelector("#bd-theme-text"),u=document.querySelector(".theme-icon-active use"),l=document.querySelector(`[data-bs-theme-value="${_}"]`),o=l.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(r=>{r.classList.remove("active"),r.setAttribute("aria-pressed","false")}),l.classList.add("active"),l.setAttribute("aria-pressed","true"),u.setAttribute("href",o);const x=`${s.textContent} (${l.dataset.bsThemeValue})`;p.setAttribute("aria-label",x),a&&p.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const _=Y();_!=="light"&&_!=="dark"&&g(P())}),window.addEventListener("DOMContentLoaded",()=>{E(P()),document.querySelectorAll("[data-bs-theme-value]").forEach(_=>{_.addEventListener("click",()=>{const a=_.getAttribute("data-bs-theme-value");G(a),g(a),E(a,!0)})})})})();/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(Y,G){typeof exports=="object"&&typeof module<"u"?module.exports=G():typeof define=="function"&&define.amd?define(G):(Y=typeof globalThis<"u"?globalThis:Y||self).bootstrap=G()})(this,function(){"use strict";const Y=new Map,G={set(N,t,v){Y.has(N)||Y.set(N,new Map);const F=Y.get(N);F.has(t)||F.size===0?F.set(t,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(F.keys())[0]}.`)},get:(N,t)=>Y.has(N)&&Y.get(N).get(t)||null,remove(N,t){if(!Y.has(N))return;const v=Y.get(N);v.delete(t),v.size===0&&Y.delete(N)}},P="transitionend",g=N=>(N&&window.CSS&&window.CSS.escape&&(N=N.replace(/#([^\s"#']+)/g,(t,v)=>`#${CSS.escape(v)}`)),N),E=N=>N==null?`${N}`:Object.prototype.toString.call(N).match(/\s([a-z]+)/i)[1].toLowerCase(),_=N=>{N.dispatchEvent(new Event(P))},a=N=>!(!N||typeof N!="object")&&(N.jquery!==void 0&&(N=N[0]),N.nodeType!==void 0),p=N=>a(N)?N.jquery?N[0]:N:typeof N=="string"&&N.length>0?document.querySelector(g(N)):null,s=N=>{if(!a(N)||N.getClientRects().length===0)return!1;const t=getComputedStyle(N).getPropertyValue("visibility")==="visible",v=N.closest("details:not([open])");if(!v)return t;if(v!==N){const F=N.closest("summary");if(F&&F.parentNode!==v||F===null)return!1}return t},u=N=>!N||N.nodeType!==Node.ELEMENT_NODE||!!N.classList.contains("disabled")||(N.disabled!==void 0?N.disabled:N.hasAttribute("disabled")&&N.getAttribute("disabled")!=="false"),l=N=>{if(!document.documentElement.attachShadow)return null;if(typeof N.getRootNode=="function"){const t=N.getRootNode();return t instanceof ShadowRoot?t:null}return N instanceof ShadowRoot?N:N.parentNode?l(N.parentNode):null},o=()=>{},x=N=>{N.offsetHeight},r=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,c=[],b=()=>document.documentElement.dir==="rtl",n=N=>{var t;t=()=>{const v=r();if(v){const F=N.NAME,it=v.fn[F];v.fn[F]=N.jQueryInterface,v.fn[F].Constructor=N,v.fn[F].noConflict=()=>(v.fn[F]=it,N.jQueryInterface)}},document.readyState==="loading"?(c.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of c)v()}),c.push(t)):t()},i=(N,t=[],v=N)=>typeof N=="function"?N.call(...t):v,h=(N,t,v=!0)=>{if(!v)return void i(N);const F=(dt=>{if(!dt)return 0;let{transitionDuration:yt,transitionDelay:Tt}=window.getComputedStyle(dt);const Nt=Number.parseFloat(yt),It=Number.parseFloat(Tt);return Nt||It?(yt=yt.split(",")[0],Tt=Tt.split(",")[0],1e3*(Number.parseFloat(yt)+Number.parseFloat(Tt))):0})(t)+5;let it=!1;const nt=({target:dt})=>{dt===t&&(it=!0,t.removeEventListener(P,nt),i(N))};t.addEventListener(P,nt),setTimeout(()=>{it||_(t)},F)},m=(N,t,v,F)=>{const it=N.length;let nt=N.indexOf(t);return nt===-1?!v&&F?N[it-1]:N[0]:(nt+=v?1:-1,F&&(nt=(nt+it)%it),N[Math.max(0,Math.min(nt,it-1))])},y=/[^.]*(?=\..*)\.|.*/,S=/\..*/,f=/::\d+$/,k={};let M=1;const X={mouseenter:"mouseover",mouseleave:"mouseout"},B=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Z(N,t){return t&&`${t}::${M++}`||N.uidEvent||M++}function w(N){const t=Z(N);return N.uidEvent=t,k[t]=k[t]||{},k[t]}function Q(N,t,v=null){return Object.values(N).find(F=>F.callable===t&&F.delegationSelector===v)}function ct(N,t,v){const F=typeof t=="string",it=F?v:t||v;let nt=xt(N);return B.has(nt)||(nt=N),[F,it,nt]}function at(N,t,v,F,it){if(typeof t!="string"||!N)return;let[nt,dt,yt]=ct(t,v,F);t in X&&(dt=(Ut=>function(Bt){if(!Bt.relatedTarget||Bt.relatedTarget!==Bt.delegateTarget&&!Bt.delegateTarget.contains(Bt.relatedTarget))return Ut.call(this,Bt)})(dt));const Tt=w(N),Nt=Tt[yt]||(Tt[yt]={}),It=Q(Nt,dt,nt?v:null);if(It)return void(It.oneOff=It.oneOff&&it);const Ct=Z(dt,t.replace(y,"")),qt=nt?function(Rt,Ut,Bt){return function Wt(Qt){const ne=Rt.querySelectorAll(Ut);for(let{target:$t}=Qt;$t&&$t!==this;$t=$t.parentNode)for(const Gt of ne)if(Gt===$t)return rt(Qt,{delegateTarget:$t}),Wt.oneOff&&$.off(Rt,Qt.type,Ut,Bt),Bt.apply($t,[Qt])}}(N,v,dt):function(Rt,Ut){return function Bt(Wt){return rt(Wt,{delegateTarget:Rt}),Bt.oneOff&&$.off(Rt,Wt.type,Ut),Ut.apply(Rt,[Wt])}}(N,dt);qt.delegationSelector=nt?v:null,qt.callable=dt,qt.oneOff=it,qt.uidEvent=Ct,Nt[Ct]=qt,N.addEventListener(yt,qt,nt)}function St(N,t,v,F,it){const nt=Q(t[v],F,it);nt&&(N.removeEventListener(v,nt,!!it),delete t[v][nt.uidEvent])}function ut(N,t,v,F){const it=t[v]||{};for(const[nt,dt]of Object.entries(it))nt.includes(F)&&St(N,t,v,dt.callable,dt.delegationSelector)}function xt(N){return N=N.replace(S,""),X[N]||N}const $={on(N,t,v,F){at(N,t,v,F,!1)},one(N,t,v,F){at(N,t,v,F,!0)},off(N,t,v,F){if(typeof t!="string"||!N)return;const[it,nt,dt]=ct(t,v,F),yt=dt!==t,Tt=w(N),Nt=Tt[dt]||{},It=t.startsWith(".");if(nt===void 0){if(It)for(const Ct of Object.keys(Tt))ut(N,Tt,Ct,t.slice(1));for(const[Ct,qt]of Object.entries(Nt)){const Rt=Ct.replace(f,"");yt&&!t.includes(Rt)||St(N,Tt,dt,qt.callable,qt.delegationSelector)}}else{if(!Object.keys(Nt).length)return;St(N,Tt,dt,nt,it?v:null)}},trigger(N,t,v){if(typeof t!="string"||!N)return null;const F=r();let it=null,nt=!0,dt=!0,yt=!1;t!==xt(t)&&F&&(it=F.Event(t,v),F(N).trigger(it),nt=!it.isPropagationStopped(),dt=!it.isImmediatePropagationStopped(),yt=it.isDefaultPrevented());const Tt=rt(new Event(t,{bubbles:nt,cancelable:!0}),v);return yt&&Tt.preventDefault(),dt&&N.dispatchEvent(Tt),Tt.defaultPrevented&&it&&it.preventDefault(),Tt}};function rt(N,t={}){for(const[v,F]of Object.entries(t))try{N[v]=F}catch{Object.defineProperty(N,v,{configurable:!0,get:()=>F})}return N}function wt(N){if(N==="true")return!0;if(N==="false")return!1;if(N===Number(N).toString())return Number(N);if(N===""||N==="null")return null;if(typeof N!="string")return N;try{return JSON.parse(decodeURIComponent(N))}catch{return N}}function _t(N){return N.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const gt={setDataAttribute(N,t,v){N.setAttribute(`data-bs-${_t(t)}`,v)},removeDataAttribute(N,t){N.removeAttribute(`data-bs-${_t(t)}`)},getDataAttributes(N){if(!N)return{};const t={},v=Object.keys(N.dataset).filter(F=>F.startsWith("bs")&&!F.startsWith("bsConfig"));for(const F of v){let it=F.replace(/^bs/,"");it=it.charAt(0).toLowerCase()+it.slice(1),t[it]=wt(N.dataset[F])}return t},getDataAttribute:(N,t)=>wt(N.getAttribute(`data-bs-${_t(t)}`))};class Pt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,v){const F=a(v)?gt.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof F=="object"?F:{},...a(v)?gt.getDataAttributes(v):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,v=this.constructor.DefaultType){for(const[F,it]of Object.entries(v)){const nt=t[F],dt=a(nt)?"element":E(nt);if(!new RegExp(it).test(dt))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${F}" provided type "${dt}" but expected type "${it}".`)}}}class At extends Pt{constructor(t,v){super(),(t=p(t))&&(this._element=t,this._config=this._getConfig(v),G.set(this._element,this.constructor.DATA_KEY,this))}dispose(){G.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,v,F=!0){h(t,v,F)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return G.get(p(t),this.DATA_KEY)}static getOrCreateInstance(t,v={}){return this.getInstance(t)||new this(t,typeof v=="object"?v:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Ot=N=>{let t=N.getAttribute("data-bs-target");if(!t||t==="#"){let v=N.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),t=v&&v!=="#"?v.trim():null}return t?t.split(",").map(v=>g(v)).join(","):null},vt={find:(N,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,N)),findOne:(N,t=document.documentElement)=>Element.prototype.querySelector.call(t,N),children:(N,t)=>[].concat(...N.children).filter(v=>v.matches(t)),parents(N,t){const v=[];let F=N.parentNode.closest(t);for(;F;)v.push(F),F=F.parentNode.closest(t);return v},prev(N,t){let v=N.previousElementSibling;for(;v;){if(v.matches(t))return[v];v=v.previousElementSibling}return[]},next(N,t){let v=N.nextElementSibling;for(;v;){if(v.matches(t))return[v];v=v.nextElementSibling}return[]},focusableChildren(N){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(t,N).filter(v=>!u(v)&&s(v))},getSelectorFromElement(N){const t=Ot(N);return t&&vt.findOne(t)?t:null},getElementFromSelector(N){const t=Ot(N);return t?vt.findOne(t):null},getMultipleElementsFromSelector(N){const t=Ot(N);return t?vt.find(t):[]}},Vt=(N,t="hide")=>{const v=`click.dismiss${N.EVENT_KEY}`,F=N.NAME;$.on(document,v,`[data-bs-dismiss="${F}"]`,function(it){if(["A","AREA"].includes(this.tagName)&&it.preventDefault(),u(this))return;const nt=vt.getElementFromSelector(this)||this.closest(`.${F}`);N.getOrCreateInstance(nt)[t]()})},Mt=".bs.alert",C=`close${Mt}`,d=`closed${Mt}`;class e extends At{static get NAME(){return"alert"}close(){if($.trigger(this._element,C).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),$.trigger(this._element,d),this.dispose()}static jQueryInterface(t){return this.each(function(){const v=e.getOrCreateInstance(this);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t](this)}})}}Vt(e,"close"),n(e);const A='[data-bs-toggle="button"]';class j extends At{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const v=j.getOrCreateInstance(this);t==="toggle"&&v[t]()})}}$.on(document,"click.bs.button.data-api",A,N=>{N.preventDefault();const t=N.target.closest(A);j.getOrCreateInstance(t).toggle()}),n(j);const I=".bs.swipe",R=`touchstart${I}`,H=`touchmove${I}`,tt=`touchend${I}`,ot=`pointerdown${I}`,et=`pointerup${I}`,pt={endCallback:null,leftCallback:null,rightCallback:null},Et={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class mt extends Pt{constructor(t,v){super(),this._element=t,t&&mt.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return pt}static get DefaultType(){return Et}static get NAME(){return"swipe"}dispose(){$.off(this._element,I)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),i(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const v=t/this._deltaX;this._deltaX=0,v&&i(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,ot,t=>this._start(t)),$.on(this._element,et,t=>this._end(t)),this._element.classList.add("pointer-event")):($.on(this._element,R,t=>this._start(t)),$.on(this._element,H,t=>this._move(t)),$.on(this._element,tt,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType==="pen"||t.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const L=".bs.carousel",U=".data-api",q="ArrowLeft",T="ArrowRight",O="next",D="prev",V="left",K="right",st=`slide${L}`,ht=`slid${L}`,ft=`keydown${L}`,kt=`mouseenter${L}`,Lt=`mouseleave${L}`,jt=`dragstart${L}`,zt=`load${L}${U}`,Xt=`click${L}${U}`,ie="carousel",re="active",be=".active",fe=".carousel-item",Pe=be+fe,Ke={[q]:K,[T]:V},Fe={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},bi={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class se extends At{constructor(t,v){super(t,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=vt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ie&&this.cycle()}static get Default(){return Fe}static get DefaultType(){return bi}static get NAME(){return"carousel"}next(){this._slide(O)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(D)}pause(){this._isSliding&&_(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?$.one(this._element,ht,()=>this.cycle()):this.cycle())}to(t){const v=this._getItems();if(t>v.length-1||t<0)return;if(this._isSliding)return void $.one(this._element,ht,()=>this.to(t));const F=this._getItemIndex(this._getActive());if(F===t)return;const it=t>F?O:D;this._slide(it,v[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&$.on(this._element,ft,t=>this._keydown(t)),this._config.pause==="hover"&&($.on(this._element,kt,()=>this.pause()),$.on(this._element,Lt,()=>this._maybeEnableCycle())),this._config.touch&&mt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of vt.find(".carousel-item img",this._element))$.on(v,jt,F=>F.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(V)),rightCallback:()=>this._slide(this._directionToOrder(K)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new mt(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const v=Ke[t.key];v&&(t.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const v=vt.findOne(be,this._indicatorsElement);v.classList.remove(re),v.removeAttribute("aria-current");const F=vt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);F&&(F.classList.add(re),F.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const v=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(t,v=null){if(this._isSliding)return;const F=this._getActive(),it=t===O,nt=v||m(this._getItems(),F,it,this._config.wrap);if(nt===F)return;const dt=this._getItemIndex(nt),yt=Ct=>$.trigger(this._element,Ct,{relatedTarget:nt,direction:this._orderToDirection(t),from:this._getItemIndex(F),to:dt});if(yt(st).defaultPrevented||!F||!nt)return;const Tt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(dt),this._activeElement=nt;const Nt=it?"carousel-item-start":"carousel-item-end",It=it?"carousel-item-next":"carousel-item-prev";nt.classList.add(It),x(nt),F.classList.add(Nt),nt.classList.add(Nt),this._queueCallback(()=>{nt.classList.remove(Nt,It),nt.classList.add(re),F.classList.remove(re,It,Nt),this._isSliding=!1,yt(ht)},F,this._isAnimated()),Tt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return vt.findOne(Pe,this._element)}_getItems(){return vt.find(fe,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return b()?t===V?D:O:t===V?O:D}_orderToDirection(t){return b()?t===D?V:K:t===D?K:V}static jQueryInterface(t){return this.each(function(){const v=se.getOrCreateInstance(this,t);if(typeof t!="number"){if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}}else v.to(t)})}}$.on(document,Xt,"[data-bs-slide], [data-bs-slide-to]",function(N){const t=vt.getElementFromSelector(this);if(!t||!t.classList.contains(ie))return;N.preventDefault();const v=se.getOrCreateInstance(t),F=this.getAttribute("data-bs-slide-to");return F?(v.to(F),void v._maybeEnableCycle()):gt.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),$.on(window,zt,()=>{const N=vt.find('[data-bs-ride="carousel"]');for(const t of N)se.getOrCreateInstance(t)}),n(se);const Oe=".bs.collapse",oe=`show${Oe}`,ye=`shown${Oe}`,yi=`hide${Oe}`,si=`hidden${Oe}`,oi=`click${Oe}.data-api`,He="show",Le="collapse",_e="collapsing",$e=`:scope .${Le} .${Le}`,_i='[data-bs-toggle="collapse"]',Ui={parent:null,toggle:!0},wi={parent:"(null|element)",toggle:"boolean"};class Je extends At{constructor(t,v){super(t,v),this._isTransitioning=!1,this._triggerArray=[];const F=vt.find(_i);for(const it of F){const nt=vt.getSelectorFromElement(it),dt=vt.find(nt).filter(yt=>yt===this._element);nt!==null&&dt.length&&this._triggerArray.push(it)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Ui}static get DefaultType(){return wi}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(it=>it!==this._element).map(it=>Je.getOrCreateInstance(it,{toggle:!1}))),t.length&&t[0]._isTransitioning||$.trigger(this._element,oe).defaultPrevented)return;for(const it of t)it.hide();const v=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(_e),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const F=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(_e),this._element.classList.add(Le,He),this._element.style[v]="",$.trigger(this._element,ye)},this._element,!0),this._element.style[v]=`${this._element[F]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,yi).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,x(this._element),this._element.classList.add(_e),this._element.classList.remove(Le,He);for(const v of this._triggerArray){const F=vt.getElementFromSelector(v);F&&!this._isShown(F)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(_e),this._element.classList.add(Le),$.trigger(this._element,si)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(He)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=p(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(_i);for(const v of t){const F=vt.getElementFromSelector(v);F&&this._addAriaAndCollapsedClass([v],this._isShown(F))}}_getFirstLevelChildren(t){const v=vt.find($e,this._config.parent);return vt.find(t,this._config.parent).filter(F=>!v.includes(F))}_addAriaAndCollapsedClass(t,v){if(t.length)for(const F of t)F.classList.toggle("collapsed",!v),F.setAttribute("aria-expanded",v)}static jQueryInterface(t){const v={};return typeof t=="string"&&/show|hide/.test(t)&&(v.toggle=!1),this.each(function(){const F=Je.getOrCreateInstance(this,v);if(typeof t=="string"){if(F[t]===void 0)throw new TypeError(`No method named "${t}"`);F[t]()}})}}$.on(document,oi,_i,function(N){(N.target.tagName==="A"||N.delegateTarget&&N.delegateTarget.tagName==="A")&&N.preventDefault();for(const t of vt.getMultipleElementsFromSelector(this))Je.getOrCreateInstance(t,{toggle:!1}).toggle()}),n(Je);var pe="top",we="bottom",xe="right",me="left",ai="auto",Ve=[pe,we,xe,me],Xe="start",Qe="end",Wi="clippingParents",Ni="viewport",ti="popper",qi="reference",xi=Ve.reduce(function(N,t){return N.concat([t+"-"+Xe,t+"-"+Qe])},[]),Ei=[].concat(Ve,[ai]).reduce(function(N,t){return N.concat([t,t+"-"+Xe,t+"-"+Qe])},[]),Ii="beforeRead",Li="read",Di="afterRead",Si="beforeMain",Ue="main",ei="afterMain",ii="beforeWrite",hi="write",li="afterWrite",Ee=[Ii,Li,Di,Si,Ue,ei,ii,hi,li];function ge(N){return N?(N.nodeName||"").toLowerCase():null}function ae(N){if(N==null)return window;if(N.toString()!=="[object Window]"){var t=N.ownerDocument;return t&&t.defaultView||window}return N}function ve(N){return N instanceof ae(N).Element||N instanceof Element}function ue(N){return N instanceof ae(N).HTMLElement||N instanceof HTMLElement}function Ce(N){return typeof ShadowRoot<"u"&&(N instanceof ae(N).ShadowRoot||N instanceof ShadowRoot)}const Ri={name:"applyStyles",enabled:!0,phase:"write",fn:function(N){var t=N.state;Object.keys(t.elements).forEach(function(v){var F=t.styles[v]||{},it=t.attributes[v]||{},nt=t.elements[v];ue(nt)&&ge(nt)&&(Object.assign(nt.style,F),Object.keys(it).forEach(function(dt){var yt=it[dt];yt===!1?nt.removeAttribute(dt):nt.setAttribute(dt,yt===!0?"":yt)}))})},effect:function(N){var t=N.state,v={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,v.popper),t.styles=v,t.elements.arrow&&Object.assign(t.elements.arrow.style,v.arrow),function(){Object.keys(t.elements).forEach(function(F){var it=t.elements[F],nt=t.attributes[F]||{},dt=Object.keys(t.styles.hasOwnProperty(F)?t.styles[F]:v[F]).reduce(function(yt,Tt){return yt[Tt]="",yt},{});ue(it)&&ge(it)&&(Object.assign(it.style,dt),Object.keys(nt).forEach(function(yt){it.removeAttribute(yt)}))})}},requires:["computeStyles"]};function Ae(N){return N.split("-")[0]}var Ze=Math.max,z=Math.min,W=Math.round;function J(){var N=navigator.userAgentData;return N!=null&&N.brands&&Array.isArray(N.brands)?N.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function lt(){return!/^((?!chrome|android).)*safari/i.test(J())}function bt(N,t,v){t===void 0&&(t=!1),v===void 0&&(v=!1);var F=N.getBoundingClientRect(),it=1,nt=1;t&&ue(N)&&(it=N.offsetWidth>0&&W(F.width)/N.offsetWidth||1,nt=N.offsetHeight>0&&W(F.height)/N.offsetHeight||1);var dt=(ve(N)?ae(N):window).visualViewport,yt=!lt()&&v,Tt=(F.left+(yt&&dt?dt.offsetLeft:0))/it,Nt=(F.top+(yt&&dt?dt.offsetTop:0))/nt,It=F.width/it,Ct=F.height/nt;return{width:It,height:Ct,top:Nt,right:Tt+It,bottom:Nt+Ct,left:Tt,x:Tt,y:Nt}}function Dt(N){var t=bt(N),v=N.offsetWidth,F=N.offsetHeight;return Math.abs(t.width-v)<=1&&(v=t.width),Math.abs(t.height-F)<=1&&(F=t.height),{x:N.offsetLeft,y:N.offsetTop,width:v,height:F}}function Ft(N,t){var v=t.getRootNode&&t.getRootNode();if(N.contains(t))return!0;if(v&&Ce(v)){var F=t;do{if(F&&N.isSameNode(F))return!0;F=F.parentNode||F.host}while(F)}return!1}function Yt(N){return ae(N).getComputedStyle(N)}function Ne(N){return["table","td","th"].indexOf(ge(N))>=0}function he(N){return((ve(N)?N.ownerDocument:N.document)||window.document).documentElement}function Se(N){return ge(N)==="html"?N:N.assignedSlot||N.parentNode||(Ce(N)?N.host:null)||he(N)}function On(N){return ue(N)&&Yt(N).position!=="fixed"?N.offsetParent:null}function zi(N){for(var t=ae(N),v=On(N);v&&Ne(v)&&Yt(v).position==="static";)v=On(v);return v&&(ge(v)==="html"||ge(v)==="body"&&Yt(v).position==="static")?t:v||function(F){var it=/firefox/i.test(J());if(/Trident/i.test(J())&&ue(F)&&Yt(F).position==="fixed")return null;var nt=Se(F);for(Ce(nt)&&(nt=nt.host);ue(nt)&&["html","body"].indexOf(ge(nt))<0;){var dt=Yt(nt);if(dt.transform!=="none"||dt.perspective!=="none"||dt.contain==="paint"||["transform","perspective"].indexOf(dt.willChange)!==-1||it&&dt.willChange==="filter"||it&&dt.filter&&dt.filter!=="none")return nt;nt=nt.parentNode}return null}(N)||t}function rn(N){return["top","bottom"].indexOf(N)>=0?"x":"y"}function ji(N,t,v){return Ze(N,z(t,v))}function An(N){return Object.assign({},{top:0,right:0,bottom:0,left:0},N)}function Nn(N,t){return t.reduce(function(v,F){return v[F]=N,v},{})}const In={name:"arrow",enabled:!0,phase:"main",fn:function(N){var t,v=N.state,F=N.name,it=N.options,nt=v.elements.arrow,dt=v.modifiersData.popperOffsets,yt=Ae(v.placement),Tt=rn(yt),Nt=[me,xe].indexOf(yt)>=0?"height":"width";if(nt&&dt){var It=function(te,Jt){return An(typeof(te=typeof te=="function"?te(Object.assign({},Jt.rects,{placement:Jt.placement})):te)!="number"?te:Nn(te,Ve))}(it.padding,v),Ct=Dt(nt),qt=Tt==="y"?pe:me,Rt=Tt==="y"?we:xe,Ut=v.rects.reference[Nt]+v.rects.reference[Tt]-dt[Tt]-v.rects.popper[Nt],Bt=dt[Tt]-v.rects.reference[Tt],Wt=zi(nt),Qt=Wt?Tt==="y"?Wt.clientHeight||0:Wt.clientWidth||0:0,ne=Ut/2-Bt/2,$t=It[qt],Gt=Qt-Ct[Nt]-It[Rt],Ht=Qt/2-Ct[Nt]/2+ne,Zt=ji($t,Ht,Gt),Kt=Tt;v.modifiersData[F]=((t={})[Kt]=Zt,t.centerOffset=Zt-Ht,t)}},effect:function(N){var t=N.state,v=N.options.element,F=v===void 0?"[data-popper-arrow]":v;F!=null&&(typeof F!="string"||(F=t.elements.popper.querySelector(F)))&&Ft(t.elements.popper,F)&&(t.elements.arrow=F)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ki(N){return N.split("-")[1]}var Fr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ln(N){var t,v=N.popper,F=N.popperRect,it=N.placement,nt=N.variation,dt=N.offsets,yt=N.position,Tt=N.gpuAcceleration,Nt=N.adaptive,It=N.roundOffsets,Ct=N.isFixed,qt=dt.x,Rt=qt===void 0?0:qt,Ut=dt.y,Bt=Ut===void 0?0:Ut,Wt=typeof It=="function"?It({x:Rt,y:Bt}):{x:Rt,y:Bt};Rt=Wt.x,Bt=Wt.y;var Qt=dt.hasOwnProperty("x"),ne=dt.hasOwnProperty("y"),$t=me,Gt=pe,Ht=window;if(Nt){var Zt=zi(v),Kt="clientHeight",te="clientWidth";Zt===ae(v)&&Yt(Zt=he(v)).position!=="static"&&yt==="absolute"&&(Kt="scrollHeight",te="scrollWidth"),(it===pe||(it===me||it===xe)&&nt===Qe)&&(Gt=we,Bt-=(Ct&&Zt===Ht&&Ht.visualViewport?Ht.visualViewport.height:Zt[Kt])-F.height,Bt*=Tt?1:-1),it!==me&&(it!==pe&&it!==we||nt!==Qe)||($t=xe,Rt-=(Ct&&Zt===Ht&&Ht.visualViewport?Ht.visualViewport.width:Zt[te])-F.width,Rt*=Tt?1:-1)}var Jt,ce=Object.assign({position:yt},Nt&&Fr),Ie=It===!0?function(Be,ke){var Re=Be.x,ze=Be.y,le=ke.devicePixelRatio||1;return{x:W(Re*le)/le||0,y:W(ze*le)/le||0}}({x:Rt,y:Bt},ae(v)):{x:Rt,y:Bt};return Rt=Ie.x,Bt=Ie.y,Tt?Object.assign({},ce,((Jt={})[Gt]=ne?"0":"",Jt[$t]=Qt?"0":"",Jt.transform=(Ht.devicePixelRatio||1)<=1?"translate("+Rt+"px, "+Bt+"px)":"translate3d("+Rt+"px, "+Bt+"px, 0)",Jt)):Object.assign({},ce,((t={})[Gt]=ne?Bt+"px":"",t[$t]=Qt?Rt+"px":"",t.transform="",t))}const sn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(N){var t=N.state,v=N.options,F=v.gpuAcceleration,it=F===void 0||F,nt=v.adaptive,dt=nt===void 0||nt,yt=v.roundOffsets,Tt=yt===void 0||yt,Nt={placement:Ae(t.placement),variation:ki(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:it,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Ln(Object.assign({},Nt,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:dt,roundOffsets:Tt})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Ln(Object.assign({},Nt,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Tt})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var Hi={passive:!0};const on={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(N){var t=N.state,v=N.instance,F=N.options,it=F.scroll,nt=it===void 0||it,dt=F.resize,yt=dt===void 0||dt,Tt=ae(t.elements.popper),Nt=[].concat(t.scrollParents.reference,t.scrollParents.popper);return nt&&Nt.forEach(function(It){It.addEventListener("scroll",v.update,Hi)}),yt&&Tt.addEventListener("resize",v.update,Hi),function(){nt&&Nt.forEach(function(It){It.removeEventListener("scroll",v.update,Hi)}),yt&&Tt.removeEventListener("resize",v.update,Hi)}},data:{}};var Ur={left:"right",right:"left",bottom:"top",top:"bottom"};function $i(N){return N.replace(/left|right|bottom|top/g,function(t){return Ur[t]})}var Wr={start:"end",end:"start"};function Dn(N){return N.replace(/start|end/g,function(t){return Wr[t]})}function an(N){var t=ae(N);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function hn(N){return bt(he(N)).left+an(N).scrollLeft}function ln(N){var t=Yt(N),v=t.overflow,F=t.overflowX,it=t.overflowY;return/auto|scroll|overlay|hidden/.test(v+it+F)}function Rn(N){return["html","body","#document"].indexOf(ge(N))>=0?N.ownerDocument.body:ue(N)&&ln(N)?N:Rn(Se(N))}function Pi(N,t){var v;t===void 0&&(t=[]);var F=Rn(N),it=F===((v=N.ownerDocument)==null?void 0:v.body),nt=ae(F),dt=it?[nt].concat(nt.visualViewport||[],ln(F)?F:[]):F,yt=t.concat(dt);return it?yt:yt.concat(Pi(Se(dt)))}function cn(N){return Object.assign({},N,{left:N.x,top:N.y,right:N.x+N.width,bottom:N.y+N.height})}function zn(N,t,v){return t===Ni?cn(function(F,it){var nt=ae(F),dt=he(F),yt=nt.visualViewport,Tt=dt.clientWidth,Nt=dt.clientHeight,It=0,Ct=0;if(yt){Tt=yt.width,Nt=yt.height;var qt=lt();(qt||!qt&&it==="fixed")&&(It=yt.offsetLeft,Ct=yt.offsetTop)}return{width:Tt,height:Nt,x:It+hn(F),y:Ct}}(N,v)):ve(t)?function(F,it){var nt=bt(F,!1,it==="fixed");return nt.top=nt.top+F.clientTop,nt.left=nt.left+F.clientLeft,nt.bottom=nt.top+F.clientHeight,nt.right=nt.left+F.clientWidth,nt.width=F.clientWidth,nt.height=F.clientHeight,nt.x=nt.left,nt.y=nt.top,nt}(t,v):cn(function(F){var it,nt=he(F),dt=an(F),yt=(it=F.ownerDocument)==null?void 0:it.body,Tt=Ze(nt.scrollWidth,nt.clientWidth,yt?yt.scrollWidth:0,yt?yt.clientWidth:0),Nt=Ze(nt.scrollHeight,nt.clientHeight,yt?yt.scrollHeight:0,yt?yt.clientHeight:0),It=-dt.scrollLeft+hn(F),Ct=-dt.scrollTop;return Yt(yt||nt).direction==="rtl"&&(It+=Ze(nt.clientWidth,yt?yt.clientWidth:0)-Tt),{width:Tt,height:Nt,x:It,y:Ct}}(he(N)))}function jn(N){var t,v=N.reference,F=N.element,it=N.placement,nt=it?Ae(it):null,dt=it?ki(it):null,yt=v.x+v.width/2-F.width/2,Tt=v.y+v.height/2-F.height/2;switch(nt){case pe:t={x:yt,y:v.y-F.height};break;case we:t={x:yt,y:v.y+v.height};break;case xe:t={x:v.x+v.width,y:Tt};break;case me:t={x:v.x-F.width,y:Tt};break;default:t={x:v.x,y:v.y}}var Nt=nt?rn(nt):null;if(Nt!=null){var It=Nt==="y"?"height":"width";switch(dt){case Xe:t[Nt]=t[Nt]-(v[It]/2-F[It]/2);break;case Qe:t[Nt]=t[Nt]+(v[It]/2-F[It]/2)}}return t}function Ti(N,t){t===void 0&&(t={});var v=t,F=v.placement,it=F===void 0?N.placement:F,nt=v.strategy,dt=nt===void 0?N.strategy:nt,yt=v.boundary,Tt=yt===void 0?Wi:yt,Nt=v.rootBoundary,It=Nt===void 0?Ni:Nt,Ct=v.elementContext,qt=Ct===void 0?ti:Ct,Rt=v.altBoundary,Ut=Rt!==void 0&&Rt,Bt=v.padding,Wt=Bt===void 0?0:Bt,Qt=An(typeof Wt!="number"?Wt:Nn(Wt,Ve)),ne=qt===ti?qi:ti,$t=N.rects.popper,Gt=N.elements[Ut?ne:qt],Ht=function(ke,Re,ze,le){var We=Re==="clippingParents"?function(ee){var Te=Pi(Se(ee)),je=["absolute","fixed"].indexOf(Yt(ee).position)>=0&&ue(ee)?zi(ee):ee;return ve(je)?Te.filter(function(ri){return ve(ri)&&Ft(ri,je)&&ge(ri)!=="body"}):[]}(ke):[].concat(Re),qe=[].concat(We,[ze]),Ai=qe[0],de=qe.reduce(function(ee,Te){var je=zn(ke,Te,le);return ee.top=Ze(je.top,ee.top),ee.right=z(je.right,ee.right),ee.bottom=z(je.bottom,ee.bottom),ee.left=Ze(je.left,ee.left),ee},zn(ke,Ai,le));return de.width=de.right-de.left,de.height=de.bottom-de.top,de.x=de.left,de.y=de.top,de}(ve(Gt)?Gt:Gt.contextElement||he(N.elements.popper),Tt,It,dt),Zt=bt(N.elements.reference),Kt=jn({reference:Zt,element:$t,placement:it}),te=cn(Object.assign({},$t,Kt)),Jt=qt===ti?te:Zt,ce={top:Ht.top-Jt.top+Qt.top,bottom:Jt.bottom-Ht.bottom+Qt.bottom,left:Ht.left-Jt.left+Qt.left,right:Jt.right-Ht.right+Qt.right},Ie=N.modifiersData.offset;if(qt===ti&&Ie){var Be=Ie[it];Object.keys(ce).forEach(function(ke){var Re=[xe,we].indexOf(ke)>=0?1:-1,ze=[pe,we].indexOf(ke)>=0?"y":"x";ce[ke]+=Be[ze]*Re})}return ce}function qr(N,t){t===void 0&&(t={});var v=t,F=v.placement,it=v.boundary,nt=v.rootBoundary,dt=v.padding,yt=v.flipVariations,Tt=v.allowedAutoPlacements,Nt=Tt===void 0?Ei:Tt,It=ki(F),Ct=It?yt?xi:xi.filter(function(Ut){return ki(Ut)===It}):Ve,qt=Ct.filter(function(Ut){return Nt.indexOf(Ut)>=0});qt.length===0&&(qt=Ct);var Rt=qt.reduce(function(Ut,Bt){return Ut[Bt]=Ti(N,{placement:Bt,boundary:it,rootBoundary:nt,padding:dt})[Ae(Bt)],Ut},{});return Object.keys(Rt).sort(function(Ut,Bt){return Rt[Ut]-Rt[Bt]})}const Pn={name:"flip",enabled:!0,phase:"main",fn:function(N){var t=N.state,v=N.options,F=N.name;if(!t.modifiersData[F]._skip){for(var it=v.mainAxis,nt=it===void 0||it,dt=v.altAxis,yt=dt===void 0||dt,Tt=v.fallbackPlacements,Nt=v.padding,It=v.boundary,Ct=v.rootBoundary,qt=v.altBoundary,Rt=v.flipVariations,Ut=Rt===void 0||Rt,Bt=v.allowedAutoPlacements,Wt=t.options.placement,Qt=Ae(Wt),ne=Tt||(Qt!==Wt&&Ut?function(ee){if(Ae(ee)===ai)return[];var Te=$i(ee);return[Dn(ee),Te,Dn(Te)]}(Wt):[$i(Wt)]),$t=[Wt].concat(ne).reduce(function(ee,Te){return ee.concat(Ae(Te)===ai?qr(t,{placement:Te,boundary:It,rootBoundary:Ct,padding:Nt,flipVariations:Ut,allowedAutoPlacements:Bt}):Te)},[]),Gt=t.rects.reference,Ht=t.rects.popper,Zt=new Map,Kt=!0,te=$t[0],Jt=0;Jt<$t.length;Jt++){var ce=$t[Jt],Ie=Ae(ce),Be=ki(ce)===Xe,ke=[pe,we].indexOf(Ie)>=0,Re=ke?"width":"height",ze=Ti(t,{placement:ce,boundary:It,rootBoundary:Ct,altBoundary:qt,padding:Nt}),le=ke?Be?xe:me:Be?we:pe;Gt[Re]>Ht[Re]&&(le=$i(le));var We=$i(le),qe=[];if(nt&&qe.push(ze[Ie]<=0),yt&&qe.push(ze[le]<=0,ze[We]<=0),qe.every(function(ee){return ee})){te=ce,Kt=!1;break}Zt.set(ce,qe)}if(Kt)for(var Ai=function(ee){var Te=$t.find(function(je){var ri=Zt.get(je);if(ri)return ri.slice(0,ee).every(function(tn){return tn})});if(Te)return te=Te,"break"},de=Ut?3:1;de>0&&Ai(de)!=="break";de--);t.placement!==te&&(t.modifiersData[F]._skip=!0,t.placement=te,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Mn(N,t,v){return v===void 0&&(v={x:0,y:0}),{top:N.top-t.height-v.y,right:N.right-t.width+v.x,bottom:N.bottom-t.height+v.y,left:N.left-t.width-v.x}}function Bn(N){return[pe,xe,we,me].some(function(t){return N[t]>=0})}const Fn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(N){var t=N.state,v=N.name,F=t.rects.reference,it=t.rects.popper,nt=t.modifiersData.preventOverflow,dt=Ti(t,{elementContext:"reference"}),yt=Ti(t,{altBoundary:!0}),Tt=Mn(dt,F),Nt=Mn(yt,it,nt),It=Bn(Tt),Ct=Bn(Nt);t.modifiersData[v]={referenceClippingOffsets:Tt,popperEscapeOffsets:Nt,isReferenceHidden:It,hasPopperEscaped:Ct},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":It,"data-popper-escaped":Ct})}},Un={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(N){var t=N.state,v=N.options,F=N.name,it=v.offset,nt=it===void 0?[0,0]:it,dt=Ei.reduce(function(It,Ct){return It[Ct]=function(qt,Rt,Ut){var Bt=Ae(qt),Wt=[me,pe].indexOf(Bt)>=0?-1:1,Qt=typeof Ut=="function"?Ut(Object.assign({},Rt,{placement:qt})):Ut,ne=Qt[0],$t=Qt[1];return ne=ne||0,$t=($t||0)*Wt,[me,xe].indexOf(Bt)>=0?{x:$t,y:ne}:{x:ne,y:$t}}(Ct,t.rects,nt),It},{}),yt=dt[t.placement],Tt=yt.x,Nt=yt.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=Tt,t.modifiersData.popperOffsets.y+=Nt),t.modifiersData[F]=dt}},un={name:"popperOffsets",enabled:!0,phase:"read",fn:function(N){var t=N.state,v=N.name;t.modifiersData[v]=jn({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})},data:{}},Wn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(N){var t=N.state,v=N.options,F=N.name,it=v.mainAxis,nt=it===void 0||it,dt=v.altAxis,yt=dt!==void 0&&dt,Tt=v.boundary,Nt=v.rootBoundary,It=v.altBoundary,Ct=v.padding,qt=v.tether,Rt=qt===void 0||qt,Ut=v.tetherOffset,Bt=Ut===void 0?0:Ut,Wt=Ti(t,{boundary:Tt,rootBoundary:Nt,padding:Ct,altBoundary:It}),Qt=Ae(t.placement),ne=ki(t.placement),$t=!ne,Gt=rn(Qt),Ht=Gt==="x"?"y":"x",Zt=t.modifiersData.popperOffsets,Kt=t.rects.reference,te=t.rects.popper,Jt=typeof Bt=="function"?Bt(Object.assign({},t.rects,{placement:t.placement})):Bt,ce=typeof Jt=="number"?{mainAxis:Jt,altAxis:Jt}:Object.assign({mainAxis:0,altAxis:0},Jt),Ie=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Be={x:0,y:0};if(Zt){if(nt){var ke,Re=Gt==="y"?pe:me,ze=Gt==="y"?we:xe,le=Gt==="y"?"height":"width",We=Zt[Gt],qe=We+Wt[Re],Ai=We-Wt[ze],de=Rt?-te[le]/2:0,ee=ne===Xe?Kt[le]:te[le],Te=ne===Xe?-te[le]:-Kt[le],je=t.elements.arrow,ri=Rt&&je?Dt(je):{width:0,height:0},tn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Or=tn[Re],Ar=tn[ze],en=ji(0,Kt[le],ri[le]),xo=$t?Kt[le]/2-de-en-Or-ce.mainAxis:ee-en-Or-ce.mainAxis,Eo=$t?-Kt[le]/2+de+en+Ar+ce.mainAxis:Te+en+Ar+ce.mainAxis,kn=t.elements.arrow&&zi(t.elements.arrow),So=kn?Gt==="y"?kn.clientTop||0:kn.clientLeft||0:0,Nr=(ke=Ie?.[Gt])!=null?ke:0,ko=We+Eo-Nr,Ir=ji(Rt?z(qe,We+xo-Nr-So):qe,We,Rt?Ze(Ai,ko):Ai);Zt[Gt]=Ir,Be[Gt]=Ir-We}if(yt){var Lr,To=Gt==="x"?pe:me,Co=Gt==="x"?we:xe,vi=Zt[Ht],nn=Ht==="y"?"height":"width",Dr=vi+Wt[To],Rr=vi-Wt[Co],Tn=[pe,me].indexOf(Qt)!==-1,zr=(Lr=Ie?.[Ht])!=null?Lr:0,jr=Tn?Dr:vi-Kt[nn]-te[nn]-zr+ce.altAxis,Pr=Tn?vi+Kt[nn]+te[nn]-zr-ce.altAxis:Rr,Mr=Rt&&Tn?function(Oo,Ao,Cn){var Br=ji(Oo,Ao,Cn);return Br>Cn?Cn:Br}(jr,vi,Pr):ji(Rt?jr:Dr,vi,Rt?Pr:Rr);Zt[Ht]=Mr,Be[Ht]=Mr-vi}t.modifiersData[F]=Be}},requiresIfExists:["offset"]};function Hr(N,t,v){v===void 0&&(v=!1);var F,it,nt=ue(t),dt=ue(t)&&function(Ct){var qt=Ct.getBoundingClientRect(),Rt=W(qt.width)/Ct.offsetWidth||1,Ut=W(qt.height)/Ct.offsetHeight||1;return Rt!==1||Ut!==1}(t),yt=he(t),Tt=bt(N,dt,v),Nt={scrollLeft:0,scrollTop:0},It={x:0,y:0};return(nt||!nt&&!v)&&((ge(t)!=="body"||ln(yt))&&(Nt=(F=t)!==ae(F)&&ue(F)?{scrollLeft:(it=F).scrollLeft,scrollTop:it.scrollTop}:an(F)),ue(t)?((It=bt(t,!0)).x+=t.clientLeft,It.y+=t.clientTop):yt&&(It.x=hn(yt))),{x:Tt.left+Nt.scrollLeft-It.x,y:Tt.top+Nt.scrollTop-It.y,width:Tt.width,height:Tt.height}}function $r(N){var t=new Map,v=new Set,F=[];function it(nt){v.add(nt.name),[].concat(nt.requires||[],nt.requiresIfExists||[]).forEach(function(dt){if(!v.has(dt)){var yt=t.get(dt);yt&&it(yt)}}),F.push(nt)}return N.forEach(function(nt){t.set(nt.name,nt)}),N.forEach(function(nt){v.has(nt.name)||it(nt)}),F}var qn={placement:"bottom",modifiers:[],strategy:"absolute"};function Hn(){for(var N=arguments.length,t=new Array(N),v=0;v<N;v++)t[v]=arguments[v];return!t.some(function(F){return!(F&&typeof F.getBoundingClientRect=="function")})}function Vi(N){N===void 0&&(N={});var t=N,v=t.defaultModifiers,F=v===void 0?[]:v,it=t.defaultOptions,nt=it===void 0?qn:it;return function(dt,yt,Tt){Tt===void 0&&(Tt=nt);var Nt,It,Ct={placement:"bottom",orderedModifiers:[],options:Object.assign({},qn,nt),modifiersData:{},elements:{reference:dt,popper:yt},attributes:{},styles:{}},qt=[],Rt=!1,Ut={state:Ct,setOptions:function(Wt){var Qt=typeof Wt=="function"?Wt(Ct.options):Wt;Bt(),Ct.options=Object.assign({},nt,Ct.options,Qt),Ct.scrollParents={reference:ve(dt)?Pi(dt):dt.contextElement?Pi(dt.contextElement):[],popper:Pi(yt)};var ne,$t,Gt=function(Ht){var Zt=$r(Ht);return Ee.reduce(function(Kt,te){return Kt.concat(Zt.filter(function(Jt){return Jt.phase===te}))},[])}((ne=[].concat(F,Ct.options.modifiers),$t=ne.reduce(function(Ht,Zt){var Kt=Ht[Zt.name];return Ht[Zt.name]=Kt?Object.assign({},Kt,Zt,{options:Object.assign({},Kt.options,Zt.options),data:Object.assign({},Kt.data,Zt.data)}):Zt,Ht},{}),Object.keys($t).map(function(Ht){return $t[Ht]})));return Ct.orderedModifiers=Gt.filter(function(Ht){return Ht.enabled}),Ct.orderedModifiers.forEach(function(Ht){var Zt=Ht.name,Kt=Ht.options,te=Kt===void 0?{}:Kt,Jt=Ht.effect;if(typeof Jt=="function"){var ce=Jt({state:Ct,name:Zt,instance:Ut,options:te});qt.push(ce||function(){})}}),Ut.update()},forceUpdate:function(){if(!Rt){var Wt=Ct.elements,Qt=Wt.reference,ne=Wt.popper;if(Hn(Qt,ne)){Ct.rects={reference:Hr(Qt,zi(ne),Ct.options.strategy==="fixed"),popper:Dt(ne)},Ct.reset=!1,Ct.placement=Ct.options.placement,Ct.orderedModifiers.forEach(function(Jt){return Ct.modifiersData[Jt.name]=Object.assign({},Jt.data)});for(var $t=0;$t<Ct.orderedModifiers.length;$t++)if(Ct.reset!==!0){var Gt=Ct.orderedModifiers[$t],Ht=Gt.fn,Zt=Gt.options,Kt=Zt===void 0?{}:Zt,te=Gt.name;typeof Ht=="function"&&(Ct=Ht({state:Ct,options:Kt,name:te,instance:Ut})||Ct)}else Ct.reset=!1,$t=-1}}},update:(Nt=function(){return new Promise(function(Wt){Ut.forceUpdate(),Wt(Ct)})},function(){return It||(It=new Promise(function(Wt){Promise.resolve().then(function(){It=void 0,Wt(Nt())})})),It}),destroy:function(){Bt(),Rt=!0}};if(!Hn(dt,yt))return Ut;function Bt(){qt.forEach(function(Wt){return Wt()}),qt=[]}return Ut.setOptions(Tt).then(function(Wt){!Rt&&Tt.onFirstUpdate&&Tt.onFirstUpdate(Wt)}),Ut}}var Vr=Vi(),Xr=Vi({defaultModifiers:[on,un,sn,Ri]}),dn=Vi({defaultModifiers:[on,un,sn,Ri,Un,Pn,Wn,In,Fn]});const $n=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ei,afterRead:Di,afterWrite:li,applyStyles:Ri,arrow:In,auto:ai,basePlacements:Ve,beforeMain:Si,beforeRead:Ii,beforeWrite:ii,bottom:we,clippingParents:Wi,computeStyles:sn,createPopper:dn,createPopperBase:Vr,createPopperLite:Xr,detectOverflow:Ti,end:Qe,eventListeners:on,flip:Pn,hide:Fn,left:me,main:Ue,modifierPhases:Ee,offset:Un,placements:Ei,popper:ti,popperGenerator:Vi,popperOffsets:un,preventOverflow:Wn,read:Li,reference:qi,right:xe,start:Xe,top:pe,variationPlacements:xi,viewport:Ni,write:hi},Symbol.toStringTag,{value:"Module"})),Vn="dropdown",ci=".bs.dropdown",fn=".data-api",Zr="ArrowUp",Xn="ArrowDown",Yr=`hide${ci}`,Gr=`hidden${ci}`,Kr=`show${ci}`,Jr=`shown${ci}`,Zn=`click${ci}${fn}`,Yn=`keydown${ci}${fn}`,Qr=`keyup${ci}${fn}`,Ci="show",ui='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ts=`${ui}.${Ci}`,Xi=".dropdown-menu",es=b()?"top-end":"top-start",is=b()?"top-start":"top-end",ns=b()?"bottom-end":"bottom-start",rs=b()?"bottom-start":"bottom-end",ss=b()?"left-start":"right-start",os=b()?"right-start":"left-start",as={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},hs={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Me extends At{constructor(t,v){super(t,v),this._popper=null,this._parent=this._element.parentNode,this._menu=vt.next(this._element,Xi)[0]||vt.prev(this._element,Xi)[0]||vt.findOne(Xi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return as}static get DefaultType(){return hs}static get NAME(){return Vn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!$.trigger(this._element,Kr,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))$.on(v,"mouseover",o);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ci),this._element.classList.add(Ci),$.trigger(this._element,Jr,t)}}hide(){if(u(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!$.trigger(this._element,Yr,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))$.off(v,"mouseover",o);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ci),this._element.classList.remove(Ci),this._element.setAttribute("aria-expanded","false"),gt.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Gr,t)}}_getConfig(t){if(typeof(t=super._getConfig(t)).reference=="object"&&!a(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Vn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if($n===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;this._config.reference==="parent"?t=this._parent:a(this._config.reference)?t=p(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const v=this._getPopperConfig();this._popper=dn(t,this._menu,v)}_isShown(){return this._menu.classList.contains(Ci)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return ss;if(t.classList.contains("dropstart"))return os;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains("dropup")?v?is:es:v?rs:ns}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(v=>Number.parseInt(v,10)):typeof t=="function"?v=>t(v,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(gt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...i(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:v}){const F=vt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(it=>s(it));F.length&&m(F,v,t===Xn,!F.includes(v)).focus()}static jQueryInterface(t){return this.each(function(){const v=Me.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}static clearMenus(t){if(t.button===2||t.type==="keyup"&&t.key!=="Tab")return;const v=vt.find(ts);for(const F of v){const it=Me.getInstance(F);if(!it||it._config.autoClose===!1)continue;const nt=t.composedPath(),dt=nt.includes(it._menu);if(nt.includes(it._element)||it._config.autoClose==="inside"&&!dt||it._config.autoClose==="outside"&&dt||it._menu.contains(t.target)&&(t.type==="keyup"&&t.key==="Tab"||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const yt={relatedTarget:it._element};t.type==="click"&&(yt.clickEvent=t),it._completeHide(yt)}}static dataApiKeydownHandler(t){const v=/input|textarea/i.test(t.target.tagName),F=t.key==="Escape",it=[Zr,Xn].includes(t.key);if(!it&&!F||v&&!F)return;t.preventDefault();const nt=this.matches(ui)?this:vt.prev(this,ui)[0]||vt.next(this,ui)[0]||vt.findOne(ui,t.delegateTarget.parentNode),dt=Me.getOrCreateInstance(nt);if(it)return t.stopPropagation(),dt.show(),void dt._selectMenuItem(t);dt._isShown()&&(t.stopPropagation(),dt.hide(),nt.focus())}}$.on(document,Yn,ui,Me.dataApiKeydownHandler),$.on(document,Yn,Xi,Me.dataApiKeydownHandler),$.on(document,Zn,Me.clearMenus),$.on(document,Qr,Me.clearMenus),$.on(document,Zn,ui,function(N){N.preventDefault(),Me.getOrCreateInstance(this).toggle()}),n(Me);const Gn="backdrop",Kn="show",Jn=`mousedown.bs.${Gn}`,ls={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},cs={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qn extends Pt{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ls}static get DefaultType(){return cs}static get NAME(){return Gn}show(t){if(!this._config.isVisible)return void i(t);this._append();const v=this._getElement();this._config.isAnimated&&x(v),v.classList.add(Kn),this._emulateAnimation(()=>{i(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove(Kn),this._emulateAnimation(()=>{this.dispose(),i(t)})):i(t)}dispose(){this._isAppended&&($.off(this._element,Jn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=p(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),$.on(t,Jn,()=>{i(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){h(t,this._getElement(),this._config.isAnimated)}}const Zi=".bs.focustrap",us=`focusin${Zi}`,ds=`keydown.tab${Zi}`,tr="backward",fs={autofocus:!0,trapElement:null},ps={autofocus:"boolean",trapElement:"element"};class er extends Pt{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return fs}static get DefaultType(){return ps}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,Zi),$.on(document,us,t=>this._handleFocusin(t)),$.on(document,ds,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,Zi))}_handleFocusin(t){const{trapElement:v}=this._config;if(t.target===document||t.target===v||v.contains(t.target))return;const F=vt.focusableChildren(v);F.length===0?v.focus():this._lastTabNavDirection===tr?F[F.length-1].focus():F[0].focus()}_handleKeydown(t){t.key==="Tab"&&(this._lastTabNavDirection=t.shiftKey?tr:"forward")}}const ir=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",nr=".sticky-top",Yi="padding-right",rr="margin-right";class pn{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Yi,v=>v+t),this._setElementAttributes(ir,Yi,v=>v+t),this._setElementAttributes(nr,rr,v=>v-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Yi),this._resetElementAttributes(ir,Yi),this._resetElementAttributes(nr,rr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,v,F){const it=this.getWidth();this._applyManipulationCallback(t,nt=>{if(nt!==this._element&&window.innerWidth>nt.clientWidth+it)return;this._saveInitialAttribute(nt,v);const dt=window.getComputedStyle(nt).getPropertyValue(v);nt.style.setProperty(v,`${F(Number.parseFloat(dt))}px`)})}_saveInitialAttribute(t,v){const F=t.style.getPropertyValue(v);F&&gt.setDataAttribute(t,v,F)}_resetElementAttributes(t,v){this._applyManipulationCallback(t,F=>{const it=gt.getDataAttribute(F,v);it!==null?(gt.removeDataAttribute(F,v),F.style.setProperty(v,it)):F.style.removeProperty(v)})}_applyManipulationCallback(t,v){if(a(t))v(t);else for(const F of vt.find(t,this._element))v(F)}}const De=".bs.modal",ms=`hide${De}`,gs=`hidePrevented${De}`,sr=`hidden${De}`,or=`show${De}`,vs=`shown${De}`,bs=`resize${De}`,ys=`click.dismiss${De}`,_s=`mousedown.dismiss${De}`,ws=`keydown.dismiss${De}`,xs=`click${De}.data-api`,ar="modal-open",hr="show",mn="modal-static",Es={backdrop:!0,focus:!0,keyboard:!0},Ss={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class di extends At{constructor(t,v){super(t,v),this._dialog=vt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new pn,this._addEventListeners()}static get Default(){return Es}static get DefaultType(){return Ss}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||$.trigger(this._element,or,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(ar),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){this._isShown&&!this._isTransitioning&&($.trigger(this._element,ms).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(hr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){$.off(window,De),$.off(this._dialog,De),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qn({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new er({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=vt.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),x(this._element),this._element.classList.add(hr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,vs,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,ws,t=>{t.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),$.on(window,bs,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,_s,t=>{$.one(this._element,ys,v=>{this._element===t.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(ar),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,sr)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if($.trigger(this._element,gs).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(mn)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(mn),this._queueCallback(()=>{this._element.classList.remove(mn),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),F=v>0;if(F&&!t){const it=b()?"paddingLeft":"paddingRight";this._element.style[it]=`${v}px`}if(!F&&t){const it=b()?"paddingRight":"paddingLeft";this._element.style[it]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,v){return this.each(function(){const F=di.getOrCreateInstance(this,t);if(typeof t=="string"){if(F[t]===void 0)throw new TypeError(`No method named "${t}"`);F[t](v)}})}}$.on(document,xs,'[data-bs-toggle="modal"]',function(N){const t=vt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&N.preventDefault(),$.one(t,or,F=>{F.defaultPrevented||$.one(t,sr,()=>{s(this)&&this.focus()})});const v=vt.findOne(".modal.show");v&&di.getInstance(v).hide(),di.getOrCreateInstance(t).toggle(this)}),Vt(di),n(di);const Ye=".bs.offcanvas",lr=".data-api",ks=`load${Ye}${lr}`,cr="show",ur="showing",dr="hiding",fr=".offcanvas.show",Ts=`show${Ye}`,Cs=`shown${Ye}`,Os=`hide${Ye}`,pr=`hidePrevented${Ye}`,mr=`hidden${Ye}`,As=`resize${Ye}`,Ns=`click${Ye}${lr}`,Is=`keydown.dismiss${Ye}`,Ls={backdrop:!0,keyboard:!0,scroll:!1},Ds={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ge extends At{constructor(t,v){super(t,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ls}static get DefaultType(){return Ds}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||$.trigger(this._element,Ts,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new pn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ur),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(cr),this._element.classList.remove(ur),$.trigger(this._element,Cs,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&($.trigger(this._element,Os).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(dr),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(cr,dr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new pn().reset(),$.trigger(this._element,mr)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=!!this._config.backdrop;return new Qn({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{this._config.backdrop!=="static"?this.hide():$.trigger(this._element,pr)}:null})}_initializeFocusTrap(){return new er({trapElement:this._element})}_addEventListeners(){$.on(this._element,Is,t=>{t.key==="Escape"&&(this._config.keyboard?this.hide():$.trigger(this._element,pr))})}static jQueryInterface(t){return this.each(function(){const v=Ge.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t](this)}})}}$.on(document,Ns,'[data-bs-toggle="offcanvas"]',function(N){const t=vt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&N.preventDefault(),u(this))return;$.one(t,mr,()=>{s(this)&&this.focus()});const v=vt.findOne(fr);v&&v!==t&&Ge.getInstance(v).hide(),Ge.getOrCreateInstance(t).toggle(this)}),$.on(window,ks,()=>{for(const N of vt.find(fr))Ge.getOrCreateInstance(N).show()}),$.on(window,As,()=>{for(const N of vt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(N).position!=="fixed"&&Ge.getOrCreateInstance(N).hide()}),Vt(Ge),n(Ge);const gr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Rs=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),zs=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,js=(N,t)=>{const v=N.nodeName.toLowerCase();return t.includes(v)?!Rs.has(v)||!!zs.test(N.nodeValue):t.filter(F=>F instanceof RegExp).some(F=>F.test(v))},Ps={allowList:gr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ms={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Bs={entry:"(string|element|function|null)",selector:"(string|element)"};class Fs extends Pt{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Ps}static get DefaultType(){return Ms}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[it,nt]of Object.entries(this._config.content))this._setContent(t,nt,it);const v=t.children[0],F=this._resolvePossibleFunction(this._config.extraClass);return F&&v.classList.add(...F.split(" ")),v}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[v,F]of Object.entries(t))super._typeCheckConfig({selector:v,entry:F},Bs)}_setContent(t,v,F){const it=vt.findOne(F,t);it&&((v=this._resolvePossibleFunction(v))?a(v)?this._putElementInTemplate(p(v),it):this._config.html?it.innerHTML=this._maybeSanitize(v):it.textContent=v:it.remove())}_maybeSanitize(t){return this._config.sanitize?function(v,F,it){if(!v.length)return v;if(it&&typeof it=="function")return it(v);const nt=new window.DOMParser().parseFromString(v,"text/html"),dt=[].concat(...nt.body.querySelectorAll("*"));for(const yt of dt){const Tt=yt.nodeName.toLowerCase();if(!Object.keys(F).includes(Tt)){yt.remove();continue}const Nt=[].concat(...yt.attributes),It=[].concat(F["*"]||[],F[Tt]||[]);for(const Ct of Nt)js(Ct,It)||yt.removeAttribute(Ct.nodeName)}return nt.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return i(t,[void 0,this])}_putElementInTemplate(t,v){if(this._config.html)return v.innerHTML="",void v.append(t);v.textContent=t.textContent}}const Us=new Set(["sanitize","allowList","sanitizeFn"]),gn="fade",Gi="show",Ws=".tooltip-inner",vr=".modal",br="hide.bs.modal",Mi="hover",vn="focus",bn="click",qs={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},Hs={allowList:gr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},$s={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class fi extends At{constructor(t,v){if($n===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Hs}static get DefaultType(){return $s}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(vr),br,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=$.trigger(this._element,this.constructor.eventName("show")),v=(l(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!v)return;this._disposePopper();const F=this._getTipElement();this._element.setAttribute("aria-describedby",F.getAttribute("id"));const{container:it}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(it.append(F),$.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(F),F.classList.add(Gi),"ontouchstart"in document.documentElement)for(const nt of[].concat(...document.body.children))$.on(nt,"mouseover",o);this._queueCallback(()=>{$.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!$.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Gi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))$.off(t,"mouseover",o);this._activeTrigger[bn]=!1,this._activeTrigger[vn]=!1,this._activeTrigger[Mi]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const v=this._getTemplateFactory(t).toHtml();if(!v)return null;v.classList.remove(gn,Gi),v.classList.add(`bs-${this.constructor.NAME}-auto`);const F=(it=>{do it+=Math.floor(1e6*Math.random());while(document.getElementById(it));return it})(this.constructor.NAME).toString();return v.setAttribute("id",F),this._isAnimated()&&v.classList.add(gn),v}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Fs({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ws]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(gn)}_isShown(){return this.tip&&this.tip.classList.contains(Gi)}_createPopper(t){const v=i(this._config.placement,[this,t,this._element]),F=qs[v.toUpperCase()];return dn(this._element,t,this._getPopperConfig(F))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(v=>Number.parseInt(v,10)):typeof t=="function"?v=>t(v,this._element):t}_resolvePossibleFunction(t){return i(t,[this._element,this._element])}_getPopperConfig(t){const v={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:F=>{this._getTipElement().setAttribute("data-popper-placement",F.state.placement)}}]};return{...v,...i(this._config.popperConfig,[void 0,v])}}_setListeners(){const t=this._config.trigger.split(" ");for(const v of t)if(v==="click")$.on(this._element,this.constructor.eventName("click"),this._config.selector,F=>{const it=this._initializeOnDelegatedTarget(F);it._activeTrigger[bn]=!(it._isShown()&&it._activeTrigger[bn]),it.toggle()});else if(v!=="manual"){const F=v===Mi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),it=v===Mi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");$.on(this._element,F,this._config.selector,nt=>{const dt=this._initializeOnDelegatedTarget(nt);dt._activeTrigger[nt.type==="focusin"?vn:Mi]=!0,dt._enter()}),$.on(this._element,it,this._config.selector,nt=>{const dt=this._initializeOnDelegatedTarget(nt);dt._activeTrigger[nt.type==="focusout"?vn:Mi]=dt._element.contains(nt.relatedTarget),dt._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(vr),br,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,v){clearTimeout(this._timeout),this._timeout=setTimeout(t,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const v=gt.getDataAttributes(this._element);for(const F of Object.keys(v))Us.has(F)&&delete v[F];return t={...v,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:p(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[v,F]of Object.entries(this._config))this.constructor.Default[v]!==F&&(t[v]=F);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const v=fi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}}n(fi);const Vs=".popover-header",Xs=".popover-body",Zs={...fi.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ys={...fi.DefaultType,content:"(null|string|element|function)"};class Ki extends fi{static get Default(){return Zs}static get DefaultType(){return Ys}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Vs]:this._getTitle(),[Xs]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const v=Ki.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}}n(Ki);const yn=".bs.scrollspy",Gs=`activate${yn}`,yr=`click${yn}`,Ks=`load${yn}.data-api`,Oi="active",_n="[href]",_r=".nav-link",Js=`${_r}, .nav-item > ${_r}, .list-group-item`,Qs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},to={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Bi extends At{constructor(t,v){super(t,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Qs}static get DefaultType(){return to}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=p(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(v=>Number.parseFloat(v))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,yr),$.on(this._config.target,yr,_n,t=>{const v=this._observableSections.get(t.target.hash);if(v){t.preventDefault();const F=this._rootElement||window,it=v.offsetTop-this._element.offsetTop;if(F.scrollTo)return void F.scrollTo({top:it,behavior:"smooth"});F.scrollTop=it}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),t)}_observerCallback(t){const v=dt=>this._targetLinks.get(`#${dt.target.id}`),F=dt=>{this._previousScrollData.visibleEntryTop=dt.target.offsetTop,this._process(v(dt))},it=(this._rootElement||document.documentElement).scrollTop,nt=it>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=it;for(const dt of t){if(!dt.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(dt));continue}const yt=dt.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(nt&&yt){if(F(dt),!it)return}else nt||yt||F(dt)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=vt.find(_n,this._config.target);for(const v of t){if(!v.hash||u(v))continue;const F=vt.findOne(decodeURI(v.hash),this._element);s(F)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,F))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Oi),this._activateParents(t),$.trigger(this._element,Gs,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))vt.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Oi);else for(const v of vt.parents(t,".nav, .list-group"))for(const F of vt.prev(v,Js))F.classList.add(Oi)}_clearActiveClass(t){t.classList.remove(Oi);const v=vt.find(`${_n}.${Oi}`,t);for(const F of v)F.classList.remove(Oi)}static jQueryInterface(t){return this.each(function(){const v=Bi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}})}}$.on(window,Ks,()=>{for(const N of vt.find('[data-bs-spy="scroll"]'))Bi.getOrCreateInstance(N)}),n(Bi);const pi=".bs.tab",eo=`hide${pi}`,io=`hidden${pi}`,no=`show${pi}`,ro=`shown${pi}`,so=`click${pi}`,oo=`keydown${pi}`,ao=`load${pi}`,ho="ArrowLeft",wr="ArrowRight",lo="ArrowUp",xr="ArrowDown",wn="Home",Er="End",mi="active",Sr="fade",xn="show",kr=".dropdown-toggle",En=`:not(${kr})`,Tr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Sn=`.nav-link${En}, .list-group-item${En}, [role="tab"]${En}, ${Tr}`,co=`.${mi}[data-bs-toggle="tab"], .${mi}[data-bs-toggle="pill"], .${mi}[data-bs-toggle="list"]`;class gi extends At{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,oo,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const v=this._getActiveElem(),F=v?$.trigger(v,eo,{relatedTarget:t}):null;$.trigger(t,no,{relatedTarget:v}).defaultPrevented||F&&F.defaultPrevented||(this._deactivate(v,t),this._activate(t,v))}_activate(t,v){t&&(t.classList.add(mi),this._activate(vt.getElementFromSelector(t)),this._queueCallback(()=>{t.getAttribute("role")==="tab"?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),$.trigger(t,ro,{relatedTarget:v})):t.classList.add(xn)},t,t.classList.contains(Sr)))}_deactivate(t,v){t&&(t.classList.remove(mi),t.blur(),this._deactivate(vt.getElementFromSelector(t)),this._queueCallback(()=>{t.getAttribute("role")==="tab"?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),$.trigger(t,io,{relatedTarget:v})):t.classList.remove(xn)},t,t.classList.contains(Sr)))}_keydown(t){if(![ho,wr,lo,xr,wn,Er].includes(t.key))return;t.stopPropagation(),t.preventDefault();const v=this._getChildren().filter(it=>!u(it));let F;if([wn,Er].includes(t.key))F=v[t.key===wn?0:v.length-1];else{const it=[wr,xr].includes(t.key);F=m(v,t.target,it,!0)}F&&(F.focus({preventScroll:!0}),gi.getOrCreateInstance(F).show())}_getChildren(){return vt.find(Sn,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,v){this._setAttributeIfNotExists(t,"role","tablist");for(const F of v)this._setInitialAttributesOnChild(F)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const v=this._elemIsActive(t),F=this._getOuterElement(t);t.setAttribute("aria-selected",v),F!==t&&this._setAttributeIfNotExists(F,"role","presentation"),v||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const v=vt.getElementFromSelector(t);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,v){const F=this._getOuterElement(t);if(!F.classList.contains("dropdown"))return;const it=(nt,dt)=>{const yt=vt.findOne(nt,F);yt&&yt.classList.toggle(dt,v)};it(kr,mi),it(".dropdown-menu",xn),F.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(t,v,F){t.hasAttribute(v)||t.setAttribute(v,F)}_elemIsActive(t){return t.classList.contains(mi)}_getInnerElement(t){return t.matches(Sn)?t:vt.findOne(Sn,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const v=gi.getOrCreateInstance(this);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}})}}$.on(document,so,Tr,function(N){["A","AREA"].includes(this.tagName)&&N.preventDefault(),u(this)||gi.getOrCreateInstance(this).show()}),$.on(window,ao,()=>{for(const N of vt.find(co))gi.getOrCreateInstance(N)}),n(gi);const ni=".bs.toast",uo=`mouseover${ni}`,fo=`mouseout${ni}`,po=`focusin${ni}`,mo=`focusout${ni}`,go=`hide${ni}`,vo=`hidden${ni}`,bo=`show${ni}`,yo=`shown${ni}`,Cr="hide",Ji="show",Qi="showing",_o={animation:"boolean",autohide:"boolean",delay:"number"},wo={animation:!0,autohide:!0,delay:5e3};class Fi extends At{constructor(t,v){super(t,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return wo}static get DefaultType(){return _o}static get NAME(){return"toast"}show(){$.trigger(this._element,bo).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Cr),x(this._element),this._element.classList.add(Ji,Qi),this._queueCallback(()=>{this._element.classList.remove(Qi),$.trigger(this._element,yo),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&($.trigger(this._element,go).defaultPrevented||(this._element.classList.add(Qi),this._queueCallback(()=>{this._element.classList.add(Cr),this._element.classList.remove(Qi,Ji),$.trigger(this._element,vo)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ji),super.dispose()}isShown(){return this._element.classList.contains(Ji)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,v){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const F=t.relatedTarget;this._element===F||this._element.contains(F)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,uo,t=>this._onInteraction(t,!0)),$.on(this._element,fo,t=>this._onInteraction(t,!1)),$.on(this._element,po,t=>this._onInteraction(t,!0)),$.on(this._element,mo,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const v=Fi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t](this)}})}}return Vt(Fi),n(Fi),{Alert:e,Button:j,Carousel:se,Collapse:Je,Dropdown:Me,Modal:di,Offcanvas:Ge,Popover:Ki,ScrollSpy:Bi,Tab:gi,Toast:Fi,Tooltip:fi}}),function(Y,G){typeof exports=="object"&&typeof module=="object"?module.exports=G():typeof define=="function"&&define.amd?define([],G):typeof exports=="object"?exports.stringSimilarity=G():Y.stringSimilarity=G()}(self,function(){return Y={138:P=>{function g(E,_){if((E=E.replace(/\s+/g,""))===(_=_.replace(/\s+/g,"")))return 1;if(E.length<2||_.length<2)return 0;let a=new Map;for(let s=0;s<E.length-1;s++){const u=E.substring(s,s+2),l=a.has(u)?a.get(u)+1:1;a.set(u,l)}let p=0;for(let s=0;s<_.length-1;s++){const u=_.substring(s,s+2),l=a.has(u)?a.get(u):0;l>0&&(a.set(u,l-1),p++)}return 2*p/(E.length+_.length-2)}P.exports={compareTwoStrings:g,findBestMatch:function(E,_){if(!function(s,u){return typeof s=="string"&&!!Array.isArray(u)&&!!u.length&&!u.find(function(l){return typeof l!="string"})}(E,_))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const a=[];let p=0;for(let s=0;s<_.length;s++){const u=_[s],l=g(E,u);a.push({target:u,rating:l}),l>a[p].rating&&(p=s)}return{ratings:a,bestMatch:a[p],bestMatchIndex:p}}}}},G={},function P(g){if(G[g])return G[g].exports;var E=G[g]={exports:{}};return Y[g](E,E.exports,P),E.exports}(138);var Y,G});/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Y){typeof exports=="object"&&typeof module<"u"?module.exports=Y():typeof define=="function"&&define.amd?define([],Y):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=Y()})(function(){return function Y(G,P,g){function E(p,s){if(!P[p]){if(!G[p]){var u=typeof require=="function"&&require;if(!s&&u)return u(p,!0);if(_)return _(p,!0);var l=new Error("Cannot find module '"+p+"'");throw l.code="MODULE_NOT_FOUND",l}var o=P[p]={exports:{}};G[p][0].call(o.exports,function(x){var r=G[p][1][x];return E(r||x)},o,o.exports,Y,G,P,g)}return P[p].exports}for(var _=typeof require=="function"&&require,a=0;a<g.length;a++)E(g[a]);return E}({1:[function(Y,G,P){"use strict";var g=Y("./utils"),E=Y("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";P.encode=function(a){for(var p,s,u,l,o,x,r,c=[],b=0,n=a.length,i=n,h=g.getTypeOf(a)!=="string";b<a.length;)i=n-b,u=h?(p=a[b++],s=b<n?a[b++]:0,b<n?a[b++]:0):(p=a.charCodeAt(b++),s=b<n?a.charCodeAt(b++):0,b<n?a.charCodeAt(b++):0),l=p>>2,o=(3&p)<<4|s>>4,x=1<i?(15&s)<<2|u>>6:64,r=2<i?63&u:64,c.push(_.charAt(l)+_.charAt(o)+_.charAt(x)+_.charAt(r));return c.join("")},P.decode=function(a){var p,s,u,l,o,x,r=0,c=0,b="data:";if(a.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var n,i=3*(a=a.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(a.charAt(a.length-1)===_.charAt(64)&&i--,a.charAt(a.length-2)===_.charAt(64)&&i--,i%1!=0)throw new Error("Invalid base64 input, bad content length.");for(n=E.uint8array?new Uint8Array(0|i):new Array(0|i);r<a.length;)p=_.indexOf(a.charAt(r++))<<2|(l=_.indexOf(a.charAt(r++)))>>4,s=(15&l)<<4|(o=_.indexOf(a.charAt(r++)))>>2,u=(3&o)<<6|(x=_.indexOf(a.charAt(r++))),n[c++]=p,o!==64&&(n[c++]=s),x!==64&&(n[c++]=u);return n}},{"./support":30,"./utils":32}],2:[function(Y,G,P){"use strict";var g=Y("./external"),E=Y("./stream/DataWorker"),_=Y("./stream/Crc32Probe"),a=Y("./stream/DataLengthProbe");function p(s,u,l,o,x){this.compressedSize=s,this.uncompressedSize=u,this.crc32=l,this.compression=o,this.compressedContent=x}p.prototype={getContentWorker:function(){var s=new E(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),u=this;return s.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),s},getCompressedWorker:function(){return new E(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(s,u,l){return s.pipe(new _).pipe(new a("uncompressedSize")).pipe(u.compressWorker(l)).pipe(new a("compressedSize")).withStreamInfo("compression",u)},G.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Y,G,P){"use strict";var g=Y("./stream/GenericWorker");P.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},P.DEFLATE=Y("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Y,G,P){"use strict";var g=Y("./utils"),E=function(){for(var _,a=[],p=0;p<256;p++){_=p;for(var s=0;s<8;s++)_=1&_?3988292384^_>>>1:_>>>1;a[p]=_}return a}();G.exports=function(_,a){return _!==void 0&&_.length?g.getTypeOf(_)!=="string"?function(p,s,u,l){var o=E,x=l+u;p^=-1;for(var r=l;r<x;r++)p=p>>>8^o[255&(p^s[r])];return-1^p}(0|a,_,_.length,0):function(p,s,u,l){var o=E,x=l+u;p^=-1;for(var r=l;r<x;r++)p=p>>>8^o[255&(p^s.charCodeAt(r))];return-1^p}(0|a,_,_.length,0):0}},{"./utils":32}],5:[function(Y,G,P){"use strict";P.base64=!1,P.binary=!1,P.dir=!1,P.createFolders=!0,P.date=null,P.compression=null,P.compressionOptions=null,P.comment=null,P.unixPermissions=null,P.dosPermissions=null},{}],6:[function(Y,G,P){"use strict";var g=null;g=typeof Promise<"u"?Promise:Y("lie"),G.exports={Promise:g}},{lie:37}],7:[function(Y,G,P){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",E=Y("pako"),_=Y("./utils"),a=Y("./stream/GenericWorker"),p=g?"uint8array":"array";function s(u,l){a.call(this,"FlateWorker/"+u),this._pako=null,this._pakoAction=u,this._pakoOptions=l,this.meta={}}P.magic="\b\0",_.inherits(s,a),s.prototype.processChunk=function(u){this.meta=u.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(p,u.data),!1)},s.prototype.flush=function(){a.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},s.prototype._createPako=function(){this._pako=new E[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var u=this;this._pako.onData=function(l){u.push({data:l,meta:u.meta})}},P.compressWorker=function(u){return new s("Deflate",u)},P.uncompressWorker=function(){return new s("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Y,G,P){"use strict";function g(o,x){var r,c="";for(r=0;r<x;r++)c+=String.fromCharCode(255&o),o>>>=8;return c}function E(o,x,r,c,b,n){var i,h,m=o.file,y=o.compression,S=n!==p.utf8encode,f=_.transformTo("string",n(m.name)),k=_.transformTo("string",p.utf8encode(m.name)),M=m.comment,X=_.transformTo("string",n(M)),B=_.transformTo("string",p.utf8encode(M)),Z=k.length!==m.name.length,w=B.length!==M.length,Q="",ct="",at="",St=m.dir,ut=m.date,xt={crc32:0,compressedSize:0,uncompressedSize:0};x&&!r||(xt.crc32=o.crc32,xt.compressedSize=o.compressedSize,xt.uncompressedSize=o.uncompressedSize);var $=0;x&&($|=8),S||!Z&&!w||($|=2048);var rt=0,wt=0;St&&(rt|=16),b==="UNIX"?(wt=798,rt|=function(gt,Pt){var At=gt;return gt||(At=Pt?16893:33204),(65535&At)<<16}(m.unixPermissions,St)):(wt=20,rt|=function(gt){return 63&(gt||0)}(m.dosPermissions)),i=ut.getUTCHours(),i<<=6,i|=ut.getUTCMinutes(),i<<=5,i|=ut.getUTCSeconds()/2,h=ut.getUTCFullYear()-1980,h<<=4,h|=ut.getUTCMonth()+1,h<<=5,h|=ut.getUTCDate(),Z&&(ct=g(1,1)+g(s(f),4)+k,Q+="up"+g(ct.length,2)+ct),w&&(at=g(1,1)+g(s(X),4)+B,Q+="uc"+g(at.length,2)+at);var _t="";return _t+=`
\0`,_t+=g($,2),_t+=y.magic,_t+=g(i,2),_t+=g(h,2),_t+=g(xt.crc32,4),_t+=g(xt.compressedSize,4),_t+=g(xt.uncompressedSize,4),_t+=g(f.length,2),_t+=g(Q.length,2),{fileRecord:u.LOCAL_FILE_HEADER+_t+f+Q,dirRecord:u.CENTRAL_FILE_HEADER+g(wt,2)+_t+g(X.length,2)+"\0\0\0\0"+g(rt,4)+g(c,4)+f+Q+X}}var _=Y("../utils"),a=Y("../stream/GenericWorker"),p=Y("../utf8"),s=Y("../crc32"),u=Y("../signature");function l(o,x,r,c){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=r,this.encodeFileName=c,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(l,a),l.prototype.push=function(o){var x=o.meta.percent||0,r=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,a.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:r?(x+100*(r-c-1))/r:100}}))},l.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var x=this.streamFiles&&!o.file.dir;if(x){var r=E(o,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(o){this.accumulate=!1;var x=this.streamFiles&&!o.file.dir,r=E(o,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),x)this.push({data:function(c){return u.DATA_DESCRIPTOR+g(c.crc32,4)+g(c.compressedSize,4)+g(c.uncompressedSize,4)}(o),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var o=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var r=this.bytesWritten-o,c=function(b,n,i,h,m){var y=_.transformTo("string",m(h));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(b,2)+g(b,2)+g(n,4)+g(i,4)+g(y.length,2)+y}(this.dirRecords.length,r,o,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(o){this._sources.push(o);var x=this;return o.on("data",function(r){x.processChunk(r)}),o.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),o.on("error",function(r){x.error(r)}),this},l.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(o){var x=this._sources;if(!a.prototype.error.call(this,o))return!1;for(var r=0;r<x.length;r++)try{x[r].error(o)}catch{}return!0},l.prototype.lock=function(){a.prototype.lock.call(this);for(var o=this._sources,x=0;x<o.length;x++)o[x].lock()},G.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Y,G,P){"use strict";var g=Y("../compressions"),E=Y("./ZipFileWorker");P.generateWorker=function(_,a,p){var s=new E(a.streamFiles,p,a.platform,a.encodeFileName),u=0;try{_.forEach(function(l,o){u++;var x=function(n,i){var h=n||i,m=g[h];if(!m)throw new Error(h+" is not a valid compression method !");return m}(o.options.compression,a.compression),r=o.options.compressionOptions||a.compressionOptions||{},c=o.dir,b=o.date;o._compressWorker(x,r).withStreamInfo("file",{name:l,dir:c,date:b,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(s)}),s.entriesCount=u}catch(l){s.error(l)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Y,G,P){"use strict";function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var E=new g;for(var _ in this)typeof this[_]!="function"&&(E[_]=this[_]);return E}}(g.prototype=Y("./object")).loadAsync=Y("./load"),g.support=Y("./support"),g.defaults=Y("./defaults"),g.version="3.10.1",g.loadAsync=function(E,_){return new g().loadAsync(E,_)},g.external=Y("./external"),G.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Y,G,P){"use strict";var g=Y("./utils"),E=Y("./external"),_=Y("./utf8"),a=Y("./zipEntries"),p=Y("./stream/Crc32Probe"),s=Y("./nodejsUtils");function u(l){return new E.Promise(function(o,x){var r=l.decompressed.getContentWorker().pipe(new p);r.on("error",function(c){x(c)}).on("end",function(){r.streamInfo.crc32!==l.decompressed.crc32?x(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}G.exports=function(l,o){var x=this;return o=g.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),s.isNode&&s.isStream(l)?E.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",l,!0,o.optimizedBinaryString,o.base64).then(function(r){var c=new a(o);return c.load(r),c}).then(function(r){var c=[E.Promise.resolve(r)],b=r.files;if(o.checkCRC32)for(var n=0;n<b.length;n++)c.push(u(b[n]));return E.Promise.all(c)}).then(function(r){for(var c=r.shift(),b=c.files,n=0;n<b.length;n++){var i=b[n],h=i.fileNameStr,m=g.resolve(i.fileNameStr);x.file(m,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders}),i.dir||(x.file(m).unsafeOriginalName=h)}return c.zipComment.length&&(x.comment=c.zipComment),x})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Y,G,P){"use strict";var g=Y("../utils"),E=Y("../stream/GenericWorker");function _(a,p){E.call(this,"Nodejs stream input adapter for "+a),this._upstreamEnded=!1,this._bindStream(p)}g.inherits(_,E),_.prototype._bindStream=function(a){var p=this;(this._stream=a).pause(),a.on("data",function(s){p.push({data:s,meta:{percent:0}})}).on("error",function(s){p.isPaused?this.generatedError=s:p.error(s)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},_.prototype.pause=function(){return!!E.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},G.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Y,G,P){"use strict";var g=Y("readable-stream").Readable;function E(_,a,p){g.call(this,a),this._helper=_;var s=this;_.on("data",function(u,l){s.push(u)||s._helper.pause(),p&&p(l)}).on("error",function(u){s.emit("error",u)}).on("end",function(){s.push(null)})}Y("../utils").inherits(E,g),E.prototype._read=function(){this._helper.resume()},G.exports=E},{"../utils":32,"readable-stream":16}],14:[function(Y,G,P){"use strict";G.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,E){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,E);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,E)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var E=new Buffer(g);return E.fill(0),E},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(Y,G,P){"use strict";function g(m,y,S){var f,k=_.getTypeOf(y),M=_.extend(S||{},s);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(m=b(m)),M.createFolders&&(f=c(m))&&n.call(this,f,!0);var X=k==="string"&&M.binary===!1&&M.base64===!1;S&&S.binary!==void 0||(M.binary=!X),(y instanceof u&&y.uncompressedSize===0||M.dir||!y||y.length===0)&&(M.base64=!1,M.binary=!0,y="",M.compression="STORE",k="string");var B=null;B=y instanceof u||y instanceof a?y:x.isNode&&x.isStream(y)?new r(m,y):_.prepareContent(m,y,M.binary,M.optimizedBinaryString,M.base64);var Z=new l(m,B,M);this.files[m]=Z}var E=Y("./utf8"),_=Y("./utils"),a=Y("./stream/GenericWorker"),p=Y("./stream/StreamHelper"),s=Y("./defaults"),u=Y("./compressedObject"),l=Y("./zipObject"),o=Y("./generate"),x=Y("./nodejsUtils"),r=Y("./nodejs/NodejsStreamInputAdapter"),c=function(m){m.slice(-1)==="/"&&(m=m.substring(0,m.length-1));var y=m.lastIndexOf("/");return 0<y?m.substring(0,y):""},b=function(m){return m.slice(-1)!=="/"&&(m+="/"),m},n=function(m,y){return y=y!==void 0?y:s.createFolders,m=b(m),this.files[m]||g.call(this,m,null,{dir:!0,createFolders:y}),this.files[m]};function i(m){return Object.prototype.toString.call(m)==="[object RegExp]"}var h={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(m){var y,S,f;for(y in this.files)f=this.files[y],(S=y.slice(this.root.length,y.length))&&y.slice(0,this.root.length)===this.root&&m(S,f)},filter:function(m){var y=[];return this.forEach(function(S,f){m(S,f)&&y.push(f)}),y},file:function(m,y,S){if(arguments.length!==1)return m=this.root+m,g.call(this,m,y,S),this;if(i(m)){var f=m;return this.filter(function(M,X){return!X.dir&&f.test(M)})}var k=this.files[this.root+m];return k&&!k.dir?k:null},folder:function(m){if(!m)return this;if(i(m))return this.filter(function(k,M){return M.dir&&m.test(k)});var y=this.root+m,S=n.call(this,y),f=this.clone();return f.root=S.name,f},remove:function(m){m=this.root+m;var y=this.files[m];if(y||(m.slice(-1)!=="/"&&(m+="/"),y=this.files[m]),y&&!y.dir)delete this.files[m];else for(var S=this.filter(function(k,M){return M.name.slice(0,m.length)===m}),f=0;f<S.length;f++)delete this.files[S[f].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(m){var y,S={};try{if((S=_.extend(m||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:E.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");_.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var f=S.comment||this.comment||"";y=o.generateWorker(this,S,f)}catch(k){(y=new a("error")).error(k)}return new p(y,S.type||"string",S.mimeType)},generateAsync:function(m,y){return this.generateInternalStream(m).accumulate(y)},generateNodeStream:function(m,y){return(m=m||{}).type||(m.type="nodebuffer"),this.generateInternalStream(m).toNodejsStream(y)}};G.exports=h},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Y,G,P){"use strict";G.exports=Y("stream")},{stream:void 0}],17:[function(Y,G,P){"use strict";var g=Y("./DataReader");function E(_){g.call(this,_);for(var a=0;a<this.data.length;a++)_[a]=255&_[a]}Y("../utils").inherits(E,g),E.prototype.byteAt=function(_){return this.data[this.zero+_]},E.prototype.lastIndexOfSignature=function(_){for(var a=_.charCodeAt(0),p=_.charCodeAt(1),s=_.charCodeAt(2),u=_.charCodeAt(3),l=this.length-4;0<=l;--l)if(this.data[l]===a&&this.data[l+1]===p&&this.data[l+2]===s&&this.data[l+3]===u)return l-this.zero;return-1},E.prototype.readAndCheckSignature=function(_){var a=_.charCodeAt(0),p=_.charCodeAt(1),s=_.charCodeAt(2),u=_.charCodeAt(3),l=this.readData(4);return a===l[0]&&p===l[1]&&s===l[2]&&u===l[3]},E.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var a=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,a},G.exports=E},{"../utils":32,"./DataReader":18}],18:[function(Y,G,P){"use strict";var g=Y("../utils");function E(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}E.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var a,p=0;for(this.checkOffset(_),a=this.index+_-1;a>=this.index;a--)p=(p<<8)+this.byteAt(a);return this.index+=_,p},readString:function(_){return g.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},G.exports=E},{"../utils":32}],19:[function(Y,G,P){"use strict";var g=Y("./Uint8ArrayReader");function E(_){g.call(this,_)}Y("../utils").inherits(E,g),E.prototype.readData=function(_){this.checkOffset(_);var a=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,a},G.exports=E},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Y,G,P){"use strict";var g=Y("./DataReader");function E(_){g.call(this,_)}Y("../utils").inherits(E,g),E.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},E.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},E.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},E.prototype.readData=function(_){this.checkOffset(_);var a=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,a},G.exports=E},{"../utils":32,"./DataReader":18}],21:[function(Y,G,P){"use strict";var g=Y("./ArrayReader");function E(_){g.call(this,_)}Y("../utils").inherits(E,g),E.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var a=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,a},G.exports=E},{"../utils":32,"./ArrayReader":17}],22:[function(Y,G,P){"use strict";var g=Y("../utils"),E=Y("../support"),_=Y("./ArrayReader"),a=Y("./StringReader"),p=Y("./NodeBufferReader"),s=Y("./Uint8ArrayReader");G.exports=function(u){var l=g.getTypeOf(u);return g.checkSupport(l),l!=="string"||E.uint8array?l==="nodebuffer"?new p(u):E.uint8array?new s(g.transformTo("uint8array",u)):new _(g.transformTo("array",u)):new a(u)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Y,G,P){"use strict";P.LOCAL_FILE_HEADER="PK",P.CENTRAL_FILE_HEADER="PK",P.CENTRAL_DIRECTORY_END="PK",P.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",P.ZIP64_CENTRAL_DIRECTORY_END="PK",P.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Y,G,P){"use strict";var g=Y("./GenericWorker"),E=Y("../utils");function _(a){g.call(this,"ConvertWorker to "+a),this.destType=a}E.inherits(_,g),_.prototype.processChunk=function(a){this.push({data:E.transformTo(this.destType,a.data),meta:a.meta})},G.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(Y,G,P){"use strict";var g=Y("./GenericWorker"),E=Y("../crc32");function _(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Y("../utils").inherits(_,g),_.prototype.processChunk=function(a){this.streamInfo.crc32=E(a.data,this.streamInfo.crc32||0),this.push(a)},G.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Y,G,P){"use strict";var g=Y("../utils"),E=Y("./GenericWorker");function _(a){E.call(this,"DataLengthProbe for "+a),this.propName=a,this.withStreamInfo(a,0)}g.inherits(_,E),_.prototype.processChunk=function(a){if(a){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+a.data.length}E.prototype.processChunk.call(this,a)},G.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(Y,G,P){"use strict";var g=Y("../utils"),E=Y("./GenericWorker");function _(a){E.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,a.then(function(s){p.dataIsReady=!0,p.data=s,p.max=s&&s.length||0,p.type=g.getTypeOf(s),p.isPaused||p._tickAndRepeat()},function(s){p.error(s)})}g.inherits(_,E),_.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var a=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,p);break;case"uint8array":a=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":a=this.data.slice(this.index,p)}return this.index=p,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},G.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(Y,G,P){"use strict";function g(E){this.name=E||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(E){this.emit("data",E)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(E){this.emit("error",E)}return!0},error:function(E){return!this.isFinished&&(this.isPaused?this.generatedError=E:(this.isFinished=!0,this.emit("error",E),this.previous&&this.previous.error(E),this.cleanUp()),!0)},on:function(E,_){return this._listeners[E].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(E,_){if(this._listeners[E])for(var a=0;a<this._listeners[E].length;a++)this._listeners[E][a].call(this,_)},pipe:function(E){return E.registerPrevious(this)},registerPrevious:function(E){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=E.streamInfo,this.mergeStreamInfo(),this.previous=E;var _=this;return E.on("data",function(a){_.processChunk(a)}),E.on("end",function(){_.end()}),E.on("error",function(a){_.error(a)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var E=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),E=!0),this.previous&&this.previous.resume(),!E},flush:function(){},processChunk:function(E){this.push(E)},withStreamInfo:function(E,_){return this.extraStreamInfo[E]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var E in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,E)&&(this.streamInfo[E]=this.extraStreamInfo[E])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var E="Worker "+this.name;return this.previous?this.previous+" -> "+E:E}},G.exports=g},{}],29:[function(Y,G,P){"use strict";var g=Y("../utils"),E=Y("./ConvertWorker"),_=Y("./GenericWorker"),a=Y("../base64"),p=Y("../support"),s=Y("../external"),u=null;if(p.nodestream)try{u=Y("../nodejs/NodejsStreamOutputAdapter")}catch{}function l(x,r){return new s.Promise(function(c,b){var n=[],i=x._internalType,h=x._outputType,m=x._mimeType;x.on("data",function(y,S){n.push(y),r&&r(S)}).on("error",function(y){n=[],b(y)}).on("end",function(){try{var y=function(S,f,k){switch(S){case"blob":return g.newBlob(g.transformTo("arraybuffer",f),k);case"base64":return a.encode(f);default:return g.transformTo(S,f)}}(h,function(S,f){var k,M=0,X=null,B=0;for(k=0;k<f.length;k++)B+=f[k].length;switch(S){case"string":return f.join("");case"array":return Array.prototype.concat.apply([],f);case"uint8array":for(X=new Uint8Array(B),k=0;k<f.length;k++)X.set(f[k],M),M+=f[k].length;return X;case"nodebuffer":return Buffer.concat(f);default:throw new Error("concat : unsupported type '"+S+"'")}}(i,n),m);c(y)}catch(S){b(S)}n=[]}).resume()})}function o(x,r,c){var b=r;switch(r){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=r,this._mimeType=c,g.checkSupport(b),this._worker=x.pipe(new E(b)),x.lock()}catch(n){this._worker=new _("error"),this._worker.error(n)}}o.prototype={accumulate:function(x){return l(this,x)},on:function(x,r){var c=this;return x==="data"?this._worker.on(x,function(b){r.call(c,b.data,b.meta)}):this._worker.on(x,function(){g.delay(r,arguments,c)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(x){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},x)}},G.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Y,G,P){"use strict";if(P.base64=!0,P.array=!0,P.string=!0,P.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",P.nodebuffer=typeof Buffer<"u",P.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")P.blob=!1;else{var g=new ArrayBuffer(0);try{P.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);E.append(g),P.blob=E.getBlob("application/zip").size===0}catch{P.blob=!1}}}try{P.nodestream=!!Y("readable-stream").Readable}catch{P.nodestream=!1}},{"readable-stream":16}],31:[function(Y,G,P){"use strict";for(var g=Y("./utils"),E=Y("./support"),_=Y("./nodejsUtils"),a=Y("./stream/GenericWorker"),p=new Array(256),s=0;s<256;s++)p[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;p[254]=p[254]=1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function l(){a.call(this,"utf-8 encode")}P.utf8encode=function(o){return E.nodebuffer?_.newBufferFrom(o,"utf-8"):function(x){var r,c,b,n,i,h=x.length,m=0;for(n=0;n<h;n++)(64512&(c=x.charCodeAt(n)))==55296&&n+1<h&&(64512&(b=x.charCodeAt(n+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),n++),m+=c<128?1:c<2048?2:c<65536?3:4;for(r=E.uint8array?new Uint8Array(m):new Array(m),n=i=0;i<m;n++)(64512&(c=x.charCodeAt(n)))==55296&&n+1<h&&(64512&(b=x.charCodeAt(n+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),n++),c<128?r[i++]=c:(c<2048?r[i++]=192|c>>>6:(c<65536?r[i++]=224|c>>>12:(r[i++]=240|c>>>18,r[i++]=128|c>>>12&63),r[i++]=128|c>>>6&63),r[i++]=128|63&c);return r}(o)},P.utf8decode=function(o){return E.nodebuffer?g.transformTo("nodebuffer",o).toString("utf-8"):function(x){var r,c,b,n,i=x.length,h=new Array(2*i);for(r=c=0;r<i;)if((b=x[r++])<128)h[c++]=b;else if(4<(n=p[b]))h[c++]=65533,r+=n-1;else{for(b&=n===2?31:n===3?15:7;1<n&&r<i;)b=b<<6|63&x[r++],n--;1<n?h[c++]=65533:b<65536?h[c++]=b:(b-=65536,h[c++]=55296|b>>10&1023,h[c++]=56320|1023&b)}return h.length!==c&&(h.subarray?h=h.subarray(0,c):h.length=c),g.applyFromCharCode(h)}(o=g.transformTo(E.uint8array?"uint8array":"array",o))},g.inherits(u,a),u.prototype.processChunk=function(o){var x=g.transformTo(E.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(E.uint8array){var r=x;(x=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),x.set(r,this.leftOver.length)}else x=this.leftOver.concat(x);this.leftOver=null}var c=function(n,i){var h;for((i=i||n.length)>n.length&&(i=n.length),h=i-1;0<=h&&(192&n[h])==128;)h--;return h<0||h===0?i:h+p[n[h]]>i?h:i}(x),b=x;c!==x.length&&(E.uint8array?(b=x.subarray(0,c),this.leftOver=x.subarray(c,x.length)):(b=x.slice(0,c),this.leftOver=x.slice(c,x.length))),this.push({data:P.utf8decode(b),meta:o.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:P.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},P.Utf8DecodeWorker=u,g.inherits(l,a),l.prototype.processChunk=function(o){this.push({data:P.utf8encode(o.data),meta:o.meta})},P.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Y,G,P){"use strict";var g=Y("./support"),E=Y("./base64"),_=Y("./nodejsUtils"),a=Y("./external");function p(r){return r}function s(r,c){for(var b=0;b<r.length;++b)c[b]=255&r.charCodeAt(b);return c}Y("setimmediate"),P.newBlob=function(r,c){P.checkSupport("blob");try{return new Blob([r],{type:c})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(r),b.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(r,c,b){var n=[],i=0,h=r.length;if(h<=b)return String.fromCharCode.apply(null,r);for(;i<h;)c==="array"||c==="nodebuffer"?n.push(String.fromCharCode.apply(null,r.slice(i,Math.min(i+b,h)))):n.push(String.fromCharCode.apply(null,r.subarray(i,Math.min(i+b,h)))),i+=b;return n.join("")},stringifyByChar:function(r){for(var c="",b=0;b<r.length;b++)c+=String.fromCharCode(r[b]);return c},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function l(r){var c=65536,b=P.getTypeOf(r),n=!0;if(b==="uint8array"?n=u.applyCanBeUsed.uint8array:b==="nodebuffer"&&(n=u.applyCanBeUsed.nodebuffer),n)for(;1<c;)try{return u.stringifyByChunk(r,b,c)}catch{c=Math.floor(c/2)}return u.stringifyByChar(r)}function o(r,c){for(var b=0;b<r.length;b++)c[b]=r[b];return c}P.applyFromCharCode=l;var x={};x.string={string:p,array:function(r){return s(r,new Array(r.length))},arraybuffer:function(r){return x.string.uint8array(r).buffer},uint8array:function(r){return s(r,new Uint8Array(r.length))},nodebuffer:function(r){return s(r,_.allocBuffer(r.length))}},x.array={string:l,array:p,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return _.newBufferFrom(r)}},x.arraybuffer={string:function(r){return l(new Uint8Array(r))},array:function(r){return o(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:p,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return _.newBufferFrom(new Uint8Array(r))}},x.uint8array={string:l,array:function(r){return o(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:p,nodebuffer:function(r){return _.newBufferFrom(r)}},x.nodebuffer={string:l,array:function(r){return o(r,new Array(r.length))},arraybuffer:function(r){return x.nodebuffer.uint8array(r).buffer},uint8array:function(r){return o(r,new Uint8Array(r.length))},nodebuffer:p},P.transformTo=function(r,c){if(c=c||"",!r)return c;P.checkSupport(r);var b=P.getTypeOf(c);return x[b][r](c)},P.resolve=function(r){for(var c=r.split("/"),b=[],n=0;n<c.length;n++){var i=c[n];i==="."||i===""&&n!==0&&n!==c.length-1||(i===".."?b.pop():b.push(i))}return b.join("/")},P.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":g.nodebuffer&&_.isBuffer(r)?"nodebuffer":g.uint8array&&r instanceof Uint8Array?"uint8array":g.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},P.checkSupport=function(r){if(!g[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},P.MAX_VALUE_16BITS=65535,P.MAX_VALUE_32BITS=-1,P.pretty=function(r){var c,b,n="";for(b=0;b<(r||"").length;b++)n+="\\x"+((c=r.charCodeAt(b))<16?"0":"")+c.toString(16).toUpperCase();return n},P.delay=function(r,c,b){setImmediate(function(){r.apply(b||null,c||[])})},P.inherits=function(r,c){function b(){}b.prototype=c.prototype,r.prototype=new b},P.extend=function(){var r,c,b={};for(r=0;r<arguments.length;r++)for(c in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],c)&&b[c]===void 0&&(b[c]=arguments[r][c]);return b},P.prepareContent=function(r,c,b,n,i){return a.Promise.resolve(c).then(function(h){return g.blob&&(h instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(h))!==-1)&&typeof FileReader<"u"?new a.Promise(function(m,y){var S=new FileReader;S.onload=function(f){m(f.target.result)},S.onerror=function(f){y(f.target.error)},S.readAsArrayBuffer(h)}):h}).then(function(h){var m=P.getTypeOf(h);return m?(m==="arraybuffer"?h=P.transformTo("uint8array",h):m==="string"&&(i?h=E.decode(h):b&&n!==!0&&(h=function(y){return s(y,g.uint8array?new Uint8Array(y.length):new Array(y.length))}(h))),h):a.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(Y,G,P){"use strict";var g=Y("./reader/readerFor"),E=Y("./utils"),_=Y("./signature"),a=Y("./zipEntry"),p=Y("./support");function s(u){this.files=[],this.loadOptions=u}s.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var l=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+E.pretty(l)+", expected "+E.pretty(u)+")")}},isSignature:function(u,l){var o=this.reader.index;this.reader.setIndex(u);var x=this.reader.readString(4)===l;return this.reader.setIndex(o),x},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),l=p.uint8array?"uint8array":"array",o=E.transformTo(l,u);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u,l,o,x=this.zip64EndOfCentralSize-44;0<x;)u=this.reader.readInt(2),l=this.reader.readInt(4),o=this.reader.readData(l),this.zip64ExtensibleData[u]={id:u,length:l,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,l;for(u=0;u<this.files.length;u++)l=this.files[u],this.reader.setIndex(l.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),l.readLocalPart(this.reader),l.handleUTF8(),l.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(u=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(u<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(u);var l=u;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===E.MAX_VALUE_16BITS||this.diskWithCentralDirStart===E.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===E.MAX_VALUE_16BITS||this.centralDirRecords===E.MAX_VALUE_16BITS||this.centralDirSize===E.MAX_VALUE_32BITS||this.centralDirOffset===E.MAX_VALUE_32BITS){if(this.zip64=!0,(u=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var x=l-o;if(0<x)this.isSignature(l,_.CENTRAL_FILE_HEADER)||(this.reader.zero=x);else if(x<0)throw new Error("Corrupted zip: missing "+Math.abs(x)+" bytes.")},prepareReader:function(u){this.reader=g(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},G.exports=s},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(Y,G,P){"use strict";var g=Y("./reader/readerFor"),E=Y("./utils"),_=Y("./compressedObject"),a=Y("./crc32"),p=Y("./utf8"),s=Y("./compressions"),u=Y("./support");function l(o,x){this.options=o,this.loadOptions=x}l.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var x,r;if(o.skip(22),this.fileNameLength=o.readInt(2),r=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((x=function(c){for(var b in s)if(Object.prototype.hasOwnProperty.call(s,b)&&s[b].magic===c)return s[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+E.pretty(this.compressionMethod)+" unknown (inner file : "+E.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,x,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var x=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(x),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=g(this.extraFields[1].value);this.uncompressedSize===E.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===E.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===E.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===E.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var x,r,c,b=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<b;)x=o.readInt(2),r=o.readInt(2),c=o.readData(r),this.extraFields[x]={id:x,length:r,value:c};o.setIndex(b)},handleUTF8:function(){var o=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var x=this.findExtraFieldUnicodePath();if(x!==null)this.fileNameStr=x;else{var r=E.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var b=E.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var x=g(o.value);return x.readInt(1)!==1||a(this.fileName)!==x.readInt(4)?null:p.utf8decode(x.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var x=g(o.value);return x.readInt(1)!==1||a(this.fileComment)!==x.readInt(4)?null:p.utf8decode(x.readData(o.length-5))}return null}},G.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Y,G,P){"use strict";function g(x,r,c){this.name=x,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=r,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var E=Y("./stream/StreamHelper"),_=Y("./stream/DataWorker"),a=Y("./utf8"),p=Y("./compressedObject"),s=Y("./stream/GenericWorker");g.prototype={internalStream:function(x){var r=null,c="string";try{if(!x)throw new Error("No output type specified.");var b=(c=x.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),r=this._decompressWorker();var n=!this._dataBinary;n&&!b&&(r=r.pipe(new a.Utf8EncodeWorker)),!n&&b&&(r=r.pipe(new a.Utf8DecodeWorker))}catch(i){(r=new s("error")).error(i)}return new E(r,c,"")},async:function(x,r){return this.internalStream(x).accumulate(r)},nodeStream:function(x,r){return this.internalStream(x||"nodebuffer").toNodejsStream(r)},_compressWorker:function(x,r){if(this._data instanceof p&&this._data.compression.magic===x.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new a.Utf8EncodeWorker)),p.createWorkerFrom(c,x,r)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof s?this._data:new _(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<u.length;o++)g.prototype[u[o]]=l;G.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Y,G,P){(function(g){"use strict";var E,_,a=g.MutationObserver||g.WebKitMutationObserver;if(a){var p=0,s=new a(x),u=g.document.createTextNode("");s.observe(u,{characterData:!0}),E=function(){u.data=p=++p%2}}else if(g.setImmediate||g.MessageChannel===void 0)E="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var r=g.document.createElement("script");r.onreadystatechange=function(){x(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},g.document.documentElement.appendChild(r)}:function(){setTimeout(x,0)};else{var l=new g.MessageChannel;l.port1.onmessage=x,E=function(){l.port2.postMessage(0)}}var o=[];function x(){var r,c;_=!0;for(var b=o.length;b;){for(c=o,o=[],r=-1;++r<b;)c[r]();b=o.length}_=!1}G.exports=function(r){o.push(r)!==1||_||E()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(Y,G,P){"use strict";var g=Y("immediate");function E(){}var _={},a=["REJECTED"],p=["FULFILLED"],s=["PENDING"];function u(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,b!==E&&r(this,b)}function l(b,n,i){this.promise=b,typeof n=="function"&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),typeof i=="function"&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function o(b,n,i){g(function(){var h;try{h=n(i)}catch(m){return _.reject(b,m)}h===b?_.reject(b,new TypeError("Cannot resolve promise with itself")):_.resolve(b,h)})}function x(b){var n=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof n=="function")return function(){n.apply(b,arguments)}}function r(b,n){var i=!1;function h(S){i||(i=!0,_.reject(b,S))}function m(S){i||(i=!0,_.resolve(b,S))}var y=c(function(){n(m,h)});y.status==="error"&&h(y.value)}function c(b,n){var i={};try{i.value=b(n),i.status="success"}catch(h){i.status="error",i.value=h}return i}(G.exports=u).prototype.finally=function(b){if(typeof b!="function")return this;var n=this.constructor;return this.then(function(i){return n.resolve(b()).then(function(){return i})},function(i){return n.resolve(b()).then(function(){throw i})})},u.prototype.catch=function(b){return this.then(null,b)},u.prototype.then=function(b,n){if(typeof b!="function"&&this.state===p||typeof n!="function"&&this.state===a)return this;var i=new this.constructor(E);return this.state!==s?o(i,this.state===p?b:n,this.outcome):this.queue.push(new l(i,b,n)),i},l.prototype.callFulfilled=function(b){_.resolve(this.promise,b)},l.prototype.otherCallFulfilled=function(b){o(this.promise,this.onFulfilled,b)},l.prototype.callRejected=function(b){_.reject(this.promise,b)},l.prototype.otherCallRejected=function(b){o(this.promise,this.onRejected,b)},_.resolve=function(b,n){var i=c(x,n);if(i.status==="error")return _.reject(b,i.value);var h=i.value;if(h)r(b,h);else{b.state=p,b.outcome=n;for(var m=-1,y=b.queue.length;++m<y;)b.queue[m].callFulfilled(n)}return b},_.reject=function(b,n){b.state=a,b.outcome=n;for(var i=-1,h=b.queue.length;++i<h;)b.queue[i].callRejected(n);return b},u.resolve=function(b){return b instanceof this?b:_.resolve(new this(E),b)},u.reject=function(b){var n=new this(E);return _.reject(n,b)},u.all=function(b){var n=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var i=b.length,h=!1;if(!i)return this.resolve([]);for(var m=new Array(i),y=0,S=-1,f=new this(E);++S<i;)k(b[S],S);return f;function k(M,X){n.resolve(M).then(function(B){m[X]=B,++y!==i||h||(h=!0,_.resolve(f,m))},function(B){h||(h=!0,_.reject(f,B))})}},u.race=function(b){var n=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var i=b.length,h=!1;if(!i)return this.resolve([]);for(var m=-1,y=new this(E);++m<i;)S=b[m],n.resolve(S).then(function(f){h||(h=!0,_.resolve(y,f))},function(f){h||(h=!0,_.reject(y,f))});var S;return y}},{immediate:36}],38:[function(Y,G,P){"use strict";var g={};(0,Y("./lib/utils/common").assign)(g,Y("./lib/deflate"),Y("./lib/inflate"),Y("./lib/zlib/constants")),G.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Y,G,P){"use strict";var g=Y("./zlib/deflate"),E=Y("./utils/common"),_=Y("./utils/strings"),a=Y("./zlib/messages"),p=Y("./zlib/zstream"),s=Object.prototype.toString,u=0,l=-1,o=0,x=8;function r(b){if(!(this instanceof r))return new r(b);this.options=E.assign({level:l,method:x,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},b||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var i=g.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==u)throw new Error(a[i]);if(n.header&&g.deflateSetHeader(this.strm,n.header),n.dictionary){var h;if(h=typeof n.dictionary=="string"?_.string2buf(n.dictionary):s.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,(i=g.deflateSetDictionary(this.strm,h))!==u)throw new Error(a[i]);this._dict_set=!0}}function c(b,n){var i=new r(n);if(i.push(b,!0),i.err)throw i.msg||a[i.err];return i.result}r.prototype.push=function(b,n){var i,h,m=this.strm,y=this.options.chunkSize;if(this.ended)return!1;h=n===~~n?n:n===!0?4:0,typeof b=="string"?m.input=_.string2buf(b):s.call(b)==="[object ArrayBuffer]"?m.input=new Uint8Array(b):m.input=b,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new E.Buf8(y),m.next_out=0,m.avail_out=y),(i=g.deflate(m,h))!==1&&i!==u)return this.onEnd(i),!(this.ended=!0);m.avail_out!==0&&(m.avail_in!==0||h!==4&&h!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(E.shrinkBuf(m.output,m.next_out))):this.onData(E.shrinkBuf(m.output,m.next_out)))}while((0<m.avail_in||m.avail_out===0)&&i!==1);return h===4?(i=g.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===u):h!==2||(this.onEnd(u),!(m.avail_out=0))},r.prototype.onData=function(b){this.chunks.push(b)},r.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},P.Deflate=r,P.deflate=c,P.deflateRaw=function(b,n){return(n=n||{}).raw=!0,c(b,n)},P.gzip=function(b,n){return(n=n||{}).gzip=!0,c(b,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Y,G,P){"use strict";var g=Y("./zlib/inflate"),E=Y("./utils/common"),_=Y("./utils/strings"),a=Y("./zlib/constants"),p=Y("./zlib/messages"),s=Y("./zlib/zstream"),u=Y("./zlib/gzheader"),l=Object.prototype.toString;function o(r){if(!(this instanceof o))return new o(r);this.options=E.assign({chunkSize:16384,windowBits:0,to:""},r||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||r&&r.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&(15&c.windowBits)==0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var b=g.inflateInit2(this.strm,c.windowBits);if(b!==a.Z_OK)throw new Error(p[b]);this.header=new u,g.inflateGetHeader(this.strm,this.header)}function x(r,c){var b=new o(c);if(b.push(r,!0),b.err)throw b.msg||p[b.err];return b.result}o.prototype.push=function(r,c){var b,n,i,h,m,y,S=this.strm,f=this.options.chunkSize,k=this.options.dictionary,M=!1;if(this.ended)return!1;n=c===~~c?c:c===!0?a.Z_FINISH:a.Z_NO_FLUSH,typeof r=="string"?S.input=_.binstring2buf(r):l.call(r)==="[object ArrayBuffer]"?S.input=new Uint8Array(r):S.input=r,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new E.Buf8(f),S.next_out=0,S.avail_out=f),(b=g.inflate(S,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&k&&(y=typeof k=="string"?_.string2buf(k):l.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,b=g.inflateSetDictionary(this.strm,y)),b===a.Z_BUF_ERROR&&M===!0&&(b=a.Z_OK,M=!1),b!==a.Z_STREAM_END&&b!==a.Z_OK)return this.onEnd(b),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&b!==a.Z_STREAM_END&&(S.avail_in!==0||n!==a.Z_FINISH&&n!==a.Z_SYNC_FLUSH)||(this.options.to==="string"?(i=_.utf8border(S.output,S.next_out),h=S.next_out-i,m=_.buf2string(S.output,i),S.next_out=h,S.avail_out=f-h,h&&E.arraySet(S.output,S.output,i,h,0),this.onData(m)):this.onData(E.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(M=!0)}while((0<S.avail_in||S.avail_out===0)&&b!==a.Z_STREAM_END);return b===a.Z_STREAM_END&&(n=a.Z_FINISH),n===a.Z_FINISH?(b=g.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===a.Z_OK):n!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(S.avail_out=0))},o.prototype.onData=function(r){this.chunks.push(r)},o.prototype.onEnd=function(r){r===a.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},P.Inflate=o,P.inflate=x,P.inflateRaw=function(r,c){return(c=c||{}).raw=!0,x(r,c)},P.ungzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Y,G,P){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";P.assign=function(a){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var s=p.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)s.hasOwnProperty(u)&&(a[u]=s[u])}}return a},P.shrinkBuf=function(a,p){return a.length===p?a:a.subarray?a.subarray(0,p):(a.length=p,a)};var E={arraySet:function(a,p,s,u,l){if(p.subarray&&a.subarray)a.set(p.subarray(s,s+u),l);else for(var o=0;o<u;o++)a[l+o]=p[s+o]},flattenChunks:function(a){var p,s,u,l,o,x;for(p=u=0,s=a.length;p<s;p++)u+=a[p].length;for(x=new Uint8Array(u),p=l=0,s=a.length;p<s;p++)o=a[p],x.set(o,l),l+=o.length;return x}},_={arraySet:function(a,p,s,u,l){for(var o=0;o<u;o++)a[l+o]=p[s+o]},flattenChunks:function(a){return[].concat.apply([],a)}};P.setTyped=function(a){a?(P.Buf8=Uint8Array,P.Buf16=Uint16Array,P.Buf32=Int32Array,P.assign(P,E)):(P.Buf8=Array,P.Buf16=Array,P.Buf32=Array,P.assign(P,_))},P.setTyped(g)},{}],42:[function(Y,G,P){"use strict";var g=Y("./common"),E=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{E=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var a=new g.Buf8(256),p=0;p<256;p++)a[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function s(u,l){if(l<65537&&(u.subarray&&_||!u.subarray&&E))return String.fromCharCode.apply(null,g.shrinkBuf(u,l));for(var o="",x=0;x<l;x++)o+=String.fromCharCode(u[x]);return o}a[254]=a[254]=1,P.string2buf=function(u){var l,o,x,r,c,b=u.length,n=0;for(r=0;r<b;r++)(64512&(o=u.charCodeAt(r)))==55296&&r+1<b&&(64512&(x=u.charCodeAt(r+1)))==56320&&(o=65536+(o-55296<<10)+(x-56320),r++),n+=o<128?1:o<2048?2:o<65536?3:4;for(l=new g.Buf8(n),r=c=0;c<n;r++)(64512&(o=u.charCodeAt(r)))==55296&&r+1<b&&(64512&(x=u.charCodeAt(r+1)))==56320&&(o=65536+(o-55296<<10)+(x-56320),r++),o<128?l[c++]=o:(o<2048?l[c++]=192|o>>>6:(o<65536?l[c++]=224|o>>>12:(l[c++]=240|o>>>18,l[c++]=128|o>>>12&63),l[c++]=128|o>>>6&63),l[c++]=128|63&o);return l},P.buf2binstring=function(u){return s(u,u.length)},P.binstring2buf=function(u){for(var l=new g.Buf8(u.length),o=0,x=l.length;o<x;o++)l[o]=u.charCodeAt(o);return l},P.buf2string=function(u,l){var o,x,r,c,b=l||u.length,n=new Array(2*b);for(o=x=0;o<b;)if((r=u[o++])<128)n[x++]=r;else if(4<(c=a[r]))n[x++]=65533,o+=c-1;else{for(r&=c===2?31:c===3?15:7;1<c&&o<b;)r=r<<6|63&u[o++],c--;1<c?n[x++]=65533:r<65536?n[x++]=r:(r-=65536,n[x++]=55296|r>>10&1023,n[x++]=56320|1023&r)}return s(n,x)},P.utf8border=function(u,l){var o;for((l=l||u.length)>u.length&&(l=u.length),o=l-1;0<=o&&(192&u[o])==128;)o--;return o<0||o===0?l:o+a[u[o]]>l?o:l}},{"./common":41}],43:[function(Y,G,P){"use strict";G.exports=function(g,E,_,a){for(var p=65535&g|0,s=g>>>16&65535|0,u=0;_!==0;){for(_-=u=2e3<_?2e3:_;s=s+(p=p+E[a++]|0)|0,--u;);p%=65521,s%=65521}return p|s<<16|0}},{}],44:[function(Y,G,P){"use strict";G.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Y,G,P){"use strict";var g=function(){for(var E,_=[],a=0;a<256;a++){E=a;for(var p=0;p<8;p++)E=1&E?3988292384^E>>>1:E>>>1;_[a]=E}return _}();G.exports=function(E,_,a,p){var s=g,u=p+a;E^=-1;for(var l=p;l<u;l++)E=E>>>8^s[255&(E^_[l])];return-1^E}},{}],46:[function(Y,G,P){"use strict";var g,E=Y("../utils/common"),_=Y("./trees"),a=Y("./adler32"),p=Y("./crc32"),s=Y("./messages"),u=0,l=4,o=0,x=-2,r=-1,c=4,b=2,n=8,i=9,h=286,m=30,y=19,S=2*h+1,f=15,k=3,M=258,X=M+k+1,B=42,Z=113,w=1,Q=2,ct=3,at=4;function St(e,A){return e.msg=s[A],A}function ut(e){return(e<<1)-(4<e?9:0)}function xt(e){for(var A=e.length;0<=--A;)e[A]=0}function $(e){var A=e.state,j=A.pending;j>e.avail_out&&(j=e.avail_out),j!==0&&(E.arraySet(e.output,A.pending_buf,A.pending_out,j,e.next_out),e.next_out+=j,A.pending_out+=j,e.total_out+=j,e.avail_out-=j,A.pending-=j,A.pending===0&&(A.pending_out=0))}function rt(e,A){_._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,A),e.block_start=e.strstart,$(e.strm)}function wt(e,A){e.pending_buf[e.pending++]=A}function _t(e,A){e.pending_buf[e.pending++]=A>>>8&255,e.pending_buf[e.pending++]=255&A}function gt(e,A){var j,I,R=e.max_chain_length,H=e.strstart,tt=e.prev_length,ot=e.nice_match,et=e.strstart>e.w_size-X?e.strstart-(e.w_size-X):0,pt=e.window,Et=e.w_mask,mt=e.prev,L=e.strstart+M,U=pt[H+tt-1],q=pt[H+tt];e.prev_length>=e.good_match&&(R>>=2),ot>e.lookahead&&(ot=e.lookahead);do if(pt[(j=A)+tt]===q&&pt[j+tt-1]===U&&pt[j]===pt[H]&&pt[++j]===pt[H+1]){H+=2,j++;do;while(pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&pt[++H]===pt[++j]&&H<L);if(I=M-(L-H),H=L-M,tt<I){if(e.match_start=A,ot<=(tt=I))break;U=pt[H+tt-1],q=pt[H+tt]}}while((A=mt[A&Et])>et&&--R!=0);return tt<=e.lookahead?tt:e.lookahead}function Pt(e){var A,j,I,R,H,tt,ot,et,pt,Et,mt=e.w_size;do{if(R=e.window_size-e.lookahead-e.strstart,e.strstart>=mt+(mt-X)){for(E.arraySet(e.window,e.window,mt,mt,0),e.match_start-=mt,e.strstart-=mt,e.block_start-=mt,A=j=e.hash_size;I=e.head[--A],e.head[A]=mt<=I?I-mt:0,--j;);for(A=j=mt;I=e.prev[--A],e.prev[A]=mt<=I?I-mt:0,--j;);R+=mt}if(e.strm.avail_in===0)break;if(tt=e.strm,ot=e.window,et=e.strstart+e.lookahead,pt=R,Et=void 0,Et=tt.avail_in,pt<Et&&(Et=pt),j=Et===0?0:(tt.avail_in-=Et,E.arraySet(ot,tt.input,tt.next_in,Et,et),tt.state.wrap===1?tt.adler=a(tt.adler,ot,Et,et):tt.state.wrap===2&&(tt.adler=p(tt.adler,ot,Et,et)),tt.next_in+=Et,tt.total_in+=Et,Et),e.lookahead+=j,e.lookahead+e.insert>=k)for(H=e.strstart-e.insert,e.ins_h=e.window[H],e.ins_h=(e.ins_h<<e.hash_shift^e.window[H+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[H+k-1])&e.hash_mask,e.prev[H&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=H,H++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<X&&e.strm.avail_in!==0)}function At(e,A){for(var j,I;;){if(e.lookahead<X){if(Pt(e),e.lookahead<X&&A===u)return w;if(e.lookahead===0)break}if(j=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,j=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),j!==0&&e.strstart-j<=e.w_size-X&&(e.match_length=gt(e,j)),e.match_length>=k)if(I=_._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,j=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else I=_._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(I&&(rt(e,!1),e.strm.avail_out===0))return w}return e.insert=e.strstart<k-1?e.strstart:k-1,A===l?(rt(e,!0),e.strm.avail_out===0?ct:at):e.last_lit&&(rt(e,!1),e.strm.avail_out===0)?w:Q}function Ot(e,A){for(var j,I,R;;){if(e.lookahead<X){if(Pt(e),e.lookahead<X&&A===u)return w;if(e.lookahead===0)break}if(j=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,j=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,j!==0&&e.prev_length<e.max_lazy_match&&e.strstart-j<=e.w_size-X&&(e.match_length=gt(e,j),e.match_length<=5&&(e.strategy===1||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(R=e.strstart+e.lookahead-k,I=_._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=R&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,j=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=k-1,e.strstart++,I&&(rt(e,!1),e.strm.avail_out===0))return w}else if(e.match_available){if((I=_._tr_tally(e,0,e.window[e.strstart-1]))&&rt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return w}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(I=_._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,A===l?(rt(e,!0),e.strm.avail_out===0?ct:at):e.last_lit&&(rt(e,!1),e.strm.avail_out===0)?w:Q}function vt(e,A,j,I,R){this.good_length=e,this.max_lazy=A,this.nice_length=j,this.max_chain=I,this.func=R}function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=n,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*S),this.dyn_dtree=new E.Buf16(2*(2*m+1)),this.bl_tree=new E.Buf16(2*(2*y+1)),xt(this.dyn_ltree),xt(this.dyn_dtree),xt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(f+1),this.heap=new E.Buf16(2*h+1),xt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*h+1),xt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Mt(e){var A;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=b,(A=e.state).pending=0,A.pending_out=0,A.wrap<0&&(A.wrap=-A.wrap),A.status=A.wrap?B:Z,e.adler=A.wrap===2?0:1,A.last_flush=u,_._tr_init(A),o):St(e,x)}function C(e){var A=Mt(e);return A===o&&function(j){j.window_size=2*j.w_size,xt(j.head),j.max_lazy_match=g[j.level].max_lazy,j.good_match=g[j.level].good_length,j.nice_match=g[j.level].nice_length,j.max_chain_length=g[j.level].max_chain,j.strstart=0,j.block_start=0,j.lookahead=0,j.insert=0,j.match_length=j.prev_length=k-1,j.match_available=0,j.ins_h=0}(e.state),A}function d(e,A,j,I,R,H){if(!e)return x;var tt=1;if(A===r&&(A=6),I<0?(tt=0,I=-I):15<I&&(tt=2,I-=16),R<1||i<R||j!==n||I<8||15<I||A<0||9<A||H<0||c<H)return St(e,x);I===8&&(I=9);var ot=new Vt;return(e.state=ot).strm=e,ot.wrap=tt,ot.gzhead=null,ot.w_bits=I,ot.w_size=1<<ot.w_bits,ot.w_mask=ot.w_size-1,ot.hash_bits=R+7,ot.hash_size=1<<ot.hash_bits,ot.hash_mask=ot.hash_size-1,ot.hash_shift=~~((ot.hash_bits+k-1)/k),ot.window=new E.Buf8(2*ot.w_size),ot.head=new E.Buf16(ot.hash_size),ot.prev=new E.Buf16(ot.w_size),ot.lit_bufsize=1<<R+6,ot.pending_buf_size=4*ot.lit_bufsize,ot.pending_buf=new E.Buf8(ot.pending_buf_size),ot.d_buf=1*ot.lit_bufsize,ot.l_buf=3*ot.lit_bufsize,ot.level=A,ot.strategy=H,ot.method=j,C(e)}g=[new vt(0,0,0,0,function(e,A){var j=65535;for(j>e.pending_buf_size-5&&(j=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Pt(e),e.lookahead===0&&A===u)return w;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var I=e.block_start+j;if((e.strstart===0||e.strstart>=I)&&(e.lookahead=e.strstart-I,e.strstart=I,rt(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-X&&(rt(e,!1),e.strm.avail_out===0))return w}return e.insert=0,A===l?(rt(e,!0),e.strm.avail_out===0?ct:at):(e.strstart>e.block_start&&(rt(e,!1),e.strm.avail_out),w)}),new vt(4,4,8,4,At),new vt(4,5,16,8,At),new vt(4,6,32,32,At),new vt(4,4,16,16,Ot),new vt(8,16,32,32,Ot),new vt(8,16,128,128,Ot),new vt(8,32,128,256,Ot),new vt(32,128,258,1024,Ot),new vt(32,258,258,4096,Ot)],P.deflateInit=function(e,A){return d(e,A,n,15,8,0)},P.deflateInit2=d,P.deflateReset=C,P.deflateResetKeep=Mt,P.deflateSetHeader=function(e,A){return e&&e.state?e.state.wrap!==2?x:(e.state.gzhead=A,o):x},P.deflate=function(e,A){var j,I,R,H;if(!e||!e.state||5<A||A<0)return e?St(e,x):x;if(I=e.state,!e.output||!e.input&&e.avail_in!==0||I.status===666&&A!==l)return St(e,e.avail_out===0?-5:x);if(I.strm=e,j=I.last_flush,I.last_flush=A,I.status===B)if(I.wrap===2)e.adler=0,wt(I,31),wt(I,139),wt(I,8),I.gzhead?(wt(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),wt(I,255&I.gzhead.time),wt(I,I.gzhead.time>>8&255),wt(I,I.gzhead.time>>16&255),wt(I,I.gzhead.time>>24&255),wt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),wt(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(wt(I,255&I.gzhead.extra.length),wt(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(e.adler=p(e.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(wt(I,0),wt(I,0),wt(I,0),wt(I,0),wt(I,0),wt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),wt(I,3),I.status=Z);else{var tt=n+(I.w_bits-8<<4)<<8;tt|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(tt|=32),tt+=31-tt%31,I.status=Z,_t(I,tt),I.strstart!==0&&(_t(I,e.adler>>>16),_t(I,65535&e.adler)),e.adler=1}if(I.status===69)if(I.gzhead.extra){for(R=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),$(e),R=I.pending,I.pending!==I.pending_buf_size));)wt(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){R=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),$(e),R=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,wt(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),H===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){R=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),$(e),R=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,wt(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>R&&(e.adler=p(e.adler,I.pending_buf,I.pending-R,R)),H===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&$(e),I.pending+2<=I.pending_buf_size&&(wt(I,255&e.adler),wt(I,e.adler>>8&255),e.adler=0,I.status=Z)):I.status=Z),I.pending!==0){if($(e),e.avail_out===0)return I.last_flush=-1,o}else if(e.avail_in===0&&ut(A)<=ut(j)&&A!==l)return St(e,-5);if(I.status===666&&e.avail_in!==0)return St(e,-5);if(e.avail_in!==0||I.lookahead!==0||A!==u&&I.status!==666){var ot=I.strategy===2?function(et,pt){for(var Et;;){if(et.lookahead===0&&(Pt(et),et.lookahead===0)){if(pt===u)return w;break}if(et.match_length=0,Et=_._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++,Et&&(rt(et,!1),et.strm.avail_out===0))return w}return et.insert=0,pt===l?(rt(et,!0),et.strm.avail_out===0?ct:at):et.last_lit&&(rt(et,!1),et.strm.avail_out===0)?w:Q}(I,A):I.strategy===3?function(et,pt){for(var Et,mt,L,U,q=et.window;;){if(et.lookahead<=M){if(Pt(et),et.lookahead<=M&&pt===u)return w;if(et.lookahead===0)break}if(et.match_length=0,et.lookahead>=k&&0<et.strstart&&(mt=q[L=et.strstart-1])===q[++L]&&mt===q[++L]&&mt===q[++L]){U=et.strstart+M;do;while(mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&L<U);et.match_length=M-(U-L),et.match_length>et.lookahead&&(et.match_length=et.lookahead)}if(et.match_length>=k?(Et=_._tr_tally(et,1,et.match_length-k),et.lookahead-=et.match_length,et.strstart+=et.match_length,et.match_length=0):(Et=_._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++),Et&&(rt(et,!1),et.strm.avail_out===0))return w}return et.insert=0,pt===l?(rt(et,!0),et.strm.avail_out===0?ct:at):et.last_lit&&(rt(et,!1),et.strm.avail_out===0)?w:Q}(I,A):g[I.level].func(I,A);if(ot!==ct&&ot!==at||(I.status=666),ot===w||ot===ct)return e.avail_out===0&&(I.last_flush=-1),o;if(ot===Q&&(A===1?_._tr_align(I):A!==5&&(_._tr_stored_block(I,0,0,!1),A===3&&(xt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),$(e),e.avail_out===0))return I.last_flush=-1,o}return A!==l?o:I.wrap<=0?1:(I.wrap===2?(wt(I,255&e.adler),wt(I,e.adler>>8&255),wt(I,e.adler>>16&255),wt(I,e.adler>>24&255),wt(I,255&e.total_in),wt(I,e.total_in>>8&255),wt(I,e.total_in>>16&255),wt(I,e.total_in>>24&255)):(_t(I,e.adler>>>16),_t(I,65535&e.adler)),$(e),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?o:1)},P.deflateEnd=function(e){var A;return e&&e.state?(A=e.state.status)!==B&&A!==69&&A!==73&&A!==91&&A!==103&&A!==Z&&A!==666?St(e,x):(e.state=null,A===Z?St(e,-3):o):x},P.deflateSetDictionary=function(e,A){var j,I,R,H,tt,ot,et,pt,Et=A.length;if(!e||!e.state||(H=(j=e.state).wrap)===2||H===1&&j.status!==B||j.lookahead)return x;for(H===1&&(e.adler=a(e.adler,A,Et,0)),j.wrap=0,Et>=j.w_size&&(H===0&&(xt(j.head),j.strstart=0,j.block_start=0,j.insert=0),pt=new E.Buf8(j.w_size),E.arraySet(pt,A,Et-j.w_size,j.w_size,0),A=pt,Et=j.w_size),tt=e.avail_in,ot=e.next_in,et=e.input,e.avail_in=Et,e.next_in=0,e.input=A,Pt(j);j.lookahead>=k;){for(I=j.strstart,R=j.lookahead-(k-1);j.ins_h=(j.ins_h<<j.hash_shift^j.window[I+k-1])&j.hash_mask,j.prev[I&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=I,I++,--R;);j.strstart=I,j.lookahead=k-1,Pt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=k-1,j.match_available=0,e.next_in=ot,e.input=et,e.avail_in=tt,j.wrap=H,o},P.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Y,G,P){"use strict";G.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Y,G,P){"use strict";G.exports=function(g,E){var _,a,p,s,u,l,o,x,r,c,b,n,i,h,m,y,S,f,k,M,X,B,Z,w,Q;_=g.state,a=g.next_in,w=g.input,p=a+(g.avail_in-5),s=g.next_out,Q=g.output,u=s-(E-g.avail_out),l=s+(g.avail_out-257),o=_.dmax,x=_.wsize,r=_.whave,c=_.wnext,b=_.window,n=_.hold,i=_.bits,h=_.lencode,m=_.distcode,y=(1<<_.lenbits)-1,S=(1<<_.distbits)-1;t:do{i<15&&(n+=w[a++]<<i,i+=8,n+=w[a++]<<i,i+=8),f=h[n&y];e:for(;;){if(n>>>=k=f>>>24,i-=k,(k=f>>>16&255)===0)Q[s++]=65535&f;else{if(!(16&k)){if((64&k)==0){f=h[(65535&f)+(n&(1<<k)-1)];continue e}if(32&k){_.mode=12;break t}g.msg="invalid literal/length code",_.mode=30;break t}M=65535&f,(k&=15)&&(i<k&&(n+=w[a++]<<i,i+=8),M+=n&(1<<k)-1,n>>>=k,i-=k),i<15&&(n+=w[a++]<<i,i+=8,n+=w[a++]<<i,i+=8),f=m[n&S];i:for(;;){if(n>>>=k=f>>>24,i-=k,!(16&(k=f>>>16&255))){if((64&k)==0){f=m[(65535&f)+(n&(1<<k)-1)];continue i}g.msg="invalid distance code",_.mode=30;break t}if(X=65535&f,i<(k&=15)&&(n+=w[a++]<<i,(i+=8)<k&&(n+=w[a++]<<i,i+=8)),o<(X+=n&(1<<k)-1)){g.msg="invalid distance too far back",_.mode=30;break t}if(n>>>=k,i-=k,(k=s-u)<X){if(r<(k=X-k)&&_.sane){g.msg="invalid distance too far back",_.mode=30;break t}if(Z=b,(B=0)===c){if(B+=x-k,k<M){for(M-=k;Q[s++]=b[B++],--k;);B=s-X,Z=Q}}else if(c<k){if(B+=x+c-k,(k-=c)<M){for(M-=k;Q[s++]=b[B++],--k;);if(B=0,c<M){for(M-=k=c;Q[s++]=b[B++],--k;);B=s-X,Z=Q}}}else if(B+=c-k,k<M){for(M-=k;Q[s++]=b[B++],--k;);B=s-X,Z=Q}for(;2<M;)Q[s++]=Z[B++],Q[s++]=Z[B++],Q[s++]=Z[B++],M-=3;M&&(Q[s++]=Z[B++],1<M&&(Q[s++]=Z[B++]))}else{for(B=s-X;Q[s++]=Q[B++],Q[s++]=Q[B++],Q[s++]=Q[B++],2<(M-=3););M&&(Q[s++]=Q[B++],1<M&&(Q[s++]=Q[B++]))}break}}break}}while(a<p&&s<l);a-=M=i>>3,n&=(1<<(i-=M<<3))-1,g.next_in=a,g.next_out=s,g.avail_in=a<p?p-a+5:5-(a-p),g.avail_out=s<l?l-s+257:257-(s-l),_.hold=n,_.bits=i}},{}],49:[function(Y,G,P){"use strict";var g=Y("../utils/common"),E=Y("./adler32"),_=Y("./crc32"),a=Y("./inffast"),p=Y("./inftrees"),s=1,u=2,l=0,o=-2,x=1,r=852,c=592;function b(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(B){var Z;return B&&B.state?(Z=B.state,B.total_in=B.total_out=Z.total=0,B.msg="",Z.wrap&&(B.adler=1&Z.wrap),Z.mode=x,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new g.Buf32(r),Z.distcode=Z.distdyn=new g.Buf32(c),Z.sane=1,Z.back=-1,l):o}function h(B){var Z;return B&&B.state?((Z=B.state).wsize=0,Z.whave=0,Z.wnext=0,i(B)):o}function m(B,Z){var w,Q;return B&&B.state?(Q=B.state,Z<0?(w=0,Z=-Z):(w=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?o:(Q.window!==null&&Q.wbits!==Z&&(Q.window=null),Q.wrap=w,Q.wbits=Z,h(B))):o}function y(B,Z){var w,Q;return B?(Q=new n,(B.state=Q).window=null,(w=m(B,Z))!==l&&(B.state=null),w):o}var S,f,k=!0;function M(B){if(k){var Z;for(S=new g.Buf32(512),f=new g.Buf32(32),Z=0;Z<144;)B.lens[Z++]=8;for(;Z<256;)B.lens[Z++]=9;for(;Z<280;)B.lens[Z++]=7;for(;Z<288;)B.lens[Z++]=8;for(p(s,B.lens,0,288,S,0,B.work,{bits:9}),Z=0;Z<32;)B.lens[Z++]=5;p(u,B.lens,0,32,f,0,B.work,{bits:5}),k=!1}B.lencode=S,B.lenbits=9,B.distcode=f,B.distbits=5}function X(B,Z,w,Q){var ct,at=B.state;return at.window===null&&(at.wsize=1<<at.wbits,at.wnext=0,at.whave=0,at.window=new g.Buf8(at.wsize)),Q>=at.wsize?(g.arraySet(at.window,Z,w-at.wsize,at.wsize,0),at.wnext=0,at.whave=at.wsize):(Q<(ct=at.wsize-at.wnext)&&(ct=Q),g.arraySet(at.window,Z,w-Q,ct,at.wnext),(Q-=ct)?(g.arraySet(at.window,Z,w-Q,Q,0),at.wnext=Q,at.whave=at.wsize):(at.wnext+=ct,at.wnext===at.wsize&&(at.wnext=0),at.whave<at.wsize&&(at.whave+=ct))),0}P.inflateReset=h,P.inflateReset2=m,P.inflateResetKeep=i,P.inflateInit=function(B){return y(B,15)},P.inflateInit2=y,P.inflate=function(B,Z){var w,Q,ct,at,St,ut,xt,$,rt,wt,_t,gt,Pt,At,Ot,vt,Vt,Mt,C,d,e,A,j,I,R=0,H=new g.Buf8(4),tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return o;(w=B.state).mode===12&&(w.mode=13),St=B.next_out,ct=B.output,xt=B.avail_out,at=B.next_in,Q=B.input,ut=B.avail_in,$=w.hold,rt=w.bits,wt=ut,_t=xt,A=l;t:for(;;)switch(w.mode){case x:if(w.wrap===0){w.mode=13;break}for(;rt<16;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if(2&w.wrap&&$===35615){H[w.check=0]=255&$,H[1]=$>>>8&255,w.check=_(w.check,H,2,0),rt=$=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&$)<<8)+($>>8))%31){B.msg="incorrect header check",w.mode=30;break}if((15&$)!=8){B.msg="unknown compression method",w.mode=30;break}if(rt-=4,e=8+(15&($>>>=4)),w.wbits===0)w.wbits=e;else if(e>w.wbits){B.msg="invalid window size",w.mode=30;break}w.dmax=1<<e,B.adler=w.check=1,w.mode=512&$?10:12,rt=$=0;break;case 2:for(;rt<16;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if(w.flags=$,(255&w.flags)!=8){B.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){B.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=$>>8&1),512&w.flags&&(H[0]=255&$,H[1]=$>>>8&255,w.check=_(w.check,H,2,0)),rt=$=0,w.mode=3;case 3:for(;rt<32;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.head&&(w.head.time=$),512&w.flags&&(H[0]=255&$,H[1]=$>>>8&255,H[2]=$>>>16&255,H[3]=$>>>24&255,w.check=_(w.check,H,4,0)),rt=$=0,w.mode=4;case 4:for(;rt<16;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.head&&(w.head.xflags=255&$,w.head.os=$>>8),512&w.flags&&(H[0]=255&$,H[1]=$>>>8&255,w.check=_(w.check,H,2,0)),rt=$=0,w.mode=5;case 5:if(1024&w.flags){for(;rt<16;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.length=$,w.head&&(w.head.extra_len=$),512&w.flags&&(H[0]=255&$,H[1]=$>>>8&255,w.check=_(w.check,H,2,0)),rt=$=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(ut<(gt=w.length)&&(gt=ut),gt&&(w.head&&(e=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),g.arraySet(w.head.extra,Q,at,gt,e)),512&w.flags&&(w.check=_(w.check,Q,gt,at)),ut-=gt,at+=gt,w.length-=gt),w.length))break t;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(ut===0)break t;for(gt=0;e=Q[at+gt++],w.head&&e&&w.length<65536&&(w.head.name+=String.fromCharCode(e)),e&&gt<ut;);if(512&w.flags&&(w.check=_(w.check,Q,gt,at)),ut-=gt,at+=gt,e)break t}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(ut===0)break t;for(gt=0;e=Q[at+gt++],w.head&&e&&w.length<65536&&(w.head.comment+=String.fromCharCode(e)),e&&gt<ut;);if(512&w.flags&&(w.check=_(w.check,Q,gt,at)),ut-=gt,at+=gt,e)break t}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;rt<16;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if($!==(65535&w.check)){B.msg="header crc mismatch",w.mode=30;break}rt=$=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),B.adler=w.check=0,w.mode=12;break;case 10:for(;rt<32;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}B.adler=w.check=b($),rt=$=0,w.mode=11;case 11:if(w.havedict===0)return B.next_out=St,B.avail_out=xt,B.next_in=at,B.avail_in=ut,w.hold=$,w.bits=rt,2;B.adler=w.check=1,w.mode=12;case 12:if(Z===5||Z===6)break t;case 13:if(w.last){$>>>=7&rt,rt-=7&rt,w.mode=27;break}for(;rt<3;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}switch(w.last=1&$,rt-=1,3&($>>>=1)){case 0:w.mode=14;break;case 1:if(M(w),w.mode=20,Z!==6)break;$>>>=2,rt-=2;break t;case 2:w.mode=17;break;case 3:B.msg="invalid block type",w.mode=30}$>>>=2,rt-=2;break;case 14:for($>>>=7&rt,rt-=7&rt;rt<32;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if((65535&$)!=($>>>16^65535)){B.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&$,rt=$=0,w.mode=15,Z===6)break t;case 15:w.mode=16;case 16:if(gt=w.length){if(ut<gt&&(gt=ut),xt<gt&&(gt=xt),gt===0)break t;g.arraySet(ct,Q,at,gt,St),ut-=gt,at+=gt,xt-=gt,St+=gt,w.length-=gt;break}w.mode=12;break;case 17:for(;rt<14;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if(w.nlen=257+(31&$),$>>>=5,rt-=5,w.ndist=1+(31&$),$>>>=5,rt-=5,w.ncode=4+(15&$),$>>>=4,rt-=4,286<w.nlen||30<w.ndist){B.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;rt<3;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.lens[tt[w.have++]]=7&$,$>>>=3,rt-=3}for(;w.have<19;)w.lens[tt[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,j={bits:w.lenbits},A=p(0,w.lens,0,19,w.lencode,0,w.work,j),w.lenbits=j.bits,A){B.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;vt=(R=w.lencode[$&(1<<w.lenbits)-1])>>>16&255,Vt=65535&R,!((Ot=R>>>24)<=rt);){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if(Vt<16)$>>>=Ot,rt-=Ot,w.lens[w.have++]=Vt;else{if(Vt===16){for(I=Ot+2;rt<I;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if($>>>=Ot,rt-=Ot,w.have===0){B.msg="invalid bit length repeat",w.mode=30;break}e=w.lens[w.have-1],gt=3+(3&$),$>>>=2,rt-=2}else if(Vt===17){for(I=Ot+3;rt<I;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}rt-=Ot,e=0,gt=3+(7&($>>>=Ot)),$>>>=3,rt-=3}else{for(I=Ot+7;rt<I;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}rt-=Ot,e=0,gt=11+(127&($>>>=Ot)),$>>>=7,rt-=7}if(w.have+gt>w.nlen+w.ndist){B.msg="invalid bit length repeat",w.mode=30;break}for(;gt--;)w.lens[w.have++]=e}}if(w.mode===30)break;if(w.lens[256]===0){B.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,j={bits:w.lenbits},A=p(s,w.lens,0,w.nlen,w.lencode,0,w.work,j),w.lenbits=j.bits,A){B.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,j={bits:w.distbits},A=p(u,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,j),w.distbits=j.bits,A){B.msg="invalid distances set",w.mode=30;break}if(w.mode=20,Z===6)break t;case 20:w.mode=21;case 21:if(6<=ut&&258<=xt){B.next_out=St,B.avail_out=xt,B.next_in=at,B.avail_in=ut,w.hold=$,w.bits=rt,a(B,_t),St=B.next_out,ct=B.output,xt=B.avail_out,at=B.next_in,Q=B.input,ut=B.avail_in,$=w.hold,rt=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;vt=(R=w.lencode[$&(1<<w.lenbits)-1])>>>16&255,Vt=65535&R,!((Ot=R>>>24)<=rt);){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if(vt&&(240&vt)==0){for(Mt=Ot,C=vt,d=Vt;vt=(R=w.lencode[d+(($&(1<<Mt+C)-1)>>Mt)])>>>16&255,Vt=65535&R,!(Mt+(Ot=R>>>24)<=rt);){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}$>>>=Mt,rt-=Mt,w.back+=Mt}if($>>>=Ot,rt-=Ot,w.back+=Ot,w.length=Vt,vt===0){w.mode=26;break}if(32&vt){w.back=-1,w.mode=12;break}if(64&vt){B.msg="invalid literal/length code",w.mode=30;break}w.extra=15&vt,w.mode=22;case 22:if(w.extra){for(I=w.extra;rt<I;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.length+=$&(1<<w.extra)-1,$>>>=w.extra,rt-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;vt=(R=w.distcode[$&(1<<w.distbits)-1])>>>16&255,Vt=65535&R,!((Ot=R>>>24)<=rt);){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if((240&vt)==0){for(Mt=Ot,C=vt,d=Vt;vt=(R=w.distcode[d+(($&(1<<Mt+C)-1)>>Mt)])>>>16&255,Vt=65535&R,!(Mt+(Ot=R>>>24)<=rt);){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}$>>>=Mt,rt-=Mt,w.back+=Mt}if($>>>=Ot,rt-=Ot,w.back+=Ot,64&vt){B.msg="invalid distance code",w.mode=30;break}w.offset=Vt,w.extra=15&vt,w.mode=24;case 24:if(w.extra){for(I=w.extra;rt<I;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}w.offset+=$&(1<<w.extra)-1,$>>>=w.extra,rt-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){B.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(xt===0)break t;if(gt=_t-xt,w.offset>gt){if((gt=w.offset-gt)>w.whave&&w.sane){B.msg="invalid distance too far back",w.mode=30;break}Pt=gt>w.wnext?(gt-=w.wnext,w.wsize-gt):w.wnext-gt,gt>w.length&&(gt=w.length),At=w.window}else At=ct,Pt=St-w.offset,gt=w.length;for(xt<gt&&(gt=xt),xt-=gt,w.length-=gt;ct[St++]=At[Pt++],--gt;);w.length===0&&(w.mode=21);break;case 26:if(xt===0)break t;ct[St++]=w.length,xt--,w.mode=21;break;case 27:if(w.wrap){for(;rt<32;){if(ut===0)break t;ut--,$|=Q[at++]<<rt,rt+=8}if(_t-=xt,B.total_out+=_t,w.total+=_t,_t&&(B.adler=w.check=w.flags?_(w.check,ct,_t,St-_t):E(w.check,ct,_t,St-_t)),_t=xt,(w.flags?$:b($))!==w.check){B.msg="incorrect data check",w.mode=30;break}rt=$=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;rt<32;){if(ut===0)break t;ut--,$+=Q[at++]<<rt,rt+=8}if($!==(4294967295&w.total)){B.msg="incorrect length check",w.mode=30;break}rt=$=0}w.mode=29;case 29:A=1;break t;case 30:A=-3;break t;case 31:return-4;case 32:default:return o}return B.next_out=St,B.avail_out=xt,B.next_in=at,B.avail_in=ut,w.hold=$,w.bits=rt,(w.wsize||_t!==B.avail_out&&w.mode<30&&(w.mode<27||Z!==4))&&X(B,B.output,B.next_out,_t-B.avail_out)?(w.mode=31,-4):(wt-=B.avail_in,_t-=B.avail_out,B.total_in+=wt,B.total_out+=_t,w.total+=_t,w.wrap&&_t&&(B.adler=w.check=w.flags?_(w.check,ct,_t,B.next_out-_t):E(w.check,ct,_t,B.next_out-_t)),B.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(wt==0&&_t===0||Z===4)&&A===l&&(A=-5),A)},P.inflateEnd=function(B){if(!B||!B.state)return o;var Z=B.state;return Z.window&&(Z.window=null),B.state=null,l},P.inflateGetHeader=function(B,Z){var w;return B&&B.state?(2&(w=B.state).wrap)==0?o:((w.head=Z).done=!1,l):o},P.inflateSetDictionary=function(B,Z){var w,Q=Z.length;return B&&B.state?(w=B.state).wrap!==0&&w.mode!==11?o:w.mode===11&&E(1,Z,Q,0)!==w.check?-3:X(B,Z,Q,Q)?(w.mode=31,-4):(w.havedict=1,l):o},P.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Y,G,P){"use strict";var g=Y("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];G.exports=function(s,u,l,o,x,r,c,b){var n,i,h,m,y,S,f,k,M,X=b.bits,B=0,Z=0,w=0,Q=0,ct=0,at=0,St=0,ut=0,xt=0,$=0,rt=null,wt=0,_t=new g.Buf16(16),gt=new g.Buf16(16),Pt=null,At=0;for(B=0;B<=15;B++)_t[B]=0;for(Z=0;Z<o;Z++)_t[u[l+Z]]++;for(ct=X,Q=15;1<=Q&&_t[Q]===0;Q--);if(Q<ct&&(ct=Q),Q===0)return x[r++]=20971520,x[r++]=20971520,b.bits=1,0;for(w=1;w<Q&&_t[w]===0;w++);for(ct<w&&(ct=w),B=ut=1;B<=15;B++)if(ut<<=1,(ut-=_t[B])<0)return-1;if(0<ut&&(s===0||Q!==1))return-1;for(gt[1]=0,B=1;B<15;B++)gt[B+1]=gt[B]+_t[B];for(Z=0;Z<o;Z++)u[l+Z]!==0&&(c[gt[u[l+Z]]++]=Z);if(S=s===0?(rt=Pt=c,19):s===1?(rt=E,wt-=257,Pt=_,At-=257,256):(rt=a,Pt=p,-1),B=w,y=r,St=Z=$=0,h=-1,m=(xt=1<<(at=ct))-1,s===1&&852<xt||s===2&&592<xt)return 1;for(;;){for(f=B-St,M=c[Z]<S?(k=0,c[Z]):c[Z]>S?(k=Pt[At+c[Z]],rt[wt+c[Z]]):(k=96,0),n=1<<B-St,w=i=1<<at;x[y+($>>St)+(i-=n)]=f<<24|k<<16|M|0,i!==0;);for(n=1<<B-1;$&n;)n>>=1;if(n!==0?($&=n-1,$+=n):$=0,Z++,--_t[B]==0){if(B===Q)break;B=u[l+c[Z]]}if(ct<B&&($&m)!==h){for(St===0&&(St=ct),y+=w,ut=1<<(at=B-St);at+St<Q&&!((ut-=_t[at+St])<=0);)at++,ut<<=1;if(xt+=1<<at,s===1&&852<xt||s===2&&592<xt)return 1;x[h=$&m]=ct<<24|at<<16|y-r|0}}return $!==0&&(x[y+$]=B-St<<24|64<<16|0),b.bits=ct,0}},{"../utils/common":41}],51:[function(Y,G,P){"use strict";G.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Y,G,P){"use strict";var g=Y("../utils/common"),E=0,_=1;function a(R){for(var H=R.length;0<=--H;)R[H]=0}var p=0,s=29,u=256,l=u+1+s,o=30,x=19,r=2*l+1,c=15,b=16,n=7,i=256,h=16,m=17,y=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],f=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(l+2));a(X);var B=new Array(2*o);a(B);var Z=new Array(512);a(Z);var w=new Array(256);a(w);var Q=new Array(s);a(Q);var ct,at,St,ut=new Array(o);function xt(R,H,tt,ot,et){this.static_tree=R,this.extra_bits=H,this.extra_base=tt,this.elems=ot,this.max_length=et,this.has_stree=R&&R.length}function $(R,H){this.dyn_tree=R,this.max_code=0,this.stat_desc=H}function rt(R){return R<256?Z[R]:Z[256+(R>>>7)]}function wt(R,H){R.pending_buf[R.pending++]=255&H,R.pending_buf[R.pending++]=H>>>8&255}function _t(R,H,tt){R.bi_valid>b-tt?(R.bi_buf|=H<<R.bi_valid&65535,wt(R,R.bi_buf),R.bi_buf=H>>b-R.bi_valid,R.bi_valid+=tt-b):(R.bi_buf|=H<<R.bi_valid&65535,R.bi_valid+=tt)}function gt(R,H,tt){_t(R,tt[2*H],tt[2*H+1])}function Pt(R,H){for(var tt=0;tt|=1&R,R>>>=1,tt<<=1,0<--H;);return tt>>>1}function At(R,H,tt){var ot,et,pt=new Array(c+1),Et=0;for(ot=1;ot<=c;ot++)pt[ot]=Et=Et+tt[ot-1]<<1;for(et=0;et<=H;et++){var mt=R[2*et+1];mt!==0&&(R[2*et]=Pt(pt[mt]++,mt))}}function Ot(R){var H;for(H=0;H<l;H++)R.dyn_ltree[2*H]=0;for(H=0;H<o;H++)R.dyn_dtree[2*H]=0;for(H=0;H<x;H++)R.bl_tree[2*H]=0;R.dyn_ltree[2*i]=1,R.opt_len=R.static_len=0,R.last_lit=R.matches=0}function vt(R){8<R.bi_valid?wt(R,R.bi_buf):0<R.bi_valid&&(R.pending_buf[R.pending++]=R.bi_buf),R.bi_buf=0,R.bi_valid=0}function Vt(R,H,tt,ot){var et=2*H,pt=2*tt;return R[et]<R[pt]||R[et]===R[pt]&&ot[H]<=ot[tt]}function Mt(R,H,tt){for(var ot=R.heap[tt],et=tt<<1;et<=R.heap_len&&(et<R.heap_len&&Vt(H,R.heap[et+1],R.heap[et],R.depth)&&et++,!Vt(H,ot,R.heap[et],R.depth));)R.heap[tt]=R.heap[et],tt=et,et<<=1;R.heap[tt]=ot}function C(R,H,tt){var ot,et,pt,Et,mt=0;if(R.last_lit!==0)for(;ot=R.pending_buf[R.d_buf+2*mt]<<8|R.pending_buf[R.d_buf+2*mt+1],et=R.pending_buf[R.l_buf+mt],mt++,ot===0?gt(R,et,H):(gt(R,(pt=w[et])+u+1,H),(Et=S[pt])!==0&&_t(R,et-=Q[pt],Et),gt(R,pt=rt(--ot),tt),(Et=f[pt])!==0&&_t(R,ot-=ut[pt],Et)),mt<R.last_lit;);gt(R,i,H)}function d(R,H){var tt,ot,et,pt=H.dyn_tree,Et=H.stat_desc.static_tree,mt=H.stat_desc.has_stree,L=H.stat_desc.elems,U=-1;for(R.heap_len=0,R.heap_max=r,tt=0;tt<L;tt++)pt[2*tt]!==0?(R.heap[++R.heap_len]=U=tt,R.depth[tt]=0):pt[2*tt+1]=0;for(;R.heap_len<2;)pt[2*(et=R.heap[++R.heap_len]=U<2?++U:0)]=1,R.depth[et]=0,R.opt_len--,mt&&(R.static_len-=Et[2*et+1]);for(H.max_code=U,tt=R.heap_len>>1;1<=tt;tt--)Mt(R,pt,tt);for(et=L;tt=R.heap[1],R.heap[1]=R.heap[R.heap_len--],Mt(R,pt,1),ot=R.heap[1],R.heap[--R.heap_max]=tt,R.heap[--R.heap_max]=ot,pt[2*et]=pt[2*tt]+pt[2*ot],R.depth[et]=(R.depth[tt]>=R.depth[ot]?R.depth[tt]:R.depth[ot])+1,pt[2*tt+1]=pt[2*ot+1]=et,R.heap[1]=et++,Mt(R,pt,1),2<=R.heap_len;);R.heap[--R.heap_max]=R.heap[1],function(q,T){var O,D,V,K,st,ht,ft=T.dyn_tree,kt=T.max_code,Lt=T.stat_desc.static_tree,jt=T.stat_desc.has_stree,zt=T.stat_desc.extra_bits,Xt=T.stat_desc.extra_base,ie=T.stat_desc.max_length,re=0;for(K=0;K<=c;K++)q.bl_count[K]=0;for(ft[2*q.heap[q.heap_max]+1]=0,O=q.heap_max+1;O<r;O++)ie<(K=ft[2*ft[2*(D=q.heap[O])+1]+1]+1)&&(K=ie,re++),ft[2*D+1]=K,kt<D||(q.bl_count[K]++,st=0,Xt<=D&&(st=zt[D-Xt]),ht=ft[2*D],q.opt_len+=ht*(K+st),jt&&(q.static_len+=ht*(Lt[2*D+1]+st)));if(re!==0){do{for(K=ie-1;q.bl_count[K]===0;)K--;q.bl_count[K]--,q.bl_count[K+1]+=2,q.bl_count[ie]--,re-=2}while(0<re);for(K=ie;K!==0;K--)for(D=q.bl_count[K];D!==0;)kt<(V=q.heap[--O])||(ft[2*V+1]!==K&&(q.opt_len+=(K-ft[2*V+1])*ft[2*V],ft[2*V+1]=K),D--)}}(R,H),At(pt,U,R.bl_count)}function e(R,H,tt){var ot,et,pt=-1,Et=H[1],mt=0,L=7,U=4;for(Et===0&&(L=138,U=3),H[2*(tt+1)+1]=65535,ot=0;ot<=tt;ot++)et=Et,Et=H[2*(ot+1)+1],++mt<L&&et===Et||(mt<U?R.bl_tree[2*et]+=mt:et!==0?(et!==pt&&R.bl_tree[2*et]++,R.bl_tree[2*h]++):mt<=10?R.bl_tree[2*m]++:R.bl_tree[2*y]++,pt=et,U=(mt=0)===Et?(L=138,3):et===Et?(L=6,3):(L=7,4))}function A(R,H,tt){var ot,et,pt=-1,Et=H[1],mt=0,L=7,U=4;for(Et===0&&(L=138,U=3),ot=0;ot<=tt;ot++)if(et=Et,Et=H[2*(ot+1)+1],!(++mt<L&&et===Et)){if(mt<U)for(;gt(R,et,R.bl_tree),--mt!=0;);else et!==0?(et!==pt&&(gt(R,et,R.bl_tree),mt--),gt(R,h,R.bl_tree),_t(R,mt-3,2)):mt<=10?(gt(R,m,R.bl_tree),_t(R,mt-3,3)):(gt(R,y,R.bl_tree),_t(R,mt-11,7));pt=et,U=(mt=0)===Et?(L=138,3):et===Et?(L=6,3):(L=7,4)}}a(ut);var j=!1;function I(R,H,tt,ot){_t(R,(p<<1)+(ot?1:0),3),function(et,pt,Et,mt){vt(et),mt&&(wt(et,Et),wt(et,~Et)),g.arraySet(et.pending_buf,et.window,pt,Et,et.pending),et.pending+=Et}(R,H,tt,!0)}P._tr_init=function(R){j||(function(){var H,tt,ot,et,pt,Et=new Array(c+1);for(et=ot=0;et<s-1;et++)for(Q[et]=ot,H=0;H<1<<S[et];H++)w[ot++]=et;for(w[ot-1]=et,et=pt=0;et<16;et++)for(ut[et]=pt,H=0;H<1<<f[et];H++)Z[pt++]=et;for(pt>>=7;et<o;et++)for(ut[et]=pt<<7,H=0;H<1<<f[et]-7;H++)Z[256+pt++]=et;for(tt=0;tt<=c;tt++)Et[tt]=0;for(H=0;H<=143;)X[2*H+1]=8,H++,Et[8]++;for(;H<=255;)X[2*H+1]=9,H++,Et[9]++;for(;H<=279;)X[2*H+1]=7,H++,Et[7]++;for(;H<=287;)X[2*H+1]=8,H++,Et[8]++;for(At(X,l+1,Et),H=0;H<o;H++)B[2*H+1]=5,B[2*H]=Pt(H,5);ct=new xt(X,S,u+1,l,c),at=new xt(B,f,0,o,c),St=new xt(new Array(0),k,0,x,n)}(),j=!0),R.l_desc=new $(R.dyn_ltree,ct),R.d_desc=new $(R.dyn_dtree,at),R.bl_desc=new $(R.bl_tree,St),R.bi_buf=0,R.bi_valid=0,Ot(R)},P._tr_stored_block=I,P._tr_flush_block=function(R,H,tt,ot){var et,pt,Et=0;0<R.level?(R.strm.data_type===2&&(R.strm.data_type=function(mt){var L,U=4093624447;for(L=0;L<=31;L++,U>>>=1)if(1&U&&mt.dyn_ltree[2*L]!==0)return E;if(mt.dyn_ltree[18]!==0||mt.dyn_ltree[20]!==0||mt.dyn_ltree[26]!==0)return _;for(L=32;L<u;L++)if(mt.dyn_ltree[2*L]!==0)return _;return E}(R)),d(R,R.l_desc),d(R,R.d_desc),Et=function(mt){var L;for(e(mt,mt.dyn_ltree,mt.l_desc.max_code),e(mt,mt.dyn_dtree,mt.d_desc.max_code),d(mt,mt.bl_desc),L=x-1;3<=L&&mt.bl_tree[2*M[L]+1]===0;L--);return mt.opt_len+=3*(L+1)+5+5+4,L}(R),et=R.opt_len+3+7>>>3,(pt=R.static_len+3+7>>>3)<=et&&(et=pt)):et=pt=tt+5,tt+4<=et&&H!==-1?I(R,H,tt,ot):R.strategy===4||pt===et?(_t(R,2+(ot?1:0),3),C(R,X,B)):(_t(R,4+(ot?1:0),3),function(mt,L,U,q){var T;for(_t(mt,L-257,5),_t(mt,U-1,5),_t(mt,q-4,4),T=0;T<q;T++)_t(mt,mt.bl_tree[2*M[T]+1],3);A(mt,mt.dyn_ltree,L-1),A(mt,mt.dyn_dtree,U-1)}(R,R.l_desc.max_code+1,R.d_desc.max_code+1,Et+1),C(R,R.dyn_ltree,R.dyn_dtree)),Ot(R),ot&&vt(R)},P._tr_tally=function(R,H,tt){return R.pending_buf[R.d_buf+2*R.last_lit]=H>>>8&255,R.pending_buf[R.d_buf+2*R.last_lit+1]=255&H,R.pending_buf[R.l_buf+R.last_lit]=255&tt,R.last_lit++,H===0?R.dyn_ltree[2*tt]++:(R.matches++,H--,R.dyn_ltree[2*(w[tt]+u+1)]++,R.dyn_dtree[2*rt(H)]++),R.last_lit===R.lit_bufsize-1},P._tr_align=function(R){_t(R,2,3),gt(R,i,X),function(H){H.bi_valid===16?(wt(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(R)}},{"../utils/common":41}],53:[function(Y,G,P){"use strict";G.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Y,G,P){(function(g){(function(E,_){"use strict";if(!E.setImmediate){var a,p,s,u,l=1,o={},x=!1,r=E.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(E);c=c&&c.setTimeout?c:E,a={}.toString.call(E.process)==="[object process]"?function(h){process.nextTick(function(){n(h)})}:function(){if(E.postMessage&&!E.importScripts){var h=!0,m=E.onmessage;return E.onmessage=function(){h=!1},E.postMessage("","*"),E.onmessage=m,h}}()?(u="setImmediate$"+Math.random()+"$",E.addEventListener?E.addEventListener("message",i,!1):E.attachEvent("onmessage",i),function(h){E.postMessage(u+h,"*")}):E.MessageChannel?((s=new MessageChannel).port1.onmessage=function(h){n(h.data)},function(h){s.port2.postMessage(h)}):r&&"onreadystatechange"in r.createElement("script")?(p=r.documentElement,function(h){var m=r.createElement("script");m.onreadystatechange=function(){n(h),m.onreadystatechange=null,p.removeChild(m),m=null},p.appendChild(m)}):function(h){setTimeout(n,0,h)},c.setImmediate=function(h){typeof h!="function"&&(h=new Function(""+h));for(var m=new Array(arguments.length-1),y=0;y<m.length;y++)m[y]=arguments[y+1];var S={callback:h,args:m};return o[l]=S,a(l),l++},c.clearImmediate=b}function b(h){delete o[h]}function n(h){if(x)setTimeout(n,0,h);else{var m=o[h];if(m){x=!0;try{(function(y){var S=y.callback,f=y.args;switch(f.length){case 0:S();break;case 1:S(f[0]);break;case 2:S(f[0],f[1]);break;case 3:S(f[0],f[1],f[2]);break;default:S.apply(_,f)}})(m)}finally{b(h),x=!1}}}}function i(h){h.source===E&&typeof h.data=="string"&&h.data.indexOf(u)===0&&n(+h.data.slice(u.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}),function(Y,G){typeof exports=="object"&&typeof module=="object"?module.exports=G(require("JSZip")):typeof define=="function"&&define.amd?define(["JSZip"],G):typeof exports=="object"?exports.ePub=G(require("JSZip")):Y.ePub=G(Y.JSZip)}(window,function(Y){return function(G){var P={};function g(E){if(P[E])return P[E].exports;var _=P[E]={i:E,l:!1,exports:{}};return G[E].call(_.exports,_,_.exports,g),_.l=!0,_.exports}return g.m=G,g.c=P,g.d=function(E,_,a){g.o(E,_)||Object.defineProperty(E,_,{enumerable:!0,get:a})},g.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},g.t=function(E,_){if(1&_&&(E=g(E)),8&_||4&_&&typeof E=="object"&&E&&E.__esModule)return E;var a=Object.create(null);if(g.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:E}),2&_&&typeof E!="string")for(var p in E)g.d(a,p,function(s){return E[s]}.bind(null,p));return a},g.n=function(E){var _=E&&E.__esModule?function(){return E.default}:function(){return E};return g.d(_,"a",_),_},g.o=function(E,_){return Object.prototype.hasOwnProperty.call(E,_)},g.p="/dist/",g(g.s=30)}([function(G,P,g){"use strict";g.r(P),g.d(P,"requestAnimationFrame",function(){return _}),g.d(P,"uuid",function(){return p}),g.d(P,"documentHeight",function(){return s}),g.d(P,"isElement",function(){return u}),g.d(P,"isNumber",function(){return l}),g.d(P,"isFloat",function(){return o}),g.d(P,"prefixed",function(){return x}),g.d(P,"defaults",function(){return r}),g.d(P,"extend",function(){return c}),g.d(P,"insert",function(){return b}),g.d(P,"locationOf",function(){return n}),g.d(P,"indexOfSorted",function(){return i}),g.d(P,"bounds",function(){return h}),g.d(P,"borders",function(){return m}),g.d(P,"nodeBounds",function(){return y}),g.d(P,"windowBounds",function(){return S}),g.d(P,"indexOfNode",function(){return f}),g.d(P,"indexOfTextNode",function(){return k}),g.d(P,"indexOfElementNode",function(){return M}),g.d(P,"isXml",function(){return X}),g.d(P,"createBlob",function(){return B}),g.d(P,"createBlobUrl",function(){return Z}),g.d(P,"revokeBlobUrl",function(){return w}),g.d(P,"createBase64Url",function(){return Q}),g.d(P,"type",function(){return ct}),g.d(P,"parse",function(){return at}),g.d(P,"qs",function(){return St}),g.d(P,"qsa",function(){return ut}),g.d(P,"qsp",function(){return xt}),g.d(P,"sprint",function(){return $}),g.d(P,"treeWalker",function(){return rt}),g.d(P,"walk",function(){return wt}),g.d(P,"blob2base64",function(){return _t}),g.d(P,"defer",function(){return gt}),g.d(P,"querySelectorByType",function(){return Pt}),g.d(P,"findChildren",function(){return At}),g.d(P,"parents",function(){return Ot}),g.d(P,"filterChildren",function(){return vt}),g.d(P,"getParentByTagName",function(){return Vt}),g.d(P,"RangeObject",function(){return Mt});var E=g(15);const _=typeof window<"u"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),a=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function p(){var C=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var e=(C+16*Math.random())%16|0;return C=Math.floor(C/16),(d=="x"?e:7&e|8).toString(16)})}function s(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function u(C){return!(!C||C.nodeType!=1)}function l(C){return!isNaN(parseFloat(C))&&isFinite(C)}function o(C){let d=parseFloat(C);return l(C)!==!1&&(typeof C=="string"&&C.indexOf(".")>-1||Math.floor(d)!==d)}function x(C){var d=["-webkit-","-webkit-","-moz-","-o-","-ms-"],e=C.toLowerCase(),A=["Webkit","webkit","Moz","O","ms"].length;if(typeof document>"u"||document.body.style[e]!==void 0)return C;for(var j=0;j<A;j++)if(document.body.style[d[j]+e]!==void 0)return d[j]+e;return C}function r(C){for(var d=1,e=arguments.length;d<e;d++){var A=arguments[d];for(var j in A)C[j]===void 0&&(C[j]=A[j])}return C}function c(C){var d=[].slice.call(arguments,1);return d.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(A){Object.defineProperty(C,A,Object.getOwnPropertyDescriptor(e,A))})}),C}function b(C,d,e){var A=n(C,d,e);return d.splice(A,0,C),A}function n(C,d,e,A,j){var I,R=A||0,H=j||d.length,tt=parseInt(R+(H-R)/2);return e||(e=function(ot,et){return ot>et?1:ot<et?-1:ot==et?0:void 0}),H-R<=0?tt:(I=e(d[tt],C),H-R==1?I>=0?tt:tt+1:I===0?tt:I===-1?n(C,d,e,tt,H):n(C,d,e,R,tt))}function i(C,d,e,A,j){var I,R=A||0,H=j||d.length,tt=parseInt(R+(H-R)/2);return e||(e=function(ot,et){return ot>et?1:ot<et?-1:ot==et?0:void 0}),H-R<=0?-1:(I=e(d[tt],C),H-R==1?I===0?tt:-1:I===0?tt:I===-1?i(C,d,e,tt,H):i(C,d,e,R,tt))}function h(C){var d=window.getComputedStyle(C),e=0,A=0;return["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(j){e+=parseFloat(d[j])||0}),["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(j){A+=parseFloat(d[j])||0}),{height:A,width:e}}function m(C){var d=window.getComputedStyle(C),e=0,A=0;return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(j){e+=parseFloat(d[j])||0}),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(j){A+=parseFloat(d[j])||0}),{height:A,width:e}}function y(C){let d,e=C.ownerDocument;if(C.nodeType==Node.TEXT_NODE){let A=e.createRange();A.selectNodeContents(C),d=A.getBoundingClientRect()}else d=C.getBoundingClientRect();return d}function S(){var C=window.innerWidth,d=window.innerHeight;return{top:0,left:0,right:C,bottom:d,width:C,height:d}}function f(C,d){for(var e,A=C.parentNode.childNodes,j=-1,I=0;I<A.length&&((e=A[I]).nodeType===d&&j++,e!=C);I++);return j}function k(C){return f(C,3)}function M(C){return f(C,1)}function X(C){return["xml","opf","ncx"].indexOf(C)>-1}function B(C,d){return new Blob([C],{type:d})}function Z(C,d){var e=B(C,d);return a.createObjectURL(e)}function w(C){return a.revokeObjectURL(C)}function Q(C,d){if(typeof C=="string")return"data:"+d+";base64,"+btoa(C)}function ct(C){return Object.prototype.toString.call(C).slice(8,-1)}function at(C,d,e){var A;return A=typeof DOMParser>"u"||e?E.DOMParser:DOMParser,C.charCodeAt(0)===65279&&(C=C.slice(1)),new A().parseFromString(C,d)}function St(C,d){var e;if(!C)throw new Error("No Element Provided");return C.querySelector!==void 0?C.querySelector(d):(e=C.getElementsByTagName(d)).length?e[0]:void 0}function ut(C,d){return C.querySelector!==void 0?C.querySelectorAll(d):C.getElementsByTagName(d)}function xt(C,d,e){var A,j;if(C.querySelector!==void 0){for(var I in d+="[",e)d+=I+"~='"+e[I]+"'";return d+="]",C.querySelector(d)}if(A=C.getElementsByTagName(d),j=Array.prototype.slice.call(A,0).filter(function(R){for(var H in e)if(R.getAttribute(H)===e[H])return!0;return!1}))return j[0]}function $(C,d){(C.ownerDocument||C).createTreeWalker!==void 0?rt(C,d,NodeFilter.SHOW_TEXT):wt(C,function(e){e&&e.nodeType===3&&d(e)})}function rt(C,d,e){var A=document.createTreeWalker(C,e,null,!1);let j;for(;j=A.nextNode();)d(j)}function wt(C,d){if(d(C))return!0;if(C=C.firstChild)do{if(wt(C,d))return!0;C=C.nextSibling}while(C)}function _t(C){return new Promise(function(d,e){var A=new FileReader;A.readAsDataURL(C),A.onloadend=function(){d(A.result)}})}function gt(){this.resolve=null,this.reject=null,this.id=p(),this.promise=new Promise((C,d)=>{this.resolve=C,this.reject=d}),Object.freeze(this)}function Pt(C,d,e){var A;if(C.querySelector!==void 0&&(A=C.querySelector(`${d}[*|type="${e}"]`)),A&&A.length!==0)return A;A=ut(C,d);for(var j=0;j<A.length;j++)if(A[j].getAttributeNS("http://www.idpf.org/2007/ops","type")===e||A[j].getAttribute("epub:type")===e)return A[j]}function At(C){for(var d=[],e=C.childNodes,A=0;A<e.length;A++){let j=e[A];j.nodeType===1&&d.push(j)}return d}function Ot(C){for(var d=[C];C;C=C.parentNode)d.unshift(C);return d}function vt(C,d,e){for(var A=[],j=C.childNodes,I=0;I<j.length;I++){let R=j[I];if(R.nodeType===1&&R.nodeName.toLowerCase()===d){if(e)return R;A.push(R)}}if(!e)return A}function Vt(C,d){let e;if(C!==null&&d!=="")for(e=C.parentNode;e.nodeType===1;){if(e.tagName.toLowerCase()===d)return e;e=e.parentNode}}class Mt{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(d,e){this.startContainer=d,this.startOffset=e,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(d,e){this.endContainer=d,this.endOffset=e,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(d){this.collapsed=!0,d?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(d){let e=d.parentNode,A=Array.prototype.indexOf.call(e.childNodes,d);this.setStart(e,A),this.setEnd(e,A+1)}selectNodeContents(d){d.childNodes[d.childNodes-1];let e=d.nodeType===3?d.textContent.length:parent.childNodes.length;this.setStart(d,0),this.setEnd(d,e)}_commonAncestorContainer(d,e){var A=Ot(d||this.startContainer),j=Ot(e||this.endContainer);if(A[0]==j[0]){for(var I=0;I<A.length;I++)if(A[I]!=j[I])return A[I-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},function(G,P,g){"use strict";g.d(P,"b",function(){return E}),g.d(P,"a",function(){return _}),g.d(P,"c",function(){return a});const E="0.3",_=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],a={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},function(G,P,g){"use strict";var E=g(0);class _{constructor(p,s,u){var l;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof _))return new _(p,s,u);if(typeof s=="string"?this.base=this.parseComponent(s):typeof s=="object"&&s.steps&&(this.base=s),(l=this.checkType(p))==="string")return this.str=p,Object(E.extend)(this,this.parse(p));if(l==="range")return Object(E.extend)(this,this.fromRange(p,this.base,u));if(l==="node")return Object(E.extend)(this,this.fromNode(p,this.base,u));if(l==="EpubCFI"&&p.path)return p;if(p)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(p){return this.isCfiString(p)?"string":!p||typeof p!="object"||Object(E.type)(p)!=="Range"&&p.startContainer===void 0?p&&typeof p=="object"&&p.nodeType!==void 0?"node":!!(p&&typeof p=="object"&&p instanceof _)&&"EpubCFI":"range"}parse(p){var s,u,l,o={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return typeof p!="string"?{spinePos:-1}:(p.indexOf("epubcfi(")===0&&p[p.length-1]===")"&&(p=p.slice(8,p.length-1)),(s=this.getChapterComponent(p))?(o.base=this.parseComponent(s),u=this.getPathComponent(p),o.path=this.parseComponent(u),(l=this.getRange(p))&&(o.range=!0,o.start=this.parseComponent(l[0]),o.end=this.parseComponent(l[1])),o.spinePos=o.base.steps[1].index,o):{spinePos:-1})}parseComponent(p){var s,u={steps:[],terminal:{offset:null,assertion:null}},l=p.split(":"),o=l[0].split("/");return l.length>1&&(s=l[1],u.terminal=this.parseTerminal(s)),o[0]===""&&o.shift(),u.steps=o.map(function(x){return this.parseStep(x)}.bind(this)),u}parseStep(p){var s,u,l,o,x;if((o=p.match(/\[(.*)\]/))&&o[1]&&(x=o[1]),u=parseInt(p),!isNaN(u))return u%2==0?(s="element",l=u/2-1):(s="text",l=(u-1)/2),{type:s,index:l,id:x||null}}parseTerminal(p){var s,u,l=p.match(/\[(.*)\]/);return l&&l[1]?(s=parseInt(p.split("[")[0]),u=l[1]):s=parseInt(p),Object(E.isNumber)(s)||(s=null),{offset:s,assertion:u}}getChapterComponent(p){return p.split("!")[0]}getPathComponent(p){var s=p.split("!");if(s[1])return s[1].split(",")[0]}getRange(p){var s=p.split(",");return s.length===3&&[s[1],s[2]]}getCharecterOffsetComponent(p){return p.split(":")[1]||""}joinSteps(p){return p?p.map(function(s){var u="";return s.type==="element"&&(u+=2*(s.index+1)),s.type==="text"&&(u+=1+2*s.index),s.id&&(u+="["+s.id+"]"),u}).join("/"):""}segmentString(p){var s="/";return s+=this.joinSteps(p.steps),p.terminal&&p.terminal.offset!=null&&(s+=":"+p.terminal.offset),p.terminal&&p.terminal.assertion!=null&&(s+="["+p.terminal.assertion+"]"),s}toString(){var p="epubcfi(";return p+=this.segmentString(this.base),p+="!",p+=this.segmentString(this.path),this.range&&this.start&&(p+=",",p+=this.segmentString(this.start)),this.range&&this.end&&(p+=",",p+=this.segmentString(this.end)),p+=")"}compare(p,s){var u,l,o,x;if(typeof p=="string"&&(p=new _(p)),typeof s=="string"&&(s=new _(s)),p.spinePos>s.spinePos)return 1;if(p.spinePos<s.spinePos)return-1;p.range?(u=p.path.steps.concat(p.start.steps),o=p.start.terminal):(u=p.path.steps,o=p.path.terminal),s.range?(l=s.path.steps.concat(s.start.steps),x=s.start.terminal):(l=s.path.steps,x=s.path.terminal);for(var r=0;r<u.length;r++){if(!u[r])return-1;if(!l[r]||u[r].index>l[r].index)return 1;if(u[r].index<l[r].index)return-1}return u.length<l.length?-1:o.offset>x.offset?1:o.offset<x.offset?-1:0}step(p){var s=p.nodeType===3?"text":"element";return{id:p.id,tagName:p.tagName,type:s,index:this.position(p)}}filteredStep(p,s){var u,l=this.filter(p,s);if(l)return u=l.nodeType===3?"text":"element",{id:l.id,tagName:l.tagName,type:u,index:this.filteredPosition(l,s)}}pathTo(p,s,u){for(var l,o={steps:[],terminal:{offset:null,assertion:null}},x=p;x&&x.parentNode&&x.parentNode.nodeType!=9;)(l=u?this.filteredStep(x,u):this.step(x))&&o.steps.unshift(l),x=x.parentNode;return s!=null&&s>=0&&(o.terminal.offset=s,o.steps[o.steps.length-1].type!="text"&&o.steps.push({type:"text",index:0})),o}equalStep(p,s){return!(!p||!s)&&p.index===s.index&&p.id===s.id&&p.type===s.type}fromRange(p,s,u){var l={range:!1,base:{},path:{},start:null,end:null},o=p.startContainer,x=p.endContainer,r=p.startOffset,c=p.endOffset,b=!1;if(u&&(b=o.ownerDocument.querySelector("."+u)!=null),typeof s=="string"?(l.base=this.parseComponent(s),l.spinePos=l.base.steps[1].index):typeof s=="object"&&(l.base=s),p.collapsed)b&&(r=this.patchOffset(o,r,u)),l.path=this.pathTo(o,r,u);else{l.range=!0,b&&(r=this.patchOffset(o,r,u)),l.start=this.pathTo(o,r,u),b&&(c=this.patchOffset(x,c,u)),l.end=this.pathTo(x,c,u),l.path={steps:[],terminal:null};var n,i=l.start.steps.length;for(n=0;n<i&&this.equalStep(l.start.steps[n],l.end.steps[n]);n++)n===i-1?l.start.terminal===l.end.terminal&&(l.path.steps.push(l.start.steps[n]),l.range=!1):l.path.steps.push(l.start.steps[n]);l.start.steps=l.start.steps.slice(l.path.steps.length),l.end.steps=l.end.steps.slice(l.path.steps.length)}return l}fromNode(p,s,u){var l={range:!1,base:{},path:{},start:null,end:null};return typeof s=="string"?(l.base=this.parseComponent(s),l.spinePos=l.base.steps[1].index):typeof s=="object"&&(l.base=s),l.path=this.pathTo(p,null,u),l}filter(p,s){var u,l,o,x,r,c=!1;return p.nodeType===3?(c=!0,o=p.parentNode,u=p.parentNode.classList.contains(s)):(c=!1,u=p.classList.contains(s)),u&&c?(x=o.previousSibling,r=o.nextSibling,x&&x.nodeType===3?l=x:r&&r.nodeType===3&&(l=r),l||p):!(u&&!c)&&p}patchOffset(p,s,u){if(p.nodeType!=3)throw new Error("Anchor must be a text node");var l=p,o=s;for(p.parentNode.classList.contains(u)&&(l=p.parentNode);l.previousSibling;){if(l.previousSibling.nodeType===1){if(!l.previousSibling.classList.contains(u))break;o+=l.previousSibling.textContent.length}else o+=l.previousSibling.textContent.length;l=l.previousSibling}return o}normalizedMap(p,s,u){var l,o,x,r={},c=-1,b=p.length;for(l=0;l<b;l++)(o=p[l].nodeType)===1&&p[l].classList.contains(u)&&(o=3),l>0&&o===3&&x===3?r[l]=c:s===o&&(c+=1,r[l]=c),x=o;return r}position(p){var s,u;return p.nodeType===1?((s=p.parentNode.children)||(s=Object(E.findChildren)(p.parentNode)),u=Array.prototype.indexOf.call(s,p)):u=(s=this.textNodes(p.parentNode)).indexOf(p),u}filteredPosition(p,s){var u,l;return p.nodeType===1?(u=p.parentNode.children,l=this.normalizedMap(u,1,s)):(u=p.parentNode.childNodes,p.parentNode.classList.contains(s)&&(u=(p=p.parentNode).parentNode.childNodes),l=this.normalizedMap(u,3,s)),l[Array.prototype.indexOf.call(u,p)]}stepsToXpath(p){var s=[".","*"];return p.forEach(function(u){var l=u.index+1;u.id?s.push("*[position()="+l+" and @id='"+u.id+"']"):u.type==="text"?s.push("text()["+l+"]"):s.push("*["+l+"]")}),s.join("/")}stepsToQuerySelector(p){var s=["html"];return p.forEach(function(u){var l=u.index+1;u.id?s.push("#"+u.id):u.type==="text"||s.push("*:nth-child("+l+")")}),s.join(">")}textNodes(p,s){return Array.prototype.slice.call(p.childNodes).filter(function(u){return u.nodeType===3||!(!s||!u.classList.contains(s))})}walkToNode(p,s,u){var l,o,x=s||document,r=x.documentElement,c=p.length;for(o=0;o<c&&((l=p[o]).type==="element"?r=l.id?x.getElementById(l.id):(r.children||Object(E.findChildren)(r))[l.index]:l.type==="text"&&(r=this.textNodes(r,u)[l.index]),r);o++);return r}findNode(p,s,u){var l,o,x=s||document;return u||x.evaluate===void 0?l=u?this.walkToNode(p,x,u):this.walkToNode(p,x):(o=this.stepsToXpath(p),l=x.evaluate(o,x,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),l}fixMiss(p,s,u,l){var o,x,r=this.findNode(p.slice(0,-1),u,l),c=r.childNodes,b=this.normalizedMap(c,3,l),n=p[p.length-1].index;for(let i in b){if(!b.hasOwnProperty(i))return;if(b[i]===n){if(!(s>(x=(o=c[i]).textContent.length))){r=o.nodeType===1?o.childNodes[0]:o;break}s-=x}}return{container:r,offset:s}}toRange(p,s){var u,l,o,x,r,c,b,n,i=p||document,h=!!s&&i.querySelector("."+s)!=null;if(u=i.createRange!==void 0?i.createRange():new E.RangeObject,this.range?(l=this.start,c=this.path.steps.concat(l.steps),x=this.findNode(c,i,h?s:null),o=this.end,b=this.path.steps.concat(o.steps),r=this.findNode(b,i,h?s:null)):(l=this.path,c=this.path.steps,x=this.findNode(this.path.steps,i,h?s:null)),!x)return console.log("No startContainer found for",this.toString()),null;try{l.terminal.offset!=null?u.setStart(x,l.terminal.offset):u.setStart(x,0)}catch{n=this.fixMiss(c,l.terminal.offset,i,h?s:null),u.setStart(n.container,n.offset)}if(r)try{o.terminal.offset!=null?u.setEnd(r,o.terminal.offset):u.setEnd(r,0)}catch{n=this.fixMiss(b,this.end.terminal.offset,i,h?s:null),u.setEnd(n.container,n.offset)}return u}isCfiString(p){return typeof p=="string"&&p.indexOf("epubcfi(")===0&&p[p.length-1]===")"}generateChapterComponent(p,s,u){var l="/"+2*(p+1)+"/";return l+=2*(parseInt(s)+1),u&&(l+="["+u+"]"),l}collapse(p){this.range&&(this.range=!1,p?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}P.a=_},function(G,P,g){"use strict";var E,_,a,p,s,u,l,o=g(31),x=g(45),r=Function.prototype.apply,c=Function.prototype.call,b=Object.create,n=Object.defineProperty,i=Object.defineProperties,h=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};_=function(y,S){var f,k;return x(S),k=this,E.call(this,y,f=function(){a.call(k,y,f),r.call(S,this,arguments)}),f.__eeOnceListener__=S,this},s={on:E=function(y,S){var f;return x(S),h.call(this,"__ee__")?f=this.__ee__:(f=m.value=b(null),n(this,"__ee__",m),m.value=null),f[y]?typeof f[y]=="object"?f[y].push(S):f[y]=[f[y],S]:f[y]=S,this},once:_,off:a=function(y,S){var f,k,M,X;if(x(S),!h.call(this,"__ee__"))return this;if(!(f=this.__ee__)[y])return this;if(typeof(k=f[y])=="object")for(X=0;M=k[X];++X)M!==S&&M.__eeOnceListener__!==S||(k.length===2?f[y]=k[X?0:1]:k.splice(X,1));else k!==S&&k.__eeOnceListener__!==S||delete f[y];return this},emit:p=function(y){var S,f,k,M,X;if(h.call(this,"__ee__")&&(M=this.__ee__[y]))if(typeof M=="object"){for(f=arguments.length,X=new Array(f-1),S=1;S<f;++S)X[S-1]=arguments[S];for(M=M.slice(),S=0;k=M[S];++S)r.call(k,this,X)}else switch(arguments.length){case 1:c.call(M,this);break;case 2:c.call(M,this,arguments[1]);break;case 3:c.call(M,this,arguments[1],arguments[2]);break;default:for(f=arguments.length,X=new Array(f-1),S=1;S<f;++S)X[S-1]=arguments[S];r.call(M,this,X)}}},u={on:o(E),once:o(_),off:o(a),emit:o(p)},l=i({},u),G.exports=P=function(y){return y==null?b(l):i(Object(y),u)},P.methods=s},function(G,P,g){"use strict";var E=g(7),_=g.n(E);P.a=class{constructor(a){var p;a.indexOf("://")>-1&&(a=new URL(a).pathname),p=this.parse(a),this.path=a,this.isDirectory(a)?this.directory=a:this.directory=p.dir+"/",this.filename=p.base,this.extension=p.ext.slice(1)}parse(a){return _.a.parse(a)}isAbsolute(a){return _.a.isAbsolute(a||this.path)}isDirectory(a){return a.charAt(a.length-1)==="/"}resolve(a){return _.a.resolve(this.directory,a)}relative(a){return a&&a.indexOf("://")>-1?a:_.a.relative(this.directory,a)}splitPath(a){return this.splitPathRe.exec(a).slice(1)}toString(){return this.path}}},function(G,P,g){"use strict";var E=g(4),_=g(7),a=g.n(_);P.a=class{constructor(p,s){var u=p.indexOf("://")>-1,l=p;if(this.Url=void 0,this.href=p,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=s,!u&&s!==!1&&typeof s!="string"&&window&&window.location&&(this.base=window.location.href),u||this.base)try{this.base?this.Url=new URL(p,this.base):this.Url=new URL(p),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,l=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(l=new E.a(this.base).resolve(l))}this.Path=new E.a(l),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(p){var s;return p.indexOf("://")>-1?p:(s=a.a.resolve(this.directory,p),this.origin+s)}relative(p){return a.a.relative(p,this.directory)}toString(){return this.href}}},function(G,P,g){"use strict";P.a=class{constructor(E){this.context=E||this,this.hooks=[]}register(){for(var E=0;E<arguments.length;++E)if(typeof arguments[E]=="function")this.hooks.push(arguments[E]);else for(var _=0;_<arguments[E].length;++_)this.hooks.push(arguments[E][_])}deregister(E){let _;for(let a=0;a<this.hooks.length;a++)if(_=this.hooks[a],_===E){this.hooks.splice(a,1);break}}trigger(){var E=arguments,_=this.context,a=[];return this.hooks.forEach(function(p){try{var s=p.apply(_,E)}catch(u){console.log(u)}s&&typeof s.then=="function"&&a.push(s)}),Promise.all(a)}list(){return this.hooks}clear(){return this.hooks=[]}}},function(G,P,g){"use strict";if(!E)var E={cwd:function(){return"/"}};function _(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+s)}function a(s,u){for(var l,o="",x=-1,r=0,c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(l===47)break;l=47}if(l===47){if(!(x===c-1||r===1))if(x!==c-1&&r===2){if(o.length<2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){for(var b=o.length-1,n=b;n>=0&&o.charCodeAt(n)!==47;--n);if(n!==b){o=n===-1?"":o.slice(0,n),x=c,r=0;continue}}else if(o.length===2||o.length===1){o="",x=c,r=0;continue}}u&&(o.length>0?o+="/..":o="..")}else o.length>0?o+="/"+s.slice(x+1,c):o=s.slice(x+1,c);x=c,r=0}else l===46&&r!==-1?++r:r=-1}return o}var p={resolve:function(){for(var s,u="",l=!1,o=arguments.length-1;o>=-1&&!l;o--){var x;o>=0?x=arguments[o]:(s===void 0&&(s=E.cwd()),x=s),_(x),x.length!==0&&(u=x+"/"+u,l=x.charCodeAt(0)===47)}return u=a(u,!l),l?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(s){if(_(s),s.length===0)return".";var u=s.charCodeAt(0)===47,l=s.charCodeAt(s.length-1)===47;return(s=a(s,!u)).length!==0||u||(s="."),s.length>0&&l&&(s+="/"),u?"/"+s:s},isAbsolute:function(s){return _(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,u=0;u<arguments.length;++u){var l=arguments[u];_(l),l.length>0&&(s===void 0?s=l:s+="/"+l)}return s===void 0?".":p.normalize(s)},relative:function(s,u){if(_(s),_(u),s===u||(s=p.resolve(s))===(u=p.resolve(u)))return"";for(var l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var o=s.length,x=o-l,r=1;r<u.length&&u.charCodeAt(r)===47;++r);for(var c=u.length-r,b=x<c?x:c,n=-1,i=0;i<=b;++i){if(i===b){if(c>b){if(u.charCodeAt(r+i)===47)return u.slice(r+i+1);if(i===0)return u.slice(r+i)}else x>b&&(s.charCodeAt(l+i)===47?n=i:i===0&&(n=0));break}var h=s.charCodeAt(l+i);if(h!==u.charCodeAt(r+i))break;h===47&&(n=i)}var m="";for(i=l+n+1;i<=o;++i)i!==o&&s.charCodeAt(i)!==47||(m.length===0?m+="..":m+="/..");return m.length>0?m+u.slice(r+n):(r+=n,u.charCodeAt(r)===47&&++r,u.slice(r))},_makeLong:function(s){return s},dirname:function(s){if(_(s),s.length===0)return".";for(var u=s.charCodeAt(0),l=u===47,o=-1,x=!0,r=s.length-1;r>=1;--r)if((u=s.charCodeAt(r))===47){if(!x){o=r;break}}else x=!1;return o===-1?l?"/":".":l&&o===1?"//":s.slice(0,o)},basename:function(s,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');_(s);var l,o=0,x=-1,r=!0;if(u!==void 0&&u.length>0&&u.length<=s.length){if(u.length===s.length&&u===s)return"";var c=u.length-1,b=-1;for(l=s.length-1;l>=0;--l){var n=s.charCodeAt(l);if(n===47){if(!r){o=l+1;break}}else b===-1&&(r=!1,b=l+1),c>=0&&(n===u.charCodeAt(c)?--c==-1&&(x=l):(c=-1,x=b))}return o===x?x=b:x===-1&&(x=s.length),s.slice(o,x)}for(l=s.length-1;l>=0;--l)if(s.charCodeAt(l)===47){if(!r){o=l+1;break}}else x===-1&&(r=!1,x=l+1);return x===-1?"":s.slice(o,x)},extname:function(s){_(s);for(var u=-1,l=0,o=-1,x=!0,r=0,c=s.length-1;c>=0;--c){var b=s.charCodeAt(c);if(b!==47)o===-1&&(x=!1,o=c+1),b===46?u===-1?u=c:r!==1&&(r=1):u!==-1&&(r=-1);else if(!x){l=c+1;break}}return u===-1||o===-1||r===0||r===1&&u===o-1&&u===l+1?"":s.slice(u,o)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof s);return function(u,l){var o=l.dir||l.root,x=l.base||(l.name||"")+(l.ext||"");return o?o===l.root?o+x:o+u+x:x}("/",s)},parse:function(s){_(s);var u={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return u;var l,o=s.charCodeAt(0),x=o===47;x?(u.root="/",l=1):l=0;for(var r=-1,c=0,b=-1,n=!0,i=s.length-1,h=0;i>=l;--i)if((o=s.charCodeAt(i))!==47)b===-1&&(n=!1,b=i+1),o===46?r===-1?r=i:h!==1&&(h=1):r!==-1&&(h=-1);else if(!n){c=i+1;break}return r===-1||b===-1||h===0||h===1&&r===b-1&&r===c+1?b!==-1&&(u.base=u.name=c===0&&x?s.slice(1,b):s.slice(c,b)):(c===0&&x?(u.name=s.slice(1,r),u.base=s.slice(1,b)):(u.name=s.slice(c,r),u.base=s.slice(c,b)),u.ext=s.slice(r,b)),c>0?u.dir=s.slice(0,c-1):x&&(u.dir="/"),u},sep:"/",delimiter:":",posix:null};G.exports=p},function(G,P,g){"use strict";g.d(P,"a",function(){return a}),g.d(P,"b",function(){return p}),g.d(P,"d",function(){return s}),g.d(P,"c",function(){return u}),g.d(P,"e",function(){return l});var E=g(0),_=g(5);g(4);function a(o,x){var r,c,b=x.url,n=b.indexOf("://")>-1;o&&(c=Object(E.qs)(o,"head"),(r=Object(E.qs)(c,"base"))||(r=o.createElement("base"),c.insertBefore(r,c.firstChild)),!n&&window&&window.location&&(b=window.location.origin+b),r.setAttribute("href",b))}function p(o,x){var r,c,b=x.canonical;o&&(r=Object(E.qs)(o,"head"),(c=Object(E.qs)(r,"link[rel='canonical']"))?c.setAttribute("href",b):((c=o.createElement("link")).setAttribute("rel","canonical"),c.setAttribute("href",b),r.appendChild(c)))}function s(o,x){var r,c,b=x.idref;o&&(r=Object(E.qs)(o,"head"),(c=Object(E.qs)(r,"link[property='dc.identifier']"))?c.setAttribute("content",b):((c=o.createElement("meta")).setAttribute("name","dc.identifier"),c.setAttribute("content",b),r.appendChild(c)))}function u(o,x){var r=o.querySelectorAll("a[href]");if(r.length)for(var c=Object(E.qs)(o.ownerDocument,"base"),b=c?c.getAttribute("href"):void 0,n=function(h){var m=h.getAttribute("href");if(m.indexOf("mailto:")!==0)if(m.indexOf("://")>-1)h.setAttribute("target","_blank");else{var y;try{y=new _.a(m,b)}catch{}h.onclick=function(){return y&&y.hash?x(y.Path.path+y.hash):x(y?y.Path.path:m),!1}}}.bind(this),i=0;i<r.length;i++)n(r[i])}function l(o,x,r){return x.forEach(function(c,b){c&&r[b]&&(c=c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=o.replace(new RegExp(c,"g"),r[b]))}),o}},function(G,P,g){"use strict";var E=g(0);P.a=class{constructor(_){this._q=[],this.context=_,this.tick=E.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var _,a,p=[].shift.call(arguments),s=arguments;if(!p)throw new Error("No Task Provided");return a=typeof p=="function"?{task:p,args:s,deferred:_=new E.defer,promise:_.promise}:{promise:p},this._q.push(a),this.paused!=0||this.running||this.run(),a.promise}dequeue(){var _,a,p;return!this._q.length||this.paused?((_=new E.defer).deferred.resolve(),_.promise):(a=(_=this._q.shift()).task)?(p=a.apply(this.context,_.args))&&typeof p.then=="function"?p.then(function(){_.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){_.deferred.reject.apply(this.context,arguments)}.bind(this)):(_.deferred.resolve.apply(this.context,p),_.promise):_.promise?_.promise:void 0}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new E.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then(function(){this.run()}.bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==1&&(this.paused=!1),this.defered.promise}flush(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}},function(G,P,g){"use strict";var E=g(3),_=g.n(E),a=g(0);function p(){var n="reverse",i=function(){var h=document.createElement("div");h.dir="rtl",h.style.position="fixed",h.style.width="1px",h.style.height="1px",h.style.top="0px",h.style.left="0px",h.style.overflow="hidden";var m=document.createElement("div");m.style.width="2px";var y=document.createElement("span");y.style.width="1px",y.style.display="inline-block";var S=document.createElement("span");return S.style.width="1px",S.style.display="inline-block",m.appendChild(y),m.appendChild(S),h.appendChild(m),h}();return document.body.appendChild(i),i.scrollLeft>0?n="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(i.children[0].children[1].scrollIntoView(),i.scrollLeft<0&&(n="negative")):(i.scrollLeft=1,i.scrollLeft===0&&(n="negative")),document.body.removeChild(i),n}var s=g(11),u=g(9),l=g(28),o=g.n(l),x=class{constructor(n){this.settings=n||{},this.id="epubjs-container-"+Object(a.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(n){let i=n.height,h=n.width,m=n.overflow||!1,y=n.axis||"vertical",S=n.direction;Object(a.extend)(this.settings,n),n.height&&Object(a.isNumber)(n.height)&&(i=n.height+"px"),n.width&&Object(a.isNumber)(n.width)&&(h=n.width+"px");let f=document.createElement("div");return f.id=this.id,f.classList.add("epub-container"),f.style.wordSpacing="0",f.style.lineHeight="0",f.style.verticalAlign="top",f.style.position="relative",y==="horizontal"&&(f.style.display="flex",f.style.flexDirection="row",f.style.flexWrap="nowrap"),h&&(f.style.width=h),i&&(f.style.height=i),m&&(m==="scroll"&&y==="vertical"?(f.style["overflow-y"]=m,f.style["overflow-x"]="hidden"):m==="scroll"&&y==="horizontal"?(f.style["overflow-y"]="hidden",f.style["overflow-x"]=m):f.style.overflow=m),S&&(f.dir=S,f.style.direction=S),S&&this.settings.fullsize&&(document.body.style.direction=S),f}wrap(n){var i=document.createElement("div");return i.style.visibility="hidden",i.style.overflow="hidden",i.style.width="0",i.style.height="0",i.appendChild(n),i}getElement(n){var i;if(Object(a.isElement)(n)?i=n:typeof n=="string"&&(i=document.getElementById(n)),!i)throw new Error("Not an Element");return i}attachTo(n){var i,h=this.getElement(n);if(h)return i=this.settings.hidden?this.wrapper:this.container,h.appendChild(i),this.element=h,h}getContainer(){return this.container}onResize(n){Object(a.isNumber)(this.settings.width)&&Object(a.isNumber)(this.settings.height)||(this.resizeFunc=o()(n,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(n){this.orientationChangeFunc=n,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(n,i){var h;let m=n||this.settings.width,y=i||this.settings.height;n===null?(h=this.element.getBoundingClientRect()).width&&(n=Math.floor(h.width),this.container.style.width=n+"px"):Object(a.isNumber)(n)?this.container.style.width=n+"px":this.container.style.width=n,i===null?(h=h||this.element.getBoundingClientRect()).height&&(i=h.height,this.container.style.height=i+"px"):Object(a.isNumber)(i)?this.container.style.height=i+"px":this.container.style.height=i,Object(a.isNumber)(n)||(n=this.container.clientWidth),Object(a.isNumber)(i)||(i=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let S=Object(a.windowBounds)(),f=window.getComputedStyle(document.body),k=parseFloat(f["padding-left"])||0,M=parseFloat(f["padding-right"])||0,X=parseFloat(f["padding-top"])||0,B=parseFloat(f["padding-bottom"])||0;return m||(n=S.width-k-M),(this.settings.fullsize&&!y||!y)&&(i=S.height-X-B),{width:n-this.containerPadding.left-this.containerPadding.right,height:i-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let n;return this.container.style.overflow!=="visible"&&(n=this.container&&this.container.getBoundingClientRect()),n&&n.width&&n.height?n:Object(a.windowBounds)()}getSheet(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),n.sheet}addStyleRules(n,i){var h="#"+this.id+" ",m="";this.sheet||(this.sheet=this.getSheet()),i.forEach(function(y){for(var S in y)y.hasOwnProperty(S)&&(m+=S+":"+y[S]+";")}),this.sheet.insertRule(h+n+" {"+m+"}",0)}axis(n){n==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=n}direction(n){this.container&&(this.container.dir=n,this.container.style.direction=n),this.settings.fullsize&&(document.body.style.direction=n),this.settings.dir=n}overflow(n){this.container&&(n==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=n,this.container.style["overflow-x"]="hidden"):n==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=n):this.container.style.overflow=n),this.settings.overflow=n}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}},r=class{constructor(n){this.container=n,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(n){return this._views.indexOf(n)}slice(){return this._views.slice.apply(this._views,arguments)}get(n){return this._views[n]}append(n){return this._views.push(n),this.container&&this.container.appendChild(n.element),this.length++,n}prepend(n){return this._views.unshift(n),this.container&&this.container.insertBefore(n.element,this.container.firstChild),this.length++,n}insert(n,i){return this._views.splice(i,0,n),this.container&&(i<this.container.children.length?this.container.insertBefore(n.element,this.container.children[i]):this.container.appendChild(n.element)),this.length++,n}remove(n){var i=this._views.indexOf(n);i>-1&&this._views.splice(i,1),this.destroy(n),this.length--}destroy(n){n.displayed&&n.destroy(),this.container&&this.container.removeChild(n.element),n=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var n,i=this.length;if(this.length){for(var h=0;h<i;h++)n=this._views[h],this.destroy(n);this._views=[],this.length=0}}find(n){for(var i,h=this.length,m=0;m<h;m++)if((i=this._views[m]).displayed&&i.section.index==n.index)return i}displayed(){for(var n,i=[],h=this.length,m=0;m<h;m++)(n=this._views[m]).displayed&&i.push(n);return i}show(){for(var n,i=this.length,h=0;h<i;h++)(n=this._views[h]).displayed&&n.show();this.hidden=!1}hide(){for(var n,i=this.length,h=0;h<i;h++)(n=this._views[h]).displayed&&n.hide();this.hidden=!0}},c=g(1);class b{constructor(i){this.name="default",this.optsSettings=i.settings,this.View=i.view,this.request=i.request,this.renditionQueue=i.queue,this.q=new u.a(this),this.settings=Object(a.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Object(a.extend)(this.settings,i.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(i,h){let m=i.tagName;this.settings.fullsize!==void 0||!m||m.toLowerCase()!="body"&&m.toLowerCase()!="html"||(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=h,this.settings.rtlScrollType=p(),this.stage=new x({width:h.width,height:h.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(i),this.container=this.stage.getContainer(),this.views=new r(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var i;window.addEventListener("unload",function(h){this.destroy()}.bind(this)),i=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),i.addEventListener("scroll",this._onScroll)}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(i){let{orientation:h}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout(function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(c.c.MANAGERS.ORIENTATION_CHANGE,h)}.bind(this),500)}onResized(i){this.resize()}resize(i,h,m){let y=this.stage.size(i,h);this.winBounds=Object(a.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?this._stageSize=void 0:this._stageSize&&this._stageSize.width===y.width&&this._stageSize.height===y.height||(this._stageSize=y,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(c.c.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},m))}createView(i,h){return new this.View(i,Object(a.extend)(this.viewSettings,{forceRight:h}))}handleNextPrePaginated(i,h,m){let y;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(i||h.index===0)return;if(y=h.next(),y&&!y.properties.includes("page-spread-left"))return m.call(this,y)}}display(i,h){var m=new a.defer,y=m.promise;(h===i.href||Object(a.isNumber)(h))&&(h=void 0);var S=this.views.find(i);if(S&&i&&this.layout.name!=="pre-paginated"){let k=S.offset();if(this.settings.direction==="ltr")this.scrollTo(k.left,k.top,!0);else{let M=S.width();this.scrollTo(k.left+M,k.top,!0)}if(h){let M=S.locationOf(h),X=S.width();this.moveTo(M,X)}return m.resolve(),y}this.clear();let f=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(f=!0),this.add(i,f).then(function(k){if(h){let M=k.locationOf(h),X=k.width();this.moveTo(M,X)}}.bind(this),k=>{m.reject(k)}).then(function(){return this.handleNextPrePaginated(f,i,this.add)}.bind(this)).then(function(){this.views.show(),m.resolve()}.bind(this)),y}afterDisplayed(i){this.emit(c.c.MANAGERS.ADDED,i)}afterResized(i){this.emit(c.c.MANAGERS.RESIZE,i.section)}moveTo(i,h){var m=0,y=0;this.isPaginated?((m=Math.floor(i.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(m=this.container.scrollWidth-this.layout.delta),(y=Math.floor(i.top/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollHeight&&(y=this.container.scrollHeight-this.layout.delta)):y=i.top,this.settings.direction==="rtl"&&(m+=this.layout.delta,m-=h),this.scrollTo(m,y,!0)}add(i,h){var m=this.createView(i,h);return this.views.append(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,y=>{this.updateAxis(y)}),m.on(c.c.VIEWS.WRITING_MODE,y=>{this.updateWritingMode(y)}),m.display(this.request)}append(i,h){var m=this.createView(i,h);return this.views.append(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,y=>{this.updateAxis(y)}),m.on(c.c.VIEWS.WRITING_MODE,y=>{this.updateWritingMode(y)}),m.display(this.request)}prepend(i,h){var m=this.createView(i,h);return m.on(c.c.VIEWS.RESIZED,y=>{this.counter(y)}),this.views.prepend(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,y=>{this.updateAxis(y)}),m.on(c.c.VIEWS.WRITING_MODE,y=>{this.updateWritingMode(y)}),m.display(this.request)}counter(i){this.settings.axis==="vertical"?this.scrollBy(0,i.heightDelta,!0):this.scrollBy(i.widthDelta,0,!0)}next(){var i;let h=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||h&&h!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&h==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft>0?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next():this.container.scrollLeft+-1*this.layout.delta>-1*this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):i=this.views.last().section.next()):i=this.views.last().section.next():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()),i)){this.clear(),this.updateLayout();let m=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(m=!0),this.append(i,m).then(function(){return this.handleNextPrePaginated(m,i,this.append)}.bind(this),y=>y).then(function(){this.isPaginated||this.settings.axis!=="horizontal"||this.settings.direction!=="rtl"||this.settings.rtlScrollType!=="default"||this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}.bind(this))}}prev(){var i;let h=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||h&&h!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&h==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft+this.container.offsetWidth<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev():this.container.scrollLeft<0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):i=this.views.first().section.prev()):i=this.views.first().section.prev():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()),i)){this.clear(),this.updateLayout();let m=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof i.prev()!="object"&&(m=!0),this.prepend(i,m).then(function(){var y;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(y=i.prev()))return this.prepend(y)}.bind(this),y=>y).then(function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(-1*this.container.scrollWidth+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}.bind(this))}}current(){var i=this.visible();return i.length?i[i.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let i=this.visible(),h=this.container.getBoundingClientRect(),m=h.height<window.innerHeight?h.height:window.innerHeight,y=h.width<window.innerWidth?h.width:window.innerWidth,S=this.settings.axis==="vertical",f=(this.settings.direction,0);return this.settings.fullsize&&(f=S?window.scrollY:window.scrollX),i.map(k=>{let M,X,B,Z,{index:w,href:Q}=k.section,ct=k.position(),at=k.width(),St=k.height();S?(M=f+h.top-ct.top+0,X=M+m-0,Z=this.layout.count(St,m).pages,B=m):(M=f+h.left-ct.left+0,X=M+y-0,Z=this.layout.count(at,y).pages,B=y);let ut=Math.ceil(M/B),xt=[],$=Math.ceil(X/B);if(this.settings.direction==="rtl"&&!S){let wt=ut;ut=Z-$,$=Z-wt}xt=[];for(var rt=ut;rt<=$;rt++){let wt=rt+1;xt.push(wt)}return{index:w,href:Q,pages:xt,totalPages:Z,mapping:this.mapping.page(k.contents,k.section.cfiBase,M,X)}})}paginatedLocation(){let i=this.visible(),h=this.container.getBoundingClientRect(),m=0,y=0;return this.settings.fullsize&&(m=window.scrollX),i.map(S=>{let f,k,M,X,{index:B,href:Z}=S.section,w=S.position(),Q=S.width();this.settings.direction==="rtl"?(f=h.right-m,X=Math.min(Math.abs(f-w.left),this.layout.width)-y,M=w.width-(w.right-f)-y,k=M-X):(f=h.left+m,X=Math.min(w.right-f,this.layout.width)-y,k=f-w.left+y,M=k+X),y+=X;let ct=this.mapping.page(S.contents,S.section.cfiBase,k,M),at=this.layout.count(Q).pages,St=Math.floor(k/this.layout.pageWidth),ut=[],xt=Math.floor(M/this.layout.pageWidth);if(St<0&&(St=0,xt+=1),this.settings.direction==="rtl"){let rt=St;St=at-xt,xt=at-rt}for(var $=St+1;$<=xt;$++){let rt=$;ut.push(rt)}return{index:B,href:Z,pages:ut,totalPages:at,mapping:ct}})}isVisible(i,h,m,y){var S=i.position(),f=y||this.bounds();return this.settings.axis==="horizontal"&&S.right>f.left-h&&S.left<f.right+m||this.settings.axis==="vertical"&&S.bottom>f.top-h&&S.top<f.bottom+m}visible(){for(var i,h=this.bounds(),m=this.views.displayed(),y=m.length,S=[],f=0;f<y;f++)i=m[f],this.isVisible(i,0,0,h)===!0&&S.push(i);return S}scrollBy(i,h,m){let y=this.settings.direction==="rtl"?-1:1;m&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(i*y,h*y):(i&&(this.container.scrollLeft+=i*y),h&&(this.container.scrollTop+=h)),this.scrolled=!0}scrollTo(i,h,m){m&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(i,h):(this.container.scrollLeft=i,this.container.scrollTop=h),this.scrolled=!0}onScroll(){let i,h;this.settings.fullsize?(i=window.scrollY,h=window.scrollX):(i=this.container.scrollTop,h=this.container.scrollLeft),this.scrollTop=i,this.scrollLeft=h,this.ignore?this.ignore=!1:(this.emit(c.c.MANAGERS.SCROLL,{top:i,left:h}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit(c.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),20))}bounds(){return this.stage.bounds()}applyLayout(i){this.layout=i,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(i){this.viewSettings.layout=i,this.mapping=new s.a(i.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(h){h&&h.setLayout(i)})}updateWritingMode(i){this.writingMode=i}updateAxis(i,h){(h||i!==this.settings.axis)&&(this.settings.axis=i,this.stage&&this.stage.axis(i),this.viewSettings.axis=i,this.mapping&&(this.mapping=new s.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(i==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(i,h="auto"){let m=i==="paginated"||i==="auto";this.isPaginated=m,i==="scrolled-doc"||i==="scrolled-continuous"||i==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=i,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=m?"hidden":h,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var i=[];return this.views&&this.views.forEach(function(h){const m=h&&h.contents;m&&i.push(m)}),i}direction(i="ltr"){this.settings.direction=i,this.stage&&this.stage.direction(i),this.viewSettings.direction=i,this.updateLayout()}isRendered(){return this.rendered}}_()(b.prototype),P.a=b},function(G,P,g){"use strict";var E=g(2),_=g(0);P.a=class{constructor(a,p,s,u=!1){this.layout=a,this.horizontal=s==="horizontal",this.direction=p||"ltr",this._dev=u}section(a){var p=this.findRanges(a);return this.rangeListToCfiList(a.section.cfiBase,p)}page(a,p,s,u){var l,o=!(!a||!a.document)&&a.document.body;if(o){if(l=this.rangePairToCfiPair(p,{start:this.findStart(o,s,u),end:this.findEnd(o,s,u)}),this._dev===!0){let x=a.document,r=new E.a(l.start).toRange(x),c=new E.a(l.end).toRange(x),b=x.defaultView.getSelection(),n=x.createRange();b.removeAllRanges(),n.setStart(r.startContainer,r.startOffset),n.setEnd(c.endContainer,c.endOffset),b.addRange(n)}return l}}walk(a,p){if(!a||a.nodeType!==Node.TEXT_NODE){var s=function(r){return r.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},u=s;u.acceptNode=s;for(var l,o,x=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,u,!1);(l=x.nextNode())&&!(o=p(l)););return o}}findRanges(a){for(var p,s,u=[],l=a.contents.scrollWidth(),o=Math.ceil(l/this.layout.spreadWidth)*this.layout.divisor,x=this.layout.columnWidth,r=this.layout.gap,c=0;c<o.pages;c++)p=(x+r)*c,s=x*(c+1)+r*c,u.push({start:this.findStart(a.document.body,p,s),end:this.findEnd(a.document.body,p,s)});return u}findStart(a,p,s){for(var u,l,o=[a],x=a;o.length;)if(u=o.shift(),l=this.walk(u,r=>{var c,b,n,i,h;if(h=Object(_.nodeBounds)(r),this.horizontal&&this.direction==="ltr"){if(c=this.horizontal?h.left:h.top,b=this.horizontal?h.right:h.bottom,c>=p&&c<=s||b>p)return r;x=r,o.push(r)}else if(this.horizontal&&this.direction==="rtl"){if(c=h.left,(b=h.right)<=s&&b>=p||c<s)return r;x=r,o.push(r)}else{if(n=h.top,i=h.bottom,n>=p&&n<=s||i>p)return r;x=r,o.push(r)}}))return this.findTextStartRange(l,p,s);return this.findTextStartRange(x,p,s)}findEnd(a,p,s){for(var u,l,o=[a],x=a;o.length;)if(u=o.shift(),l=this.walk(u,r=>{var c,b,n,i,h;if(h=Object(_.nodeBounds)(r),this.horizontal&&this.direction==="ltr"){if(c=Math.round(h.left),b=Math.round(h.right),c>s&&x)return x;if(b>s)return r;x=r,o.push(r)}else if(this.horizontal&&this.direction==="rtl"){if(c=Math.round(this.horizontal?h.left:h.top),(b=Math.round(this.horizontal?h.right:h.bottom))<p&&x)return x;if(c<p)return r;x=r,o.push(r)}else{if(n=Math.round(h.top),i=Math.round(h.bottom),n>s&&x)return x;if(i>s)return r;x=r,o.push(r)}}))return this.findTextEndRange(l,p,s);return this.findTextEndRange(x,p,s)}findTextStartRange(a,p,s){for(var u,l,o=this.splitTextNodeIntoRanges(a),x=0;x<o.length;x++)if(l=(u=o[x]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l.left>=p)return u}else if(this.horizontal&&this.direction==="rtl"){if(l.right<=s)return u}else if(l.top>=p)return u;return o[0]}findTextEndRange(a,p,s){for(var u,l,o,x,r,c,b,n=this.splitTextNodeIntoRanges(a),i=0;i<n.length;i++){if(o=(l=n[i]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(x=o.left,r=o.right,x>s&&u)return u;if(r>s)return l}else if(this.horizontal&&this.direction==="rtl"){if(x=o.left,(r=o.right)<p&&u)return u;if(x<p)return l}else{if(c=o.top,b=o.bottom,c>s&&u)return u;if(b>s)return l}u=l}return n[n.length-1]}splitTextNodeIntoRanges(a,p){var s,u=[],l=(a.textContent||"").trim(),o=a.ownerDocument,x=p||" ",r=l.indexOf(x);if(r===-1||a.nodeType!=Node.TEXT_NODE)return(s=o.createRange()).selectNodeContents(a),[s];for((s=o.createRange()).setStart(a,0),s.setEnd(a,r),u.push(s),s=!1;r!=-1;)(r=l.indexOf(x,r+1))>0&&(s&&(s.setEnd(a,r),u.push(s)),(s=o.createRange()).setStart(a,r+1));return s&&(s.setEnd(a,l.length),u.push(s)),u}rangePairToCfiPair(a,p){var s=p.start,u=p.end;return s.collapse(!0),u.collapse(!1),{start:new E.a(s,a).toString(),end:new E.a(u,a).toString()}}rangeListToCfiList(a,p){for(var s,u=[],l=0;l<p.length;l++)s=this.rangePairToCfiPair(a,p[l]),u.push(s);return u}axis(a){return a&&(this.horizontal=a==="horizontal"),this.horizontal}}},function(G,P,g){"use strict";var E=g(3),_=g.n(E),a=g(0),p=g(2),s=g(11),u=g(8),l=g(1);const o=typeof navigator<"u",x=o&&/Chrome/.test(navigator.userAgent),r=o&&!x&&/AppleWebKit/.test(navigator.userAgent);class c{constructor(n,i,h,m){this.epubcfi=new p.a,this.document=n,this.documentElement=this.document.documentElement,this.content=i||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=m||0,this.cfiBase=h||"",this.epubReadingSystem("epub.js",l.b),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return l.a}width(n){var i=this.content;return n&&Object(a.isNumber)(n)&&(n+="px"),n&&(i.style.width=n),parseInt(this.window.getComputedStyle(i).width)}height(n){var i=this.content;return n&&Object(a.isNumber)(n)&&(n+="px"),n&&(i.style.height=n),parseInt(this.window.getComputedStyle(i).height)}contentWidth(n){var i=this.content||this.document.body;return n&&Object(a.isNumber)(n)&&(n+="px"),n&&(i.style.width=n),parseInt(this.window.getComputedStyle(i).width)}contentHeight(n){var i=this.content||this.document.body;return n&&Object(a.isNumber)(n)&&(n+="px"),n&&(i.style.height=n),parseInt(this.window.getComputedStyle(i).height)}textWidth(){let n,i,h=this.document.createRange(),m=this.content||this.document.body,y=Object(a.borders)(m);return h.selectNodeContents(m),n=h.getBoundingClientRect(),i=n.width,y&&y.width&&(i+=y.width),Math.round(i)}textHeight(){let n,i,h=this.document.createRange(),m=this.content||this.document.body;return h.selectNodeContents(m),n=h.getBoundingClientRect(),i=n.bottom,Math.round(i)}scrollWidth(){return this.documentElement.scrollWidth}scrollHeight(){return this.documentElement.scrollHeight}overflow(n){return n&&(this.documentElement.style.overflow=n),this.window.getComputedStyle(this.documentElement).overflow}overflowX(n){return n&&(this.documentElement.style.overflowX=n),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(n){return n&&(this.documentElement.style.overflowY=n),this.window.getComputedStyle(this.documentElement).overflowY}css(n,i,h){var m=this.content||this.document.body;return i?m.style.setProperty(n,i,h?"important":""):m.style.removeProperty(n),this.window.getComputedStyle(m)[n]}viewport(n){var i,h=this.document.querySelector("meta[name='viewport']"),m={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},y=[];if(h&&h.hasAttribute("content")){let S=h.getAttribute("content"),f=S.match(/width\s*=\s*([^,]*)/),k=S.match(/height\s*=\s*([^,]*)/),M=S.match(/initial-scale\s*=\s*([^,]*)/),X=S.match(/minimum-scale\s*=\s*([^,]*)/),B=S.match(/maximum-scale\s*=\s*([^,]*)/),Z=S.match(/user-scalable\s*=\s*([^,]*)/);f&&f.length&&f[1]!==void 0&&(m.width=f[1]),k&&k.length&&k[1]!==void 0&&(m.height=k[1]),M&&M.length&&M[1]!==void 0&&(m.scale=M[1]),X&&X.length&&X[1]!==void 0&&(m.minimum=X[1]),B&&B.length&&B[1]!==void 0&&(m.maximum=B[1]),Z&&Z.length&&Z[1]!==void 0&&(m.scalable=Z[1])}return i=Object(a.defaults)(n||{},m),n&&(i.width&&y.push("width="+i.width),i.height&&y.push("height="+i.height),i.scale&&y.push("initial-scale="+i.scale),i.scalable==="no"?(y.push("minimum-scale="+i.scale),y.push("maximum-scale="+i.scale),y.push("user-scalable="+i.scalable)):(i.scalable&&y.push("user-scalable="+i.scalable),i.minimum&&y.push("minimum-scale="+i.minimum),i.maximum&&y.push("minimum-scale="+i.maximum)),h||((h=this.document.createElement("meta")).setAttribute("name","viewport"),this.document.querySelector("head").appendChild(h)),h.setAttribute("content",y.join(", ")),this.window.scrollTo(0,0)),i}expand(){this.emit(l.c.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let n=this.textWidth(),i=this.textHeight();n==this._size.width&&i==this._size.height||(this._size={width:n,height:i},this.onResize&&this.onResize(this._size),this.emit(l.c.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let n=this.content;n.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",n.style.transitionDuration="0.001ms",n.style.transitionTimingFunction="linear",n.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var n=this.document.styleSheets,i=function(S){S.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this),h=0;h<n.length;h+=1){var m;try{m=n[h].cssRules}catch{return}if(!m)return;for(var y=0;y<m.length;y+=1)m[y].media&&this.window.matchMedia(m[y].media.mediaText).addListener(i)}}resizeObservers(){this.observer=new ResizeObserver(n=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()}),this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}imageLoadListeners(){for(var n,i=this.document.querySelectorAll("img"),h=0;h<i.length;h++)(n=i[h]).naturalWidth!==void 0&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.resizeCheck()}.bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(n,i){var h,m={left:0,top:0};if(!this.document)return m;if(this.epubcfi.isCfiString(n)){let y=new p.a(n).toRange(this.document,i);if(y){try{if(!y.endContainer||y.startContainer==y.endContainer&&y.startOffset==y.endOffset){let S=y.startContainer.textContent.indexOf(" ",y.startOffset);S==-1&&(S=y.startContainer.textContent.length),y.setEnd(y.startContainer,S)}}catch(S){console.error("setting end offset to start container length failed",S)}if(y.startContainer.nodeType===Node.ELEMENT_NODE)h=y.startContainer.getBoundingClientRect(),m.left=h.left,m.top=h.top;else if(r){let S=y.startContainer,f=new Range;try{S.nodeType===1?h=S.getBoundingClientRect():y.startOffset+2<S.length?(f.setStart(S,y.startOffset),f.setEnd(S,y.startOffset+2),h=f.getBoundingClientRect()):y.startOffset-2>0?(f.setStart(S,y.startOffset-2),f.setEnd(S,y.startOffset),h=f.getBoundingClientRect()):h=S.parentNode.getBoundingClientRect()}catch(k){console.error(k,k.stack)}}else h=y.getBoundingClientRect()}}else if(typeof n=="string"&&n.indexOf("#")>-1){let y=n.substring(n.indexOf("#")+1),S=this.document.getElementById(y);if(S)if(r){let f=new Range;f.selectNode(S),h=f.getBoundingClientRect()}else h=S.getBoundingClientRect()}return h&&(m.left=h.left,m.top=h.top),m}addStylesheet(n){return new Promise(function(i,h){var m,y=!1;this.document?(m=this.document.querySelector("link[href='"+n+"']"))?i(!0):((m=this.document.createElement("link")).type="text/css",m.rel="stylesheet",m.href=n,m.onload=m.onreadystatechange=function(){y||this.readyState&&this.readyState!="complete"||(y=!0,setTimeout(()=>{i(!0)},1))},this.document.head.appendChild(m)):i(!1)}.bind(this))}_getStylesheetNode(n){var i;return n="epubjs-inserted-css-"+(n||""),!!this.document&&((i=this.document.getElementById(n))||((i=this.document.createElement("style")).id=n,this.document.head.appendChild(i)),i)}addStylesheetCss(n,i){return!(!this.document||!n)&&(this._getStylesheetNode(i).innerHTML=n,!0)}addStylesheetRules(n,i){var h;if(this.document&&n&&n.length!==0)if(h=this._getStylesheetNode(i).sheet,Object.prototype.toString.call(n)==="[object Array]")for(var m=0,y=n.length;m<y;m++){var S=1,f=n[m],k=n[m][0],M="";Object.prototype.toString.call(f[1][0])==="[object Array]"&&(f=f[1],S=0);for(var X=f.length;S<X;S++){var B=f[S];M+=B[0]+":"+B[1]+(B[2]?" !important":"")+`;
`}h.insertRule(k+"{"+M+"}",h.cssRules.length)}else Object.keys(n).forEach(Z=>{const w=n[Z];if(Array.isArray(w))w.forEach(Q=>{const ct=Object.keys(Q).map(at=>`${at}:${Q[at]}`).join(";");h.insertRule(`${Z}{${ct}}`,h.cssRules.length)});else{const Q=Object.keys(w).map(ct=>`${ct}:${w[ct]}`).join(";");h.insertRule(`${Z}{${Q}}`,h.cssRules.length)}})}addScript(n){return new Promise(function(i,h){var m,y=!1;this.document?((m=this.document.createElement("script")).type="text/javascript",m.async=!0,m.src=n,m.onload=m.onreadystatechange=function(){y||this.readyState&&this.readyState!="complete"||(y=!0,setTimeout(function(){i(!0)},1))},this.document.head.appendChild(m)):i(!1)}.bind(this))}addClass(n){var i;this.document&&(i=this.content||this.document.body)&&i.classList.add(n)}removeClass(n){var i;this.document&&(i=this.content||this.document.body)&&i.classList.remove(n)}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),l.a.forEach(function(n){this.document.addEventListener(n,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(l.a.forEach(function(n){this.document.removeEventListener(n,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(n){this.emit(n.type,n)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(n){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var i=this.window.getSelection();this.triggerSelectedEvent(i)}.bind(this),250)}triggerSelectedEvent(n){var i,h;n&&n.rangeCount>0&&((i=n.getRangeAt(0)).collapsed||(h=new p.a(i,this.cfiBase).toString(),this.emit(l.c.CONTENTS.SELECTED,h),this.emit(l.c.CONTENTS.SELECTED_RANGE,i)))}range(n,i){return new p.a(n).toRange(this.document,i)}cfiFromRange(n,i){return new p.a(n,this.cfiBase,i).toString()}cfiFromNode(n,i){return new p.a(n,this.cfiBase,i).toString()}map(n){return new s.a(n).section()}size(n,i){var h={scale:1,scalable:"no"};this.layoutStyle("scrolling"),n>=0&&(this.width(n),h.width=n,this.css("padding","0 "+n/12+"px")),i>=0&&(this.height(i),h.height=i),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(h)}columns(n,i,h,m,y){let S=Object(a.prefixed)("column-axis"),f=Object(a.prefixed)("column-gap"),k=Object(a.prefixed)("column-width"),M=Object(a.prefixed)("column-fill"),X=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),y==="rtl"&&X==="horizontal"&&this.direction(y),this.width(n),this.height(i),this.viewport({width:n,height:i,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),X==="vertical"?(this.css("padding-top",m/2+"px",!0),this.css("padding-bottom",m/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(S,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",m/2+"px",!0),this.css("padding-right",m/2+"px",!0),this.css(S,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(M,"auto"),this.css(f,m+"px"),this.css(k,h+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(n,i,h){var m="scale("+n+")",y="";this.css("transform-origin","top left"),(i>=0||h>=0)&&(y=" translate("+(i||0)+"px, "+(h||0)+"px )"),this.css("transform",m+y)}fit(n,i,h){var m=this.viewport(),y=parseInt(m.width),S=parseInt(m.height),f=n/y,k=i/S,M=f<k?f:k;if(this.layoutStyle("paginated"),this.width(y),this.height(S),this.overflow("hidden"),this.scaler(M,0,0),this.css("background-size",y*M+"px "+S*M+"px"),this.css("background-color","transparent"),h&&h.properties.includes("page-spread-left")){var X=n-y*M;this.css("margin-left",X+"px")}}direction(n){this.documentElement&&(this.documentElement.style.direction=n)}mapPage(n,i,h,m,y){return new s.a(i,y).page(this,n,h,m)}linksHandler(){Object(u.c)(this.content,n=>{this.emit(l.c.CONTENTS.LINK_CLICKED,n)})}writingMode(n){let i=Object(a.prefixed)("writing-mode");return n&&this.documentElement&&(this.documentElement.style[i]=n),this.window.getComputedStyle(this.documentElement)[i]||""}layoutStyle(n){return n&&(this._layoutStyle=n,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(n,i){return navigator.epubReadingSystem={name:n,version:i,layoutStyle:this.layoutStyle(),hasFeature:function(h){switch(h){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;case"spine-scripting":default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}_()(c.prototype),P.a=c},function(G,P,g){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Underline=P.Highlight=P.Mark=P.Pane=void 0;var E=function(){function r(c,b){for(var n=0;n<b.length;n++){var i=b[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}return function(c,b,n){return b&&r(c.prototype,b),n&&r(c,n),c}}(),_=p(g(49)),a=p(g(50));function p(r){return r&&r.__esModule?r:{default:r}}function s(r,c){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?r:c}function u(r,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);r.prototype=Object.create(c&&c.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(r,c):r.__proto__=c)}function l(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")}P.Pane=function(){function r(c){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;l(this,r),this.target=c,this.element=_.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),a.default.proxyMouse(this.target,this.marks),this.container=b,this.container.appendChild(this.element),this.render()}return E(r,[{key:"addMark",value:function(c){var b=_.default.createElement("g");return this.element.appendChild(b),c.bind(b,this.container),this.marks.push(c),c.render(),c}},{key:"removeMark",value:function(c){var b=this.marks.indexOf(c);if(b!==-1){var n=c.unbind();this.element.removeChild(n),this.marks.splice(b,1)}}},{key:"render",value:function(){var c,b,n,i;(function(k,M){k.style.setProperty("top",M.top+"px","important"),k.style.setProperty("left",M.left+"px","important"),k.style.setProperty("height",M.height+"px","important"),k.style.setProperty("width",M.width+"px","important")})(this.element,(c=this.target,b=this.container,n=b.getBoundingClientRect(),i=c.getBoundingClientRect(),{top:i.top-n.top,left:i.left-n.left,height:c.scrollHeight,width:c.scrollWidth}));var h=!0,m=!1,y=void 0;try{for(var S,f=this.marks[Symbol.iterator]();!(h=(S=f.next()).done);h=!0)S.value.render()}catch(k){m=!0,y=k}finally{try{!h&&f.return&&f.return()}finally{if(m)throw y}}}}]),r}();var o=P.Mark=function(){function r(){l(this,r),this.element=null}return E(r,[{key:"bind",value:function(c,b){this.element=c,this.container=b}},{key:"unbind",value:function(){var c=this.element;return this.element=null,c}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(c){this.element&&this.element.dispatchEvent(c)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var c=[],b=this.element.firstChild;b;)c.push(b.getBoundingClientRect()),b=b.nextSibling;return c}},{key:"filteredRanges",value:function(){var c=Array.from(this.range.getClientRects());return c.filter(function(b){for(var n=0;n<c.length;n++){if(c[n]===b)return!0;if(i=c[n],(h=b).right<=i.right&&h.left>=i.left&&h.top>=i.top&&h.bottom<=i.bottom)return!1}var i,h;return!0})}}]),r}(),x=P.Highlight=function(r){function c(b,n,i,h){l(this,c);var m=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return m.range=b,m.className=n,m.data=i||{},m.attributes=h||{},m}return u(c,r),E(c,[{key:"bind",value:function(b,n){for(var i in function h(m,y,S){m===null&&(m=Function.prototype);var f=Object.getOwnPropertyDescriptor(m,y);if(f===void 0){var k=Object.getPrototypeOf(m);return k===null?void 0:h(k,y,S)}if("value"in f)return f.value;var M=f.get;return M!==void 0?M.call(S):void 0}(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"bind",this).call(this,b,n),this.data)this.data.hasOwnProperty(i)&&(this.element.dataset[i]=this.data[i]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&this.element.setAttribute(i,this.attributes[i]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var b=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),i=this.element.getBoundingClientRect(),h=this.container.getBoundingClientRect(),m=0,y=n.length;m<y;m++){var S=n[m],f=_.default.createElement("rect");f.setAttribute("x",S.left-i.left+h.left),f.setAttribute("y",S.top-i.top+h.top),f.setAttribute("height",S.height),f.setAttribute("width",S.width),b.appendChild(f)}this.element.appendChild(b)}}]),c}(o);P.Underline=function(r){function c(b,n,i,h){return l(this,c),s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,b,n,i,h))}return u(c,r),E(c,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var b=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),i=this.element.getBoundingClientRect(),h=this.container.getBoundingClientRect(),m=0,y=n.length;m<y;m++){var S=n[m],f=_.default.createElement("rect");f.setAttribute("x",S.left-i.left+h.left),f.setAttribute("y",S.top-i.top+h.top),f.setAttribute("height",S.height),f.setAttribute("width",S.width),f.setAttribute("fill","none");var k=_.default.createElement("line");k.setAttribute("x1",S.left-i.left+h.left),k.setAttribute("x2",S.left-i.left+h.left+S.width),k.setAttribute("y1",S.top-i.top+h.top+S.height-1),k.setAttribute("y2",S.top-i.top+h.top+S.height-1),k.setAttribute("stroke-width",1),k.setAttribute("stroke","black"),k.setAttribute("stroke-linecap","square"),b.appendChild(f),b.appendChild(k)}this.element.appendChild(b)}}]),c}(x)},function(G,P,g){"use strict";function E(p,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(p):p}var _=E({HTML:"text/html",isHTML:function(p){return p===_.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),a=E({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(p){return p===a.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});P.freeze=E,P.MIME_TYPE=_,P.NAMESPACE=a},function(G,P,g){var E=g(25);P.DOMImplementation=E.DOMImplementation,P.XMLSerializer=E.XMLSerializer,P.DOMParser=g(46).DOMParser},function(G,P,g){"use strict";var E=g(3),_=g.n(E),a=g(0),p=g(6),s=g(2),u=g(9),l=g(1);class o{constructor(f){this.settings=f,this.name=f.layout||"reflowable",this._spread=f.spread!=="none",this._minSpreadWidth=f.minSpreadWidth||800,this._evenSpreads=f.evenSpreads||!1,f.flow==="scrolled"||f.flow==="scrolled-continuous"||f.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(f){return f!==void 0&&(this._flow=f==="scrolled"||f==="scrolled-continuous"||f==="scrolled-doc"?"scrolled":"paginated",this.update({flow:this._flow})),this._flow}spread(f,k){return f&&(this._spread=f!=="none",this.update({spread:this._spread})),k>=0&&(this._minSpreadWidth=k),this._spread}calculate(f,k,M){var X,B,Z,w,Q=1,ct=M||0,at=f,St=k,ut=Math.floor(at/12);Q=this._spread&&at>=this._minSpreadWidth?2:1,this.name!=="reflowable"||this._flow!=="paginated"||M>=0||(ct=ut%2==0?ut:ut-1),this.name==="pre-paginated"&&(ct=0),Q>1?Z=(X=at/Q-ct)+ct:(X=at,Z=at),this.name==="pre-paginated"&&Q>1&&(at=X),B=X*Q+ct,w=at,this.width=at,this.height=St,this.spreadWidth=B,this.pageWidth=Z,this.delta=w,this.columnWidth=X,this.gap=ct,this.divisor=Q,this.update({width:at,height:St,spreadWidth:B,pageWidth:Z,delta:w,columnWidth:X,gap:ct,divisor:Q})}format(f,k,M){return this.name==="pre-paginated"?f.fit(this.columnWidth,this.height,k):this._flow==="paginated"?f.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):M&&M==="horizontal"?f.size(null,this.height):f.size(this.width,null)}count(f,k){let M,X;return this.name==="pre-paginated"?(M=1,X=1):this._flow==="paginated"?(k=k||this.delta,M=Math.ceil(f/k),X=M*this.divisor):(k=k||this.height,M=Math.ceil(f/k),X=M),{spreads:M,pages:X}}update(f){if(Object.keys(f).forEach(k=>{this.props[k]===f[k]&&delete f[k]}),Object.keys(f).length>0){let k=Object(a.extend)(this.props,f);this.emit(l.c.LAYOUT.UPDATED,k,f)}}}_()(o.prototype);var x=o,r=g(5),c=class{constructor(S){this.rendition=S,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0)return arguments.length===1&&typeof arguments[0]=="object"?this.registerThemes(arguments[0]):arguments.length===1&&typeof arguments[0]=="string"?this.default(arguments[0]):arguments.length===2&&typeof arguments[1]=="string"?this.registerUrl(arguments[0],arguments[1]):arguments.length===2&&typeof arguments[1]=="object"?this.registerRules(arguments[0],arguments[1]):void 0}default(S){if(S)return typeof S=="string"?this.registerUrl("default",S):typeof S=="object"?this.registerRules("default",S):void 0}registerThemes(S){for(var f in S)S.hasOwnProperty(f)&&(typeof S[f]=="string"?this.registerUrl(f,S[f]):this.registerRules(f,S[f]))}registerCss(S,f){this._themes[S]={serialized:f},(this._injected[S]||S=="default")&&this.update(S)}registerUrl(S,f){var k=new r.a(f);this._themes[S]={url:k.toString()},(this._injected[S]||S=="default")&&this.update(S)}registerRules(S,f){this._themes[S]={rules:f},(this._injected[S]||S=="default")&&this.update(S)}select(S){var f=this._current;this._current=S,this.update(S),this.rendition.getContents().forEach(k=>{k.removeClass(f),k.addClass(S)})}update(S){this.rendition.getContents().forEach(f=>{this.add(S,f)})}inject(S){var f,k=[],M=this._themes;for(var X in M)!M.hasOwnProperty(X)||X!==this._current&&X!=="default"||(((f=M[X]).rules&&Object.keys(f.rules).length>0||f.url&&k.indexOf(f.url)===-1)&&this.add(X,S),this._injected.push(X));this._current!="default"&&S.addClass(this._current)}add(S,f){var k=this._themes[S];k&&f&&(k.url?f.addStylesheet(k.url):k.serialized?(f.addStylesheetCss(k.serialized,S),k.injected=!0):k.rules&&(f.addStylesheetRules(k.rules,S),k.injected=!0))}override(S,f,k){var M=this.rendition.getContents();this._overrides[S]={value:f,priority:k===!0},M.forEach(X=>{X.css(S,this._overrides[S].value,this._overrides[S].priority)})}removeOverride(S){var f=this.rendition.getContents();delete this._overrides[S],f.forEach(k=>{k.css(S)})}overrides(S){var f=this._overrides;for(var k in f)f.hasOwnProperty(k)&&S.css(k,f[k].value,f[k].priority)}fontSize(S){this.override("font-size",S)}font(S){this.override("font-family",S,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}};g(12);class b{constructor({type:f,cfiRange:k,data:M,sectionIndex:X,cb:B,className:Z,styles:w}){this.type=f,this.cfiRange=k,this.data=M,this.sectionIndex=X,this.mark=void 0,this.cb=B,this.className=Z,this.styles=w}update(f){this.data=f}attach(f){let k,{cfiRange:M,data:X,type:B,mark:Z,cb:w,className:Q,styles:ct}=this;return B==="highlight"?k=f.highlight(M,X,w,Q,ct):B==="underline"?k=f.underline(M,X,w,Q,ct):B==="mark"&&(k=f.mark(M,X,w)),this.mark=k,this.emit(l.c.ANNOTATION.ATTACH,k),k}detach(f){let k,{cfiRange:M,type:X}=this;return f&&(X==="highlight"?k=f.unhighlight(M):X==="underline"?k=f.ununderline(M):X==="mark"&&(k=f.unmark(M))),this.mark=void 0,this.emit(l.c.ANNOTATION.DETACH,k),k}text(){}}_()(b.prototype);var n=class{constructor(S){this.rendition=S,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(S,f,k,M,X,B){let Z=encodeURI(f+S),w=new s.a(f).spinePos,Q=new b({type:S,cfiRange:f,data:k,sectionIndex:w,cb:M,className:X,styles:B});return this._annotations[Z]=Q,w in this._annotationsBySectionIndex?this._annotationsBySectionIndex[w].push(Z):this._annotationsBySectionIndex[w]=[Z],this.rendition.views().forEach(ct=>{Q.sectionIndex===ct.index&&Q.attach(ct)}),Q}remove(S,f){let k=encodeURI(S+f);if(k in this._annotations){let M=this._annotations[k];if(f&&M.type!==f)return;this.rendition.views().forEach(X=>{this._removeFromAnnotationBySectionIndex(M.sectionIndex,k),M.sectionIndex===X.index&&M.detach(X)}),delete this._annotations[k]}}_removeFromAnnotationBySectionIndex(S,f){this._annotationsBySectionIndex[S]=this._annotationsAt(S).filter(k=>k!==f)}_annotationsAt(S){return this._annotationsBySectionIndex[S]}highlight(S,f,k,M,X){return this.add("highlight",S,f,k,M,X)}underline(S,f,k,M,X){return this.add("underline",S,f,k,M,X)}mark(S,f,k){return this.add("mark",S,f,k)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(S){let f=S.index;f in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[f].forEach(k=>{this._annotations[k].attach(S)})}clear(S){let f=S.index;f in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[f].forEach(k=>{this._annotations[k].detach(S)})}show(){}hide(){}},i=g(20),h=g(10),m=g(22);class y{constructor(f,k){this.settings=Object(a.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Object(a.extend)(this.settings,k),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=f,this.hooks={},this.hooks.display=new p.a(this),this.hooks.serialize=new p.a(this),this.hooks.content=new p.a(this),this.hooks.unloaded=new p.a(this),this.hooks.layout=new p.a(this),this.hooks.render=new p.a(this),this.hooks.show=new p.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new c(this),this.annotations=new n(this),this.epubcfi=new s.a,this.q=new u.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new a.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(f){this.manager=f}requireManager(f){return typeof f=="string"&&f==="default"?h.a:typeof f=="string"&&f==="continuous"?m.a:f}requireView(f){return typeof f=="string"&&f==="iframe"?i.a:f}start(){switch(this.settings.layout||this.book.package.metadata.layout!=="pre-paginated"&&this.book.displayOptions.fixedLayout!=="true"||(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(l.c.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(l.c.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(l.c.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(l.c.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(l.c.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(l.c.RENDITION.STARTED),this.starting.resolve()}attachTo(f){return this.q.enqueue(function(){this.manager.render(f,{width:this.settings.width,height:this.settings.height}),this.emit(l.c.RENDITION.ATTACHED)}.bind(this))}display(f){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,f)}_display(f){if(this.book){this.epubcfi.isCfiString(f);var k,M=new a.defer,X=M.promise;return this.displaying=M,this.book.locations.length()&&Object(a.isFloat)(f)&&(f=this.book.locations.cfiFromPercentage(parseFloat(f))),(k=this.book.spine.get(f))?(this.manager.display(k,f).then(()=>{M.resolve(k),this.displaying=void 0,this.emit(l.c.RENDITION.DISPLAYED,k),this.reportLocation()},B=>{this.emit(l.c.RENDITION.DISPLAY_ERROR,B)}),X):(M.reject(new Error("No Section Found")),X)}}afterDisplayed(f){f.on(l.c.VIEWS.MARK_CLICKED,(k,M)=>this.triggerMarkEvent(k,M,f.contents)),this.hooks.render.trigger(f,this).then(()=>{f.contents?this.hooks.content.trigger(f.contents,this).then(()=>{this.emit(l.c.RENDITION.RENDERED,f.section,f)}):this.emit(l.c.RENDITION.RENDERED,f.section,f)})}afterRemoved(f){this.hooks.unloaded.trigger(f,this).then(()=>{this.emit(l.c.RENDITION.REMOVED,f.section,f)})}onResized(f,k){this.emit(l.c.RENDITION.RESIZED,{width:f.width,height:f.height},k),this.location&&this.location.start&&this.display(k||this.location.start.cfi)}onOrientationChange(f){this.emit(l.c.RENDITION.ORIENTATION_CHANGE,f)}moveTo(f){this.manager.moveTo(f)}resize(f,k,M){f&&(this.settings.width=f),k&&(this.settings.height=k),this.manager.resize(f,k,M)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(f){var k=this.settings.layout||f.layout||"reflowable",M=this.settings.spread||f.spread||"auto",X=this.settings.orientation||f.orientation||"auto",B=this.settings.flow||f.flow||"auto",Z=f.viewport||"",w=this.settings.minSpreadWidth||f.minSpreadWidth||800,Q=this.settings.direction||f.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height),{layout:k,spread:M,orientation:X,flow:B,viewport:Z,minSpreadWidth:w,direction:Q}}flow(f){var k=f;f!=="scrolled"&&f!=="scrolled-doc"&&f!=="scrolled-continuous"||(k="scrolled"),f!=="auto"&&f!=="paginated"||(k="paginated"),this.settings.flow=f,this._layout&&this._layout.flow(k),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(k),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(f){return f&&(this._layout=new x(f),this._layout.spread(f.spread,this.settings.minSpreadWidth),this._layout.on(l.c.LAYOUT.UPDATED,(k,M)=>{this.emit(l.c.RENDITION.LAYOUT,k,M)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(f,k){this.settings.spread=f,k&&(this.settings.minSpreadWidth=k),this._layout&&this._layout.spread(f,k),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(f){this.settings.direction=f||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue(function(){requestAnimationFrame(function(){var f=this.manager.currentLocation();if(f&&f.then&&typeof f.then=="function")f.then(function(k){let M=this.located(k);M&&M.start&&M.end&&(this.location=M,this.emit(l.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(l.c.RENDITION.RELOCATED,this.location))}.bind(this));else if(f){let k=this.located(f);if(!k||!k.start||!k.end)return;this.location=k,this.emit(l.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(l.c.RENDITION.RELOCATED,this.location)}}.bind(this))}.bind(this))}currentLocation(){var f=this.manager.currentLocation();if(f&&f.then&&typeof f.then=="function")f.then(function(k){return this.located(k)}.bind(this));else if(f)return this.located(f)}located(f){if(!f.length)return{};let k=f[0],M=f[f.length-1],X={start:{index:k.index,href:k.href,cfi:k.mapping.start,displayed:{page:k.pages[0]||1,total:k.totalPages}},end:{index:M.index,href:M.href,cfi:M.mapping.end,displayed:{page:M.pages[M.pages.length-1]||1,total:M.totalPages}}},B=this.book.locations.locationFromCfi(k.mapping.start),Z=this.book.locations.locationFromCfi(M.mapping.end);B!=null&&(X.start.location=B,X.start.percentage=this.book.locations.percentageFromLocation(B)),Z!=null&&(X.end.location=Z,X.end.percentage=this.book.locations.percentageFromLocation(Z));let w=this.book.pageList.pageFromCfi(k.mapping.start),Q=this.book.pageList.pageFromCfi(M.mapping.end);return w!=-1&&(X.start.page=w),Q!=-1&&(X.end.page=Q),M.index===this.book.spine.last().index&&X.end.displayed.page>=X.end.displayed.total&&(X.atEnd=!0),k.index===this.book.spine.first().index&&X.start.displayed.page===1&&(X.atStart=!0),X}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(f){l.a.forEach(k=>{f.on(k,M=>this.triggerViewEvent(M,f))}),f.on(l.c.CONTENTS.SELECTED,k=>this.triggerSelectedEvent(k,f))}triggerViewEvent(f,k){this.emit(f.type,f,k)}triggerSelectedEvent(f,k){this.emit(l.c.RENDITION.SELECTED,f,k)}triggerMarkEvent(f,k,M){this.emit(l.c.RENDITION.MARK_CLICKED,f,k,M)}getRange(f,k){var M=new s.a(f),X=this.manager.visible().filter(function(B){if(M.spinePos===B.index)return!0});if(X.length)return X[0].contents.range(M,k)}adjustImages(f){if(this._layout.name==="pre-paginated")return new Promise(function(B){B()});let k=f.window.getComputedStyle(f.content,null),M=.95*(f.content.offsetHeight-(parseFloat(k.paddingTop)+parseFloat(k.paddingBottom))),X=parseFloat(k.paddingLeft)+parseFloat(k.paddingRight);return f.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-X+"px":"100%")+"!important","max-height":M+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-X+"px":"100%")+"!important","max-height":M+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(B,Z){setTimeout(function(){B()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(f){f&&f.on(l.c.CONTENTS.LINK_CLICKED,k=>{let M=this.book.path.relative(k);this.display(M)})}injectStylesheet(f,k){let M=f.createElement("link");M.setAttribute("type","text/css"),M.setAttribute("rel","stylesheet"),M.setAttribute("href",this.settings.stylesheet),f.getElementsByTagName("head")[0].appendChild(M)}injectScript(f,k){let M=f.createElement("script");M.setAttribute("type","text/javascript"),M.setAttribute("src",this.settings.script),M.textContent=" ",f.getElementsByTagName("head")[0].appendChild(M)}injectIdentifier(f,k){let M=this.book.packaging.metadata.identifier,X=f.createElement("meta");X.setAttribute("name","dc.relation.ispartof"),M&&X.setAttribute("content",M),f.getElementsByTagName("head")[0].appendChild(X)}}_()(y.prototype),P.a=y},function(G,P){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch{typeof window=="object"&&(g=window)}G.exports=g},function(G,P,g){"use strict";var E=g(38)();G.exports=function(_){return _!==E&&_!==null}},function(G,P){G.exports=function(g){var E=typeof g;return g!=null&&(E=="object"||E=="function")}},function(G,P,g){"use strict";var E=g(3),_=g.n(E),a=g(0),p=g(2),s=g(12),u=g(1),l=g(13);class o{constructor(r,c){this.settings=Object(a.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},c||{}),this.id="epubjs-view-"+Object(a.uuid)(),this.section=r,this.index=r.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new p.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(r){var c=document.createElement("div");return c.classList.add("epub-view"),c.style.height="0px",c.style.width="0px",c.style.overflow="hidden",c.style.position="relative",c.style.display="block",c.style.flex=r&&r=="horizontal"?"none":"initial",c}create(){return this.iframe||(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Object(a.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write")),this.iframe}render(r,c){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(r)),this.sectionRender.then(function(b){return this.load(b)}.bind(this)).then(function(){let b,n=this.contents.writingMode();return b=this.settings.flow==="scrolled"?n.indexOf("vertical")===0?"horizontal":"vertical":n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(b),this.emit(u.c.VIEWS.AXIS,b),this.setWritingMode(n),this.emit(u.c.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((i,h)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),i()})}.bind(this),function(b){return this.emit(u.c.VIEWS.LOAD_ERROR,b),new Promise((n,i)=>{i(b)})}.bind(this)).then(function(){this.emit(u.c.VIEWS.RENDERED,this.section)}.bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(r,c){var b=r||this.settings.width,n=c||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",b,n):this.settings.axis==="horizontal"?this.lock("height",b,n):this.lock("width",b,n),this.settings.width=b,this.settings.height=n}lock(r,c,b){var n,i=Object(a.borders)(this.element);n=this.iframe?Object(a.borders)(this.iframe):{width:0,height:0},r=="width"&&Object(a.isNumber)(c)&&(this.lockedWidth=c-i.width-n.width),r=="height"&&Object(a.isNumber)(b)&&(this.lockedHeight=b-i.height-n.height),r==="both"&&Object(a.isNumber)(c)&&Object(a.isNumber)(b)&&(this.lockedWidth=c-i.width-n.width,this.lockedHeight=b-i.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(r){var c,b=this.lockedWidth,n=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,this.layout.name==="pre-paginated"?(b=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?((b=this.contents.textWidth())%this.layout.pageWidth>0&&(b=Math.ceil(b/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(c=b/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&c%2>0&&(b+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||b!=this._width||n!=this._height)&&this.reframe(b,n),this._expanding=!1)}reframe(r,c){var b;Object(a.isNumber)(r)&&(this.element.style.width=r+"px",this.iframe.style.width=r+"px",this._width=r),Object(a.isNumber)(c)&&(this.element.style.height=c+"px",this.iframe.style.height=c+"px",this._height=c),b={width:r,height:c,widthDelta:this.prevBounds?r-this.prevBounds.width:r,heightDelta:this.prevBounds?c-this.prevBounds.height:c},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let n;for(let i in this.marks)this.marks.hasOwnProperty(i)&&(n=this.marks[i],this.placeMark(n.element,n.range))}),this.onResize(this,b),this.emit(u.c.VIEWS.RESIZED,b),this.prevBounds=b,this.elementBounds=Object(a.bounds)(this.element)}load(r){var c=new a.defer,b=c.promise;if(!this.iframe)return c.reject(new Error("No Iframe Available")),b;if(this.iframe.onload=function(i){this.onLoad(i,c)}.bind(this),this.settings.method==="blobUrl")this.blobUrl=Object(a.createBlobUrl)(r,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=r,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return c.reject(new Error("No Document Available")),b;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(r)})}else this.iframe.contentDocument.write(r);this.iframe.contentDocument.close()}return b}onLoad(r,c){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new s.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var b=this.document.querySelector("link[rel='canonical']");b?b.setAttribute("href",this.section.canonical):((b=this.document.createElement("link")).setAttribute("rel","canonical"),b.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(b)),this.contents.on(u.c.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(u.c.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),c.resolve(this.contents)}setLayout(r){this.layout=r,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(r){this.settings.axis=r,this.element.style.flex=r=="horizontal"?"none":"initial",this.size()}setWritingMode(r){this.writingMode=r}addListeners(){}removeListeners(r){}display(r){var c=new a.defer;return this.displayed?c.resolve(this):this.render(r).then(function(){this.emit(u.c.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,c.resolve(this)}.bind(this),function(b){c.reject(b,this)}),c.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(u.c.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(u.c.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(r){this.iframe.getBoundingClientRect();var c=this.contents.locationOf(r,this.settings.ignoreClass);return{left:c.left,top:c.top}}onDisplayed(r){}onResize(r,c){}bounds(r){return!r&&this.elementBounds||(this.elementBounds=Object(a.bounds)(this.element)),this.elementBounds}highlight(r,c={},b,n="epubjs-hl",i={}){if(!this.contents)return;const h=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},i);let m=this.contents.range(r),y=()=>{this.emit(u.c.VIEWS.MARK_CLICKED,r,c)};c.epubcfi=r,this.pane||(this.pane=new l.Pane(this.iframe,this.element));let S=new l.Highlight(m,n,c,h),f=this.pane.addMark(S);return this.highlights[r]={mark:f,element:f.element,listeners:[y,b]},f.element.setAttribute("ref",n),f.element.addEventListener("click",y),f.element.addEventListener("touchstart",y),b&&(f.element.addEventListener("click",b),f.element.addEventListener("touchstart",b)),f}underline(r,c={},b,n="epubjs-ul",i={}){if(!this.contents)return;const h=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},i);let m=this.contents.range(r),y=()=>{this.emit(u.c.VIEWS.MARK_CLICKED,r,c)};c.epubcfi=r,this.pane||(this.pane=new l.Pane(this.iframe,this.element));let S=new l.Underline(m,n,c,h),f=this.pane.addMark(S);return this.underlines[r]={mark:f,element:f.element,listeners:[y,b]},f.element.setAttribute("ref",n),f.element.addEventListener("click",y),f.element.addEventListener("touchstart",y),b&&(f.element.addEventListener("click",b),f.element.addEventListener("touchstart",b)),f}mark(r,c={},b){if(!this.contents)return;if(r in this.marks)return this.marks[r];let n=this.contents.range(r);if(!n)return;let i=n.commonAncestorContainer,h=i.nodeType===1?i:i.parentNode,m=S=>{this.emit(u.c.VIEWS.MARK_CLICKED,r,c)};n.collapsed&&i.nodeType===1?(n=new Range,n.selectNodeContents(i)):n.collapsed&&(n=new Range,n.selectNodeContents(h));let y=this.document.createElement("a");return y.setAttribute("ref","epubjs-mk"),y.style.position="absolute",y.dataset.epubcfi=r,c&&Object.keys(c).forEach(S=>{y.dataset[S]=c[S]}),b&&(y.addEventListener("click",b),y.addEventListener("touchstart",b)),y.addEventListener("click",m),y.addEventListener("touchstart",m),this.placeMark(y,n),this.element.appendChild(y),this.marks[r]={element:y,range:n,listeners:[m,b]},h}placeMark(r,c){let b,n,i;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let m=c.getBoundingClientRect();b=m.top,n=m.right}else{let m,y=c.getClientRects();for(var h=0;h!=y.length;h++)m=y[h],(!i||m.left<i)&&(i=m.left,n=Math.ceil(i/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,b=m.top)}r.style.top=b+"px",r.style.left=n+"px"}unhighlight(r){let c;r in this.highlights&&(c=this.highlights[r],this.pane.removeMark(c.mark),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.highlights[r])}ununderline(r){let c;r in this.underlines&&(c=this.underlines[r],this.pane.removeMark(c.mark),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.underlines[r])}unmark(r){let c;r in this.marks&&(c=this.marks[r],this.element.removeChild(c.element),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.marks[r])}destroy(){for(let r in this.highlights)this.unhighlight(r);for(let r in this.underlines)this.ununderline(r);for(let r in this.marks)this.unmark(r);this.blobUrl&&Object(a.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}_()(o.prototype),P.a=o},function(G,P,g){var E=g(19),_=g(51),a=g(53),p=Math.max,s=Math.min;G.exports=function(u,l,o){var x,r,c,b,n,i,h=0,m=!1,y=!1,S=!0;if(typeof u!="function")throw new TypeError("Expected a function");function f(w){var Q=x,ct=r;return x=r=void 0,h=w,b=u.apply(ct,Q)}function k(w){return h=w,n=setTimeout(X,l),m?f(w):b}function M(w){var Q=w-i;return i===void 0||Q>=l||Q<0||y&&w-h>=c}function X(){var w=_();if(M(w))return B(w);n=setTimeout(X,function(Q){var ct=l-(Q-i);return y?s(ct,c-(Q-h)):ct}(w))}function B(w){return n=void 0,S&&x?f(w):(x=r=void 0,b)}function Z(){var w=_(),Q=M(w);if(x=arguments,r=this,i=w,Q){if(n===void 0)return k(i);if(y)return clearTimeout(n),n=setTimeout(X,l),f(i)}return n===void 0&&(n=setTimeout(X,l)),b}return l=a(l)||0,E(o)&&(m=!!o.leading,c=(y="maxWait"in o)?p(a(o.maxWait)||0,l):c,S="trailing"in o?!!o.trailing:S),Z.cancel=function(){n!==void 0&&clearTimeout(n),h=0,x=i=r=n=void 0},Z.flush=function(){return n===void 0?b:B(_())},Z}},function(G,P,g){"use strict";var E=g(0),_=g(10),a=g(1),p=g(3),s=g.n(p);const u=Math.PI/2,l={easeOutSine:function(n){return Math.sin(n*u)},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n)-1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*Math.pow(n,5):.5*(Math.pow(n-2,5)+2)},easeInCubic:function(n){return Math.pow(n,3)}};class o{constructor(i,h){this.settings=Object(E.extend)({duration:80,minVelocity:.2,minDistance:10,easing:l.easeInCubic},h||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(i)}setup(i){this.manager=i,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical=this.manager.settings.axis==="vertical",this.manager.isPaginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(a.c.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(a.c.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(i){let h=i.contents;["touchstart","touchmove","touchend"].forEach(m=>{h.on(m,y=>this.triggerViewEvent(y,h))})}triggerViewEvent(i,h){this.emit(i.type,i,h)}onScroll(i){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(i){this.resizeCanceler=!0}onTouchStart(i){let{screenX:h,screenY:m}=i.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=h,this.startTouchY=m,this.startTime=this.now()),this.endTouchX=h,this.endTouchY=m,this.endTime=this.now()}onTouchMove(i){let{screenX:h,screenY:m}=i.touches[0],y=Math.abs(m-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&y<10&&(this.element.scrollLeft-=h-this.endTouchX),this.endTouchX=h,this.endTouchY=m,this.endTime=this.now()}onTouchEnd(i){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let h=this.wasSwiped();h!==0?this.snap(h):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let i=this.layout.pageWidth*this.layout.divisor,h=this.endTouchX-this.startTouchX,m=Math.abs(h),y=h/(this.endTime-this.startTime),S=this.settings.minVelocity;return m<=this.settings.minDistance||m>=i?0:y>S?-1:y<-S?1:void 0}needsSnap(){return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!=0}snap(i=0){let h=this.scrollLeft,m=this.layout.pageWidth*this.layout.divisor,y=Math.round(h/m)*m;return i&&(y+=i*m),this.smoothScrollTo(y)}smoothScrollTo(i){const h=new E.defer,m=this.scrollLeft,y=this.now(),S=this.settings.duration,f=this.settings.easing;return this.snapping=!0,function k(){const M=this.now(),X=Math.min(1,(M-y)/S);if(f(X),this.touchCanceler||this.resizeCanceler)return this.resizeCanceler=!1,this.snapping=!1,void h.resolve();X<1?(window.requestAnimationFrame(k.bind(this)),this.scrollTo(m+(i-m)*X,0)):(this.scrollTo(i,0),this.snapping=!1,h.resolve())}.call(this),h.promise}scrollTo(i=0,h=0){this.fullsize?window.scroll(i,h):(this.scroller.scrollLeft=i,this.scroller.scrollTop=h)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}s()(o.prototype);var x=o,r=g(21),c=g.n(r);class b extends _.a{constructor(i){super(i),this.name="continuous",this.settings=Object(E.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Object(E.extend)(this.settings,i.settings||{}),i.settings.gap!="undefined"&&i.settings.gap===0&&(this.settings.gap=i.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(i,h){return _.a.prototype.display.call(this,i,h).then(function(){return this.fill()}.bind(this))}fill(i){var h=i||new E.defer;return this.q.enqueue(()=>this.check()).then(m=>{m?this.fill(h):h.resolve()}),h.promise}moveTo(i){var h=0,m=0;this.isPaginated?(h=Math.floor(i.left/this.layout.delta)*this.layout.delta,this.settings.offsetDelta):(m=i.top,i.top,this.settings.offsetDelta),(h>0||m>0)&&this.scrollBy(h,m,!0)}afterResized(i){this.emit(a.c.MANAGERS.RESIZE,i.section)}removeShownListeners(i){i.onDisplayed=function(){}}add(i){var h=this.createView(i);return this.views.append(h),h.on(a.c.VIEWS.RESIZED,m=>{h.expanded=!0}),h.on(a.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),h.on(a.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),h.onDisplayed=this.afterDisplayed.bind(this),h.onResize=this.afterResized.bind(this),h.display(this.request)}append(i){var h=this.createView(i);return h.on(a.c.VIEWS.RESIZED,m=>{h.expanded=!0}),h.on(a.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),h.on(a.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),this.views.append(h),h.onDisplayed=this.afterDisplayed.bind(this),h}prepend(i){var h=this.createView(i);return h.on(a.c.VIEWS.RESIZED,m=>{this.counter(m),h.expanded=!0}),h.on(a.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),h.on(a.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),this.views.prepend(h),h.onDisplayed=this.afterDisplayed.bind(this),h}counter(i){this.settings.axis==="vertical"?this.scrollBy(0,i.heightDelta,!0):this.scrollBy(i.widthDelta,0,!0)}update(i){for(var h,m=this.bounds(),y=this.views.all(),S=y.length,f=[],k=i!==void 0?i:this.settings.offset||0,M=new E.defer,X=[],B=0;B<S;B++)if(h=y[B],this.isVisible(h,k,k,m)===!0){if(h.displayed)h.show();else{let Z=h.display(this.request).then(function(w){w.show()},w=>{h.hide()});X.push(Z)}f.push(h)}else this.q.enqueue(h.destroy.bind(h)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250);return X.length?Promise.all(X).catch(Z=>{M.reject(Z)}):(M.resolve(),M.promise)}check(i,h){var m=new E.defer,y=[],S=this.settings.axis==="horizontal",f=this.settings.offset||0;i&&S&&(f=i),h&&!S&&(f=h);var k=this._bounds;let M=S?this.scrollLeft:this.scrollTop,X=S?Math.floor(k.width):k.height,B=S?this.container.scrollWidth:this.container.scrollHeight,Z=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",w=this.settings.rtlScrollType,Q=this.settings.direction==="rtl";this.settings.fullsize?(S&&Q&&w==="negative"||!S&&Q&&w==="default")&&(M*=-1):(Q&&w==="default"&&Z==="horizontal"&&(M=B-X-M),Q&&w==="negative"&&Z==="horizontal"&&(M*=-1));let ct=()=>{let ut=this.views.first(),xt=ut&&ut.section.prev();xt&&y.push(this.prepend(xt))},at=M-f;M+X+f>=B&&(()=>{let ut=this.views.last(),xt=ut&&ut.section.next();xt&&y.push(this.append(xt))})(),at<0&&ct();let St=y.map(ut=>ut.display(this.request));return y.length?Promise.all(St).then(()=>this.check()).then(()=>this.update(f),ut=>ut):(this.q.enqueue(function(){this.update()}.bind(this)),m.resolve(!1),m.promise)}trim(){for(var i=new E.defer,h=this.views.displayed(),m=h[0],y=h[h.length-1],S=this.views.indexOf(m),f=this.views.indexOf(y),k=this.views.slice(0,S),M=this.views.slice(f+1),X=0;X<k.length-1;X++)this.erase(k[X],k);for(var B=1;B<M.length;B++)this.erase(M[B]);return i.resolve(),i.promise}erase(i,h){var m,y;this.settings.fullsize?(m=window.scrollY,y=window.scrollX):(m=this.container.scrollTop,y=this.container.scrollLeft);var S=i.bounds();this.views.remove(i),h&&(this.settings.axis==="vertical"?this.scrollTo(0,m-S.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(y+Math.floor(S.width),0,!0):this.scrollTo(y,0,!0):this.scrollTo(y-Math.floor(S.width),0,!0))}addEventListeners(i){window.addEventListener("unload",function(h){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new x(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var i;this.tick=E.requestAnimationFrame;let h=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(i=window,this.scrollTop=window.scrollY*h,this.scrollLeft=window.scrollX*h):(i=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),i.addEventListener("scroll",this._onScroll),this._scrolled=c()(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let i,h,m=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(i=window.scrollY*m,h=window.scrollX*m):(i=this.container.scrollTop,h=this.container.scrollLeft),this.scrollTop=i,this.scrollLeft=h,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(i-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(h-this.prevScrollLeft),this.prevScrollTop=i,this.prevScrollLeft=h,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue(function(){return this.check()}.bind(this)),this.emit(a.c.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(a.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}.bind(this),this.settings.afterScrolledTimeout)}next(){let i=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(i,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}prev(){let i=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-i,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue(function(){return this.check()}.bind(this)))}updateFlow(i){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(i,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new x(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}P.a=b},function(G,P,g){(function(E){G.exports=function _(a,p,s){function u(x,r){if(!p[x]){if(!a[x]){if(l)return l(x,!0);var c=new Error("Cannot find module '"+x+"'");throw c.code="MODULE_NOT_FOUND",c}var b=p[x]={exports:{}};a[x][0].call(b.exports,function(n){var i=a[x][1][n];return u(i||n)},b,b.exports,_,a,p,s)}return p[x].exports}for(var l=!1,o=0;o<s.length;o++)u(s[o]);return u}({1:[function(_,a,p){(function(s){"use strict";var u,l,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var x=0,r=new o(i),c=s.document.createTextNode("");r.observe(c,{characterData:!0}),u=function(){c.data=x=++x%2}}else if(s.setImmediate||s.MessageChannel===void 0)u="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var h=s.document.createElement("script");h.onreadystatechange=function(){i(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},s.document.documentElement.appendChild(h)}:function(){setTimeout(i,0)};else{var b=new s.MessageChannel;b.port1.onmessage=i,u=function(){b.port2.postMessage(0)}}var n=[];function i(){var h,m;l=!0;for(var y=n.length;y;){for(m=n,n=[],h=-1;++h<y;)m[h]();y=n.length}l=!1}a.exports=function(h){n.push(h)!==1||l||u()}}).call(this,E!==void 0?E:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(_,a,p){"use strict";var s=_(1);function u(){}var l={},o=["REJECTED"],x=["FULFILLED"],r=["PENDING"];function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,y!==u&&h(this,y)}function b(y,S,f){this.promise=y,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof f=="function"&&(this.onRejected=f,this.callRejected=this.otherCallRejected)}function n(y,S,f){s(function(){var k;try{k=S(f)}catch(M){return l.reject(y,M)}k===y?l.reject(y,new TypeError("Cannot resolve promise with itself")):l.resolve(y,k)})}function i(y){var S=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof S=="function")return function(){S.apply(y,arguments)}}function h(y,S){var f=!1;function k(B){f||(f=!0,l.reject(y,B))}function M(B){f||(f=!0,l.resolve(y,B))}var X=m(function(){S(M,k)});X.status==="error"&&k(X.value)}function m(y,S){var f={};try{f.value=y(S),f.status="success"}catch(k){f.status="error",f.value=k}return f}a.exports=c,c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,S){if(typeof y!="function"&&this.state===x||typeof S!="function"&&this.state===o)return this;var f=new this.constructor(u);return this.state!==r?n(f,this.state===x?y:S,this.outcome):this.queue.push(new b(f,y,S)),f},b.prototype.callFulfilled=function(y){l.resolve(this.promise,y)},b.prototype.otherCallFulfilled=function(y){n(this.promise,this.onFulfilled,y)},b.prototype.callRejected=function(y){l.reject(this.promise,y)},b.prototype.otherCallRejected=function(y){n(this.promise,this.onRejected,y)},l.resolve=function(y,S){var f=m(i,S);if(f.status==="error")return l.reject(y,f.value);var k=f.value;if(k)h(y,k);else{y.state=x,y.outcome=S;for(var M=-1,X=y.queue.length;++M<X;)y.queue[M].callFulfilled(S)}return y},l.reject=function(y,S){y.state=o,y.outcome=S;for(var f=-1,k=y.queue.length;++f<k;)y.queue[f].callRejected(S);return y},c.resolve=function(y){return y instanceof this?y:l.resolve(new this(u),y)},c.reject=function(y){var S=new this(u);return l.reject(S,y)},c.all=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var f=y.length,k=!1;if(!f)return this.resolve([]);for(var M=new Array(f),X=0,B=-1,Z=new this(u);++B<f;)w(y[B],B);return Z;function w(Q,ct){S.resolve(Q).then(function(at){M[ct]=at,++X!==f||k||(k=!0,l.resolve(Z,M))},function(at){k||(k=!0,l.reject(Z,at))})}},c.race=function(y){var S=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var f=y.length,k=!1;if(!f)return this.resolve([]);for(var M,X=-1,B=new this(u);++X<f;)M=y[X],S.resolve(M).then(function(Z){k||(k=!0,l.resolve(B,Z))},function(Z){k||(k=!0,l.reject(B,Z))});return B}},{1:1}],3:[function(_,a,p){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=_(2))}).call(this,E!==void 0?E:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(_,a,p){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},u=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function l(L,U){L=L||[],U=U||{};try{return new Blob(L,U)}catch(O){if(O.name!=="TypeError")throw O;for(var q=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),T=0;T<L.length;T+=1)q.append(L[T]);return q.getBlob(U.type)}}typeof Promise>"u"&&_(3);var o=Promise;function x(L,U){U&&L.then(function(q){U(null,q)},function(q){U(q)})}function r(L,U,q){typeof U=="function"&&L.then(U),typeof q=="function"&&L.catch(q)}function c(L){return typeof L!="string"&&(console.warn(L+" used as a key, but it is not a string."),L=String(L)),L}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var n=void 0,i={},h=Object.prototype.toString;function m(L){return typeof n=="boolean"?o.resolve(n):function(U){return new o(function(q){var T=U.transaction("local-forage-detect-blob-support","readwrite"),O=l([""]);T.objectStore("local-forage-detect-blob-support").put(O,"key"),T.onabort=function(D){D.preventDefault(),D.stopPropagation(),q(!1)},T.oncomplete=function(){var D=navigator.userAgent.match(/Chrome\/(\d+)/),V=navigator.userAgent.match(/Edge\//);q(V||!D||parseInt(D[1],10)>=43)}}).catch(function(){return!1})}(L).then(function(U){return n=U})}function y(L){var U=i[L.name],q={};q.promise=new o(function(T,O){q.resolve=T,q.reject=O}),U.deferredOperations.push(q),U.dbReady?U.dbReady=U.dbReady.then(function(){return q.promise}):U.dbReady=q.promise}function S(L){var U=i[L.name].deferredOperations.pop();if(U)return U.resolve(),U.promise}function f(L,U){var q=i[L.name].deferredOperations.pop();if(q)return q.reject(U),q.promise}function k(L,U){return new o(function(q,T){if(i[L.name]=i[L.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},L.db){if(!U)return q(L.db);y(L),L.db.close()}var O=[L.name];U&&O.push(L.version);var D=u.open.apply(u,O);U&&(D.onupgradeneeded=function(V){var K=D.result;try{K.createObjectStore(L.storeName),V.oldVersion<=1&&K.createObjectStore("local-forage-detect-blob-support")}catch(st){if(st.name!=="ConstraintError")throw st;console.warn('The database "'+L.name+'" has been upgraded from version '+V.oldVersion+" to version "+V.newVersion+', but the storage "'+L.storeName+'" already exists.')}}),D.onerror=function(V){V.preventDefault(),T(D.error)},D.onsuccess=function(){var V=D.result;V.onversionchange=function(K){K.target.close()},q(V),S(L)}})}function M(L){return k(L,!1)}function X(L){return k(L,!0)}function B(L,U){if(!L.db)return!0;var q=!L.db.objectStoreNames.contains(L.storeName),T=L.version<L.db.version,O=L.version>L.db.version;if(T&&(L.version!==U&&console.warn('The database "'+L.name+`" can't be downgraded from version `+L.db.version+" to version "+L.version+"."),L.version=L.db.version),O||q){if(q){var D=L.db.version+1;D>L.version&&(L.version=D)}return!0}return!1}function Z(L){return l([function(U){for(var q=U.length,T=new ArrayBuffer(q),O=new Uint8Array(T),D=0;D<q;D++)O[D]=U.charCodeAt(D);return T}(atob(L.data))],{type:L.type})}function w(L){return L&&L.__local_forage_encoded_blob}function Q(L){var U=this,q=U._initReady().then(function(){var T=i[U._dbInfo.name];if(T&&T.dbReady)return T.dbReady});return r(q,L,L),q}function ct(L,U,q,T){T===void 0&&(T=1);try{var O=L.db.transaction(L.storeName,U);q(null,O)}catch(D){if(T>0&&(!L.db||D.name==="InvalidStateError"||D.name==="NotFoundError"))return o.resolve().then(function(){if(!L.db||D.name==="NotFoundError"&&!L.db.objectStoreNames.contains(L.storeName)&&L.version<=L.db.version)return L.db&&(L.version=L.db.version+1),X(L)}).then(function(){return function(V){y(V);for(var K=i[V.name],st=K.forages,ht=0;ht<st.length;ht++){var ft=st[ht];ft._dbInfo.db&&(ft._dbInfo.db.close(),ft._dbInfo.db=null)}return V.db=null,M(V).then(function(kt){return V.db=kt,B(V)?X(V):kt}).then(function(kt){V.db=K.db=kt;for(var Lt=0;Lt<st.length;Lt++)st[Lt]._dbInfo.db=kt}).catch(function(kt){throw f(V,kt),kt})}(L).then(function(){ct(L,U,q,T-1)})}).catch(q);q(D)}}var at={_driver:"asyncStorage",_initStorage:function(L){var U=this,q={db:null};if(L)for(var T in L)q[T]=L[T];var O=i[q.name];O||(O={forages:[],db:null,dbReady:null,deferredOperations:[]},i[q.name]=O),O.forages.push(U),U._initReady||(U._initReady=U.ready,U.ready=Q);var D=[];function V(){return o.resolve()}for(var K=0;K<O.forages.length;K++){var st=O.forages[K];st!==U&&D.push(st._initReady().catch(V))}var ht=O.forages.slice(0);return o.all(D).then(function(){return q.db=O.db,M(q)}).then(function(ft){return q.db=ft,B(q,U._defaultConfig.version)?X(q):ft}).then(function(ft){q.db=O.db=ft,U._dbInfo=q;for(var kt=0;kt<ht.length;kt++){var Lt=ht[kt];Lt!==U&&(Lt._dbInfo.db=q.db,Lt._dbInfo.version=q.version)}})},_support:function(){try{if(!u||!u.open)return!1;var L=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),U=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!L||U)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(L,U){var q=this,T=new o(function(O,D){q.ready().then(function(){ct(q._dbInfo,"readonly",function(V,K){if(V)return D(V);try{var st=K.objectStore(q._dbInfo.storeName).openCursor(),ht=1;st.onsuccess=function(){var ft=st.result;if(ft){var kt=ft.value;w(kt)&&(kt=Z(kt));var Lt=L(kt,ft.key,ht++);Lt!==void 0?O(Lt):ft.continue()}else O()},st.onerror=function(){D(st.error)}}catch(ft){D(ft)}})}).catch(D)});return x(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,D){q.ready().then(function(){ct(q._dbInfo,"readonly",function(V,K){if(V)return D(V);try{var st=K.objectStore(q._dbInfo.storeName).get(L);st.onsuccess=function(){var ht=st.result;ht===void 0&&(ht=null),w(ht)&&(ht=Z(ht)),O(ht)},st.onerror=function(){D(st.error)}}catch(ht){D(ht)}})}).catch(D)});return x(T,U),T},setItem:function(L,U,q){var T=this;L=c(L);var O=new o(function(D,V){var K;T.ready().then(function(){return K=T._dbInfo,h.call(U)==="[object Blob]"?m(K.db).then(function(st){return st?U:(ht=U,new o(function(ft,kt){var Lt=new FileReader;Lt.onerror=kt,Lt.onloadend=function(jt){var zt=btoa(jt.target.result||"");ft({__local_forage_encoded_blob:!0,data:zt,type:ht.type})},Lt.readAsBinaryString(ht)}));var ht}):U}).then(function(st){ct(T._dbInfo,"readwrite",function(ht,ft){if(ht)return V(ht);try{var kt=ft.objectStore(T._dbInfo.storeName);st===null&&(st=void 0);var Lt=kt.put(st,L);ft.oncomplete=function(){st===void 0&&(st=null),D(st)},ft.onabort=ft.onerror=function(){var jt=Lt.error?Lt.error:Lt.transaction.error;V(jt)}}catch(jt){V(jt)}})}).catch(V)});return x(O,q),O},removeItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,D){q.ready().then(function(){ct(q._dbInfo,"readwrite",function(V,K){if(V)return D(V);try{var st=K.objectStore(q._dbInfo.storeName).delete(L);K.oncomplete=function(){O()},K.onerror=function(){D(st.error)},K.onabort=function(){var ht=st.error?st.error:st.transaction.error;D(ht)}}catch(ht){D(ht)}})}).catch(D)});return x(T,U),T},clear:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){ct(U._dbInfo,"readwrite",function(D,V){if(D)return O(D);try{var K=V.objectStore(U._dbInfo.storeName).clear();V.oncomplete=function(){T()},V.onabort=V.onerror=function(){var st=K.error?K.error:K.transaction.error;O(st)}}catch(st){O(st)}})}).catch(O)});return x(q,L),q},length:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){ct(U._dbInfo,"readonly",function(D,V){if(D)return O(D);try{var K=V.objectStore(U._dbInfo.storeName).count();K.onsuccess=function(){T(K.result)},K.onerror=function(){O(K.error)}}catch(st){O(st)}})}).catch(O)});return x(q,L),q},key:function(L,U){var q=this,T=new o(function(O,D){L<0?O(null):q.ready().then(function(){ct(q._dbInfo,"readonly",function(V,K){if(V)return D(V);try{var st=K.objectStore(q._dbInfo.storeName),ht=!1,ft=st.openKeyCursor();ft.onsuccess=function(){var kt=ft.result;kt?L===0||ht?O(kt.key):(ht=!0,kt.advance(L)):O(null)},ft.onerror=function(){D(ft.error)}}catch(kt){D(kt)}})}).catch(D)});return x(T,U),T},keys:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){ct(U._dbInfo,"readonly",function(D,V){if(D)return O(D);try{var K=V.objectStore(U._dbInfo.storeName).openKeyCursor(),st=[];K.onsuccess=function(){var ht=K.result;ht?(st.push(ht.key),ht.continue()):T(st)},K.onerror=function(){O(K.error)}}catch(ht){O(ht)}})}).catch(O)});return x(q,L),q},dropInstance:function(L,U){U=b.apply(this,arguments);var q=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||q.name,L.storeName=L.storeName||q.storeName);var T,O=this;if(L.name){var D=L.name===q.name&&O._dbInfo.db,V=D?o.resolve(O._dbInfo.db):M(L).then(function(K){var st=i[L.name],ht=st.forages;st.db=K;for(var ft=0;ft<ht.length;ft++)ht[ft]._dbInfo.db=K;return K});T=L.storeName?V.then(function(K){if(K.objectStoreNames.contains(L.storeName)){var st=K.version+1;y(L);var ht=i[L.name],ft=ht.forages;K.close();for(var kt=0;kt<ft.length;kt++){var Lt=ft[kt];Lt._dbInfo.db=null,Lt._dbInfo.version=st}return new o(function(jt,zt){var Xt=u.open(L.name,st);Xt.onerror=function(ie){Xt.result.close(),zt(ie)},Xt.onupgradeneeded=function(){Xt.result.deleteObjectStore(L.storeName)},Xt.onsuccess=function(){var ie=Xt.result;ie.close(),jt(ie)}}).then(function(jt){ht.db=jt;for(var zt=0;zt<ft.length;zt++){var Xt=ft[zt];Xt._dbInfo.db=jt,S(Xt._dbInfo)}}).catch(function(jt){throw(f(L,jt)||o.resolve()).catch(function(){}),jt})}}):V.then(function(K){y(L);var st=i[L.name],ht=st.forages;K.close();for(var ft=0;ft<ht.length;ft++)ht[ft]._dbInfo.db=null;return new o(function(kt,Lt){var jt=u.deleteDatabase(L.name);jt.onerror=function(){var zt=jt.result;zt&&zt.close(),Lt(jt.error)},jt.onblocked=function(){console.warn('dropInstance blocked for database "'+L.name+'" until all open connections are closed')},jt.onsuccess=function(){var zt=jt.result;zt&&zt.close(),kt(zt)}}).then(function(kt){st.db=kt;for(var Lt=0;Lt<ht.length;Lt++)S(ht[Lt]._dbInfo)}).catch(function(kt){throw(f(L,kt)||o.resolve()).catch(function(){}),kt})})}else T=o.reject("Invalid arguments");return x(T,U),T}},St="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=/^~~local_forage_type~([^~]+)~/,xt=9,$=xt+4,rt=Object.prototype.toString;function wt(L){var U,q,T,O,D,V=.75*L.length,K=L.length,st=0;L[L.length-1]==="="&&(V--,L[L.length-2]==="="&&V--);var ht=new ArrayBuffer(V),ft=new Uint8Array(ht);for(U=0;U<K;U+=4)q=St.indexOf(L[U]),T=St.indexOf(L[U+1]),O=St.indexOf(L[U+2]),D=St.indexOf(L[U+3]),ft[st++]=q<<2|T>>4,ft[st++]=(15&T)<<4|O>>2,ft[st++]=(3&O)<<6|63&D;return ht}function _t(L){var U,q=new Uint8Array(L),T="";for(U=0;U<q.length;U+=3)T+=St[q[U]>>2],T+=St[(3&q[U])<<4|q[U+1]>>4],T+=St[(15&q[U+1])<<2|q[U+2]>>6],T+=St[63&q[U+2]];return q.length%3==2?T=T.substring(0,T.length-1)+"=":q.length%3==1&&(T=T.substring(0,T.length-2)+"=="),T}var gt={serialize:function(L,U){var q="";if(L&&(q=rt.call(L)),L&&(q==="[object ArrayBuffer]"||L.buffer&&rt.call(L.buffer)==="[object ArrayBuffer]")){var T,O="__lfsc__:";L instanceof ArrayBuffer?(T=L,O+="arbf"):(T=L.buffer,q==="[object Int8Array]"?O+="si08":q==="[object Uint8Array]"?O+="ui08":q==="[object Uint8ClampedArray]"?O+="uic8":q==="[object Int16Array]"?O+="si16":q==="[object Uint16Array]"?O+="ur16":q==="[object Int32Array]"?O+="si32":q==="[object Uint32Array]"?O+="ui32":q==="[object Float32Array]"?O+="fl32":q==="[object Float64Array]"?O+="fl64":U(new Error("Failed to get type for BinaryArray"))),U(O+_t(T))}else if(q==="[object Blob]"){var D=new FileReader;D.onload=function(){var V="~~local_forage_type~"+L.type+"~"+_t(this.result);U("__lfsc__:blob"+V)},D.readAsArrayBuffer(L)}else try{U(JSON.stringify(L))}catch(V){console.error("Couldn't convert value into a JSON string: ",L),U(null,V)}},deserialize:function(L){if(L.substring(0,xt)!=="__lfsc__:")return JSON.parse(L);var U,q=L.substring($),T=L.substring(xt,$);if(T==="blob"&&ut.test(q)){var O=q.match(ut);U=O[1],q=q.substring(O[0].length)}var D=wt(q);switch(T){case"arbf":return D;case"blob":return l([D],{type:U});case"si08":return new Int8Array(D);case"ui08":return new Uint8Array(D);case"uic8":return new Uint8ClampedArray(D);case"si16":return new Int16Array(D);case"ur16":return new Uint16Array(D);case"si32":return new Int32Array(D);case"ui32":return new Uint32Array(D);case"fl32":return new Float32Array(D);case"fl64":return new Float64Array(D);default:throw new Error("Unkown type: "+T)}},stringToBuffer:wt,bufferToString:_t};function Pt(L,U,q,T){L.executeSql("CREATE TABLE IF NOT EXISTS "+U.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],q,T)}function At(L,U,q,T,O,D){L.executeSql(q,T,O,function(V,K){K.code===K.SYNTAX_ERR?V.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[U.storeName],function(st,ht){ht.rows.length?D(st,K):Pt(st,U,function(){st.executeSql(q,T,O,D)},D)},D):D(V,K)},D)}function Ot(L,U,q,T){var O=this;L=c(L);var D=new o(function(V,K){O.ready().then(function(){U===void 0&&(U=null);var st=U,ht=O._dbInfo;ht.serializer.serialize(U,function(ft,kt){kt?K(kt):ht.db.transaction(function(Lt){At(Lt,ht,"INSERT OR REPLACE INTO "+ht.storeName+" (key, value) VALUES (?, ?)",[L,ft],function(){V(st)},function(jt,zt){K(zt)})},function(Lt){if(Lt.code===Lt.QUOTA_ERR){if(T>0)return void V(Ot.apply(O,[L,st,q,T-1]));K(Lt)}})})}).catch(K)});return x(D,q),D}function vt(L){return new o(function(U,q){L.transaction(function(T){T.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,D){for(var V=[],K=0;K<D.rows.length;K++)V.push(D.rows.item(K).name);U({db:L,storeNames:V})},function(O,D){q(D)})},function(T){q(T)})})}var Vt={_driver:"webSQLStorage",_initStorage:function(L){var U=this,q={db:null};if(L)for(var T in L)q[T]=typeof L[T]!="string"?L[T].toString():L[T];var O=new o(function(D,V){try{q.db=openDatabase(q.name,String(q.version),q.description,q.size)}catch(K){return V(K)}q.db.transaction(function(K){Pt(K,q,function(){U._dbInfo=q,D()},function(st,ht){V(ht)})},V)});return q.serializer=gt,O},_support:typeof openDatabase=="function",iterate:function(L,U){var q=this,T=new o(function(O,D){q.ready().then(function(){var V=q._dbInfo;V.db.transaction(function(K){At(K,V,"SELECT * FROM "+V.storeName,[],function(st,ht){for(var ft=ht.rows,kt=ft.length,Lt=0;Lt<kt;Lt++){var jt=ft.item(Lt),zt=jt.value;if(zt&&(zt=V.serializer.deserialize(zt)),(zt=L(zt,jt.key,Lt+1))!==void 0)return void O(zt)}O()},function(st,ht){D(ht)})})}).catch(D)});return x(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,D){q.ready().then(function(){var V=q._dbInfo;V.db.transaction(function(K){At(K,V,"SELECT * FROM "+V.storeName+" WHERE key = ? LIMIT 1",[L],function(st,ht){var ft=ht.rows.length?ht.rows.item(0).value:null;ft&&(ft=V.serializer.deserialize(ft)),O(ft)},function(st,ht){D(ht)})})}).catch(D)});return x(T,U),T},setItem:function(L,U,q){return Ot.apply(this,[L,U,q,1])},removeItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,D){q.ready().then(function(){var V=q._dbInfo;V.db.transaction(function(K){At(K,V,"DELETE FROM "+V.storeName+" WHERE key = ?",[L],function(){O()},function(st,ht){D(ht)})})}).catch(D)});return x(T,U),T},clear:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var D=U._dbInfo;D.db.transaction(function(V){At(V,D,"DELETE FROM "+D.storeName,[],function(){T()},function(K,st){O(st)})})}).catch(O)});return x(q,L),q},length:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var D=U._dbInfo;D.db.transaction(function(V){At(V,D,"SELECT COUNT(key) as c FROM "+D.storeName,[],function(K,st){var ht=st.rows.item(0).c;T(ht)},function(K,st){O(st)})})}).catch(O)});return x(q,L),q},key:function(L,U){var q=this,T=new o(function(O,D){q.ready().then(function(){var V=q._dbInfo;V.db.transaction(function(K){At(K,V,"SELECT key FROM "+V.storeName+" WHERE id = ? LIMIT 1",[L+1],function(st,ht){var ft=ht.rows.length?ht.rows.item(0).key:null;O(ft)},function(st,ht){D(ht)})})}).catch(D)});return x(T,U),T},keys:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var D=U._dbInfo;D.db.transaction(function(V){At(V,D,"SELECT key FROM "+D.storeName,[],function(K,st){for(var ht=[],ft=0;ft<st.rows.length;ft++)ht.push(st.rows.item(ft).key);T(ht)},function(K,st){O(st)})})}).catch(O)});return x(q,L),q},dropInstance:function(L,U){U=b.apply(this,arguments);var q=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||q.name,L.storeName=L.storeName||q.storeName);var T,O=this;return x(T=L.name?new o(function(D){var V;V=L.name===q.name?O._dbInfo.db:openDatabase(L.name,"","",0),L.storeName?D({db:V,storeNames:[L.storeName]}):D(vt(V))}).then(function(D){return new o(function(V,K){D.db.transaction(function(st){function ht(jt){return new o(function(zt,Xt){st.executeSql("DROP TABLE IF EXISTS "+jt,[],function(){zt()},function(ie,re){Xt(re)})})}for(var ft=[],kt=0,Lt=D.storeNames.length;kt<Lt;kt++)ft.push(ht(D.storeNames[kt]));o.all(ft).then(function(){V()}).catch(function(jt){K(jt)})},function(st){K(st)})})}):o.reject("Invalid arguments"),U),T}};function Mt(L,U){var q=L.name+"/";return L.storeName!==U.storeName&&(q+=L.storeName+"/"),q}function C(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch{return!0}}()||localStorage.length>0}var d={_driver:"localStorageWrapper",_initStorage:function(L){var U={};if(L)for(var q in L)U[q]=L[q];return U.keyPrefix=Mt(L,this._defaultConfig),C()?(this._dbInfo=U,U.serializer=gt,o.resolve()):o.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(L,U){var q=this,T=q.ready().then(function(){for(var O=q._dbInfo,D=O.keyPrefix,V=D.length,K=localStorage.length,st=1,ht=0;ht<K;ht++){var ft=localStorage.key(ht);if(ft.indexOf(D)===0){var kt=localStorage.getItem(ft);if(kt&&(kt=O.serializer.deserialize(kt)),(kt=L(kt,ft.substring(V),st++))!==void 0)return kt}}});return x(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=q.ready().then(function(){var O=q._dbInfo,D=localStorage.getItem(O.keyPrefix+L);return D&&(D=O.serializer.deserialize(D)),D});return x(T,U),T},setItem:function(L,U,q){var T=this;L=c(L);var O=T.ready().then(function(){U===void 0&&(U=null);var D=U;return new o(function(V,K){var st=T._dbInfo;st.serializer.serialize(U,function(ht,ft){if(ft)K(ft);else try{localStorage.setItem(st.keyPrefix+L,ht),V(D)}catch(kt){kt.name!=="QuotaExceededError"&&kt.name!=="NS_ERROR_DOM_QUOTA_REACHED"||K(kt),K(kt)}})})});return x(O,q),O},removeItem:function(L,U){var q=this;L=c(L);var T=q.ready().then(function(){var O=q._dbInfo;localStorage.removeItem(O.keyPrefix+L)});return x(T,U),T},clear:function(L){var U=this,q=U.ready().then(function(){for(var T=U._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var D=localStorage.key(O);D.indexOf(T)===0&&localStorage.removeItem(D)}});return x(q,L),q},length:function(L){var U=this.keys().then(function(q){return q.length});return x(U,L),U},key:function(L,U){var q=this,T=q.ready().then(function(){var O,D=q._dbInfo;try{O=localStorage.key(L)}catch{O=null}return O&&(O=O.substring(D.keyPrefix.length)),O});return x(T,U),T},keys:function(L){var U=this,q=U.ready().then(function(){for(var T=U._dbInfo,O=localStorage.length,D=[],V=0;V<O;V++){var K=localStorage.key(V);K.indexOf(T.keyPrefix)===0&&D.push(K.substring(T.keyPrefix.length))}return D});return x(q,L),q},dropInstance:function(L,U){if(U=b.apply(this,arguments),!(L=typeof L!="function"&&L||{}).name){var q=this.config();L.name=L.name||q.name,L.storeName=L.storeName||q.storeName}var T,O=this;return x(T=L.name?new o(function(D){L.storeName?D(Mt(L,O._defaultConfig)):D(L.name+"/")}).then(function(D){for(var V=localStorage.length-1;V>=0;V--){var K=localStorage.key(V);K.indexOf(D)===0&&localStorage.removeItem(K)}}):o.reject("Invalid arguments"),U),T}},e=function(L,U){for(var q,T,O=L.length,D=0;D<O;){if((q=L[D])===(T=U)||typeof q=="number"&&typeof T=="number"&&isNaN(q)&&isNaN(T))return!0;D++}return!1},A=Array.isArray||function(L){return Object.prototype.toString.call(L)==="[object Array]"},j={},I={},R={INDEXEDDB:at,WEBSQL:Vt,LOCALSTORAGE:d},H=[R.INDEXEDDB._driver,R.WEBSQL._driver,R.LOCALSTORAGE._driver],tt=["dropInstance"],ot=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),et={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function pt(L,U){L[U]=function(){var q=arguments;return L.ready().then(function(){return L[U].apply(L,q)})}}function Et(){for(var L=1;L<arguments.length;L++){var U=arguments[L];if(U)for(var q in U)U.hasOwnProperty(q)&&(A(U[q])?arguments[0][q]=U[q].slice():arguments[0][q]=U[q])}return arguments[0]}var mt=new(function(){function L(U){for(var q in function(D,V){if(!(D instanceof V))throw new TypeError("Cannot call a class as a function")}(this,L),R)if(R.hasOwnProperty(q)){var T=R[q],O=T._driver;this[q]=O,j[O]||this.defineDriver(T)}this._defaultConfig=Et({},et),this._config=Et({},this._defaultConfig,U),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return L.prototype.config=function(U){if((U===void 0?"undefined":s(U))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var q in U){if(q==="storeName"&&(U[q]=U[q].replace(/\W/g,"_")),q==="version"&&typeof U[q]!="number")return new Error("Database version must be a number.");this._config[q]=U[q]}return!("driver"in U)||!U.driver||this.setDriver(this._config.driver)}return typeof U=="string"?this._config[U]:this._config},L.prototype.defineDriver=function(U,q,T){var O=new o(function(D,V){try{var K=U._driver,st=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!U._driver)return void V(st);for(var ht=ot.concat("_initStorage"),ft=0,kt=ht.length;ft<kt;ft++){var Lt=ht[ft];if((!e(tt,Lt)||U[Lt])&&typeof U[Lt]!="function")return void V(st)}(function(){for(var zt=function(be){return function(){var fe=new Error("Method "+be+" is not implemented by the current driver"),Pe=o.reject(fe);return x(Pe,arguments[arguments.length-1]),Pe}},Xt=0,ie=tt.length;Xt<ie;Xt++){var re=tt[Xt];U[re]||(U[re]=zt(re))}})();var jt=function(zt){j[K]&&console.info("Redefining LocalForage driver: "+K),j[K]=U,I[K]=zt,D()};"_support"in U?U._support&&typeof U._support=="function"?U._support().then(jt,V):jt(!!U._support):jt(!0)}catch(zt){V(zt)}});return r(O,q,T),O},L.prototype.driver=function(){return this._driver||null},L.prototype.getDriver=function(U,q,T){var O=j[U]?o.resolve(j[U]):o.reject(new Error("Driver not found."));return r(O,q,T),O},L.prototype.getSerializer=function(U){var q=o.resolve(gt);return r(q,U),q},L.prototype.ready=function(U){var q=this,T=q._driverSet.then(function(){return q._ready===null&&(q._ready=q._initDriver()),q._ready});return r(T,U,U),T},L.prototype.setDriver=function(U,q,T){var O=this;A(U)||(U=[U]);var D=this._getSupportedDrivers(U);function V(){O._config.driver=O.driver()}function K(ht){return O._extend(ht),V(),O._ready=O._initStorage(O._config),O._ready}var st=this._driverSet!==null?this._driverSet.catch(function(){return o.resolve()}):o.resolve();return this._driverSet=st.then(function(){var ht=D[0];return O._dbInfo=null,O._ready=null,O.getDriver(ht).then(function(ft){O._driver=ft._driver,V(),O._wrapLibraryMethodsWithReady(),O._initDriver=function(kt){return function(){var Lt=0;return function jt(){for(;Lt<kt.length;){var zt=kt[Lt];return Lt++,O._dbInfo=null,O._ready=null,O.getDriver(zt).then(K).catch(jt)}V();var Xt=new Error("No available storage method found.");return O._driverSet=o.reject(Xt),O._driverSet}()}}(D)})}).catch(function(){V();var ht=new Error("No available storage method found.");return O._driverSet=o.reject(ht),O._driverSet}),r(this._driverSet,q,T),this._driverSet},L.prototype.supports=function(U){return!!I[U]},L.prototype._extend=function(U){Et(this,U)},L.prototype._getSupportedDrivers=function(U){for(var q=[],T=0,O=U.length;T<O;T++){var D=U[T];this.supports(D)&&q.push(D)}return q},L.prototype._wrapLibraryMethodsWithReady=function(){for(var U=0,q=ot.length;U<q;U++)pt(this,ot[U])},L.prototype.createInstance=function(U){return new L(U)},L}());a.exports=mt},{3:3}]},{},[4])(4)}).call(this,g(17))},function(G,P,g){"use strict";var E=g(3),_=g.n(E),a=g(0),p=g(5),s=g(4),u=g(2),l=g(6),o=g(8),x=function(C,d,e,A){var j,I=typeof window<"u"&&window.URL,R=I?"blob":"arraybuffer",H=new a.defer,tt=new XMLHttpRequest,ot=XMLHttpRequest.prototype;for(j in"overrideMimeType"in ot||Object.defineProperty(ot,"overrideMimeType",{value:function(){}}),e&&(tt.withCredentials=!0),tt.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var et=!1;if(this.responseType!==""&&this.responseType!=="document"||(et=this.responseXML),this.status===200||this.status===0||et){var pt;if(!this.response&&!et)return H.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),H.promise;if(this.status===403)return H.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),H.promise;pt=et?this.responseXML:Object(a.isXml)(d)?Object(a.parse)(this.response,"text/xml"):d=="xhtml"?Object(a.parse)(this.response,"application/xhtml+xml"):d=="html"||d=="htm"?Object(a.parse)(this.response,"text/html"):d=="json"?JSON.parse(this.response):d=="blob"?I?this.response:new Blob([this.response]):this.response,H.resolve(pt)}else H.reject({status:this.status,message:this.response,stack:new Error().stack})}},tt.onerror=function(et){H.reject(et)},tt.open("GET",C,!0),A)tt.setRequestHeader(j,A[j]);return d=="json"&&tt.setRequestHeader("Accept","application/json"),d||(d=new s.a(C).extension),d=="blob"&&(tt.responseType=R),Object(a.isXml)(d)&&tt.overrideMimeType("text/xml"),d=="binary"&&(tt.responseType="arraybuffer"),tt.send(),H.promise},r=g(15),c=class{constructor(C,d){this.idref=C.idref,this.linear=C.linear==="yes",this.properties=C.properties,this.index=C.index,this.href=C.href,this.url=C.url,this.canonical=C.canonical,this.next=C.next,this.prev=C.prev,this.cfiBase=C.cfiBase,d?this.hooks=d:(this.hooks={},this.hooks.serialize=new l.a(this),this.hooks.content=new l.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(C){var d=C||this.request||x,e=new a.defer,A=e.promise;return this.contents?e.resolve(this.contents):d(this.url).then(function(j){return this.document=j,this.contents=j.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){e.resolve(this.contents)}.bind(this)).catch(function(j){e.reject(j)}),A}base(){return Object(o.a)(this.document,this)}render(C){var d=new a.defer,e=d.promise;return this.output,this.load(C).then(function(A){var j=(typeof navigator<"u"&&navigator.userAgent||"").indexOf("Trident")>=0,I=new(typeof XMLSerializer>"u"||j?r.DOMParser:XMLSerializer);return this.output=I.serializeToString(A),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){d.resolve(this.output)}.bind(this)).catch(function(A){d.reject(A)}),e}find(C){var d=this,e=[],A=C.toLowerCase();return Object(a.sprint)(d.document,function(j){(function(I){for(var R,H,tt,ot=I.textContent.toLowerCase(),et=d.document.createRange(),pt=-1;H!=-1;)(H=ot.indexOf(A,pt+1))!=-1&&((et=d.document.createRange()).setStart(I,H),et.setEnd(I,H+A.length),R=d.cfiFromRange(et),tt=I.textContent.length<150?I.textContent:"..."+(tt=I.textContent.substring(H-75,H+75))+"...",e.push({cfi:R,excerpt:tt})),pt=H})(j)}),e}search(C,d=5){if(document.createTreeWalker===void 0)return this.find(C);let e=[];const A=this,j=C.toLowerCase(),I=function(ot){const et=ot.reduce((pt,Et)=>pt+Et.textContent,"").toLowerCase().indexOf(j);if(et!=-1){const Et=et+j.length;let mt=0,L=0;if(et<ot[0].length){let U;for(;mt<ot.length-1&&(L+=ot[mt].length,!(Et<=L));)mt+=1;let q=ot[0],T=ot[mt],O=A.document.createRange();O.setStart(q,et);let D=ot.slice(0,mt).reduce((K,st)=>K+st.textContent.length,0);O.setEnd(T,D>Et?Et:Et-D),U=A.cfiFromRange(O);let V=ot.slice(0,mt+1).reduce((K,st)=>K+st.textContent,"");V.length>150&&(V=V.substring(et-75,et+75),V="..."+V+"..."),e.push({cfi:U,excerpt:V})}}},R=document.createTreeWalker(A.document,NodeFilter.SHOW_TEXT,null,!1);let H,tt=[];for(;H=R.nextNode();)tt.push(H),tt.length==d&&(I(tt.slice(0,d)),tt=tt.slice(1,d));return tt.length>0&&I(tt),e}reconcileLayoutSettings(C){var d={layout:C.layout,spread:C.spread,orientation:C.orientation};return this.properties.forEach(function(e){var A,j,I=e.replace("rendition:",""),R=I.indexOf("-");R!=-1&&(A=I.slice(0,R),j=I.slice(R+1),d[A]=j)}),d}cfiFromRange(C){return new u.a(C,this.cfiBase).toString()}cfiFromElement(C){return new u.a(C,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}},b=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new l.a,this.hooks.content=new l.a,this.hooks.content.register(o.a),this.hooks.content.register(o.b),this.hooks.content.register(o.d),this.epubcfi=new u.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(C,d,e){this.items=C.spine,this.manifest=C.manifest,this.spineNodeIndex=C.spineNodeIndex,this.baseUrl=C.baseUrl||C.basePath||"",this.length=this.items.length,this.items.forEach((A,j)=>{var I,R=this.manifest[A.idref];A.index=j,A.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,A.index,A.id),A.href&&(A.url=d(A.href,!0),A.canonical=e(A.href)),R&&(A.href=R.href,A.url=d(A.href,!0),A.canonical=e(A.href),R.properties.length&&A.properties.push.apply(A.properties,R.properties)),A.linear==="yes"?(A.prev=function(){let H=A.index;for(;H>0;){let tt=this.get(H-1);if(tt&&tt.linear)return tt;H-=1}}.bind(this),A.next=function(){let H=A.index;for(;H<this.spineItems.length-1;){let tt=this.get(H+1);if(tt&&tt.linear)return tt;H+=1}}.bind(this)):(A.prev=function(){},A.next=function(){}),I=new c(A,this.hooks),this.append(I)}),this.loaded=!0}get(C){var d=0;if(C===void 0)for(;d<this.spineItems.length;){let e=this.spineItems[d];if(e&&e.linear)break;d+=1}else this.epubcfi.isCfiString(C)?d=new u.a(C).spinePos:typeof C=="number"||isNaN(C)===!1?d=C:typeof C=="string"&&C.indexOf("#")===0?d=this.spineById[C.substring(1)]:typeof C=="string"&&(C=C.split("#")[0],d=this.spineByHref[C]||this.spineByHref[encodeURI(C)]);return this.spineItems[d]||null}append(C){var d=this.spineItems.length;return C.index=d,this.spineItems.push(C),this.spineByHref[decodeURI(C.href)]=d,this.spineByHref[encodeURI(C.href)]=d,this.spineByHref[C.href]=d,this.spineById[C.idref]=d,d}prepend(C){return this.spineByHref[C.href]=0,this.spineById[C.idref]=0,this.spineItems.forEach(function(d,e){d.index=e}),0}remove(C){var d=this.spineItems.indexOf(C);if(d>-1)return delete this.spineByHref[C.href],delete this.spineById[C.idref],this.spineItems.splice(d,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let C=0;do{let d=this.get(C);if(d&&d.linear)return d;C+=1}while(C<this.spineItems.length)}last(){let C=this.spineItems.length-1;do{let d=this.get(C);if(d&&d.linear)return d;C-=1}while(C>=0)}destroy(){this.each(C=>C.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}},n=g(9),i=g(1);class h{constructor(d,e,A){this.spine=d,this.request=e,this.pause=A||100,this.q=new n.a(this),this.epubcfi=new u.a,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(d){return d&&(this.break=d),this.q.pause(),this.spine.each(function(e){e.linear&&this.q.enqueue(this.process.bind(this),e)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(d){return d.load(this.request).then(function(e){var A=new a.defer,j=this.parse(e,d.cfiBase);return this._locations=this._locations.concat(j),d.unload(),this.processingTimeout=setTimeout(()=>A.resolve(j),this.pause),A.promise}.bind(this))}parse(d,e,A){var j,I,R=[],H=d.ownerDocument,tt=Object(a.qs)(H,"body"),ot=0,et=A||this.break;if(Object(a.sprint)(tt,function(pt){var Et,mt=pt.length,L=0;if(pt.textContent.trim().length===0)return!1;for(ot==0&&((j=this.createRange()).startContainer=pt,j.startOffset=0),(Et=et-ot)>mt&&(ot+=mt,L=mt);L<mt;)if(Et=et-ot,ot===0&&(L+=1,(j=this.createRange()).startContainer=pt,j.startOffset=L),L+Et>=mt)ot+=mt-L,L=mt;else{L+=Et,j.endContainer=pt,j.endOffset=L;let U=new u.a(j,e).toString();R.push(U),ot=0}I=pt}.bind(this)),j&&j.startContainer&&I){j.endContainer=I,j.endOffset=I.length;let pt=new u.a(j,e).toString();R.push(pt),ot=0}return R}generateFromWords(d,e,A){var j=d?new u.a(d):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each(function(I){I.linear&&(j?I.index>=j.spinePos&&this.q.enqueue(this.processWords.bind(this),I,e,j,A):this.q.enqueue(this.processWords.bind(this),I,e,j,A))}.bind(this)),this.q.run().then(function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}.bind(this))}processWords(d,e,A,j){return j&&this._locationsWords.length>=j?Promise.resolve():d.load(this.request).then(function(I){var R=new a.defer,H=this.parseWords(I,d,e,A),tt=j-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(H.length>=j?H.slice(0,tt):H),d.unload(),this.processingTimeout=setTimeout(()=>R.resolve(H),this.pause),R.promise}.bind(this))}countWords(d){return(d=(d=(d=d.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,`
`)).split(" ").length}parseWords(d,e,A,j){var I,R=e.cfiBase,H=[],tt=d.ownerDocument,ot=Object(a.qs)(tt,"body"),et=A,pt=!j||j.spinePos!==e.index;return j&&e.index===j.spinePos&&(I=j.findNode(j.range?j.path.steps.concat(j.start.steps):j.path.steps,d.ownerDocument)),Object(a.sprint)(ot,function(Et){if(!pt){if(Et!==I)return!1;pt=!0}if(Et.textContent.length<10&&Et.textContent.trim().length===0)return!1;var mt,L=this.countWords(Et.textContent),U=0;if(L===0)return!1;for((mt=et-this._wordCounter)>L&&(this._wordCounter+=L,U=L);U<L;)if(U+(mt=et-this._wordCounter)>=L)this._wordCounter+=L-U,U=L;else{U+=mt;let q=new u.a(Et,R);H.push({cfi:q.toString(),wordCount:this._wordCounter}),this._wordCounter=0}}.bind(this)),H}locationFromCfi(d){let e;return u.a.prototype.isCfiString(d)&&(d=new u.a(d)),this._locations.length===0?-1:(e=Object(a.locationOf)(d,this._locations,this.epubcfi.compare),e>this.total?this.total:e)}percentageFromCfi(d){if(this._locations.length===0)return null;var e=this.locationFromCfi(d);return this.percentageFromLocation(e)}percentageFromLocation(d){return d&&this.total?d/this.total:0}cfiFromLocation(d){var e=-1;return typeof d!="number"&&(d=parseInt(d)),d>=0&&d<this._locations.length&&(e=this._locations[d]),e}cfiFromPercentage(d){let e;if(d>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),d>=1){let A=new u.a(this._locations[this.total]);return A.collapse(),A.toString()}return e=Math.ceil(this.total*d),this.cfiFromLocation(e)}load(d){return this._locations=typeof d=="string"?JSON.parse(d):d,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(d){var e;if(typeof d=="string")this._currentCfi=d;else{if(typeof d!="number")return;this._current=d}this._locations.length!==0&&(typeof d=="string"?(e=this.locationFromCfi(d),this._current=e):e=d,this.emit(i.c.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(e)}))}get currentLocation(){return this._current}set currentLocation(d){this.setCurrent(d)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}_()(h.prototype);var m=h,y=g(7),S=g.n(y),f=class{constructor(C){this.packagePath="",this.directory="",this.encoding="",C&&this.parse(C)}parse(C){var d;if(!C)throw new Error("Container File Not Found");if(!(d=Object(a.qs)(C,"rootfile")))throw new Error("No RootFile Found");this.packagePath=d.getAttribute("full-path"),this.directory=S.a.dirname(this.packagePath),this.encoding=C.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}},k=class{constructor(C){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},C&&this.parse(C)}parse(C){var d,e,A;if(!C)throw new Error("Package File Not Found");if(!(d=Object(a.qs)(C,"metadata")))throw new Error("No Metadata Found");if(!(e=Object(a.qs)(C,"manifest")))throw new Error("No Manifest Found");if(!(A=Object(a.qs)(C,"spine")))throw new Error("No Spine Found");return this.manifest=this.parseManifest(e),this.navPath=this.findNavPath(e),this.ncxPath=this.findNcxPath(e,A),this.coverPath=this.findCoverPath(C),this.spineNodeIndex=Object(a.indexOfElementNode)(A),this.spine=this.parseSpine(A,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(C),this.metadata=this.parseMetadata(d),this.metadata.direction=A.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(C){var d={};return d.title=this.getElementText(C,"title"),d.creator=this.getElementText(C,"creator"),d.description=this.getElementText(C,"description"),d.pubdate=this.getElementText(C,"date"),d.publisher=this.getElementText(C,"publisher"),d.identifier=this.getElementText(C,"identifier"),d.language=this.getElementText(C,"language"),d.rights=this.getElementText(C,"rights"),d.modified_date=this.getPropertyText(C,"dcterms:modified"),d.layout=this.getPropertyText(C,"rendition:layout"),d.orientation=this.getPropertyText(C,"rendition:orientation"),d.flow=this.getPropertyText(C,"rendition:flow"),d.viewport=this.getPropertyText(C,"rendition:viewport"),d.media_active_class=this.getPropertyText(C,"media:active-class"),d.spread=this.getPropertyText(C,"rendition:spread"),d}parseManifest(C){var d={},e=Object(a.qsa)(C,"item");return Array.prototype.slice.call(e).forEach(function(A){var j=A.getAttribute("id"),I=A.getAttribute("href")||"",R=A.getAttribute("media-type")||"",H=A.getAttribute("media-overlay")||"",tt=A.getAttribute("properties")||"";d[j]={href:I,type:R,overlay:H,properties:tt.length?tt.split(" "):[]}}),d}parseSpine(C,d){var e=[],A=Object(a.qsa)(C,"itemref");return Array.prototype.slice.call(A).forEach(function(j,I){var R=j.getAttribute("idref"),H=j.getAttribute("properties")||"",tt=H.length?H.split(" "):[],ot={id:j.getAttribute("id"),idref:R,linear:j.getAttribute("linear")||"yes",properties:tt,index:I};e.push(ot)}),e}findUniqueIdentifier(C){var d=C.documentElement.getAttribute("unique-identifier");if(!d)return"";var e=C.getElementById(d);return e&&e.localName==="identifier"&&e.namespaceURI==="http://purl.org/dc/elements/1.1/"&&e.childNodes.length>0?e.childNodes[0].nodeValue.trim():""}findNavPath(C){var d=Object(a.qsp)(C,"item",{properties:"nav"});return!!d&&d.getAttribute("href")}findNcxPath(C,d){var e,A=Object(a.qsp)(C,"item",{"media-type":"application/x-dtbncx+xml"});return A||(e=d.getAttribute("toc"))&&(A=C.querySelector("#"+e)),!!A&&A.getAttribute("href")}findCoverPath(C){Object(a.qs)(C,"package").getAttribute("version");var d=Object(a.qsp)(C,"item",{properties:"cover-image"});if(d)return d.getAttribute("href");var e=Object(a.qsp)(C,"meta",{name:"cover"});if(e){var A=e.getAttribute("content"),j=C.getElementById(A);return j?j.getAttribute("href"):""}return!1}getElementText(C,d){var e,A=C.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",d);return A&&A.length!==0&&(e=A[0]).childNodes.length?e.childNodes[0].nodeValue:""}getPropertyText(C,d){var e=Object(a.qsp)(C,"meta",{property:d});return e&&e.childNodes.length?e.childNodes[0].nodeValue:""}load(C){this.metadata=C.metadata;let d=C.readingOrder||C.spine;return this.spine=d.map((e,A)=>(e.index=A,e.linear=e.linear||"yes",e)),C.resources.forEach((e,A)=>{this.manifest[A]=e,e.rel&&e.rel[0]==="cover"&&(this.coverPath=e.href)}),this.spineNodeIndex=0,this.toc=C.toc.map((e,A)=>(e.label=e.title,e)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}},M=class{constructor(C){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,C&&this.parse(C)}parse(C){let d,e,A=C.nodeType;A&&(d=Object(a.qs)(C,"html"),e=Object(a.qs)(C,"ncx")),A?d?(this.toc=this.parseNav(C),this.landmarks=this.parseLandmarks(C)):e&&(this.toc=this.parseNcx(C)):this.toc=this.load(C),this.length=0,this.unpack(this.toc)}unpack(C){for(var d,e=0;e<C.length;e++)(d=C[e]).href&&(this.tocByHref[d.href]=e),d.id&&(this.tocById[d.id]=e),this.length++,d.subitems.length&&this.unpack(d.subitems)}get(C){var d;return C?(C.indexOf("#")===0?d=this.tocById[C.substring(1)]:C in this.tocByHref&&(d=this.tocByHref[C]),this.getByIndex(C,d,this.toc)):this.toc}getByIndex(C,d,e){if(e.length===0)return;const A=e[d];if(!A||C!==A.id&&C!==A.href){let j;for(let I=0;I<e.length&&(j=this.getByIndex(C,d,e[I].subitems),!j);++I);return j}return A}landmark(C){var d;return C?(d=this.landmarksByType[C],this.landmarks[d]):this.landmarks}parseNav(C){var d=Object(a.querySelectorByType)(C,"nav","toc"),e=[];if(!d)return e;let A=Object(a.filterChildren)(d,"ol",!0);return A?e=this.parseNavList(A):e}parseNavList(C,d){const e=[];if(!C||!C.children)return e;for(let A=0;A<C.children.length;A++){const j=this.navItem(C.children[A],d);j&&e.push(j)}return e}navItem(C,d){let e=C.getAttribute("id")||void 0,A=Object(a.filterChildren)(C,"a",!0)||Object(a.filterChildren)(C,"span",!0);if(!A)return;let j=A.getAttribute("href")||"";e||(e=j);let I=A.textContent||"",R=[],H=Object(a.filterChildren)(C,"ol",!0);return H&&(R=this.parseNavList(H,e)),{id:e,href:j,label:I,subitems:R,parent:d}}parseLandmarks(C){var d,e,A=Object(a.querySelectorByType)(C,"nav","landmarks"),j=A?Object(a.qsa)(A,"li"):[],I=j.length,R=[];if(!j||I===0)return R;for(d=0;d<I;++d)(e=this.landmarkItem(j[d]))&&(R.push(e),this.landmarksByType[e.type]=d);return R}landmarkItem(C){let d=Object(a.filterChildren)(C,"a",!0);if(!d)return;let e=d.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0;return{href:d.getAttribute("href")||"",label:d.textContent||"",type:e}}parseNcx(C){var d,e,A=Object(a.qsa)(C,"navPoint"),j=A.length,I={},R=[];if(!A||j===0)return R;for(d=0;d<j;++d)I[(e=this.ncxItem(A[d])).id]=e,e.parent?I[e.parent].subitems.push(e):R.push(e);return R}ncxItem(C){var d,e=C.getAttribute("id")||!1,A=Object(a.qs)(C,"content").getAttribute("src"),j=Object(a.qs)(C,"navLabel"),I=j.textContent?j.textContent:"",R=C.parentNode;return!R||R.nodeName!=="navPoint"&&R.nodeName.split(":").slice(-1)[0]!=="navPoint"||(d=R.getAttribute("id")),{id:e,href:A,label:I,subitems:[],parent:d}}load(C){return C.map(d=>(d.label=d.title,d.subitems=d.children?this.load(d.children):[],d))}forEach(C){return this.toc.forEach(C)}},X={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},B=function(){var C,d,e,A,j={};for(C in X)if(X.hasOwnProperty(C)){for(d in X[C])if(X[C].hasOwnProperty(d))if(typeof(e=X[C][d])=="string")j[e]=C+"/"+d;else for(A=0;A<e.length;A++)j[e[A]]=C+"/"+d}return j}(),Z={lookup:function(C){return C&&B[C.split(".").pop().toLowerCase()]||"text/plain"}},w=class{constructor(C,d){this.settings={replacements:d&&d.replacements||"base64",archive:d&&d.archive,resolver:d&&d.resolver,request:d&&d.request},this.process(C)}process(C){this.manifest=C,this.resources=Object.keys(C).map(function(d){return C[d]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(C){if(C.type==="application/xhtml+xml"||C.type==="text/html")return!0}),this.assets=this.resources.filter(function(C){if(C.type!=="application/xhtml+xml"&&C.type!=="text/html")return!0}),this.css=this.resources.filter(function(C){if(C.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map(function(C){return C.href}.bind(this)),this.cssUrls=this.css.map(function(C){return C.href})}createUrl(C){var d=new p.a(C),e=Z.lookup(d.filename);return this.settings.archive?this.settings.archive.createUrl(C,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(C,"blob").then(A=>Object(a.blob2base64)(A)).then(A=>Object(a.createBase64Url)(A,e)):this.settings.request(C,"blob").then(A=>Object(a.createBlobUrl)(A,e))}replacements(){if(this.settings.replacements==="none")return new Promise(function(d){d(this.urls)}.bind(this));var C=this.urls.map(d=>{var e=this.settings.resolver(d);return this.createUrl(e).catch(A=>(console.error(A),null))});return Promise.all(C).then(d=>(this.replacementUrls=d.filter(e=>typeof e=="string"),d))}replaceCss(C,d){var e=[];return C=C||this.settings.archive,d=d||this.settings.resolver,this.cssUrls.forEach(function(A){var j=this.createCssFile(A,C,d).then(function(I){var R=this.urls.indexOf(A);R>-1&&(this.replacementUrls[R]=I)}.bind(this));e.push(j)}.bind(this)),Promise.all(e)}createCssFile(C){if(S.a.isAbsolute(C))return new Promise(function(j){j()});var d,e=this.settings.resolver(C);d=this.settings.archive?this.settings.archive.getText(e):this.settings.request(e,"text");var A=this.urls.map(j=>{var I=this.settings.resolver(j);return new s.a(e).relative(I)});return d?d.then(j=>(j=Object(o.e)(j,A,this.replacementUrls),this.settings.replacements==="base64"?Object(a.createBase64Url)(j,"text/css"):Object(a.createBlobUrl)(j,"text/css")),j=>new Promise(function(I){I()})):new Promise(function(j){j()})}relativeTo(C,d){return d=d||this.settings.resolver,this.urls.map(function(e){var A=d(e);return new s.a(C).relative(A)}.bind(this))}get(C){var d=this.urls.indexOf(C);if(d!==-1)return this.replacementUrls.length?new Promise(function(e,A){e(this.replacementUrls[d])}.bind(this)):this.createUrl(C)}substitute(C,d){var e;return e=d?this.relativeTo(d):this.urls,Object(o.e)(C,e,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}},Q=class{constructor(C){this.pages=[],this.locations=[],this.epubcfi=new u.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,C&&(this.pageList=this.parse(C)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(C){var d=Object(a.qs)(C,"html"),e=Object(a.qs)(C,"ncx");return d?this.parseNav(C):e?this.parseNcx(C):void 0}parseNav(C){var d,e,A=Object(a.querySelectorByType)(C,"nav","page-list"),j=A?Object(a.qsa)(A,"li"):[],I=j.length,R=[];if(!j||I===0)return R;for(d=0;d<I;++d)e=this.item(j[d]),R.push(e);return R}parseNcx(C){var d,e,A,j,I=[],R=0;if(!(e=Object(a.qs)(C,"pageList"))||(j=(A=Object(a.qsa)(e,"pageTarget")).length,!A||A.length===0))return I;for(R=0;R<j;++R)d=this.ncxItem(A[R]),I.push(d);return I}ncxItem(C){var d=Object(a.qs)(C,"navLabel"),e=Object(a.qs)(d,"text").textContent;return{href:Object(a.qs)(C,"content").getAttribute("src"),page:parseInt(e,10)}}item(C){var d,e,A=Object(a.qs)(C,"a"),j=A.getAttribute("href")||"",I=A.textContent||"",R=parseInt(I);return j.indexOf("epubcfi")!=-1?(e=(d=j.split("#"))[0],{cfi:d.length>1&&d[1],href:j,packageUrl:e,page:R}):{href:j,page:R}}process(C){C.forEach(function(d){this.pages.push(d.page),d.cfi&&this.locations.push(d.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(C){var d=-1;if(this.locations.length===0)return-1;var e=Object(a.indexOfSorted)(C,this.locations,this.epubcfi.compare);return e!=-1?d=this.pages[e]:(d=(e=Object(a.locationOf)(C,this.locations,this.epubcfi.compare))-1>=0?this.pages[e-1]:this.pages[0])!==void 0||(d=-1),d}cfiFromPage(C){var d=-1;typeof C!="number"&&(C=parseInt(C));var e=this.pages.indexOf(C);return e!=-1&&(d=this.locations[e]),d}pageFromPercentage(C){return Math.round(this.totalPages*C)}percentageFromPage(C){var d=(C-this.firstPage)/this.totalPages;return Math.round(1e3*d)/1e3}percentageFromCfi(C){var d=this.pageFromCfi(C);return this.percentageFromPage(d)}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}},ct=g(16),at=g(29),St=g.n(at),ut=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new St.a}catch{throw new Error("JSZip lib not loaded")}}open(C,d){return this.zip.loadAsync(C,{base64:d})}openUrl(C,d){return x(C,"binary").then(function(e){return this.zip.loadAsync(e,{base64:d})}.bind(this))}request(C,d){var e,A=new a.defer,j=new s.a(C);return d||(d=j.extension),(e=d=="blob"?this.getBlob(C):this.getText(C))?e.then(function(I){let R=this.handleResponse(I,d);A.resolve(R)}.bind(this)):A.reject({message:"File not found in the epub: "+C,stack:new Error().stack}),A.promise}handleResponse(C,d){return d=="json"?JSON.parse(C):Object(a.isXml)(d)?Object(a.parse)(C,"text/xml"):d=="xhtml"?Object(a.parse)(C,"application/xhtml+xml"):d=="html"||d=="htm"?Object(a.parse)(C,"text/html"):C}getBlob(C,d){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return d=d||Z.lookup(A.name),A.async("uint8array").then(function(j){return new Blob([j],{type:d})})}getText(C,d){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return A.async("string").then(function(j){return j})}getBase64(C,d){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return d=d||Z.lookup(A.name),A.async("base64").then(function(j){return"data:"+d+";base64,"+j})}createUrl(C,d){var e,A,j=new a.defer,I=window.URL||window.webkitURL||window.mozURL,R=d&&d.base64;return C in this.urlCache?(j.resolve(this.urlCache[C]),j.promise):(R?(A=this.getBase64(C))&&A.then(function(H){this.urlCache[C]=H,j.resolve(H)}.bind(this)):(A=this.getBlob(C))&&A.then(function(H){e=I.createObjectURL(H),this.urlCache[C]=e,j.resolve(e)}.bind(this)),A||j.reject({message:"File not found in the epub: "+C,stack:new Error().stack}),j.promise)}revokeUrl(C){var d=window.URL||window.webkitURL||window.mozURL,e=this.urlCache[C];e&&d.revokeObjectURL(e)}destroy(){var C=window.URL||window.webkitURL||window.mozURL;for(let d in this.urlCache)C.revokeObjectURL(d);this.zip=void 0,this.urlCache={}}},xt=g(23),$=g.n(xt);class rt{constructor(d,e,A){this.urlCache={},this.storage=void 0,this.name=d,this.requester=e||x,this.resolver=A,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let d;$.a===void 0&&(d=$.a),this.storage=d.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(d){let e=navigator.onLine;this.online=e,e?this.emit("online",this):this.emit("offline",this)}add(d,e){let A=d.resources.map(j=>{let{href:I}=j,R=this.resolver(I),H=window.encodeURIComponent(R);return this.storage.getItem(H).then(tt=>!tt||e?this.requester(R,"binary").then(ot=>this.storage.setItem(H,ot)):tt)});return Promise.all(A)}put(d,e,A){let j=window.encodeURIComponent(d);return this.storage.getItem(j).then(I=>I||this.requester(d,"binary",e,A).then(R=>this.storage.setItem(j,R)))}request(d,e,A,j){return this.online?this.requester(d,e,A,j).then(I=>(this.put(d),I)):this.retrieve(d,e)}retrieve(d,e){new a.defer;var A=new s.a(d);return e||(e=A.extension),(e=="blob"?this.getBlob(d):this.getText(d)).then(j=>{var I,R=new a.defer;return j?(I=this.handleResponse(j,e),R.resolve(I)):R.reject({message:"File not found in storage: "+d,stack:new Error().stack}),R.promise})}handleResponse(d,e){return e=="json"?JSON.parse(d):Object(a.isXml)(e)?Object(a.parse)(d,"text/xml"):e=="xhtml"?Object(a.parse)(d,"application/xhtml+xml"):e=="html"||e=="htm"?Object(a.parse)(d,"text/html"):d}getBlob(d,e){let A=window.encodeURIComponent(d);return this.storage.getItem(A).then(function(j){if(j)return e=e||Z.lookup(d),new Blob([j],{type:e})})}getText(d,e){let A=window.encodeURIComponent(d);return e=e||Z.lookup(d),this.storage.getItem(A).then(function(j){var I,R=new a.defer,H=new FileReader;if(j)return I=new Blob([j],{type:e}),H.addEventListener("loadend",()=>{R.resolve(H.result)}),H.readAsText(I,e),R.promise})}getBase64(d,e){let A=window.encodeURIComponent(d);return e=e||Z.lookup(d),this.storage.getItem(A).then(j=>{var I,R=new a.defer,H=new FileReader;if(j)return I=new Blob([j],{type:e}),H.addEventListener("loadend",()=>{R.resolve(H.result)}),H.readAsDataURL(I,e),R.promise})}createUrl(d,e){var A,j,I=new a.defer,R=window.URL||window.webkitURL||window.mozURL,H=e&&e.base64;return d in this.urlCache?(I.resolve(this.urlCache[d]),I.promise):(H?(j=this.getBase64(d))&&j.then(function(tt){this.urlCache[d]=tt,I.resolve(tt)}.bind(this)):(j=this.getBlob(d))&&j.then(function(tt){A=R.createObjectURL(tt),this.urlCache[d]=A,I.resolve(A)}.bind(this)),j||I.reject({message:"File not found in storage: "+d,stack:new Error().stack}),I.promise)}revokeUrl(d){var e=window.URL||window.webkitURL||window.mozURL,A=this.urlCache[d];A&&e.revokeObjectURL(A)}destroy(){var d=window.URL||window.webkitURL||window.mozURL;for(let e in this.urlCache)d.revokeObjectURL(e);this.urlCache={},this.removeListeners()}}_()(rt.prototype);var wt=rt,_t=class{constructor(C){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",C&&this.parse(C)}parse(C){if(!C)return this;const d=Object(a.qs)(C,"display_options");return d?(Object(a.qsa)(d,"option").forEach(e=>{let A="";switch(e.childNodes.length&&(A=e.childNodes[0].nodeValue),e.attributes.name.value){case"interactive":this.interactive=A;break;case"fixed-layout":this.fixedLayout=A;break;case"open-to-spread":this.openToSpread=A;break;case"orientation-lock":this.orientationLock=A}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}};const gt="binary",Pt="base64",At="epub",Ot="opf",vt="json",Vt="directory";class Mt{constructor(d,e){e===void 0&&typeof d!="string"&&!(d instanceof Blob)&&!(d instanceof ArrayBuffer)&&(e=d,d=void 0),this.settings=Object(a.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Object(a.extend)(this.settings,e),this.opening=new a.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new a.defer,spine:new a.defer,metadata:new a.defer,cover:new a.defer,navigation:new a.defer,pageList:new a.defer,resources:new a.defer,displayOptions:new a.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||x,this.spine=new b,this.locations=new m(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),d&&this.open(d,this.settings.openAs).catch(A=>{var j=new Error("Cannot load book at "+d);this.emit(i.c.BOOK.OPEN_FAILED,j)})}open(d,e){var A,j=e||this.determineType(d);return j===gt?(this.archived=!0,this.url=new p.a("/",""),A=this.openEpub(d)):j===Pt?(this.archived=!0,this.url=new p.a("/",""),A=this.openEpub(d,j)):j===At?(this.archived=!0,this.url=new p.a("/",""),A=this.request(d,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):j==Ot?(this.url=new p.a(d),A=this.openPackaging(this.url.Path.toString())):j==vt?(this.url=new p.a(d),A=this.openManifest(this.url.Path.toString())):(this.url=new p.a(d),A=this.openContainer("META-INF/container.xml").then(this.openPackaging.bind(this))),A}openEpub(d,e){return this.unarchive(d,e||this.settings.encoding).then(()=>this.openContainer("META-INF/container.xml")).then(A=>this.openPackaging(A))}openContainer(d){return this.load(d).then(e=>(this.container=new f(e),this.resolve(this.container.packagePath)))}openPackaging(d){return this.path=new s.a(d),this.load(d).then(e=>(this.packaging=new k(e),this.unpack(this.packaging)))}openManifest(d){return this.path=new s.a(d),this.load(d).then(e=>(this.packaging=new k,this.packaging.load(e),this.unpack(this.packaging)))}load(d){var e=this.resolve(d);return this.archived?this.archive.request(e):this.request(e,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(d,e){if(d){var A=d;return d.indexOf("://")>-1?d:(this.path&&(A=this.path.resolve(d)),e!=0&&this.url&&(A=this.url.resolve(A)),A)}}canonical(d){return d?this.settings.canonical?this.settings.canonical(d):this.resolve(d,!0):""}determineType(d){var e;return this.settings.encoding==="base64"?Pt:typeof d!="string"?gt:((e=new p.a(d).path().extension)&&(e=e.replace(/\?.*$/,"")),e?e==="epub"?At:e==="opf"?Ot:e==="json"?vt:void 0:Vt)}unpack(d){this.package=d,this.packaging.metadata.layout===""?this.load(this.url.resolve("META-INF/com.apple.ibooks.display-options.xml")).then(e=>{this.displayOptions=new _t(e),this.loading.displayOptions.resolve(this.displayOptions)}).catch(e=>{this.displayOptions=new _t,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new _t,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new w(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(e=>{console.error(e)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(d){let e=d.navPath||d.ncxPath,A=d.toc;return A?new Promise((j,I)=>{this.navigation=new M(A),d.pageList&&(this.pageList=new Q(d.pageList)),j(this.navigation)}):e?this.load(e,"xml").then(j=>(this.navigation=new M(j),this.pageList=new Q(j),this.navigation)):new Promise((j,I)=>{this.navigation=new M,this.pageList=new Q,j(this.navigation)})}section(d){return this.spine.get(d)}renderTo(d,e){return this.rendition=new ct.a(this,e),this.rendition.attachTo(d),this.rendition}setRequestCredentials(d){this.settings.requestCredentials=d}setRequestHeaders(d){this.settings.requestHeaders=d}unarchive(d,e){return this.archive=new ut,this.archive.open(d,e)}store(d){let e=this.settings.replacements&&this.settings.replacements!=="none",A=this.url,j=this.settings.requestMethod||x.bind(this);return this.storage=new wt(d,j,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let I=(R,H)=>{H.output=this.resources.substitute(R,H.url)};this.resources.settings.replacements=e||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new p.a("/",""),this.spine.hooks.serialize.register(I)}),this.storage.on("online",()=>{this.url=A,this.spine.hooks.serialize.deregister(I)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((d,e)=>{e.output=this.resources.substitute(d,e.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(d){var e=new u.a(d),A=this.spine.get(e.spinePos),j=this.load.bind(this);return A?A.load(j).then(function(I){return e.toRange(A.document)}):new Promise((I,R)=>{R("CFI could not be found")})}key(d){var e=d||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${i.b}:${e}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}_()(Mt.prototype),P.a=Mt},function(G,P,g){var E=g(14).NAMESPACE;function _(T){return T!==""}function a(T,O){return T.hasOwnProperty(O)||(T[O]=!0),T}function p(T){if(!T)return[];var O=function(D){return D?D.split(/[\t\n\f\r ]+/).filter(_):[]}(T);return Object.keys(O.reduce(a,{}))}function s(T,O){for(var D in T)O[D]=T[D]}function u(T,O){var D=T.prototype;if(!(D instanceof O)){let K=function(){};var V=K;K.prototype=O.prototype,s(D,K=new K),T.prototype=D=K}D.constructor!=T&&(typeof T!="function"&&console.error("unknown Class:"+T),D.constructor=T)}var l={},o=l.ELEMENT_NODE=1,x=l.ATTRIBUTE_NODE=2,r=l.TEXT_NODE=3,c=l.CDATA_SECTION_NODE=4,b=l.ENTITY_REFERENCE_NODE=5,n=l.ENTITY_NODE=6,i=l.PROCESSING_INSTRUCTION_NODE=7,h=l.COMMENT_NODE=8,m=l.DOCUMENT_NODE=9,y=l.DOCUMENT_TYPE_NODE=10,S=l.DOCUMENT_FRAGMENT_NODE=11,f=l.NOTATION_NODE=12,k={},M={},X=(k.INDEX_SIZE_ERR=(M[1]="Index size error",1),k.DOMSTRING_SIZE_ERR=(M[2]="DOMString size error",2),k.HIERARCHY_REQUEST_ERR=(M[3]="Hierarchy request error",3)),B=(k.WRONG_DOCUMENT_ERR=(M[4]="Wrong document",4),k.INVALID_CHARACTER_ERR=(M[5]="Invalid character",5),k.NO_DATA_ALLOWED_ERR=(M[6]="No data allowed",6),k.NO_MODIFICATION_ALLOWED_ERR=(M[7]="No modification allowed",7),k.NOT_FOUND_ERR=(M[8]="Not found",8)),Z=(k.NOT_SUPPORTED_ERR=(M[9]="Not supported",9),k.INUSE_ATTRIBUTE_ERR=(M[10]="Attribute in use",10));k.INVALID_STATE_ERR=(M[11]="Invalid state",11),k.SYNTAX_ERR=(M[12]="Syntax error",12),k.INVALID_MODIFICATION_ERR=(M[13]="Invalid modification",13),k.NAMESPACE_ERR=(M[14]="Invalid namespace",14),k.INVALID_ACCESS_ERR=(M[15]="Invalid access",15);function w(T,O){if(O instanceof Error)var D=O;else D=this,Error.call(this,M[T]),this.message=M[T],Error.captureStackTrace&&Error.captureStackTrace(this,w);return D.code=T,O&&(this.message=this.message+": "+O),D}function Q(){}function ct(T,O){this._node=T,this._refresh=O,at(this)}function at(T){var O=T._node._inc||T._node.ownerDocument._inc;if(T._inc!=O){var D=T._refresh(T._node);q(T,"length",D.length),s(D,T),T._inc=O}}function St(){}function ut(T,O){for(var D=T.length;D--;)if(T[D]===O)return D}function xt(T,O,D,V){if(V?O[ut(O,V)]=D:O[O.length++]=D,T){D.ownerElement=T;var K=T.ownerDocument;K&&(V&&At(K,T,V),function(st,ht,ft){st&&st._inc++,ft.namespaceURI===E.XMLNS&&(ht._nsMap[ft.prefix?ft.localName:""]=ft.value)}(K,T,D))}}function $(T,O,D){var V=ut(O,D);if(!(V>=0))throw w(B,new Error(T.tagName+"@"+D));for(var K=O.length-1;V<K;)O[V]=O[++V];if(O.length=K,T){var st=T.ownerDocument;st&&(At(st,T,D),D.ownerElement=null)}}function rt(){}function wt(){}function _t(T){return(T=="<"?"&lt;":T==">"&&"&gt;")||T=="&"&&"&amp;"||T=='"'&&"&quot;"||"&#"+T.charCodeAt()+";"}function gt(T,O){if(O(T))return!0;if(T=T.firstChild)do if(gt(T,O))return!0;while(T=T.nextSibling)}function Pt(){}function At(T,O,D,V){T&&T._inc++,D.namespaceURI===E.XMLNS&&delete O._nsMap[D.prefix?D.localName:""]}function Ot(T,O,D){if(T&&T._inc){T._inc++;var V=O.childNodes;if(D)V[V.length++]=D;else{for(var K=O.firstChild,st=0;K;)V[st++]=K,K=K.nextSibling;V.length=st}}}function vt(T,O){var D=O.previousSibling,V=O.nextSibling;return D?D.nextSibling=V:T.firstChild=V,V?V.previousSibling=D:T.lastChild=D,Ot(T.ownerDocument,T),O}function Vt(T,O,D){var V=O.parentNode;if(V&&V.removeChild(O),O.nodeType===S){var K=O.firstChild;if(K==null)return O;var st=O.lastChild}else K=st=O;var ht=D?D.previousSibling:T.lastChild;K.previousSibling=ht,st.nextSibling=D,ht?ht.nextSibling=K:T.firstChild=K,D==null?T.lastChild=st:D.previousSibling=st;do K.parentNode=T;while(K!==st&&(K=K.nextSibling));return Ot(T.ownerDocument||T,T),O.nodeType==S&&(O.firstChild=O.lastChild=null),O}function Mt(){this._nsMap={}}function C(){}function d(){}function e(){}function A(){}function j(){}function I(){}function R(){}function H(){}function tt(){}function ot(){}function et(){}function pt(){}function Et(T,O){var D=[],V=this.nodeType==9&&this.documentElement||this,K=V.prefix,st=V.namespaceURI;if(st&&K==null&&(K=V.lookupPrefix(st))==null)var ht=[{namespace:st,prefix:null}];return U(this,D,T,O,ht),D.join("")}function mt(T,O,D){var V=T.prefix||"",K=T.namespaceURI;if(!K||V==="xml"&&K===E.XML||K===E.XMLNS)return!1;for(var st=D.length;st--;){var ht=D[st];if(ht.prefix===V)return ht.namespace!==K}return!0}function L(T,O,D){T.push(" ",O,'="',D.replace(/[<&"]/g,_t),'"')}function U(T,O,D,V,K){if(K||(K=[]),V){if(!(T=V(T)))return;if(typeof T=="string")return void O.push(T)}switch(T.nodeType){case o:var st=T.attributes,ht=st.length,ft=T.firstChild,kt=T.tagName,Lt=kt;if(!(D=E.isHTML(T.namespaceURI)||D)&&!T.prefix&&T.namespaceURI){for(var jt,zt=0;zt<st.length;zt++)if(st.item(zt).name==="xmlns"){jt=st.item(zt).value;break}if(!jt){for(var Xt=K.length-1;Xt>=0;Xt--)if((ie=K[Xt]).prefix===""&&ie.namespace===T.namespaceURI){jt=ie.namespace;break}}if(jt!==T.namespaceURI)for(Xt=K.length-1;Xt>=0;Xt--){var ie;if((ie=K[Xt]).namespace===T.namespaceURI){ie.prefix&&(Lt=ie.prefix+":"+kt);break}}}O.push("<",Lt);for(var re=0;re<ht;re++)(be=st.item(re)).prefix=="xmlns"?K.push({prefix:be.localName,namespace:be.value}):be.nodeName=="xmlns"&&K.push({prefix:"",namespace:be.value});for(re=0;re<ht;re++){var be,fe,Pe;mt(be=st.item(re),0,K)&&(L(O,(fe=be.prefix||"")?"xmlns:"+fe:"xmlns",Pe=be.namespaceURI),K.push({prefix:fe,namespace:Pe})),U(be,O,D,V,K)}if(kt===Lt&&mt(T,0,K)&&(L(O,(fe=T.prefix||"")?"xmlns:"+fe:"xmlns",Pe=T.namespaceURI),K.push({prefix:fe,namespace:Pe})),ft||D&&!/^(?:meta|link|img|br|hr|input)$/i.test(kt)){if(O.push(">"),D&&/^script$/i.test(kt))for(;ft;)ft.data?O.push(ft.data):U(ft,O,D,V,K.slice()),ft=ft.nextSibling;else for(;ft;)U(ft,O,D,V,K.slice()),ft=ft.nextSibling;O.push("</",Lt,">")}else O.push("/>");return;case m:case S:for(ft=T.firstChild;ft;)U(ft,O,D,V,K.slice()),ft=ft.nextSibling;return;case x:return L(O,T.name,T.value);case r:return O.push(T.data.replace(/[<&]/g,_t).replace(/]]>/g,"]]&gt;"));case c:return O.push("<![CDATA[",T.data,"]]>");case h:return O.push("<!--",T.data,"-->");case y:var Ke=T.publicId,Fe=T.systemId;if(O.push("<!DOCTYPE ",T.name),Ke)O.push(" PUBLIC ",Ke),Fe&&Fe!="."&&O.push(" ",Fe),O.push(">");else if(Fe&&Fe!=".")O.push(" SYSTEM ",Fe,">");else{var bi=T.internalSubset;bi&&O.push(" [",bi,"]"),O.push(">")}return;case i:return O.push("<?",T.target," ",T.data,"?>");case b:return O.push("&",T.nodeName,";");default:O.push("??",T.nodeName)}}function q(T,O,D){T[O]=D}w.prototype=Error.prototype,s(k,w),Q.prototype={length:0,item:function(T){return this[T]||null},toString:function(T,O){for(var D=[],V=0;V<this.length;V++)U(this[V],D,T,O);return D.join("")}},ct.prototype.item=function(T){return at(this),this[T]},u(ct,Q),St.prototype={length:0,item:Q.prototype.item,getNamedItem:function(T){for(var O=this.length;O--;){var D=this[O];if(D.nodeName==T)return D}},setNamedItem:function(T){var O=T.ownerElement;if(O&&O!=this._ownerElement)throw new w(Z);var D=this.getNamedItem(T.nodeName);return xt(this._ownerElement,this,T,D),D},setNamedItemNS:function(T){var O,D=T.ownerElement;if(D&&D!=this._ownerElement)throw new w(Z);return O=this.getNamedItemNS(T.namespaceURI,T.localName),xt(this._ownerElement,this,T,O),O},removeNamedItem:function(T){var O=this.getNamedItem(T);return $(this._ownerElement,this,O),O},removeNamedItemNS:function(T,O){var D=this.getNamedItemNS(T,O);return $(this._ownerElement,this,D),D},getNamedItemNS:function(T,O){for(var D=this.length;D--;){var V=this[D];if(V.localName==O&&V.namespaceURI==T)return V}return null}},rt.prototype={hasFeature:function(T,O){return!0},createDocument:function(T,O,D){var V=new Pt;if(V.implementation=this,V.childNodes=new Q,V.doctype=D||null,D&&V.appendChild(D),O){var K=V.createElementNS(T,O);V.appendChild(K)}return V},createDocumentType:function(T,O,D){var V=new I;return V.name=T,V.nodeName=T,V.publicId=O||"",V.systemId=D||"",V}},wt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(T,O){return Vt(this,T,O)},replaceChild:function(T,O){this.insertBefore(T,O),O&&this.removeChild(O)},removeChild:function(T){return vt(this,T)},appendChild:function(T){return this.insertBefore(T,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(T){return function O(D,V,K){var st=new V.constructor;for(var ht in V){var ft=V[ht];typeof ft!="object"&&ft!=st[ht]&&(st[ht]=ft)}switch(V.childNodes&&(st.childNodes=new Q),st.ownerDocument=D,st.nodeType){case o:var kt=V.attributes,Lt=st.attributes=new St,jt=kt.length;Lt._ownerElement=st;for(var zt=0;zt<jt;zt++)st.setAttributeNode(O(D,kt.item(zt),!0));break;case x:K=!0}if(K)for(var Xt=V.firstChild;Xt;)st.appendChild(O(D,Xt,K)),Xt=Xt.nextSibling;return st}(this.ownerDocument||this,this,T)},normalize:function(){for(var T=this.firstChild;T;){var O=T.nextSibling;O&&O.nodeType==r&&T.nodeType==r?(this.removeChild(O),T.appendData(O.data)):(T.normalize(),T=O)}},isSupported:function(T,O){return this.ownerDocument.implementation.hasFeature(T,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(T){for(var O=this;O;){var D=O._nsMap;if(D){for(var V in D)if(D[V]==T)return V}O=O.nodeType==x?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(T){for(var O=this;O;){var D=O._nsMap;if(D&&T in D)return D[T];O=O.nodeType==x?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(T){return this.lookupPrefix(T)==null}},s(l,wt),s(l,wt.prototype),Pt.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(T,O){if(T.nodeType==S){for(var D=T.firstChild;D;){var V=D.nextSibling;this.insertBefore(D,O),D=V}return T}return this.documentElement==null&&T.nodeType==o&&(this.documentElement=T),Vt(this,T,O),T.ownerDocument=this,T},removeChild:function(T){return this.documentElement==T&&(this.documentElement=null),vt(this,T)},importNode:function(T,O){return function D(V,K,st){var ht;switch(K.nodeType){case o:(ht=K.cloneNode(!1)).ownerDocument=V;case S:break;case x:st=!0}if(ht||(ht=K.cloneNode(!1)),ht.ownerDocument=V,ht.parentNode=null,st)for(var ft=K.firstChild;ft;)ht.appendChild(D(V,ft,st)),ft=ft.nextSibling;return ht}(this,T,O)},getElementById:function(T){var O=null;return gt(this.documentElement,function(D){if(D.nodeType==o&&D.getAttribute("id")==T)return O=D,!0}),O},getElementsByClassName:function(T){var O=p(T);return new ct(this,function(D){var V=[];return O.length>0&&gt(D.documentElement,function(K){if(K!==D&&K.nodeType===o){var st=K.getAttribute("class");if(st){var ht=T===st;if(!ht){var ft=p(st);ht=O.every((kt=ft,function(Lt){return kt&&kt.indexOf(Lt)!==-1}))}ht&&V.push(K)}}var kt}),V})},createElement:function(T){var O=new Mt;return O.ownerDocument=this,O.nodeName=T,O.tagName=T,O.localName=T,O.childNodes=new Q,(O.attributes=new St)._ownerElement=O,O},createDocumentFragment:function(){var T=new ot;return T.ownerDocument=this,T.childNodes=new Q,T},createTextNode:function(T){var O=new e;return O.ownerDocument=this,O.appendData(T),O},createComment:function(T){var O=new A;return O.ownerDocument=this,O.appendData(T),O},createCDATASection:function(T){var O=new j;return O.ownerDocument=this,O.appendData(T),O},createProcessingInstruction:function(T,O){var D=new et;return D.ownerDocument=this,D.tagName=D.target=T,D.nodeValue=D.data=O,D},createAttribute:function(T){var O=new C;return O.ownerDocument=this,O.name=T,O.nodeName=T,O.localName=T,O.specified=!0,O},createEntityReference:function(T){var O=new tt;return O.ownerDocument=this,O.nodeName=T,O},createElementNS:function(T,O){var D=new Mt,V=O.split(":"),K=D.attributes=new St;return D.childNodes=new Q,D.ownerDocument=this,D.nodeName=O,D.tagName=O,D.namespaceURI=T,V.length==2?(D.prefix=V[0],D.localName=V[1]):D.localName=O,K._ownerElement=D,D},createAttributeNS:function(T,O){var D=new C,V=O.split(":");return D.ownerDocument=this,D.nodeName=O,D.name=O,D.namespaceURI=T,D.specified=!0,V.length==2?(D.prefix=V[0],D.localName=V[1]):D.localName=O,D}},u(Pt,wt),Mt.prototype={nodeType:o,hasAttribute:function(T){return this.getAttributeNode(T)!=null},getAttribute:function(T){var O=this.getAttributeNode(T);return O&&O.value||""},getAttributeNode:function(T){return this.attributes.getNamedItem(T)},setAttribute:function(T,O){var D=this.ownerDocument.createAttribute(T);D.value=D.nodeValue=""+O,this.setAttributeNode(D)},removeAttribute:function(T){var O=this.getAttributeNode(T);O&&this.removeAttributeNode(O)},appendChild:function(T){return T.nodeType===S?this.insertBefore(T,null):function(O,D){var V=D.parentNode;if(V){var K=O.lastChild;V.removeChild(D),K=O.lastChild}return K=O.lastChild,D.parentNode=O,D.previousSibling=K,D.nextSibling=null,K?K.nextSibling=D:O.firstChild=D,O.lastChild=D,Ot(O.ownerDocument,O,D),D}(this,T)},setAttributeNode:function(T){return this.attributes.setNamedItem(T)},setAttributeNodeNS:function(T){return this.attributes.setNamedItemNS(T)},removeAttributeNode:function(T){return this.attributes.removeNamedItem(T.nodeName)},removeAttributeNS:function(T,O){var D=this.getAttributeNodeNS(T,O);D&&this.removeAttributeNode(D)},hasAttributeNS:function(T,O){return this.getAttributeNodeNS(T,O)!=null},getAttributeNS:function(T,O){var D=this.getAttributeNodeNS(T,O);return D&&D.value||""},setAttributeNS:function(T,O,D){var V=this.ownerDocument.createAttributeNS(T,O);V.value=V.nodeValue=""+D,this.setAttributeNode(V)},getAttributeNodeNS:function(T,O){return this.attributes.getNamedItemNS(T,O)},getElementsByTagName:function(T){return new ct(this,function(O){var D=[];return gt(O,function(V){V===O||V.nodeType!=o||T!=="*"&&V.tagName!=T||D.push(V)}),D})},getElementsByTagNameNS:function(T,O){return new ct(this,function(D){var V=[];return gt(D,function(K){K===D||K.nodeType!==o||T!=="*"&&K.namespaceURI!==T||O!=="*"&&K.localName!=O||V.push(K)}),V})}},Pt.prototype.getElementsByTagName=Mt.prototype.getElementsByTagName,Pt.prototype.getElementsByTagNameNS=Mt.prototype.getElementsByTagNameNS,u(Mt,wt),C.prototype.nodeType=x,u(C,wt),d.prototype={data:"",substringData:function(T,O){return this.data.substring(T,T+O)},appendData:function(T){T=this.data+T,this.nodeValue=this.data=T,this.length=T.length},insertData:function(T,O){this.replaceData(T,0,O)},appendChild:function(T){throw new Error(M[X])},deleteData:function(T,O){this.replaceData(T,O,"")},replaceData:function(T,O,D){D=this.data.substring(0,T)+D+this.data.substring(T+O),this.nodeValue=this.data=D,this.length=D.length}},u(d,wt),e.prototype={nodeName:"#text",nodeType:r,splitText:function(T){var O=this.data,D=O.substring(T);O=O.substring(0,T),this.data=this.nodeValue=O,this.length=O.length;var V=this.ownerDocument.createTextNode(D);return this.parentNode&&this.parentNode.insertBefore(V,this.nextSibling),V}},u(e,d),A.prototype={nodeName:"#comment",nodeType:h},u(A,d),j.prototype={nodeName:"#cdata-section",nodeType:c},u(j,d),I.prototype.nodeType=y,u(I,wt),R.prototype.nodeType=f,u(R,wt),H.prototype.nodeType=n,u(H,wt),tt.prototype.nodeType=b,u(tt,wt),ot.prototype.nodeName="#document-fragment",ot.prototype.nodeType=S,u(ot,wt),et.prototype.nodeType=i,u(et,wt),pt.prototype.serializeToString=function(T,O,D){return Et.call(T,O,D)},wt.prototype.toString=Et;try{Object.defineProperty&&(Object.defineProperty(ct.prototype,"length",{get:function(){return at(this),this.$$length}}),Object.defineProperty(wt.prototype,"textContent",{get:function(){return function T(O){switch(O.nodeType){case o:case S:var D=[];for(O=O.firstChild;O;)O.nodeType!==7&&O.nodeType!==8&&D.push(T(O)),O=O.nextSibling;return D.join("");default:return O.nodeValue}}(this)},set:function(T){switch(this.nodeType){case o:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(T||String(T))&&this.appendChild(this.ownerDocument.createTextNode(T));break;default:this.data=T,this.value=T,this.nodeValue=T}}}),q=function(T,O,D){T["$$"+O]=D})}catch{}P.DocumentType=I,P.DOMException=w,P.DOMImplementation=rt,P.Element=Mt,P.Node=wt,P.NodeList=Q,P.XMLSerializer=pt},function(G,P,g){var E=g(52),_=typeof self=="object"&&self&&self.Object===Object&&self,a=E||_||Function("return this")();G.exports=a},function(G,P,g){var E=g(26).Symbol;G.exports=E},function(G,P,g){var E=g(21),_=g(19);G.exports=function(a,p,s){var u=!0,l=!0;if(typeof a!="function")throw new TypeError("Expected a function");return _(s)&&(u="leading"in s?!!s.leading:u,l="trailing"in s?!!s.trailing:l),E(a,p,{leading:u,maxWait:p,trailing:l})}},function(G,P){G.exports=Y},function(G,P,g){"use strict";g.r(P),function(E){var _=g(24),a=g(16),p=g(2),s=g(12),u=g(0),l=g(1);g(20),g(10),g(22);function o(x,r){return new _.a(x,r)}o.VERSION=l.b,E!==void 0&&(E.EPUBJS_VERSION=l.b),o.Book=_.a,o.Rendition=a.a,o.Contents=s.a,o.CFI=p.a,o.utils=u,P.default=o}.call(this,g(17))},function(G,P,g){"use strict";var E=g(32),_=g(40),a=g(41),p=g(42);(G.exports=function(s,u){var l,o,x,r,c;return arguments.length<2||typeof s!="string"?(r=u,u=s,s=null):r=arguments[2],s==null?(l=x=!0,o=!1):(l=p.call(s,"c"),o=p.call(s,"e"),x=p.call(s,"w")),c={value:u,configurable:l,enumerable:o,writable:x},r?E(_(r),c):c}).gs=function(s,u,l){var o,x,r,c;return typeof s!="string"?(r=l,l=u,u=s,s=null):r=arguments[3],u==null?u=void 0:a(u)?l==null?l=void 0:a(l)||(r=l,l=void 0):(r=u,u=l=void 0),s==null?(o=!0,x=!1):(o=p.call(s,"c"),x=p.call(s,"e")),c={get:u,set:l,configurable:o,enumerable:x},r?E(_(r),c):c}},function(G,P,g){"use strict";G.exports=g(33)()?Object.assign:g(34)},function(G,P,g){"use strict";G.exports=function(){var E,_=Object.assign;return typeof _=="function"&&(_(E={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),E.foo+E.bar+E.trzy==="razdwatrzy")}},function(G,P,g){"use strict";var E=g(35),_=g(39),a=Math.max;G.exports=function(p,s){var u,l,o,x=a(arguments.length,2);for(p=Object(_(p)),o=function(r){try{p[r]=s[r]}catch(c){u||(u=c)}},l=1;l<x;++l)E(s=arguments[l]).forEach(o);if(u!==void 0)throw u;return p}},function(G,P,g){"use strict";G.exports=g(36)()?Object.keys:g(37)},function(G,P,g){"use strict";G.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(G,P,g){"use strict";var E=g(18),_=Object.keys;G.exports=function(a){return _(E(a)?Object(a):a)}},function(G,P,g){"use strict";G.exports=function(){}},function(G,P,g){"use strict";var E=g(18);G.exports=function(_){if(!E(_))throw new TypeError("Cannot use null or undefined");return _}},function(G,P,g){"use strict";var E=g(18),_=Array.prototype.forEach,a=Object.create,p=function(s,u){var l;for(l in s)u[l]=s[l]};G.exports=function(s){var u=a(null);return _.call(arguments,function(l){E(l)&&p(Object(l),u)}),u}},function(G,P,g){"use strict";G.exports=function(E){return typeof E=="function"}},function(G,P,g){"use strict";G.exports=g(43)()?String.prototype.contains:g(44)},function(G,P,g){"use strict";var E="razdwatrzy";G.exports=function(){return typeof E.contains=="function"&&E.contains("dwa")===!0&&E.contains("foo")===!1}},function(G,P,g){"use strict";var E=String.prototype.indexOf;G.exports=function(_){return E.call(this,_,arguments[1])>-1}},function(G,P,g){"use strict";G.exports=function(E){if(typeof E!="function")throw new TypeError(E+" is not a function");return E}},function(G,P,g){var E=g(14),_=g(25),a=g(47),p=g(48),s=_.DOMImplementation,u=E.NAMESPACE,l=p.ParseError,o=p.XMLReader;function x(h){this.options=h||{locator:{}}}function r(){this.cdata=!1}function c(h,m){m.lineNumber=h.lineNumber,m.columnNumber=h.columnNumber}function b(h){if(h)return`
@`+(h.systemId||"")+"#[line:"+h.lineNumber+",col:"+h.columnNumber+"]"}function n(h,m,y){return typeof h=="string"?h.substr(m,y):h.length>=m+y||m?new java.lang.String(h,m,y)+"":h}function i(h,m){h.currentElement?h.currentElement.appendChild(m):h.doc.appendChild(m)}x.prototype.parseFromString=function(h,m){var y=this.options,S=new o,f=y.domBuilder||new r,k=y.errorHandler,M=y.locator,X=y.xmlns||{},B=/\/x?html?$/.test(m),Z=B?a.HTML_ENTITIES:a.XML_ENTITIES;return M&&f.setDocumentLocator(M),S.errorHandler=function(w,Q,ct){if(!w){if(Q instanceof r)return Q;w=Q}var at={},St=w instanceof Function;function ut(xt){var $=w[xt];!$&&St&&($=w.length==2?function(rt){w(xt,rt)}:w),at[xt]=$&&function(rt){$("[xmldom "+xt+"]	"+rt+b(ct))}||function(){}}return ct=ct||{},ut("warning"),ut("error"),ut("fatalError"),at}(k,f,M),S.domBuilder=y.domBuilder||f,B&&(X[""]=u.HTML),X.xml=X.xml||u.XML,h&&typeof h=="string"?S.parse(h,X,Z):S.errorHandler.error("invalid doc source"),f.doc},r.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(h,m,y,S){var f=this.doc,k=f.createElementNS(h,y||m),M=S.length;i(this,k),this.currentElement=k,this.locator&&c(this.locator,k);for(var X=0;X<M;X++){h=S.getURI(X);var B=S.getValue(X),Z=(y=S.getQName(X),f.createAttributeNS(h,y));this.locator&&c(S.getLocator(X),Z),Z.value=Z.nodeValue=B,k.setAttributeNode(Z)}},endElement:function(h,m,y){var S=this.currentElement;S.tagName,this.currentElement=S.parentNode},startPrefixMapping:function(h,m){},endPrefixMapping:function(h){},processingInstruction:function(h,m){var y=this.doc.createProcessingInstruction(h,m);this.locator&&c(this.locator,y),i(this,y)},ignorableWhitespace:function(h,m,y){},characters:function(h,m,y){if(h=n.apply(this,arguments)){if(this.cdata)var S=this.doc.createCDATASection(h);else S=this.doc.createTextNode(h);this.currentElement?this.currentElement.appendChild(S):/^\s*$/.test(h)&&this.doc.appendChild(S),this.locator&&c(this.locator,S)}},skippedEntity:function(h){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(h){(this.locator=h)&&(h.lineNumber=0)},comment:function(h,m,y){h=n.apply(this,arguments);var S=this.doc.createComment(h);this.locator&&c(this.locator,S),i(this,S)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(h,m,y){var S=this.doc.implementation;if(S&&S.createDocumentType){var f=S.createDocumentType(h,m,y);this.locator&&c(this.locator,f),i(this,f),this.doc.doctype=f}},warning:function(h){console.warn("[xmldom warning]	"+h,b(this.locator))},error:function(h){console.error("[xmldom error]	"+h,b(this.locator))},fatalError:function(h){throw new l(h,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(h){r.prototype[h]=function(){return null}}),P.__DOMHandler=r,P.DOMParser=x,P.DOMImplementation=_.DOMImplementation,P.XMLSerializer=_.XMLSerializer},function(G,P,g){var E=g(14).freeze;P.XML_ENTITIES=E({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),P.HTML_ENTITIES=E({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),P.entityMap=P.HTML_ENTITIES},function(G,P,g){var E=g(14).NAMESPACE,_=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+_.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),p=new RegExp("^"+_.source+a.source+"*(?::"+_.source+a.source+"*)?$");function s(m,y){this.message=m,this.locator=y,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function u(){}function l(m,y){return y.lineNumber=m.lineNumber,y.columnNumber=m.columnNumber,y}function o(m,y,S,f,k,M){function X(at,St,ut){S.attributeNames.hasOwnProperty(at)&&M.fatalError("Attribute "+at+" redefined"),S.addValue(at,St,ut)}for(var B,Z=++y,w=0;;){var Q=m.charAt(Z);switch(Q){case"=":if(w===1)B=m.slice(y,Z),w=3;else{if(w!==2)throw new Error("attribute equal must after attrName");w=3}break;case"'":case'"':if(w===3||w===1){if(w===1&&(M.warning('attribute value must after "="'),B=m.slice(y,Z)),y=Z+1,!((Z=m.indexOf(Q,y))>0))throw new Error("attribute value no end '"+Q+"' match");X(B,ct=m.slice(y,Z).replace(/&#?\w+;/g,k),y-1),w=5}else{if(w!=4)throw new Error('attribute value must after "="');X(B,ct=m.slice(y,Z).replace(/&#?\w+;/g,k),y),M.warning('attribute "'+B+'" missed start quot('+Q+")!!"),y=Z+1,w=5}break;case"/":switch(w){case 0:S.setTagName(m.slice(y,Z));case 5:case 6:case 7:w=7,S.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return M.error("unexpected end of input"),w==0&&S.setTagName(m.slice(y,Z)),Z;case">":switch(w){case 0:S.setTagName(m.slice(y,Z));case 5:case 6:case 7:break;case 4:case 1:(ct=m.slice(y,Z)).slice(-1)==="/"&&(S.closed=!0,ct=ct.slice(0,-1));case 2:w===2&&(ct=B),w==4?(M.warning('attribute "'+ct+'" missed quot(")!'),X(B,ct.replace(/&#?\w+;/g,k),y)):(E.isHTML(f[""])&&ct.match(/^(?:disabled|checked|selected)$/i)||M.warning('attribute "'+ct+'" missed value!! "'+ct+'" instead!!'),X(ct,ct,y));break;case 3:throw new Error("attribute value missed!!")}return Z;case"\x80":Q=" ";default:if(Q<=" ")switch(w){case 0:S.setTagName(m.slice(y,Z)),w=6;break;case 1:B=m.slice(y,Z),w=2;break;case 4:var ct=m.slice(y,Z).replace(/&#?\w+;/g,k);M.warning('attribute "'+ct+'" missed quot(")!!'),X(B,ct,y);case 5:w=6}else switch(w){case 2:S.tagName,E.isHTML(f[""])&&B.match(/^(?:disabled|checked|selected)$/i)||M.warning('attribute "'+B+'" missed value!! "'+B+'" instead2!!'),X(B,B,y),y=Z,w=1;break;case 5:M.warning('attribute space is required"'+B+'"!!');case 6:w=1,y=Z;break;case 3:w=4,y=Z;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}Z++}}function x(m,y,S){for(var f=m.tagName,k=null,M=m.length;M--;){var X=m[M],B=X.qName,Z=X.value;if((at=B.indexOf(":"))>0)var w=X.prefix=B.slice(0,at),Q=B.slice(at+1),ct=w==="xmlns"&&Q;else Q=B,w=null,ct=B==="xmlns"&&"";X.localName=Q,ct!==!1&&(k==null&&(k={},b(S,S={})),S[ct]=k[ct]=Z,X.uri=E.XMLNS,y.startPrefixMapping(ct,Z))}for(M=m.length;M--;)(w=(X=m[M]).prefix)&&(w==="xml"&&(X.uri=E.XML),w!=="xmlns"&&(X.uri=S[w||""]));var at;(at=f.indexOf(":"))>0?(w=m.prefix=f.slice(0,at),Q=m.localName=f.slice(at+1)):(w=null,Q=m.localName=f);var St=m.uri=S[w||""];if(y.startElement(St,Q,f,m),!m.closed)return m.currentNSMap=S,m.localNSMap=k,!0;if(y.endElement(St,Q,f),k)for(w in k)y.endPrefixMapping(w)}function r(m,y,S,f,k){if(/^(?:script|textarea)$/i.test(S)){var M=m.indexOf("</"+S+">",y),X=m.substring(y+1,M);if(/[&<]/.test(X))return/^script$/i.test(S)?(k.characters(X,0,X.length),M):(X=X.replace(/&#?\w+;/g,f),k.characters(X,0,X.length),M)}return y+1}function c(m,y,S,f){var k=f[S];return k==null&&((k=m.lastIndexOf("</"+S+">"))<y&&(k=m.lastIndexOf("</"+S)),f[S]=k),k<y}function b(m,y){for(var S in m)y[S]=m[S]}function n(m,y,S,f){switch(m.charAt(y+2)){case"-":return m.charAt(y+3)==="-"?(k=m.indexOf("-->",y+4))>y?(S.comment(m,y+4,k-y-4),k+3):(f.error("Unclosed comment"),-1):-1;default:if(m.substr(y+3,6)=="CDATA["){var k=m.indexOf("]]>",y+9);return S.startCDATA(),S.characters(m,y+9,k-y-9),S.endCDATA(),k+3}var M=function(ct,at){var St,ut=[],xt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(xt.lastIndex=at,xt.exec(ct);St=xt.exec(ct);)if(ut.push(St),St[1])return ut}(m,y),X=M.length;if(X>1&&/!doctype/i.test(M[0][0])){var B=M[1][0],Z=!1,w=!1;X>3&&(/^public$/i.test(M[2][0])?(Z=M[3][0],w=X>4&&M[4][0]):/^system$/i.test(M[2][0])&&(w=M[3][0]));var Q=M[X-1];return S.startDTD(B,Z,w),S.endDTD(),Q.index+Q[0].length}}return-1}function i(m,y,S){var f=m.indexOf("?>",y);if(f){var k=m.substring(y,f).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return k?(k[0].length,S.processingInstruction(k[1],k[2]),f+2):-1}return-1}function h(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,u.prototype={parse:function(m,y,S){var f=this.domBuilder;f.startDocument(),b(y,y={}),function(k,M,X,B,Z){function w(H){var tt=H.slice(1,-1);return tt in X?X[tt]:tt.charAt(0)==="#"?function(ot){if(ot>65535){var et=55296+((ot-=65536)>>10),pt=56320+(1023&ot);return String.fromCharCode(et,pt)}return String.fromCharCode(ot)}(parseInt(tt.substr(1).replace("x","0x"))):(Z.error("entity not found:"+H),H)}function Q(H){if(H>wt){var tt=k.substring(wt,H).replace(/&#?\w+;/g,w);xt&&ct(wt),B.characters(tt,0,H-wt),wt=H}}function ct(H,tt){for(;H>=St&&(tt=ut.exec(k));)at=tt.index,St=at+tt[0].length,xt.lineNumber++;xt.columnNumber=H-at+1}for(var at=0,St=0,ut=/.*(?:\r\n?|\n)|.*$/g,xt=B.locator,$=[{currentNSMap:M}],rt={},wt=0;;){try{var _t=k.indexOf("<",wt);if(_t<0){if(!k.substr(wt).match(/^\s*$/)){var gt=B.doc,Pt=gt.createTextNode(k.substr(wt));gt.appendChild(Pt),B.currentElement=Pt}return}switch(_t>wt&&Q(_t),k.charAt(_t+1)){case"/":var At=k.indexOf(">",_t+3),Ot=k.substring(_t+2,At).replace(/[ \t\n\r]+$/g,""),vt=$.pop();At<0?(Ot=k.substring(_t+2).replace(/[\s<].*/,""),Z.error("end tag name: "+Ot+" is not complete:"+vt.tagName),At=_t+1+Ot.length):Ot.match(/\s</)&&(Ot=Ot.replace(/[\s<].*/,""),Z.error("end tag name: "+Ot+" maybe not complete"),At=_t+1+Ot.length);var Vt=vt.localNSMap,Mt=vt.tagName==Ot;if(Mt||vt.tagName&&vt.tagName.toLowerCase()==Ot.toLowerCase()){if(B.endElement(vt.uri,vt.localName,Ot),Vt)for(var C in Vt)B.endPrefixMapping(C);Mt||Z.fatalError("end tag name: "+Ot+" is not match the current start tagName:"+vt.tagName)}else $.push(vt);At++;break;case"?":xt&&ct(_t),At=i(k,_t,B);break;case"!":xt&&ct(_t),At=n(k,_t,B,Z);break;default:xt&&ct(_t);var d=new h,e=$[$.length-1].currentNSMap,A=(At=o(k,_t,d,e,w,Z),d.length);if(!d.closed&&c(k,At,d.tagName,rt)&&(d.closed=!0,X.nbsp||Z.warning("unclosed xml attribute")),xt&&A){for(var j=l(xt,{}),I=0;I<A;I++){var R=d[I];ct(R.offset),R.locator=l(xt,{})}B.locator=j,x(d,B,e)&&$.push(d),B.locator=xt}else x(d,B,e)&&$.push(d);E.isHTML(d.uri)&&!d.closed?At=r(k,At,d.tagName,w,B):At++}}catch(H){if(H instanceof s)throw H;Z.error("element parse error: "+H),At=-1}At>wt?wt=At:Q(Math.max(_t,wt)+1)}}(m,y,S,f,this.errorHandler),f.endDocument()}},h.prototype={setTagName:function(m){if(!p.test(m))throw new Error("invalid tagName:"+m);this.tagName=m},addValue:function(m,y,S){if(!p.test(m))throw new Error("invalid attribute:"+m);this.attributeNames[m]=this.length,this[this.length++]={qName:m,value:y,offset:S}},length:0,getLocalName:function(m){return this[m].localName},getLocator:function(m){return this[m].locator},getQName:function(m){return this[m].qName},getURI:function(m){return this[m].uri},getValue:function(m){return this[m].value}},P.XMLReader=u,P.ParseError=s},function(G,P,g){"use strict";function E(_){return document.createElementNS("http://www.w3.org/2000/svg",_)}Object.defineProperty(P,"__esModule",{value:!0}),P.createElement=E,P.default={createElement:E}},function(G,P,g){"use strict";function E(p,s){function u(r){for(var c=s.length-1;c>=0;c--){var b=s[c],n=r.clientX,i=r.clientY;if(r.touches&&r.touches.length&&(n=r.touches[0].clientX,i=r.touches[0].clientY),a(b,p,n,i)){b.dispatchEvent(_(r));break}}}if(p.nodeName==="iframe"||p.nodeName==="IFRAME")try{this.target=p.contentDocument}catch{this.target=p}else this.target=p;for(var l=["mouseup","mousedown","click","touchstart"],o=0;o<l.length;o++){var x=l[o];this.target.addEventListener(x,function(r){return u(r)},!1)}}function _(p){var s=Object.assign({},p,{bubbles:!1});try{return new MouseEvent(p.type,s)}catch{var u=document.createEvent("MouseEvents");return u.initMouseEvent(p.type,!1,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget),u}}function a(p,s,u,l){var o=s.getBoundingClientRect();function x(n,i,h){var m=n.top-o.top,y=n.left-o.left,S=m+n.height,f=y+n.width;return m<=h&&y<=i&&S>h&&f>i}if(!x(p.getBoundingClientRect(),u,l))return!1;for(var r=p.getClientRects(),c=0,b=r.length;c<b;c++)if(x(r[c],u,l))return!0;return!1}Object.defineProperty(P,"__esModule",{value:!0}),P.proxyMouse=E,P.clone=_,P.default={proxyMouse:E}},function(G,P,g){var E=g(26);G.exports=function(){return E.Date.now()}},function(G,P,g){(function(E){var _=typeof E=="object"&&E&&E.Object===Object&&E;G.exports=_}).call(this,g(17))},function(G,P,g){var E=g(54),_=g(19),a=g(56),p=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;G.exports=function(o){if(typeof o=="number")return o;if(a(o))return NaN;if(_(o)){var x=typeof o.valueOf=="function"?o.valueOf():o;o=_(x)?x+"":x}if(typeof o!="string")return o===0?o:+o;o=E(o);var r=s.test(o);return r||u.test(o)?l(o.slice(2),r?2:8):p.test(o)?NaN:+o}},function(G,P,g){var E=g(55),_=/^\s+/;G.exports=function(a){return a&&a.slice(0,E(a)+1).replace(_,"")}},function(G,P){var g=/\s/;G.exports=function(E){for(var _=E.length;_--&&g.test(E.charAt(_)););return _}},function(G,P,g){var E=g(57),_=g(60);G.exports=function(a){return typeof a=="symbol"||_(a)&&E(a)=="[object Symbol]"}},function(G,P,g){var E=g(27),_=g(58),a=g(59),p=E?E.toStringTag:void 0;G.exports=function(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":p&&p in Object(s)?_(s):a(s)}},function(G,P,g){var E=g(27),_=Object.prototype,a=_.hasOwnProperty,p=_.toString,s=E?E.toStringTag:void 0;G.exports=function(u){var l=a.call(u,s),o=u[s];try{u[s]=void 0;var x=!0}catch{}var r=p.call(u);return x&&(l?u[s]=o:delete u[s]),r}},function(G,P){var g=Object.prototype.toString;G.exports=function(E){return g.call(E)}},function(G,P){G.exports=function(g){return g!=null&&typeof g=="object"}}]).default});/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(Y,G,P,g){"use strict";function E(z,W,J){return setTimeout(u(z,J),W)}function _(z,W,J){return Array.isArray(z)?(a(z,J[W],J),!0):!1}function a(z,W,J){var lt;if(z)if(z.forEach)z.forEach(W,J);else if(z.length!==g)for(lt=0;lt<z.length;)W.call(J,z[lt],lt,z),lt++;else for(lt in z)z.hasOwnProperty(lt)&&W.call(J,z[lt],lt,z)}function p(z,W,J){var lt="DEPRECATED METHOD: "+W+`
`+J+` AT 
`;return function(){var bt=new Error("get-stack-trace"),Dt=bt&&bt.stack?bt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ft=Y.console&&(Y.console.warn||Y.console.log);return Ft&&Ft.call(Y.console,lt,Dt),z.apply(this,arguments)}}function s(z,W,J){var lt,bt=W.prototype;lt=z.prototype=Object.create(bt),lt.constructor=z,lt._super=bt,J&&D(lt,J)}function u(z,W){return function(){return z.apply(W,arguments)}}function l(z,W){return typeof z==st?z.apply(W&&W[0]||g,W):z}function o(z,W){return z===g?W:z}function x(z,W,J){a(n(W),function(lt){z.addEventListener(lt,J,!1)})}function r(z,W,J){a(n(W),function(lt){z.removeEventListener(lt,J,!1)})}function c(z,W){for(;z;){if(z==W)return!0;z=z.parentNode}return!1}function b(z,W){return z.indexOf(W)>-1}function n(z){return z.trim().split(/\s+/g)}function i(z,W,J){if(z.indexOf&&!J)return z.indexOf(W);for(var lt=0;lt<z.length;){if(J&&z[lt][J]==W||!J&&z[lt]===W)return lt;lt++}return-1}function h(z){return Array.prototype.slice.call(z,0)}function m(z,W,J){for(var lt=[],bt=[],Dt=0;Dt<z.length;){var Ft=W?z[Dt][W]:z[Dt];i(bt,Ft)<0&&lt.push(z[Dt]),bt[Dt]=Ft,Dt++}return J&&(lt=W?lt.sort(function(Yt,Ne){return Yt[W]>Ne[W]}):lt.sort()),lt}function y(z,W){for(var J,lt,bt=W[0].toUpperCase()+W.slice(1),Dt=0;Dt<V.length;){if(J=V[Dt],lt=J?J+bt:W,lt in z)return lt;Dt++}return g}function S(){return zt++}function f(z){var W=z.ownerDocument||z;return W.defaultView||W.parentWindow||Y}function k(z,W){var J=this;this.manager=z,this.callback=W,this.element=z.element,this.target=z.options.inputTarget,this.domHandler=function(lt){l(z.options.enable,[z])&&J.handler(lt)},this.init()}function M(z){var W,J=z.options.inputClass;return new(W=J||(re?_t:be?At:ie?vt:wt))(z,X)}function X(z,W,J){var lt=J.pointers.length,bt=J.changedPointers.length,Dt=W&se&&lt-bt===0,Ft=W&(oe|ye)&&lt-bt===0;J.isFirst=!!Dt,J.isFinal=!!Ft,Dt&&(z.session={}),J.eventType=W,B(z,J),z.emit("hammer.input",J),z.recognize(J),z.session.prevInput=J}function B(z,W){var J=z.session,lt=W.pointers,bt=lt.length;J.firstInput||(J.firstInput=Q(W)),bt>1&&!J.firstMultiple?J.firstMultiple=Q(W):bt===1&&(J.firstMultiple=!1);var Dt=J.firstInput,Ft=J.firstMultiple,Yt=Ft?Ft.center:Dt.center,Ne=W.center=ct(lt);W.timeStamp=kt(),W.deltaTime=W.timeStamp-Dt.timeStamp,W.angle=xt(Yt,Ne),W.distance=ut(Yt,Ne),Z(J,W),W.offsetDirection=St(W.deltaX,W.deltaY);var he=at(W.deltaTime,W.deltaX,W.deltaY);W.overallVelocityX=he.x,W.overallVelocityY=he.y,W.overallVelocity=ft(he.x)>ft(he.y)?he.x:he.y,W.scale=Ft?rt(Ft.pointers,lt):1,W.rotation=Ft?$(Ft.pointers,lt):0,W.maxPointers=J.prevInput?W.pointers.length>J.prevInput.maxPointers?W.pointers.length:J.prevInput.maxPointers:W.pointers.length,w(J,W);var Se=z.element;c(W.srcEvent.target,Se)&&(Se=W.srcEvent.target),W.target=Se}function Z(z,W){var J=W.center,lt=z.offsetDelta||{},bt=z.prevDelta||{},Dt=z.prevInput||{};W.eventType!==se&&Dt.eventType!==oe||(bt=z.prevDelta={x:Dt.deltaX||0,y:Dt.deltaY||0},lt=z.offsetDelta={x:J.x,y:J.y}),W.deltaX=bt.x+(J.x-lt.x),W.deltaY=bt.y+(J.y-lt.y)}function w(z,W){var J,lt,bt,Dt,Ft=z.lastInterval||W,Yt=W.timeStamp-Ft.timeStamp;if(W.eventType!=ye&&(Yt>bi||Ft.velocity===g)){var Ne=W.deltaX-Ft.deltaX,he=W.deltaY-Ft.deltaY,Se=at(Yt,Ne,he);lt=Se.x,bt=Se.y,J=ft(Se.x)>ft(Se.y)?Se.x:Se.y,Dt=St(Ne,he),z.lastInterval=W}else J=Ft.velocity,lt=Ft.velocityX,bt=Ft.velocityY,Dt=Ft.direction;W.velocity=J,W.velocityX=lt,W.velocityY=bt,W.direction=Dt}function Q(z){for(var W=[],J=0;J<z.pointers.length;)W[J]={clientX:ht(z.pointers[J].clientX),clientY:ht(z.pointers[J].clientY)},J++;return{timeStamp:kt(),pointers:W,center:ct(W),deltaX:z.deltaX,deltaY:z.deltaY}}function ct(z){var W=z.length;if(W===1)return{x:ht(z[0].clientX),y:ht(z[0].clientY)};for(var J=0,lt=0,bt=0;W>bt;)J+=z[bt].clientX,lt+=z[bt].clientY,bt++;return{x:ht(J/W),y:ht(lt/W)}}function at(z,W,J){return{x:W/z||0,y:J/z||0}}function St(z,W){return z===W?yi:ft(z)>=ft(W)?0>z?si:oi:0>W?He:Le}function ut(z,W,J){J||(J=Ui);var lt=W[J[0]]-z[J[0]],bt=W[J[1]]-z[J[1]];return Math.sqrt(lt*lt+bt*bt)}function xt(z,W,J){J||(J=Ui);var lt=W[J[0]]-z[J[0]],bt=W[J[1]]-z[J[1]];return 180*Math.atan2(bt,lt)/Math.PI}function $(z,W){return xt(W[1],W[0],wi)+xt(z[1],z[0],wi)}function rt(z,W){return ut(W[0],W[1],wi)/ut(z[0],z[1],wi)}function wt(){this.evEl=pe,this.evWin=we,this.pressed=!1,k.apply(this,arguments)}function _t(){this.evEl=ai,this.evWin=Ve,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function gt(){this.evTarget=Qe,this.evWin=Wi,this.started=!1,k.apply(this,arguments)}function Pt(z,W){var J=h(z.touches),lt=h(z.changedTouches);return W&(oe|ye)&&(J=m(J.concat(lt),"identifier",!0)),[J,lt]}function At(){this.evTarget=ti,this.targetIds={},k.apply(this,arguments)}function Ot(z,W){var J=h(z.touches),lt=this.targetIds;if(W&(se|Oe)&&J.length===1)return lt[J[0].identifier]=!0,[J,J];var bt,Dt,Ft=h(z.changedTouches),Yt=[],Ne=this.target;if(Dt=J.filter(function(he){return c(he.target,Ne)}),W===se)for(bt=0;bt<Dt.length;)lt[Dt[bt].identifier]=!0,bt++;for(bt=0;bt<Ft.length;)lt[Ft[bt].identifier]&&Yt.push(Ft[bt]),W&(oe|ye)&&delete lt[Ft[bt].identifier],bt++;return Yt.length?[m(Dt.concat(Yt),"identifier",!0),Yt]:void 0}function vt(){k.apply(this,arguments);var z=u(this.handler,this);this.touch=new At(this.manager,z),this.mouse=new wt(this.manager,z),this.primaryTouch=null,this.lastTouches=[]}function Vt(z,W){z&se?(this.primaryTouch=W.changedPointers[0].identifier,Mt.call(this,W)):z&(oe|ye)&&Mt.call(this,W)}function Mt(z){var W=z.changedPointers[0];if(W.identifier===this.primaryTouch){var J={x:W.clientX,y:W.clientY};this.lastTouches.push(J);var lt=this.lastTouches,bt=function(){var Dt=lt.indexOf(J);Dt>-1&&lt.splice(Dt,1)};setTimeout(bt,qi)}}function C(z){for(var W=z.srcEvent.clientX,J=z.srcEvent.clientY,lt=0;lt<this.lastTouches.length;lt++){var bt=this.lastTouches[lt],Dt=Math.abs(W-bt.x),Ft=Math.abs(J-bt.y);if(xi>=Dt&&xi>=Ft)return!0}return!1}function d(z,W){this.manager=z,this.set(W)}function e(z){if(b(z,Ue))return Ue;var W=b(z,ei),J=b(z,ii);return W&&J?Ue:W||J?W?ei:ii:b(z,Si)?Si:Di}function A(){if(!Ii)return!1;var z={},W=Y.CSS&&Y.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(J){z[J]=W?Y.CSS.supports("touch-action",J):!0}),z}function j(z){this.options=D({},this.defaults,z||{}),this.id=S(),this.manager=null,this.options.enable=o(this.options.enable,!0),this.state=li,this.simultaneous={},this.requireFail=[]}function I(z){return z&ue?"cancel":z&ae?"end":z&ge?"move":z&Ee?"start":""}function R(z){return z==Le?"down":z==He?"up":z==si?"left":z==oi?"right":""}function H(z,W){var J=W.manager;return J?J.get(z):z}function tt(){j.apply(this,arguments)}function ot(){tt.apply(this,arguments),this.pX=null,this.pY=null}function et(){tt.apply(this,arguments)}function pt(){j.apply(this,arguments),this._timer=null,this._input=null}function Et(){tt.apply(this,arguments)}function mt(){tt.apply(this,arguments)}function L(){j.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function U(z,W){return W=W||{},W.recognizers=o(W.recognizers,U.defaults.preset),new q(z,W)}function q(z,W){this.options=D({},U.defaults,W||{}),this.options.inputTarget=this.options.inputTarget||z,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=z,this.input=M(this),this.touchAction=new d(this,this.options.touchAction),T(this,!0),a(this.options.recognizers,function(J){var lt=this.add(new J[0](J[1]));J[2]&&lt.recognizeWith(J[2]),J[3]&&lt.requireFailure(J[3])},this)}function T(z,W){var J=z.element;if(J.style){var lt;a(z.options.cssProps,function(bt,Dt){lt=y(J.style,Dt),W?(z.oldCssProps[lt]=J.style[lt],J.style[lt]=bt):J.style[lt]=z.oldCssProps[lt]||""}),W||(z.oldCssProps={})}}function O(z,W){var J=G.createEvent("Event");J.initEvent(z,!0,!0),J.gesture=W,W.target.dispatchEvent(J)}var D,V=["","webkit","Moz","MS","ms","o"],K=G.createElement("div"),st="function",ht=Math.round,ft=Math.abs,kt=Date.now;D=typeof Object.assign!="function"?function(z){if(z===g||z===null)throw new TypeError("Cannot convert undefined or null to object");for(var W=Object(z),J=1;J<arguments.length;J++){var lt=arguments[J];if(lt!==g&&lt!==null)for(var bt in lt)lt.hasOwnProperty(bt)&&(W[bt]=lt[bt])}return W}:Object.assign;var Lt=p(function(z,W,J){for(var lt=Object.keys(W),bt=0;bt<lt.length;)(!J||J&&z[lt[bt]]===g)&&(z[lt[bt]]=W[lt[bt]]),bt++;return z},"extend","Use `assign`."),jt=p(function(z,W){return Lt(z,W,!0)},"merge","Use `assign`."),zt=1,Xt=/mobile|tablet|ip(ad|hone|od)|android/i,ie="ontouchstart"in Y,re=y(Y,"PointerEvent")!==g,be=ie&&Xt.test(navigator.userAgent),fe="touch",Pe="pen",Ke="mouse",Fe="kinect",bi=25,se=1,Oe=2,oe=4,ye=8,yi=1,si=2,oi=4,He=8,Le=16,_e=si|oi,$e=He|Le,_i=_e|$e,Ui=["x","y"],wi=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&x(this.element,this.evEl,this.domHandler),this.evTarget&&x(this.target,this.evTarget,this.domHandler),this.evWin&&x(f(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&r(this.element,this.evEl,this.domHandler),this.evTarget&&r(this.target,this.evTarget,this.domHandler),this.evWin&&r(f(this.element),this.evWin,this.domHandler)}};var Je={mousedown:se,mousemove:Oe,mouseup:oe},pe="mousedown",we="mousemove mouseup";s(wt,k,{handler:function(z){var W=Je[z.type];W&se&&z.button===0&&(this.pressed=!0),W&Oe&&z.which!==1&&(W=oe),this.pressed&&(W&oe&&(this.pressed=!1),this.callback(this.manager,W,{pointers:[z],changedPointers:[z],pointerType:Ke,srcEvent:z}))}});var xe={pointerdown:se,pointermove:Oe,pointerup:oe,pointercancel:ye,pointerout:ye},me={2:fe,3:Pe,4:Ke,5:Fe},ai="pointerdown",Ve="pointermove pointerup pointercancel";Y.MSPointerEvent&&!Y.PointerEvent&&(ai="MSPointerDown",Ve="MSPointerMove MSPointerUp MSPointerCancel"),s(_t,k,{handler:function(z){var W=this.store,J=!1,lt=z.type.toLowerCase().replace("ms",""),bt=xe[lt],Dt=me[z.pointerType]||z.pointerType,Ft=Dt==fe,Yt=i(W,z.pointerId,"pointerId");bt&se&&(z.button===0||Ft)?0>Yt&&(W.push(z),Yt=W.length-1):bt&(oe|ye)&&(J=!0),0>Yt||(W[Yt]=z,this.callback(this.manager,bt,{pointers:W,changedPointers:[z],pointerType:Dt,srcEvent:z}),J&&W.splice(Yt,1))}});var Xe={touchstart:se,touchmove:Oe,touchend:oe,touchcancel:ye},Qe="touchstart",Wi="touchstart touchmove touchend touchcancel";s(gt,k,{handler:function(z){var W=Xe[z.type];if(W===se&&(this.started=!0),this.started){var J=Pt.call(this,z,W);W&(oe|ye)&&J[0].length-J[1].length===0&&(this.started=!1),this.callback(this.manager,W,{pointers:J[0],changedPointers:J[1],pointerType:fe,srcEvent:z})}}});var Ni={touchstart:se,touchmove:Oe,touchend:oe,touchcancel:ye},ti="touchstart touchmove touchend touchcancel";s(At,k,{handler:function(z){var W=Ni[z.type],J=Ot.call(this,z,W);J&&this.callback(this.manager,W,{pointers:J[0],changedPointers:J[1],pointerType:fe,srcEvent:z})}});var qi=2500,xi=25;s(vt,k,{handler:function(z,W,J){var lt=J.pointerType==fe,bt=J.pointerType==Ke;if(!(bt&&J.sourceCapabilities&&J.sourceCapabilities.firesTouchEvents)){if(lt)Vt.call(this,W,J);else if(bt&&C.call(this,J))return;this.callback(z,W,J)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ei=y(K.style,"touchAction"),Ii=Ei!==g,Li="compute",Di="auto",Si="manipulation",Ue="none",ei="pan-x",ii="pan-y",hi=A();d.prototype={set:function(z){z==Li&&(z=this.compute()),Ii&&this.manager.element.style&&hi[z]&&(this.manager.element.style[Ei]=z),this.actions=z.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var z=[];return a(this.manager.recognizers,function(W){l(W.options.enable,[W])&&(z=z.concat(W.getTouchAction()))}),e(z.join(" "))},preventDefaults:function(z){var W=z.srcEvent,J=z.offsetDirection;if(this.manager.session.prevented)return void W.preventDefault();var lt=this.actions,bt=b(lt,Ue)&&!hi[Ue],Dt=b(lt,ii)&&!hi[ii],Ft=b(lt,ei)&&!hi[ei];if(bt){var Yt=z.pointers.length===1,Ne=z.distance<2,he=z.deltaTime<250;if(Yt&&Ne&&he)return}return Ft&&Dt?void 0:bt||Dt&&J&_e||Ft&&J&$e?this.preventSrc(W):void 0},preventSrc:function(z){this.manager.session.prevented=!0,z.preventDefault()}};var li=1,Ee=2,ge=4,ae=8,ve=ae,ue=16,Ce=32;j.prototype={defaults:{},set:function(z){return D(this.options,z),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(z){if(_(z,"recognizeWith",this))return this;var W=this.simultaneous;return z=H(z,this),W[z.id]||(W[z.id]=z,z.recognizeWith(this)),this},dropRecognizeWith:function(z){return _(z,"dropRecognizeWith",this)?this:(z=H(z,this),delete this.simultaneous[z.id],this)},requireFailure:function(z){if(_(z,"requireFailure",this))return this;var W=this.requireFail;return z=H(z,this),i(W,z)===-1&&(W.push(z),z.requireFailure(this)),this},dropRequireFailure:function(z){if(_(z,"dropRequireFailure",this))return this;z=H(z,this);var W=i(this.requireFail,z);return W>-1&&this.requireFail.splice(W,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(z){return!!this.simultaneous[z.id]},emit:function(z){function W(bt){J.manager.emit(bt,z)}var J=this,lt=this.state;ae>lt&&W(J.options.event+I(lt)),W(J.options.event),z.additionalEvent&&W(z.additionalEvent),lt>=ae&&W(J.options.event+I(lt))},tryEmit:function(z){return this.canEmit()?this.emit(z):void(this.state=Ce)},canEmit:function(){for(var z=0;z<this.requireFail.length;){if(!(this.requireFail[z].state&(Ce|li)))return!1;z++}return!0},recognize:function(z){var W=D({},z);return l(this.options.enable,[this,W])?(this.state&(ve|ue|Ce)&&(this.state=li),this.state=this.process(W),void(this.state&(Ee|ge|ae|ue)&&this.tryEmit(W))):(this.reset(),void(this.state=Ce))},process:function(z){},getTouchAction:function(){},reset:function(){}},s(tt,j,{defaults:{pointers:1},attrTest:function(z){var W=this.options.pointers;return W===0||z.pointers.length===W},process:function(z){var W=this.state,J=z.eventType,lt=W&(Ee|ge),bt=this.attrTest(z);return lt&&(J&ye||!bt)?W|ue:lt||bt?J&oe?W|ae:W&Ee?W|ge:Ee:Ce}}),s(ot,tt,{defaults:{event:"pan",threshold:10,pointers:1,direction:_i},getTouchAction:function(){var z=this.options.direction,W=[];return z&_e&&W.push(ii),z&$e&&W.push(ei),W},directionTest:function(z){var W=this.options,J=!0,lt=z.distance,bt=z.direction,Dt=z.deltaX,Ft=z.deltaY;return bt&W.direction||(W.direction&_e?(bt=Dt===0?yi:0>Dt?si:oi,J=Dt!=this.pX,lt=Math.abs(z.deltaX)):(bt=Ft===0?yi:0>Ft?He:Le,J=Ft!=this.pY,lt=Math.abs(z.deltaY))),z.direction=bt,J&&lt>W.threshold&&bt&W.direction},attrTest:function(z){return tt.prototype.attrTest.call(this,z)&&(this.state&Ee||!(this.state&Ee)&&this.directionTest(z))},emit:function(z){this.pX=z.deltaX,this.pY=z.deltaY;var W=R(z.direction);W&&(z.additionalEvent=this.options.event+W),this._super.emit.call(this,z)}}),s(et,tt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.scale-1)>this.options.threshold||this.state&Ee)},emit:function(z){if(z.scale!==1){var W=z.scale<1?"in":"out";z.additionalEvent=this.options.event+W}this._super.emit.call(this,z)}}),s(pt,j,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Di]},process:function(z){var W=this.options,J=z.pointers.length===W.pointers,lt=z.distance<W.threshold,bt=z.deltaTime>W.time;if(this._input=z,!lt||!J||z.eventType&(oe|ye)&&!bt)this.reset();else if(z.eventType&se)this.reset(),this._timer=E(function(){this.state=ve,this.tryEmit()},W.time,this);else if(z.eventType&oe)return ve;return Ce},reset:function(){clearTimeout(this._timer)},emit:function(z){this.state===ve&&(z&&z.eventType&oe?this.manager.emit(this.options.event+"up",z):(this._input.timeStamp=kt(),this.manager.emit(this.options.event,this._input)))}}),s(Et,tt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ue]},attrTest:function(z){return this._super.attrTest.call(this,z)&&(Math.abs(z.rotation)>this.options.threshold||this.state&Ee)}}),s(mt,tt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:_e|$e,pointers:1},getTouchAction:function(){return ot.prototype.getTouchAction.call(this)},attrTest:function(z){var W,J=this.options.direction;return J&(_e|$e)?W=z.overallVelocity:J&_e?W=z.overallVelocityX:J&$e&&(W=z.overallVelocityY),this._super.attrTest.call(this,z)&&J&z.offsetDirection&&z.distance>this.options.threshold&&z.maxPointers==this.options.pointers&&ft(W)>this.options.velocity&&z.eventType&oe},emit:function(z){var W=R(z.offsetDirection);W&&this.manager.emit(this.options.event+W,z),this.manager.emit(this.options.event,z)}}),s(L,j,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Si]},process:function(z){var W=this.options,J=z.pointers.length===W.pointers,lt=z.distance<W.threshold,bt=z.deltaTime<W.time;if(this.reset(),z.eventType&se&&this.count===0)return this.failTimeout();if(lt&&bt&&J){if(z.eventType!=oe)return this.failTimeout();var Dt=this.pTime?z.timeStamp-this.pTime<W.interval:!0,Ft=!this.pCenter||ut(this.pCenter,z.center)<W.posThreshold;this.pTime=z.timeStamp,this.pCenter=z.center,Ft&&Dt?this.count+=1:this.count=1,this._input=z;var Yt=this.count%W.taps;if(Yt===0)return this.hasRequireFailures()?(this._timer=E(function(){this.state=ve,this.tryEmit()},W.interval,this),Ee):ve}return Ce},failTimeout:function(){return this._timer=E(function(){this.state=Ce},this.options.interval,this),Ce},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ve&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),U.VERSION="2.0.7",U.defaults={domEvents:!1,touchAction:Li,enable:!0,inputTarget:null,inputClass:null,preset:[[Et,{enable:!1}],[et,{enable:!1},["rotate"]],[mt,{direction:_e}],[ot,{direction:_e},["swipe"]],[L],[L,{event:"doubletap",taps:2},["tap"]],[pt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ri=1,Ae=2;q.prototype={set:function(z){return D(this.options,z),z.touchAction&&this.touchAction.update(),z.inputTarget&&(this.input.destroy(),this.input.target=z.inputTarget,this.input.init()),this},stop:function(z){this.session.stopped=z?Ae:Ri},recognize:function(z){var W=this.session;if(!W.stopped){this.touchAction.preventDefaults(z);var J,lt=this.recognizers,bt=W.curRecognizer;(!bt||bt&&bt.state&ve)&&(bt=W.curRecognizer=null);for(var Dt=0;Dt<lt.length;)J=lt[Dt],W.stopped===Ae||bt&&J!=bt&&!J.canRecognizeWith(bt)?J.reset():J.recognize(z),!bt&&J.state&(Ee|ge|ae)&&(bt=W.curRecognizer=J),Dt++}},get:function(z){if(z instanceof j)return z;for(var W=this.recognizers,J=0;J<W.length;J++)if(W[J].options.event==z)return W[J];return null},add:function(z){if(_(z,"add",this))return this;var W=this.get(z.options.event);return W&&this.remove(W),this.recognizers.push(z),z.manager=this,this.touchAction.update(),z},remove:function(z){if(_(z,"remove",this))return this;if(z=this.get(z)){var W=this.recognizers,J=i(W,z);J!==-1&&(W.splice(J,1),this.touchAction.update())}return this},on:function(z,W){if(z!==g&&W!==g){var J=this.handlers;return a(n(z),function(lt){J[lt]=J[lt]||[],J[lt].push(W)}),this}},off:function(z,W){if(z!==g){var J=this.handlers;return a(n(z),function(lt){W?J[lt]&&J[lt].splice(i(J[lt],W),1):delete J[lt]}),this}},emit:function(z,W){this.options.domEvents&&O(z,W);var J=this.handlers[z]&&this.handlers[z].slice();if(J&&J.length){W.type=z,W.preventDefault=function(){W.srcEvent.preventDefault()};for(var lt=0;lt<J.length;)J[lt](W),lt++}},destroy:function(){this.element&&T(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},D(U,{INPUT_START:se,INPUT_MOVE:Oe,INPUT_END:oe,INPUT_CANCEL:ye,STATE_POSSIBLE:li,STATE_BEGAN:Ee,STATE_CHANGED:ge,STATE_ENDED:ae,STATE_RECOGNIZED:ve,STATE_CANCELLED:ue,STATE_FAILED:Ce,DIRECTION_NONE:yi,DIRECTION_LEFT:si,DIRECTION_RIGHT:oi,DIRECTION_UP:He,DIRECTION_DOWN:Le,DIRECTION_HORIZONTAL:_e,DIRECTION_VERTICAL:$e,DIRECTION_ALL:_i,Manager:q,Input:k,TouchAction:d,TouchInput:At,MouseInput:wt,PointerEventInput:_t,TouchMouseInput:vt,SingleTouchInput:gt,Recognizer:j,AttrRecognizer:tt,Tap:L,Pan:ot,Swipe:mt,Pinch:et,Rotate:Et,Press:pt,on:x,off:r,each:a,merge:jt,extend:Lt,assign:D,inherit:s,bindFn:u,prefixed:y});var Ze=typeof Y<"u"?Y:typeof self<"u"?self:{};Ze.Hammer=U,typeof define=="function"&&define.amd?define(function(){return U}):typeof module<"u"&&module.exports?module.exports=U:Y[P]=U})(window,document,"Hammer");
