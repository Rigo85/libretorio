/*!
 * Color mode toggler for Bootstrap's docs (https://getbootstrap.com/)
 * Copyright 2011-2024 The Bootstrap Authors
 * Licensed under the Creative Commons Attribution 3.0 Unported License.
 */(()=>{"use strict";const Z=()=>localStorage.getItem("theme"),Y=y=>localStorage.setItem("theme",y),P=()=>{const y=Z();return y||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},g=y=>{y==="auto"?document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"):document.documentElement.setAttribute("data-bs-theme",y)};g(P());const x=(y,h=!1)=>{const p=document.querySelector("#bd-theme");if(!p)return;const s=document.querySelector("#bd-theme-text"),d=document.querySelector(".theme-icon-active use"),l=document.querySelector(`[data-bs-theme-value="${y}"]`),o=l.querySelector("svg use").getAttribute("href");document.querySelectorAll("[data-bs-theme-value]").forEach(r=>{r.classList.remove("active"),r.setAttribute("aria-pressed","false")}),l.classList.add("active"),l.setAttribute("aria-pressed","true"),d.setAttribute("href",o);const E=`${s.textContent} (${l.dataset.bsThemeValue})`;p.setAttribute("aria-label",E),h&&p.focus()};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const y=Z();y!=="light"&&y!=="dark"&&g(P())}),window.addEventListener("DOMContentLoaded",()=>{x(P()),document.querySelectorAll("[data-bs-theme-value]").forEach(y=>{y.addEventListener("click",()=>{const h=y.getAttribute("data-bs-theme-value");Y(h),g(h),x(h,!0)})})})})();/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(Z,Y){typeof exports=="object"&&typeof module<"u"?module.exports=Y():typeof define=="function"&&define.amd?define(Y):(Z=typeof globalThis<"u"?globalThis:Z||self).bootstrap=Y()})(this,function(){"use strict";const Z=new Map,Y={set(N,t,v){Z.has(N)||Z.set(N,new Map);const F=Z.get(N);F.has(t)||F.size===0?F.set(t,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(F.keys())[0]}.`)},get:(N,t)=>Z.has(N)&&Z.get(N).get(t)||null,remove(N,t){if(!Z.has(N))return;const v=Z.get(N);v.delete(t),v.size===0&&Z.delete(N)}},P="transitionend",g=N=>(N&&window.CSS&&window.CSS.escape&&(N=N.replace(/#([^\s"#']+)/g,(t,v)=>`#${CSS.escape(v)}`)),N),x=N=>{N.dispatchEvent(new Event(P))},y=N=>!(!N||typeof N!="object")&&(N.jquery!==void 0&&(N=N[0]),N.nodeType!==void 0),h=N=>y(N)?N.jquery?N[0]:N:typeof N=="string"&&N.length>0?document.querySelector(g(N)):null,p=N=>{if(!y(N)||N.getClientRects().length===0)return!1;const t=getComputedStyle(N).getPropertyValue("visibility")==="visible",v=N.closest("details:not([open])");if(!v)return t;if(v!==N){const F=N.closest("summary");if(F&&F.parentNode!==v||F===null)return!1}return t},s=N=>!N||N.nodeType!==Node.ELEMENT_NODE||!!N.classList.contains("disabled")||(N.disabled!==void 0?N.disabled:N.hasAttribute("disabled")&&N.getAttribute("disabled")!=="false"),d=N=>{if(!document.documentElement.attachShadow)return null;if(typeof N.getRootNode=="function"){const t=N.getRootNode();return t instanceof ShadowRoot?t:null}return N instanceof ShadowRoot?N:N.parentNode?d(N.parentNode):null},l=()=>{},o=N=>{N.offsetHeight},E=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,r=[],c=()=>document.documentElement.dir==="rtl",b=N=>{var t;t=()=>{const v=E();if(v){const F=N.NAME,it=v.fn[F];v.fn[F]=N.jQueryInterface,v.fn[F].Constructor=N,v.fn[F].noConflict=()=>(v.fn[F]=it,N.jQueryInterface)}},document.readyState==="loading"?(r.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of r)v()}),r.push(t)):t()},n=(N,t=[],v=N)=>typeof N=="function"?N(...t):v,i=(N,t,v=!0)=>{if(!v)return void n(N);const F=(ft=>{if(!ft)return 0;let{transitionDuration:_t,transitionDelay:Tt}=window.getComputedStyle(ft);const Ot=Number.parseFloat(_t),At=Number.parseFloat(Tt);return Ot||At?(_t=_t.split(",")[0],Tt=Tt.split(",")[0],1e3*(Number.parseFloat(_t)+Number.parseFloat(Tt))):0})(t)+5;let it=!1;const nt=({target:ft})=>{ft===t&&(it=!0,t.removeEventListener(P,nt),n(N))};t.addEventListener(P,nt),setTimeout(()=>{it||x(t)},F)},a=(N,t,v,F)=>{const it=N.length;let nt=N.indexOf(t);return nt===-1?!v&&F?N[it-1]:N[0]:(nt+=v?1:-1,F&&(nt=(nt+it)%it),N[Math.max(0,Math.min(nt,it-1))])},m=/[^.]*(?=\..*)\.|.*/,_=/\..*/,S=/::\d+$/,f={};let k=1;const M={mouseenter:"mouseover",mouseleave:"mouseout"},X=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function B(N,t){return t&&`${t}::${k++}`||N.uidEvent||k++}function V(N){const t=B(N);return N.uidEvent=t,f[t]=f[t]||{},f[t]}function w(N,t,v=null){return Object.values(N).find(F=>F.callable===t&&F.delegationSelector===v)}function Q(N,t,v){const F=typeof t=="string",it=F?v:t||v;let nt=ut(N);return X.has(nt)||(nt=N),[F,it,nt]}function dt(N,t,v,F,it){if(typeof t!="string"||!N)return;let[nt,ft,_t]=Q(t,v,F);t in M&&(ft=(Ut=>function(Bt){if(!Bt.relatedTarget||Bt.relatedTarget!==Bt.delegateTarget&&!Bt.delegateTarget.contains(Bt.relatedTarget))return Ut.call(this,Bt)})(ft));const Tt=V(N),Ot=Tt[_t]||(Tt[_t]={}),At=w(Ot,ft,nt?v:null);if(At)return void(At.oneOff=At.oneOff&&it);const Ct=B(ft,t.replace(m,"")),qt=nt?function(Pt,Ut,Bt){return function Wt(Qt){const ne=Pt.querySelectorAll(Ut);for(let{target:Xt}=Qt;Xt&&Xt!==this;Xt=Xt.parentNode)for(const Yt of ne)if(Yt===Xt)return st(Qt,{delegateTarget:Xt}),Wt.oneOff&&tt.off(Pt,Qt.type,Ut,Bt),Bt.apply(Xt,[Qt])}}(N,v,ft):function(Pt,Ut){return function Bt(Wt){return st(Wt,{delegateTarget:Pt}),Bt.oneOff&&tt.off(Pt,Wt.type,Ut),Ut.apply(Pt,[Wt])}}(N,ft);qt.delegationSelector=nt?v:null,qt.callable=ft,qt.oneOff=it,qt.uidEvent=Ct,Ot[Ct]=qt,N.addEventListener(_t,qt,nt)}function ht(N,t,v,F,it){const nt=w(t[v],F,it);nt&&(N.removeEventListener(v,nt,!!it),delete t[v][nt.uidEvent])}function St(N,t,v,F){const it=t[v]||{};for(const[nt,ft]of Object.entries(it))nt.includes(F)&&ht(N,t,v,ft.callable,ft.delegationSelector)}function ut(N){return N=N.replace(_,""),M[N]||N}const tt={on(N,t,v,F){dt(N,t,v,F,!1)},one(N,t,v,F){dt(N,t,v,F,!0)},off(N,t,v,F){if(typeof t!="string"||!N)return;const[it,nt,ft]=Q(t,v,F),_t=ft!==t,Tt=V(N),Ot=Tt[ft]||{},At=t.startsWith(".");if(nt===void 0){if(At)for(const Ct of Object.keys(Tt))St(N,Tt,Ct,t.slice(1));for(const[Ct,qt]of Object.entries(Ot)){const Pt=Ct.replace(S,"");_t&&!t.includes(Pt)||ht(N,Tt,ft,qt.callable,qt.delegationSelector)}}else{if(!Object.keys(Ot).length)return;ht(N,Tt,ft,nt,it?v:null)}},trigger(N,t,v){if(typeof t!="string"||!N)return null;const F=E();let it=null,nt=!0,ft=!0,_t=!1;t!==ut(t)&&F&&(it=F.Event(t,v),F(N).trigger(it),nt=!it.isPropagationStopped(),ft=!it.isImmediatePropagationStopped(),_t=it.isDefaultPrevented());const Tt=st(new Event(t,{bubbles:nt,cancelable:!0}),v);return _t&&Tt.preventDefault(),ft&&N.dispatchEvent(Tt),Tt.defaultPrevented&&it&&it.preventDefault(),Tt}};function st(N,t={}){for(const[v,F]of Object.entries(t))try{N[v]=F}catch{Object.defineProperty(N,v,{configurable:!0,get:()=>F})}return N}function rt(N){if(N==="true")return!0;if(N==="false")return!1;if(N===Number(N).toString())return Number(N);if(N===""||N==="null")return null;if(typeof N!="string")return N;try{return JSON.parse(decodeURIComponent(N))}catch{return N}}function xt(N){return N.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const bt={setDataAttribute(N,t,v){N.setAttribute(`data-bs-${xt(t)}`,v)},removeDataAttribute(N,t){N.removeAttribute(`data-bs-${xt(t)}`)},getDataAttributes(N){if(!N)return{};const t={},v=Object.keys(N.dataset).filter(F=>F.startsWith("bs")&&!F.startsWith("bsConfig"));for(const F of v){let it=F.replace(/^bs/,"");it=it.charAt(0).toLowerCase()+it.slice(1,it.length),t[it]=rt(N.dataset[F])}return t},getDataAttribute:(N,t)=>rt(N.getAttribute(`data-bs-${xt(t)}`))};class wt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,v){const F=y(v)?bt.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof F=="object"?F:{},...y(v)?bt.getDataAttributes(v):{},...typeof t=="object"?t:{}}}_typeCheckConfig(t,v=this.constructor.DefaultType){for(const[it,nt]of Object.entries(v)){const ft=t[it],_t=y(ft)?"element":(F=ft)==null?`${F}`:Object.prototype.toString.call(F).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(nt).test(_t))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${it}" provided type "${_t}" but expected type "${nt}".`)}var F}}class Rt extends wt{constructor(t,v){super(),(t=h(t))&&(this._element=t,this._config=this._getConfig(v),Y.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Y.remove(this._element,this.constructor.DATA_KEY),tt.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,v,F=!0){i(t,v,F)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Y.get(h(t),this.DATA_KEY)}static getOrCreateInstance(t,v={}){return this.getInstance(t)||new this(t,typeof v=="object"?v:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Lt=N=>{let t=N.getAttribute("data-bs-target");if(!t||t==="#"){let v=N.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),t=v&&v!=="#"?v.trim():null}return t?t.split(",").map(v=>g(v)).join(","):null},vt={find:(N,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,N)),findOne:(N,t=document.documentElement)=>Element.prototype.querySelector.call(t,N),children:(N,t)=>[].concat(...N.children).filter(v=>v.matches(t)),parents(N,t){const v=[];let F=N.parentNode.closest(t);for(;F;)v.push(F),F=F.parentNode.closest(t);return v},prev(N,t){let v=N.previousElementSibling;for(;v;){if(v.matches(t))return[v];v=v.previousElementSibling}return[]},next(N,t){let v=N.nextElementSibling;for(;v;){if(v.matches(t))return[v];v=v.nextElementSibling}return[]},focusableChildren(N){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(t,N).filter(v=>!s(v)&&p(v))},getSelectorFromElement(N){const t=Lt(N);return t&&vt.findOne(t)?t:null},getElementFromSelector(N){const t=Lt(N);return t?vt.findOne(t):null},getMultipleElementsFromSelector(N){const t=Lt(N);return t?vt.find(t):[]}},It=(N,t="hide")=>{const v=`click.dismiss${N.EVENT_KEY}`,F=N.NAME;tt.on(document,v,`[data-bs-dismiss="${F}"]`,function(it){if(["A","AREA"].includes(this.tagName)&&it.preventDefault(),s(this))return;const nt=vt.getElementFromSelector(this)||this.closest(`.${F}`);N.getOrCreateInstance(nt)[t]()})},Vt=".bs.alert",Ft=`close${Vt}`,C=`closed${Vt}`;class u extends Rt{static get NAME(){return"alert"}close(){if(tt.trigger(this._element,Ft).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),tt.trigger(this._element,C),this.dispose()}static jQueryInterface(t){return this.each(function(){const v=u.getOrCreateInstance(this);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t](this)}})}}It(u,"close"),b(u);const e='[data-bs-toggle="button"]';class A extends Rt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){const v=A.getOrCreateInstance(this);t==="toggle"&&v[t]()})}}tt.on(document,"click.bs.button.data-api",e,N=>{N.preventDefault();const t=N.target.closest(e);A.getOrCreateInstance(t).toggle()}),b(A);const R=".bs.swipe",I=`touchstart${R}`,D=`touchmove${R}`,H=`touchend${R}`,J=`pointerdown${R}`,at=`pointerup${R}`,et={endCallback:null,leftCallback:null,rightCallback:null},gt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Et extends wt{constructor(t,v){super(),this._element=t,t&&Et.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return et}static get DefaultType(){return gt}static get NAME(){return"swipe"}dispose(){tt.off(this._element,R)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),n(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const v=t/this._deltaX;this._deltaX=0,v&&n(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(tt.on(this._element,J,t=>this._start(t)),tt.on(this._element,at,t=>this._end(t)),this._element.classList.add("pointer-event")):(tt.on(this._element,I,t=>this._start(t)),tt.on(this._element,D,t=>this._move(t)),tt.on(this._element,H,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType==="pen"||t.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const mt=".bs.carousel",L=".data-api",U="next",q="prev",T="left",O="right",z=`slide${mt}`,$=`slid${mt}`,G=`keydown${mt}`,ot=`mouseenter${mt}`,lt=`mouseleave${mt}`,pt=`dragstart${mt}`,kt=`load${mt}${L}`,Nt=`click${mt}${L}`,Mt="carousel",zt="active",$t=".active",ie=".carousel-item",re=$t+ie,we={ArrowLeft:O,ArrowRight:T},be={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Be={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ae extends Rt{constructor(t,v){super(t,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=vt.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Mt&&this.cycle()}static get Default(){return be}static get DefaultType(){return Be}static get NAME(){return"carousel"}next(){this._slide(U)}nextWhenVisible(){!document.hidden&&p(this._element)&&this.next()}prev(){this._slide(q)}pause(){this._isSliding&&x(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?tt.one(this._element,$,()=>this.cycle()):this.cycle())}to(t){const v=this._getItems();if(t>v.length-1||t<0)return;if(this._isSliding)return void tt.one(this._element,$,()=>this.to(t));const F=this._getItemIndex(this._getActive());if(F===t)return;const it=t>F?U:q;this._slide(it,v[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&tt.on(this._element,G,t=>this._keydown(t)),this._config.pause==="hover"&&(tt.on(this._element,ot,()=>this.pause()),tt.on(this._element,lt,()=>this._maybeEnableCycle())),this._config.touch&&Et.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of vt.find(".carousel-item img",this._element))tt.on(v,pt,F=>F.preventDefault());const t={leftCallback:()=>this._slide(this._directionToOrder(T)),rightCallback:()=>this._slide(this._directionToOrder(O)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Et(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const v=we[t.key];v&&(t.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const v=vt.findOne($t,this._indicatorsElement);v.classList.remove(zt),v.removeAttribute("aria-current");const F=vt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);F&&(F.classList.add(zt),F.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const v=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(t,v=null){if(this._isSliding)return;const F=this._getActive(),it=t===U,nt=v||a(this._getItems(),F,it,this._config.wrap);if(nt===F)return;const ft=this._getItemIndex(nt),_t=Ct=>tt.trigger(this._element,Ct,{relatedTarget:nt,direction:this._orderToDirection(t),from:this._getItemIndex(F),to:ft});if(_t(z).defaultPrevented||!F||!nt)return;const Tt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(ft),this._activeElement=nt;const Ot=it?"carousel-item-start":"carousel-item-end",At=it?"carousel-item-next":"carousel-item-prev";nt.classList.add(At),o(nt),F.classList.add(Ot),nt.classList.add(Ot),this._queueCallback(()=>{nt.classList.remove(Ot,At),nt.classList.add(zt),F.classList.remove(zt,At,Ot),this._isSliding=!1,_t($)},F,this._isAnimated()),Tt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return vt.findOne(re,this._element)}_getItems(){return vt.find(ie,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return c()?t===T?q:U:t===T?U:q}_orderToDirection(t){return c()?t===q?T:O:t===q?O:T}static jQueryInterface(t){return this.each(function(){const v=Ae.getOrCreateInstance(this,t);if(typeof t!="number"){if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}}else v.to(t)})}}tt.on(document,Nt,"[data-bs-slide], [data-bs-slide-to]",function(N){const t=vt.getElementFromSelector(this);if(!t||!t.classList.contains(Mt))return;N.preventDefault();const v=Ae.getOrCreateInstance(t),F=this.getAttribute("data-bs-slide-to");return F?(v.to(F),void v._maybeEnableCycle()):bt.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),tt.on(window,kt,()=>{const N=vt.find('[data-bs-ride="carousel"]');for(const t of N)Ae.getOrCreateInstance(t)}),b(Ae);const Te=".bs.collapse",vi=`show${Te}`,ge=`shown${Te}`,Xe=`hide${Te}`,se=`hidden${Te}`,ye=`click${Te}.data-api`,ei="show",Le="collapse",We="collapsing",hi=`:scope .${Le} .${Le}`,Ve='[data-bs-toggle="collapse"]',De={parent:null,toggle:!0},Ze={parent:"(null|element)",toggle:"boolean"};class Ye extends Rt{constructor(t,v){super(t,v),this._isTransitioning=!1,this._triggerArray=[];const F=vt.find(Ve);for(const it of F){const nt=vt.getSelectorFromElement(it),ft=vt.find(nt).filter(_t=>_t===this._element);nt!==null&&ft.length&&this._triggerArray.push(it)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return De}static get DefaultType(){return Ze}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(it=>it!==this._element).map(it=>Ye.getOrCreateInstance(it,{toggle:!1}))),t.length&&t[0]._isTransitioning||tt.trigger(this._element,vi).defaultPrevented)return;for(const it of t)it.hide();const v=this._getDimension();this._element.classList.remove(Le),this._element.classList.add(We),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const F=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(We),this._element.classList.add(Le,ei),this._element.style[v]="",tt.trigger(this._element,ge)},this._element,!0),this._element.style[v]=`${this._element[F]}px`}hide(){if(this._isTransitioning||!this._isShown()||tt.trigger(this._element,Xe).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,o(this._element),this._element.classList.add(We),this._element.classList.remove(Le,ei);for(const v of this._triggerArray){const F=vt.getElementFromSelector(v);F&&!this._isShown(F)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(We),this._element.classList.add(Le),tt.trigger(this._element,se)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(ei)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=h(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Ve);for(const v of t){const F=vt.getElementFromSelector(v);F&&this._addAriaAndCollapsedClass([v],this._isShown(F))}}_getFirstLevelChildren(t){const v=vt.find(hi,this._config.parent);return vt.find(t,this._config.parent).filter(F=>!v.includes(F))}_addAriaAndCollapsedClass(t,v){if(t.length)for(const F of t)F.classList.toggle("collapsed",!v),F.setAttribute("aria-expanded",v)}static jQueryInterface(t){const v={};return typeof t=="string"&&/show|hide/.test(t)&&(v.toggle=!1),this.each(function(){const F=Ye.getOrCreateInstance(this,v);if(typeof t=="string"){if(F[t]===void 0)throw new TypeError(`No method named "${t}"`);F[t]()}})}}tt.on(document,ye,Ve,function(N){(N.target.tagName==="A"||N.delegateTarget&&N.delegateTarget.tagName==="A")&&N.preventDefault();for(const t of vt.getMultipleElementsFromSelector(this))Ye.getOrCreateInstance(t,{toggle:!1}).toggle()}),b(Ye);var ue="top",de="bottom",xe="right",ve="left",bi="auto",ii=[ue,de,xe,ve],Ge="start",Ke="end",Ti="clippingParents",Ci="viewport",ni="popper",Ui="reference",Oi=ii.reduce(function(N,t){return N.concat([t+"-"+Ge,t+"-"+Ke])},[]),Ai=[].concat(ii,[bi]).reduce(function(N,t){return N.concat([t,t+"-"+Ge,t+"-"+Ke])},[]),Wi="beforeRead",Ni="read",Ii="afterRead",Li="beforeMain",Di="main",Ri="afterMain",yi="beforeWrite",qe="write",ri="afterWrite",si=[Wi,Ni,Ii,Li,Di,Ri,yi,qe,ri];function Ee(N){return N?(N.nodeName||"").toLowerCase():null}function fe(N){if(N==null)return window;if(N.toString()!=="[object Window]"){var t=N.ownerDocument;return t&&t.defaultView||window}return N}function he(N){return N instanceof fe(N).Element||N instanceof Element}function le(N){return N instanceof fe(N).HTMLElement||N instanceof HTMLElement}function Re(N){return typeof ShadowRoot<"u"&&(N instanceof fe(N).ShadowRoot||N instanceof ShadowRoot)}const Ne={name:"applyStyles",enabled:!0,phase:"write",fn:function(N){var t=N.state;Object.keys(t.elements).forEach(function(v){var F=t.styles[v]||{},it=t.attributes[v]||{},nt=t.elements[v];le(nt)&&Ee(nt)&&(Object.assign(nt.style,F),Object.keys(it).forEach(function(ft){var _t=it[ft];_t===!1?nt.removeAttribute(ft):nt.setAttribute(ft,_t===!0?"":_t)}))})},effect:function(N){var t=N.state,v={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,v.popper),t.styles=v,t.elements.arrow&&Object.assign(t.elements.arrow.style,v.arrow),function(){Object.keys(t.elements).forEach(function(F){var it=t.elements[F],nt=t.attributes[F]||{},ft=Object.keys(t.styles.hasOwnProperty(F)?t.styles[F]:v[F]).reduce(function(_t,Tt){return _t[Tt]="",_t},{});le(it)&&Ee(it)&&(Object.assign(it.style,ft),Object.keys(nt).forEach(function(_t){it.removeAttribute(_t)}))})}},requires:["computeStyles"]};function _e(N){return N.split("-")[0]}var pe=Math.max,_i=Math.min,Qe=Math.round;function zi(){var N=navigator.userAgentData;return N!=null&&N.brands&&Array.isArray(N.brands)?N.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function j(){return!/^((?!chrome|android).)*safari/i.test(zi())}function W(N,t,v){t===void 0&&(t=!1),v===void 0&&(v=!1);var F=N.getBoundingClientRect(),it=1,nt=1;t&&le(N)&&(it=N.offsetWidth>0&&Qe(F.width)/N.offsetWidth||1,nt=N.offsetHeight>0&&Qe(F.height)/N.offsetHeight||1);var ft=(he(N)?fe(N):window).visualViewport,_t=!j()&&v,Tt=(F.left+(_t&&ft?ft.offsetLeft:0))/it,Ot=(F.top+(_t&&ft?ft.offsetTop:0))/nt,At=F.width/it,Ct=F.height/nt;return{width:At,height:Ct,top:Ot,right:Tt+At,bottom:Ot+Ct,left:Tt,x:Tt,y:Ot}}function K(N){var t=W(N),v=N.offsetWidth,F=N.offsetHeight;return Math.abs(t.width-v)<=1&&(v=t.width),Math.abs(t.height-F)<=1&&(F=t.height),{x:N.offsetLeft,y:N.offsetTop,width:v,height:F}}function ct(N,t){var v=t.getRootNode&&t.getRootNode();if(N.contains(t))return!0;if(v&&Re(v)){var F=t;do{if(F&&N.isSameNode(F))return!0;F=F.parentNode||F.host}while(F)}return!1}function yt(N){return fe(N).getComputedStyle(N)}function Dt(N){return["table","td","th"].indexOf(Ee(N))>=0}function jt(N){return((he(N)?N.ownerDocument:N.document)||window.document).documentElement}function te(N){return Ee(N)==="html"?N:N.assignedSlot||N.parentNode||(Re(N)?N.host:null)||jt(N)}function Ce(N){return le(N)&&yt(N).position!=="fixed"?N.offsetParent:null}function ce(N){for(var t=fe(N),v=Ce(N);v&&Dt(v)&&yt(v).position==="static";)v=Ce(v);return v&&(Ee(v)==="html"||Ee(v)==="body"&&yt(v).position==="static")?t:v||function(F){var it=/firefox/i.test(zi());if(/Trident/i.test(zi())&&le(F)&&yt(F).position==="fixed")return null;var nt=te(F);for(Re(nt)&&(nt=nt.host);le(nt)&&["html","body"].indexOf(Ee(nt))<0;){var ft=yt(nt);if(ft.transform!=="none"||ft.perspective!=="none"||ft.contain==="paint"||["transform","perspective"].indexOf(ft.willChange)!==-1||it&&ft.willChange==="filter"||it&&ft.filter&&ft.filter!=="none")return nt;nt=nt.parentNode}return null}(N)||t}function Oe(N){return["top","bottom"].indexOf(N)>=0?"x":"y"}function ji(N,t,v){return pe(N,_i(t,v))}function kn(N){return Object.assign({},{top:0,right:0,bottom:0,left:0},N)}function Tn(N,t){return t.reduce(function(v,F){return v[F]=N,v},{})}const Cn={name:"arrow",enabled:!0,phase:"main",fn:function(N){var t,v=N.state,F=N.name,it=N.options,nt=v.elements.arrow,ft=v.modifiersData.popperOffsets,_t=_e(v.placement),Tt=Oe(_t),Ot=[ve,xe].indexOf(_t)>=0?"height":"width";if(nt&&ft){var At=function(Jt,Kt){return kn(typeof(Jt=typeof Jt=="function"?Jt(Object.assign({},Kt.rects,{placement:Kt.placement})):Jt)!="number"?Jt:Tn(Jt,ii))}(it.padding,v),Ct=K(nt),qt=Tt==="y"?ue:ve,Pt=Tt==="y"?de:xe,Ut=v.rects.reference[Ot]+v.rects.reference[Tt]-ft[Tt]-v.rects.popper[Ot],Bt=ft[Tt]-v.rects.reference[Tt],Wt=ce(nt),Qt=Wt?Tt==="y"?Wt.clientHeight||0:Wt.clientWidth||0:0,ne=Ut/2-Bt/2,Xt=At[qt],Yt=Qt-Ct[Ot]-At[Pt],Ht=Qt/2-Ct[Ot]/2+ne,Zt=ji(Xt,Ht,Yt),Gt=Tt;v.modifiersData[F]=((t={})[Gt]=Zt,t.centerOffset=Zt-Ht,t)}},effect:function(N){var t=N.state,v=N.options.element,F=v===void 0?"[data-popper-arrow]":v;F!=null&&(typeof F!="string"||(F=t.elements.popper.querySelector(F)))&&ct(t.elements.popper,F)&&(t.elements.arrow=F)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wi(N){return N.split("-")[1]}var jr={top:"auto",right:"auto",bottom:"auto",left:"auto"};function On(N){var t,v=N.popper,F=N.popperRect,it=N.placement,nt=N.variation,ft=N.offsets,_t=N.position,Tt=N.gpuAcceleration,Ot=N.adaptive,At=N.roundOffsets,Ct=N.isFixed,qt=ft.x,Pt=qt===void 0?0:qt,Ut=ft.y,Bt=Ut===void 0?0:Ut,Wt=typeof At=="function"?At({x:Pt,y:Bt}):{x:Pt,y:Bt};Pt=Wt.x,Bt=Wt.y;var Qt=ft.hasOwnProperty("x"),ne=ft.hasOwnProperty("y"),Xt=ve,Yt=ue,Ht=window;if(Ot){var Zt=ce(v),Gt="clientHeight",Jt="clientWidth";Zt===fe(v)&&yt(Zt=jt(v)).position!=="static"&&_t==="absolute"&&(Gt="scrollHeight",Jt="scrollWidth"),(it===ue||(it===ve||it===xe)&&nt===Ke)&&(Yt=de,Bt-=(Ct&&Zt===Ht&&Ht.visualViewport?Ht.visualViewport.height:Zt[Gt])-F.height,Bt*=Tt?1:-1),it!==ve&&(it!==ue&&it!==de||nt!==Ke)||(Xt=xe,Pt-=(Ct&&Zt===Ht&&Ht.visualViewport?Ht.visualViewport.width:Zt[Jt])-F.width,Pt*=Tt?1:-1)}var Kt,ae=Object.assign({position:_t},Ot&&jr),Ie=At===!0?function(Ue,Se){var je=Ue.x,Pe=Ue.y,oe=Se.devicePixelRatio||1;return{x:Qe(je*oe)/oe||0,y:Qe(Pe*oe)/oe||0}}({x:Pt,y:Bt},fe(v)):{x:Pt,y:Bt};return Pt=Ie.x,Bt=Ie.y,Tt?Object.assign({},ae,((Kt={})[Yt]=ne?"0":"",Kt[Xt]=Qt?"0":"",Kt.transform=(Ht.devicePixelRatio||1)<=1?"translate("+Pt+"px, "+Bt+"px)":"translate3d("+Pt+"px, "+Bt+"px, 0)",Kt)):Object.assign({},ae,((t={})[Yt]=ne?Bt+"px":"",t[Xt]=Qt?Pt+"px":"",t.transform="",t))}const nn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(N){var t=N.state,v=N.options,F=v.gpuAcceleration,it=F===void 0||F,nt=v.adaptive,ft=nt===void 0||nt,_t=v.roundOffsets,Tt=_t===void 0||_t,Ot={placement:_e(t.placement),variation:wi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:it,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,On(Object.assign({},Ot,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:ft,roundOffsets:Tt})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,On(Object.assign({},Ot,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Tt})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var qi={passive:!0};const rn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(N){var t=N.state,v=N.instance,F=N.options,it=F.scroll,nt=it===void 0||it,ft=F.resize,_t=ft===void 0||ft,Tt=fe(t.elements.popper),Ot=[].concat(t.scrollParents.reference,t.scrollParents.popper);return nt&&Ot.forEach(function(At){At.addEventListener("scroll",v.update,qi)}),_t&&Tt.addEventListener("resize",v.update,qi),function(){nt&&Ot.forEach(function(At){At.removeEventListener("scroll",v.update,qi)}),_t&&Tt.removeEventListener("resize",v.update,qi)}},data:{}};var Pr={left:"right",right:"left",bottom:"top",top:"bottom"};function Hi(N){return N.replace(/left|right|bottom|top/g,function(t){return Pr[t]})}var Mr={start:"end",end:"start"};function An(N){return N.replace(/start|end/g,function(t){return Mr[t]})}function sn(N){var t=fe(N);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function on(N){return W(jt(N)).left+sn(N).scrollLeft}function an(N){var t=yt(N),v=t.overflow,F=t.overflowX,it=t.overflowY;return/auto|scroll|overlay|hidden/.test(v+it+F)}function Nn(N){return["html","body","#document"].indexOf(Ee(N))>=0?N.ownerDocument.body:le(N)&&an(N)?N:Nn(te(N))}function Pi(N,t){var v;t===void 0&&(t=[]);var F=Nn(N),it=F===((v=N.ownerDocument)==null?void 0:v.body),nt=fe(F),ft=it?[nt].concat(nt.visualViewport||[],an(F)?F:[]):F,_t=t.concat(ft);return it?_t:_t.concat(Pi(te(ft)))}function hn(N){return Object.assign({},N,{left:N.x,top:N.y,right:N.x+N.width,bottom:N.y+N.height})}function In(N,t,v){return t===Ci?hn(function(F,it){var nt=fe(F),ft=jt(F),_t=nt.visualViewport,Tt=ft.clientWidth,Ot=ft.clientHeight,At=0,Ct=0;if(_t){Tt=_t.width,Ot=_t.height;var qt=j();(qt||!qt&&it==="fixed")&&(At=_t.offsetLeft,Ct=_t.offsetTop)}return{width:Tt,height:Ot,x:At+on(F),y:Ct}}(N,v)):he(t)?function(F,it){var nt=W(F,!1,it==="fixed");return nt.top=nt.top+F.clientTop,nt.left=nt.left+F.clientLeft,nt.bottom=nt.top+F.clientHeight,nt.right=nt.left+F.clientWidth,nt.width=F.clientWidth,nt.height=F.clientHeight,nt.x=nt.left,nt.y=nt.top,nt}(t,v):hn(function(F){var it,nt=jt(F),ft=sn(F),_t=(it=F.ownerDocument)==null?void 0:it.body,Tt=pe(nt.scrollWidth,nt.clientWidth,_t?_t.scrollWidth:0,_t?_t.clientWidth:0),Ot=pe(nt.scrollHeight,nt.clientHeight,_t?_t.scrollHeight:0,_t?_t.clientHeight:0),At=-ft.scrollLeft+on(F),Ct=-ft.scrollTop;return yt(_t||nt).direction==="rtl"&&(At+=pe(nt.clientWidth,_t?_t.clientWidth:0)-Tt),{width:Tt,height:Ot,x:At,y:Ct}}(jt(N)))}function Ln(N){var t,v=N.reference,F=N.element,it=N.placement,nt=it?_e(it):null,ft=it?wi(it):null,_t=v.x+v.width/2-F.width/2,Tt=v.y+v.height/2-F.height/2;switch(nt){case ue:t={x:_t,y:v.y-F.height};break;case de:t={x:_t,y:v.y+v.height};break;case xe:t={x:v.x+v.width,y:Tt};break;case ve:t={x:v.x-F.width,y:Tt};break;default:t={x:v.x,y:v.y}}var Ot=nt?Oe(nt):null;if(Ot!=null){var At=Ot==="y"?"height":"width";switch(ft){case Ge:t[Ot]=t[Ot]-(v[At]/2-F[At]/2);break;case Ke:t[Ot]=t[Ot]+(v[At]/2-F[At]/2)}}return t}function xi(N,t){t===void 0&&(t={});var v=t,F=v.placement,it=F===void 0?N.placement:F,nt=v.strategy,ft=nt===void 0?N.strategy:nt,_t=v.boundary,Tt=_t===void 0?Ti:_t,Ot=v.rootBoundary,At=Ot===void 0?Ci:Ot,Ct=v.elementContext,qt=Ct===void 0?ni:Ct,Pt=v.altBoundary,Ut=Pt!==void 0&&Pt,Bt=v.padding,Wt=Bt===void 0?0:Bt,Qt=kn(typeof Wt!="number"?Wt:Tn(Wt,ii)),ne=qt===ni?Ui:ni,Xt=N.rects.popper,Yt=N.elements[Ut?ne:qt],Ht=function(Se,je,Pe,oe){var He=je==="clippingParents"?function(ee){var ke=Pi(te(ee)),Me=["absolute","fixed"].indexOf(yt(ee).position)>=0&&le(ee)?ce(ee):ee;return he(Me)?ke.filter(function(ai){return he(ai)&&ct(ai,Me)&&Ee(ai)!=="body"}):[]}(Se):[].concat(je),$e=[].concat(He,[Pe]),ki=$e[0],me=$e.reduce(function(ee,ke){var Me=In(Se,ke,oe);return ee.top=pe(Me.top,ee.top),ee.right=_i(Me.right,ee.right),ee.bottom=_i(Me.bottom,ee.bottom),ee.left=pe(Me.left,ee.left),ee},In(Se,ki,oe));return me.width=me.right-me.left,me.height=me.bottom-me.top,me.x=me.left,me.y=me.top,me}(he(Yt)?Yt:Yt.contextElement||jt(N.elements.popper),Tt,At,ft),Zt=W(N.elements.reference),Gt=Ln({reference:Zt,element:Xt,strategy:"absolute",placement:it}),Jt=hn(Object.assign({},Xt,Gt)),Kt=qt===ni?Jt:Zt,ae={top:Ht.top-Kt.top+Qt.top,bottom:Kt.bottom-Ht.bottom+Qt.bottom,left:Ht.left-Kt.left+Qt.left,right:Kt.right-Ht.right+Qt.right},Ie=N.modifiersData.offset;if(qt===ni&&Ie){var Ue=Ie[it];Object.keys(ae).forEach(function(Se){var je=[xe,de].indexOf(Se)>=0?1:-1,Pe=[ue,de].indexOf(Se)>=0?"y":"x";ae[Se]+=Ue[Pe]*je})}return ae}function Br(N,t){t===void 0&&(t={});var v=t,F=v.placement,it=v.boundary,nt=v.rootBoundary,ft=v.padding,_t=v.flipVariations,Tt=v.allowedAutoPlacements,Ot=Tt===void 0?Ai:Tt,At=wi(F),Ct=At?_t?Oi:Oi.filter(function(Ut){return wi(Ut)===At}):ii,qt=Ct.filter(function(Ut){return Ot.indexOf(Ut)>=0});qt.length===0&&(qt=Ct);var Pt=qt.reduce(function(Ut,Bt){return Ut[Bt]=xi(N,{placement:Bt,boundary:it,rootBoundary:nt,padding:ft})[_e(Bt)],Ut},{});return Object.keys(Pt).sort(function(Ut,Bt){return Pt[Ut]-Pt[Bt]})}const Dn={name:"flip",enabled:!0,phase:"main",fn:function(N){var t=N.state,v=N.options,F=N.name;if(!t.modifiersData[F]._skip){for(var it=v.mainAxis,nt=it===void 0||it,ft=v.altAxis,_t=ft===void 0||ft,Tt=v.fallbackPlacements,Ot=v.padding,At=v.boundary,Ct=v.rootBoundary,qt=v.altBoundary,Pt=v.flipVariations,Ut=Pt===void 0||Pt,Bt=v.allowedAutoPlacements,Wt=t.options.placement,Qt=_e(Wt),ne=Tt||(Qt!==Wt&&Ut?function(ee){if(_e(ee)===bi)return[];var ke=Hi(ee);return[An(ee),ke,An(ke)]}(Wt):[Hi(Wt)]),Xt=[Wt].concat(ne).reduce(function(ee,ke){return ee.concat(_e(ke)===bi?Br(t,{placement:ke,boundary:At,rootBoundary:Ct,padding:Ot,flipVariations:Ut,allowedAutoPlacements:Bt}):ke)},[]),Yt=t.rects.reference,Ht=t.rects.popper,Zt=new Map,Gt=!0,Jt=Xt[0],Kt=0;Kt<Xt.length;Kt++){var ae=Xt[Kt],Ie=_e(ae),Ue=wi(ae)===Ge,Se=[ue,de].indexOf(Ie)>=0,je=Se?"width":"height",Pe=xi(t,{placement:ae,boundary:At,rootBoundary:Ct,altBoundary:qt,padding:Ot}),oe=Se?Ue?xe:ve:Ue?de:ue;Yt[je]>Ht[je]&&(oe=Hi(oe));var He=Hi(oe),$e=[];if(nt&&$e.push(Pe[Ie]<=0),_t&&$e.push(Pe[oe]<=0,Pe[He]<=0),$e.every(function(ee){return ee})){Jt=ae,Gt=!1;break}Zt.set(ae,$e)}if(Gt)for(var ki=function(ee){var ke=Xt.find(function(Me){var ai=Zt.get(Me);if(ai)return ai.slice(0,ee).every(function(Ji){return Ji})});if(ke)return Jt=ke,"break"},me=Ut?3:1;me>0&&ki(me)!=="break";me--);t.placement!==Jt&&(t.modifiersData[F]._skip=!0,t.placement=Jt,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Rn(N,t,v){return v===void 0&&(v={x:0,y:0}),{top:N.top-t.height-v.y,right:N.right-t.width+v.x,bottom:N.bottom-t.height+v.y,left:N.left-t.width-v.x}}function zn(N){return[ue,xe,de,ve].some(function(t){return N[t]>=0})}const jn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(N){var t=N.state,v=N.name,F=t.rects.reference,it=t.rects.popper,nt=t.modifiersData.preventOverflow,ft=xi(t,{elementContext:"reference"}),_t=xi(t,{altBoundary:!0}),Tt=Rn(ft,F),Ot=Rn(_t,it,nt),At=zn(Tt),Ct=zn(Ot);t.modifiersData[v]={referenceClippingOffsets:Tt,popperEscapeOffsets:Ot,isReferenceHidden:At,hasPopperEscaped:Ct},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":At,"data-popper-escaped":Ct})}},Pn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(N){var t=N.state,v=N.options,F=N.name,it=v.offset,nt=it===void 0?[0,0]:it,ft=Ai.reduce(function(At,Ct){return At[Ct]=function(qt,Pt,Ut){var Bt=_e(qt),Wt=[ve,ue].indexOf(Bt)>=0?-1:1,Qt=typeof Ut=="function"?Ut(Object.assign({},Pt,{placement:qt})):Ut,ne=Qt[0],Xt=Qt[1];return ne=ne||0,Xt=(Xt||0)*Wt,[ve,xe].indexOf(Bt)>=0?{x:Xt,y:ne}:{x:ne,y:Xt}}(Ct,t.rects,nt),At},{}),_t=ft[t.placement],Tt=_t.x,Ot=_t.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=Tt,t.modifiersData.popperOffsets.y+=Ot),t.modifiersData[F]=ft}},ln={name:"popperOffsets",enabled:!0,phase:"read",fn:function(N){var t=N.state,v=N.name;t.modifiersData[v]=Ln({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Mn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(N){var t=N.state,v=N.options,F=N.name,it=v.mainAxis,nt=it===void 0||it,ft=v.altAxis,_t=ft!==void 0&&ft,Tt=v.boundary,Ot=v.rootBoundary,At=v.altBoundary,Ct=v.padding,qt=v.tether,Pt=qt===void 0||qt,Ut=v.tetherOffset,Bt=Ut===void 0?0:Ut,Wt=xi(t,{boundary:Tt,rootBoundary:Ot,padding:Ct,altBoundary:At}),Qt=_e(t.placement),ne=wi(t.placement),Xt=!ne,Yt=Oe(Qt),Ht=Yt==="x"?"y":"x",Zt=t.modifiersData.popperOffsets,Gt=t.rects.reference,Jt=t.rects.popper,Kt=typeof Bt=="function"?Bt(Object.assign({},t.rects,{placement:t.placement})):Bt,ae=typeof Kt=="number"?{mainAxis:Kt,altAxis:Kt}:Object.assign({mainAxis:0,altAxis:0},Kt),Ie=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Ue={x:0,y:0};if(Zt){if(nt){var Se,je=Yt==="y"?ue:ve,Pe=Yt==="y"?de:xe,oe=Yt==="y"?"height":"width",He=Zt[Yt],$e=He+Wt[je],ki=He-Wt[Pe],me=Pt?-Jt[oe]/2:0,ee=ne===Ge?Gt[oe]:Jt[oe],ke=ne===Ge?-Jt[oe]:-Gt[oe],Me=t.elements.arrow,ai=Pt&&Me?K(Me):{width:0,height:0},Ji=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Sr=Ji[je],kr=Ji[Pe],tn=ji(0,Gt[oe],ai[oe]),mo=Xt?Gt[oe]/2-me-tn-Sr-ae.mainAxis:ee-tn-Sr-ae.mainAxis,go=Xt?-Gt[oe]/2+me+tn+kr+ae.mainAxis:ke+tn+kr+ae.mainAxis,xn=t.elements.arrow&&ce(t.elements.arrow),vo=xn?Yt==="y"?xn.clientTop||0:xn.clientLeft||0:0,Tr=(Se=Ie?.[Yt])!=null?Se:0,bo=He+go-Tr,Cr=ji(Pt?_i($e,He+mo-Tr-vo):$e,He,Pt?pe(ki,bo):ki);Zt[Yt]=Cr,Ue[Yt]=Cr-He}if(_t){var Or,yo=Yt==="x"?ue:ve,_o=Yt==="x"?de:xe,gi=Zt[Ht],en=Ht==="y"?"height":"width",Ar=gi+Wt[yo],Nr=gi-Wt[_o],En=[ue,ve].indexOf(Qt)!==-1,Ir=(Or=Ie?.[Ht])!=null?Or:0,Lr=En?Ar:gi-Gt[en]-Jt[en]-Ir+ae.altAxis,Dr=En?gi+Gt[en]+Jt[en]-Ir-ae.altAxis:Nr,Rr=Pt&&En?function(wo,xo,Sn){var zr=ji(wo,xo,Sn);return zr>Sn?Sn:zr}(Lr,gi,Dr):ji(Pt?Lr:Ar,gi,Pt?Dr:Nr);Zt[Ht]=Rr,Ue[Ht]=Rr-gi}t.modifiersData[F]=Ue}},requiresIfExists:["offset"]};function Fr(N,t,v){v===void 0&&(v=!1);var F,it,nt=le(t),ft=le(t)&&function(Ct){var qt=Ct.getBoundingClientRect(),Pt=Qe(qt.width)/Ct.offsetWidth||1,Ut=Qe(qt.height)/Ct.offsetHeight||1;return Pt!==1||Ut!==1}(t),_t=jt(t),Tt=W(N,ft,v),Ot={scrollLeft:0,scrollTop:0},At={x:0,y:0};return(nt||!nt&&!v)&&((Ee(t)!=="body"||an(_t))&&(Ot=(F=t)!==fe(F)&&le(F)?{scrollLeft:(it=F).scrollLeft,scrollTop:it.scrollTop}:sn(F)),le(t)?((At=W(t,!0)).x+=t.clientLeft,At.y+=t.clientTop):_t&&(At.x=on(_t))),{x:Tt.left+Ot.scrollLeft-At.x,y:Tt.top+Ot.scrollTop-At.y,width:Tt.width,height:Tt.height}}function Ur(N){var t=new Map,v=new Set,F=[];function it(nt){v.add(nt.name),[].concat(nt.requires||[],nt.requiresIfExists||[]).forEach(function(ft){if(!v.has(ft)){var _t=t.get(ft);_t&&it(_t)}}),F.push(nt)}return N.forEach(function(nt){t.set(nt.name,nt)}),N.forEach(function(nt){v.has(nt.name)||it(nt)}),F}var Bn={placement:"bottom",modifiers:[],strategy:"absolute"};function Fn(){for(var N=arguments.length,t=new Array(N),v=0;v<N;v++)t[v]=arguments[v];return!t.some(function(F){return!(F&&typeof F.getBoundingClientRect=="function")})}function $i(N){N===void 0&&(N={});var t=N,v=t.defaultModifiers,F=v===void 0?[]:v,it=t.defaultOptions,nt=it===void 0?Bn:it;return function(ft,_t,Tt){Tt===void 0&&(Tt=nt);var Ot,At,Ct={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bn,nt),modifiersData:{},elements:{reference:ft,popper:_t},attributes:{},styles:{}},qt=[],Pt=!1,Ut={state:Ct,setOptions:function(Wt){var Qt=typeof Wt=="function"?Wt(Ct.options):Wt;Bt(),Ct.options=Object.assign({},nt,Ct.options,Qt),Ct.scrollParents={reference:he(ft)?Pi(ft):ft.contextElement?Pi(ft.contextElement):[],popper:Pi(_t)};var ne,Xt,Yt=function(Ht){var Zt=Ur(Ht);return si.reduce(function(Gt,Jt){return Gt.concat(Zt.filter(function(Kt){return Kt.phase===Jt}))},[])}((ne=[].concat(F,Ct.options.modifiers),Xt=ne.reduce(function(Ht,Zt){var Gt=Ht[Zt.name];return Ht[Zt.name]=Gt?Object.assign({},Gt,Zt,{options:Object.assign({},Gt.options,Zt.options),data:Object.assign({},Gt.data,Zt.data)}):Zt,Ht},{}),Object.keys(Xt).map(function(Ht){return Xt[Ht]})));return Ct.orderedModifiers=Yt.filter(function(Ht){return Ht.enabled}),Ct.orderedModifiers.forEach(function(Ht){var Zt=Ht.name,Gt=Ht.options,Jt=Gt===void 0?{}:Gt,Kt=Ht.effect;if(typeof Kt=="function"){var ae=Kt({state:Ct,name:Zt,instance:Ut,options:Jt});qt.push(ae||function(){})}}),Ut.update()},forceUpdate:function(){if(!Pt){var Wt=Ct.elements,Qt=Wt.reference,ne=Wt.popper;if(Fn(Qt,ne)){Ct.rects={reference:Fr(Qt,ce(ne),Ct.options.strategy==="fixed"),popper:K(ne)},Ct.reset=!1,Ct.placement=Ct.options.placement,Ct.orderedModifiers.forEach(function(Kt){return Ct.modifiersData[Kt.name]=Object.assign({},Kt.data)});for(var Xt=0;Xt<Ct.orderedModifiers.length;Xt++)if(Ct.reset!==!0){var Yt=Ct.orderedModifiers[Xt],Ht=Yt.fn,Zt=Yt.options,Gt=Zt===void 0?{}:Zt,Jt=Yt.name;typeof Ht=="function"&&(Ct=Ht({state:Ct,options:Gt,name:Jt,instance:Ut})||Ct)}else Ct.reset=!1,Xt=-1}}},update:(Ot=function(){return new Promise(function(Wt){Ut.forceUpdate(),Wt(Ct)})},function(){return At||(At=new Promise(function(Wt){Promise.resolve().then(function(){At=void 0,Wt(Ot())})})),At}),destroy:function(){Bt(),Pt=!0}};if(!Fn(ft,_t))return Ut;function Bt(){qt.forEach(function(Wt){return Wt()}),qt=[]}return Ut.setOptions(Tt).then(function(Wt){!Pt&&Tt.onFirstUpdate&&Tt.onFirstUpdate(Wt)}),Ut}}var Wr=$i(),qr=$i({defaultModifiers:[rn,ln,nn,Ne]}),cn=$i({defaultModifiers:[rn,ln,nn,Ne,Pn,Dn,Mn,Cn,jn]});const Un=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ri,afterRead:Ii,afterWrite:ri,applyStyles:Ne,arrow:Cn,auto:bi,basePlacements:ii,beforeMain:Li,beforeRead:Wi,beforeWrite:yi,bottom:de,clippingParents:Ti,computeStyles:nn,createPopper:cn,createPopperBase:Wr,createPopperLite:qr,detectOverflow:xi,end:Ke,eventListeners:rn,flip:Dn,hide:jn,left:ve,main:Di,modifierPhases:si,offset:Pn,placements:Ai,popper:ni,popperGenerator:$i,popperOffsets:ln,preventOverflow:Mn,read:Ni,reference:Ui,right:xe,start:Ge,top:ue,variationPlacements:Oi,viewport:Ci,write:qe},Symbol.toStringTag,{value:"Module"})),Wn="dropdown",li=".bs.dropdown",un=".data-api",Hr="ArrowUp",qn="ArrowDown",$r=`hide${li}`,Xr=`hidden${li}`,Vr=`show${li}`,Zr=`shown${li}`,Hn=`click${li}${un}`,$n=`keydown${li}${un}`,Yr=`keyup${li}${un}`,Ei="show",ci='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Gr=`${ci}.${Ei}`,Xi=".dropdown-menu",Kr=c()?"top-end":"top-start",Qr=c()?"top-start":"top-end",Jr=c()?"bottom-end":"bottom-start",ts=c()?"bottom-start":"bottom-end",es=c()?"left-start":"right-start",is=c()?"right-start":"left-start",ns={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},rs={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Fe extends Rt{constructor(t,v){super(t,v),this._popper=null,this._parent=this._element.parentNode,this._menu=vt.next(this._element,Xi)[0]||vt.prev(this._element,Xi)[0]||vt.findOne(Xi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ns}static get DefaultType(){return rs}static get NAME(){return Wn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(s(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!tt.trigger(this._element,Vr,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))tt.on(v,"mouseover",l);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ei),this._element.classList.add(Ei),tt.trigger(this._element,Zr,t)}}hide(){if(s(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!tt.trigger(this._element,$r,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))tt.off(v,"mouseover",l);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ei),this._element.classList.remove(Ei),this._element.setAttribute("aria-expanded","false"),bt.removeDataAttribute(this._menu,"popper"),tt.trigger(this._element,Xr,t)}}_getConfig(t){if(typeof(t=super._getConfig(t)).reference=="object"&&!y(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${Wn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(Un===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:y(this._config.reference)?t=h(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);const v=this._getPopperConfig();this._popper=cn(t,this._menu,v)}_isShown(){return this._menu.classList.contains(Ei)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return es;if(t.classList.contains("dropstart"))return is;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains("dropup")?v?Qr:Kr:v?ts:Jr}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(v=>Number.parseInt(v,10)):typeof t=="function"?v=>t(v,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(bt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...n(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:v}){const F=vt.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(it=>p(it));F.length&&a(F,v,t===qn,!F.includes(v)).focus()}static jQueryInterface(t){return this.each(function(){const v=Fe.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}static clearMenus(t){if(t.button===2||t.type==="keyup"&&t.key!=="Tab")return;const v=vt.find(Gr);for(const F of v){const it=Fe.getInstance(F);if(!it||it._config.autoClose===!1)continue;const nt=t.composedPath(),ft=nt.includes(it._menu);if(nt.includes(it._element)||it._config.autoClose==="inside"&&!ft||it._config.autoClose==="outside"&&ft||it._menu.contains(t.target)&&(t.type==="keyup"&&t.key==="Tab"||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const _t={relatedTarget:it._element};t.type==="click"&&(_t.clickEvent=t),it._completeHide(_t)}}static dataApiKeydownHandler(t){const v=/input|textarea/i.test(t.target.tagName),F=t.key==="Escape",it=[Hr,qn].includes(t.key);if(!it&&!F||v&&!F)return;t.preventDefault();const nt=this.matches(ci)?this:vt.prev(this,ci)[0]||vt.next(this,ci)[0]||vt.findOne(ci,t.delegateTarget.parentNode),ft=Fe.getOrCreateInstance(nt);if(it)return t.stopPropagation(),ft.show(),void ft._selectMenuItem(t);ft._isShown()&&(t.stopPropagation(),ft.hide(),nt.focus())}}tt.on(document,$n,ci,Fe.dataApiKeydownHandler),tt.on(document,$n,Xi,Fe.dataApiKeydownHandler),tt.on(document,Hn,Fe.clearMenus),tt.on(document,Yr,Fe.clearMenus),tt.on(document,Hn,ci,function(N){N.preventDefault(),Fe.getOrCreateInstance(this).toggle()}),b(Fe);const Xn="backdrop",Vn="show",Zn=`mousedown.bs.${Xn}`,ss={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},os={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Yn extends wt{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return ss}static get DefaultType(){return os}static get NAME(){return Xn}show(t){if(!this._config.isVisible)return void n(t);this._append();const v=this._getElement();this._config.isAnimated&&o(v),v.classList.add(Vn),this._emulateAnimation(()=>{n(t)})}hide(t){this._config.isVisible?(this._getElement().classList.remove(Vn),this._emulateAnimation(()=>{this.dispose(),n(t)})):n(t)}dispose(){this._isAppended&&(tt.off(this._element,Zn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=h(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),tt.on(t,Zn,()=>{n(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){i(t,this._getElement(),this._config.isAnimated)}}const Vi=".bs.focustrap",as=`focusin${Vi}`,hs=`keydown.tab${Vi}`,Gn="backward",ls={autofocus:!0,trapElement:null},cs={autofocus:"boolean",trapElement:"element"};class Kn extends wt{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ls}static get DefaultType(){return cs}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),tt.off(document,Vi),tt.on(document,as,t=>this._handleFocusin(t)),tt.on(document,hs,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,tt.off(document,Vi))}_handleFocusin(t){const{trapElement:v}=this._config;if(t.target===document||t.target===v||v.contains(t.target))return;const F=vt.focusableChildren(v);F.length===0?v.focus():this._lastTabNavDirection===Gn?F[F.length-1].focus():F[0].focus()}_handleKeydown(t){t.key==="Tab"&&(this._lastTabNavDirection=t.shiftKey?Gn:"forward")}}const Qn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Jn=".sticky-top",Zi="padding-right",tr="margin-right";class dn{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Zi,v=>v+t),this._setElementAttributes(Qn,Zi,v=>v+t),this._setElementAttributes(Jn,tr,v=>v-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Zi),this._resetElementAttributes(Qn,Zi),this._resetElementAttributes(Jn,tr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,v,F){const it=this.getWidth();this._applyManipulationCallback(t,nt=>{if(nt!==this._element&&window.innerWidth>nt.clientWidth+it)return;this._saveInitialAttribute(nt,v);const ft=window.getComputedStyle(nt).getPropertyValue(v);nt.style.setProperty(v,`${F(Number.parseFloat(ft))}px`)})}_saveInitialAttribute(t,v){const F=t.style.getPropertyValue(v);F&&bt.setDataAttribute(t,v,F)}_resetElementAttributes(t,v){this._applyManipulationCallback(t,F=>{const it=bt.getDataAttribute(F,v);it!==null?(bt.removeDataAttribute(F,v),F.style.setProperty(v,it)):F.style.removeProperty(v)})}_applyManipulationCallback(t,v){if(y(t))v(t);else for(const F of vt.find(t,this._element))v(F)}}const ze=".bs.modal",us=`hide${ze}`,ds=`hidePrevented${ze}`,er=`hidden${ze}`,ir=`show${ze}`,fs=`shown${ze}`,ps=`resize${ze}`,ms=`click.dismiss${ze}`,gs=`mousedown.dismiss${ze}`,vs=`keydown.dismiss${ze}`,bs=`click${ze}.data-api`,nr="modal-open",rr="show",fn="modal-static",ys={backdrop:!0,focus:!0,keyboard:!0},_s={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ui extends Rt{constructor(t,v){super(t,v),this._dialog=vt.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new dn,this._addEventListeners()}static get Default(){return ys}static get DefaultType(){return _s}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||tt.trigger(this._element,ir,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(nr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){this._isShown&&!this._isTransitioning&&(tt.trigger(this._element,us).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(rr),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){tt.off(window,ze),tt.off(this._dialog,ze),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Yn({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Kn({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=vt.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),o(this._element),this._element.classList.add(rr),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,tt.trigger(this._element,fs,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){tt.on(this._element,vs,t=>{t.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),tt.on(window,ps,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),tt.on(this._element,gs,t=>{tt.one(this._element,ms,v=>{this._element===t.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(nr),this._resetAdjustments(),this._scrollBar.reset(),tt.trigger(this._element,er)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(tt.trigger(this._element,ds).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(fn)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(fn),this._queueCallback(()=>{this._element.classList.remove(fn),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),F=v>0;if(F&&!t){const it=c()?"paddingLeft":"paddingRight";this._element.style[it]=`${v}px`}if(!F&&t){const it=c()?"paddingRight":"paddingLeft";this._element.style[it]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,v){return this.each(function(){const F=ui.getOrCreateInstance(this,t);if(typeof t=="string"){if(F[t]===void 0)throw new TypeError(`No method named "${t}"`);F[t](v)}})}}tt.on(document,bs,'[data-bs-toggle="modal"]',function(N){const t=vt.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&N.preventDefault(),tt.one(t,ir,F=>{F.defaultPrevented||tt.one(t,er,()=>{p(this)&&this.focus()})});const v=vt.findOne(".modal.show");v&&ui.getInstance(v).hide(),ui.getOrCreateInstance(t).toggle(this)}),It(ui),b(ui);const Je=".bs.offcanvas",sr=".data-api",ws=`load${Je}${sr}`,or="show",ar="showing",hr="hiding",lr=".offcanvas.show",xs=`show${Je}`,Es=`shown${Je}`,Ss=`hide${Je}`,cr=`hidePrevented${Je}`,ur=`hidden${Je}`,ks=`resize${Je}`,Ts=`click${Je}${sr}`,Cs=`keydown.dismiss${Je}`,Os={backdrop:!0,keyboard:!0,scroll:!1},As={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class ti extends Rt{constructor(t,v){super(t,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Os}static get DefaultType(){return As}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||tt.trigger(this._element,xs,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new dn().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ar),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(or),this._element.classList.remove(ar),tt.trigger(this._element,Es,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&(tt.trigger(this._element,Ss).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(hr),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(or,hr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new dn().reset(),tt.trigger(this._element,ur)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=!!this._config.backdrop;return new Yn({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{this._config.backdrop!=="static"?this.hide():tt.trigger(this._element,cr)}:null})}_initializeFocusTrap(){return new Kn({trapElement:this._element})}_addEventListeners(){tt.on(this._element,Cs,t=>{t.key==="Escape"&&(this._config.keyboard?this.hide():tt.trigger(this._element,cr))})}static jQueryInterface(t){return this.each(function(){const v=ti.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t](this)}})}}tt.on(document,Ts,'[data-bs-toggle="offcanvas"]',function(N){const t=vt.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&N.preventDefault(),s(this))return;tt.one(t,ur,()=>{p(this)&&this.focus()});const v=vt.findOne(lr);v&&v!==t&&ti.getInstance(v).hide(),ti.getOrCreateInstance(t).toggle(this)}),tt.on(window,ws,()=>{for(const N of vt.find(lr))ti.getOrCreateInstance(N).show()}),tt.on(window,ks,()=>{for(const N of vt.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(N).position!=="fixed"&&ti.getOrCreateInstance(N).hide()}),It(ti),b(ti);const dr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ns=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Is=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ls=(N,t)=>{const v=N.nodeName.toLowerCase();return t.includes(v)?!Ns.has(v)||!!Is.test(N.nodeValue):t.filter(F=>F instanceof RegExp).some(F=>F.test(v))},Ds={allowList:dr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Rs={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},zs={entry:"(string|element|function|null)",selector:"(string|element)"};class js extends wt{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Ds}static get DefaultType(){return Rs}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[it,nt]of Object.entries(this._config.content))this._setContent(t,nt,it);const v=t.children[0],F=this._resolvePossibleFunction(this._config.extraClass);return F&&v.classList.add(...F.split(" ")),v}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[v,F]of Object.entries(t))super._typeCheckConfig({selector:v,entry:F},zs)}_setContent(t,v,F){const it=vt.findOne(F,t);it&&((v=this._resolvePossibleFunction(v))?y(v)?this._putElementInTemplate(h(v),it):this._config.html?it.innerHTML=this._maybeSanitize(v):it.textContent=v:it.remove())}_maybeSanitize(t){return this._config.sanitize?function(v,F,it){if(!v.length)return v;if(it&&typeof it=="function")return it(v);const nt=new window.DOMParser().parseFromString(v,"text/html"),ft=[].concat(...nt.body.querySelectorAll("*"));for(const _t of ft){const Tt=_t.nodeName.toLowerCase();if(!Object.keys(F).includes(Tt)){_t.remove();continue}const Ot=[].concat(..._t.attributes),At=[].concat(F["*"]||[],F[Tt]||[]);for(const Ct of Ot)Ls(Ct,At)||_t.removeAttribute(Ct.nodeName)}return nt.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return n(t,[this])}_putElementInTemplate(t,v){if(this._config.html)return v.innerHTML="",void v.append(t);v.textContent=t.textContent}}const Ps=new Set(["sanitize","allowList","sanitizeFn"]),pn="fade",Yi="show",fr=".modal",pr="hide.bs.modal",Mi="hover",mn="focus",Ms={AUTO:"auto",TOP:"top",RIGHT:c()?"left":"right",BOTTOM:"bottom",LEFT:c()?"right":"left"},Bs={allowList:dr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Fs={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class di extends Rt{constructor(t,v){if(Un===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Bs}static get DefaultType(){return Fs}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),tt.off(this._element.closest(fr),pr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=tt.trigger(this._element,this.constructor.eventName("show")),v=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!v)return;this._disposePopper();const F=this._getTipElement();this._element.setAttribute("aria-describedby",F.getAttribute("id"));const{container:it}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(it.append(F),tt.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(F),F.classList.add(Yi),"ontouchstart"in document.documentElement)for(const nt of[].concat(...document.body.children))tt.on(nt,"mouseover",l);this._queueCallback(()=>{tt.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!tt.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Yi),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))tt.off(t,"mouseover",l);this._activeTrigger.click=!1,this._activeTrigger[mn]=!1,this._activeTrigger[Mi]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),tt.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const v=this._getTemplateFactory(t).toHtml();if(!v)return null;v.classList.remove(pn,Yi),v.classList.add(`bs-${this.constructor.NAME}-auto`);const F=(it=>{do it+=Math.floor(1e6*Math.random());while(document.getElementById(it));return it})(this.constructor.NAME).toString();return v.setAttribute("id",F),this._isAnimated()&&v.classList.add(pn),v}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new js({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(pn)}_isShown(){return this.tip&&this.tip.classList.contains(Yi)}_createPopper(t){const v=n(this._config.placement,[this,t,this._element]),F=Ms[v.toUpperCase()];return cn(this._element,t,this._getPopperConfig(F))}_getOffset(){const{offset:t}=this._config;return typeof t=="string"?t.split(",").map(v=>Number.parseInt(v,10)):typeof t=="function"?v=>t(v,this._element):t}_resolvePossibleFunction(t){return n(t,[this._element])}_getPopperConfig(t){const v={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:F=>{this._getTipElement().setAttribute("data-popper-placement",F.state.placement)}}]};return{...v,...n(this._config.popperConfig,[v])}}_setListeners(){const t=this._config.trigger.split(" ");for(const v of t)if(v==="click")tt.on(this._element,this.constructor.eventName("click"),this._config.selector,F=>{this._initializeOnDelegatedTarget(F).toggle()});else if(v!=="manual"){const F=v===Mi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),it=v===Mi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");tt.on(this._element,F,this._config.selector,nt=>{const ft=this._initializeOnDelegatedTarget(nt);ft._activeTrigger[nt.type==="focusin"?mn:Mi]=!0,ft._enter()}),tt.on(this._element,it,this._config.selector,nt=>{const ft=this._initializeOnDelegatedTarget(nt);ft._activeTrigger[nt.type==="focusout"?mn:Mi]=ft._element.contains(nt.relatedTarget),ft._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},tt.on(this._element.closest(fr),pr,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,v){clearTimeout(this._timeout),this._timeout=setTimeout(t,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const v=bt.getDataAttributes(this._element);for(const F of Object.keys(v))Ps.has(F)&&delete v[F];return t={...v,...typeof t=="object"&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:h(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[v,F]of Object.entries(this._config))this.constructor.Default[v]!==F&&(t[v]=F);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){const v=di.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}}b(di);const Us={...di.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ws={...di.DefaultType,content:"(null|string|element|function)"};class Gi extends di{static get Default(){return Us}static get DefaultType(){return Ws}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){const v=Gi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t]()}})}}b(Gi);const gn=".bs.scrollspy",qs=`activate${gn}`,mr=`click${gn}`,Hs=`load${gn}.data-api`,Si="active",vn="[href]",gr=".nav-link",$s=`${gr}, .nav-item > ${gr}, .list-group-item`,Xs={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Vs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Bi extends Rt{constructor(t,v){super(t,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Xs}static get DefaultType(){return Vs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=h(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(v=>Number.parseFloat(v))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(tt.off(this._config.target,mr),tt.on(this._config.target,mr,vn,t=>{const v=this._observableSections.get(t.target.hash);if(v){t.preventDefault();const F=this._rootElement||window,it=v.offsetTop-this._element.offsetTop;if(F.scrollTo)return void F.scrollTo({top:it,behavior:"smooth"});F.scrollTop=it}}))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),t)}_observerCallback(t){const v=ft=>this._targetLinks.get(`#${ft.target.id}`),F=ft=>{this._previousScrollData.visibleEntryTop=ft.target.offsetTop,this._process(v(ft))},it=(this._rootElement||document.documentElement).scrollTop,nt=it>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=it;for(const ft of t){if(!ft.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(ft));continue}const _t=ft.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(nt&&_t){if(F(ft),!it)return}else nt||_t||F(ft)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=vt.find(vn,this._config.target);for(const v of t){if(!v.hash||s(v))continue;const F=vt.findOne(decodeURI(v.hash),this._element);p(F)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,F))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Si),this._activateParents(t),tt.trigger(this._element,qs,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))vt.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(Si);else for(const v of vt.parents(t,".nav, .list-group"))for(const F of vt.prev(v,$s))F.classList.add(Si)}_clearActiveClass(t){t.classList.remove(Si);const v=vt.find(`${vn}.${Si}`,t);for(const F of v)F.classList.remove(Si)}static jQueryInterface(t){return this.each(function(){const v=Bi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}})}}tt.on(window,Hs,()=>{for(const N of vt.find('[data-bs-spy="scroll"]'))Bi.getOrCreateInstance(N)}),b(Bi);const fi=".bs.tab",Zs=`hide${fi}`,Ys=`hidden${fi}`,Gs=`show${fi}`,Ks=`shown${fi}`,Qs=`click${fi}`,Js=`keydown${fi}`,to=`load${fi}`,eo="ArrowLeft",vr="ArrowRight",io="ArrowUp",br="ArrowDown",bn="Home",yr="End",pi="active",_r="fade",yn="show",wr=".dropdown-toggle",_n=`:not(${wr})`,xr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',wn=`.nav-link${_n}, .list-group-item${_n}, [role="tab"]${_n}, ${xr}`,no=`.${pi}[data-bs-toggle="tab"], .${pi}[data-bs-toggle="pill"], .${pi}[data-bs-toggle="list"]`;class mi extends Rt{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),tt.on(this._element,Js,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const v=this._getActiveElem(),F=v?tt.trigger(v,Zs,{relatedTarget:t}):null;tt.trigger(t,Gs,{relatedTarget:v}).defaultPrevented||F&&F.defaultPrevented||(this._deactivate(v,t),this._activate(t,v))}_activate(t,v){t&&(t.classList.add(pi),this._activate(vt.getElementFromSelector(t)),this._queueCallback(()=>{t.getAttribute("role")==="tab"?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),tt.trigger(t,Ks,{relatedTarget:v})):t.classList.add(yn)},t,t.classList.contains(_r)))}_deactivate(t,v){t&&(t.classList.remove(pi),t.blur(),this._deactivate(vt.getElementFromSelector(t)),this._queueCallback(()=>{t.getAttribute("role")==="tab"?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),tt.trigger(t,Ys,{relatedTarget:v})):t.classList.remove(yn)},t,t.classList.contains(_r)))}_keydown(t){if(![eo,vr,io,br,bn,yr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const v=this._getChildren().filter(it=>!s(it));let F;if([bn,yr].includes(t.key))F=v[t.key===bn?0:v.length-1];else{const it=[vr,br].includes(t.key);F=a(v,t.target,it,!0)}F&&(F.focus({preventScroll:!0}),mi.getOrCreateInstance(F).show())}_getChildren(){return vt.find(wn,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,v){this._setAttributeIfNotExists(t,"role","tablist");for(const F of v)this._setInitialAttributesOnChild(F)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const v=this._elemIsActive(t),F=this._getOuterElement(t);t.setAttribute("aria-selected",v),F!==t&&this._setAttributeIfNotExists(F,"role","presentation"),v||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const v=vt.getElementFromSelector(t);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,v){const F=this._getOuterElement(t);if(!F.classList.contains("dropdown"))return;const it=(nt,ft)=>{const _t=vt.findOne(nt,F);_t&&_t.classList.toggle(ft,v)};it(wr,pi),it(".dropdown-menu",yn),F.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(t,v,F){t.hasAttribute(v)||t.setAttribute(v,F)}_elemIsActive(t){return t.classList.contains(pi)}_getInnerElement(t){return t.matches(wn)?t:vt.findOne(wn,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){const v=mi.getOrCreateInstance(this);if(typeof t=="string"){if(v[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);v[t]()}})}}tt.on(document,Qs,xr,function(N){["A","AREA"].includes(this.tagName)&&N.preventDefault(),s(this)||mi.getOrCreateInstance(this).show()}),tt.on(window,to,()=>{for(const N of vt.find(no))mi.getOrCreateInstance(N)}),b(mi);const oi=".bs.toast",ro=`mouseover${oi}`,so=`mouseout${oi}`,oo=`focusin${oi}`,ao=`focusout${oi}`,ho=`hide${oi}`,lo=`hidden${oi}`,co=`show${oi}`,uo=`shown${oi}`,Er="hide",Ki="show",Qi="showing",fo={animation:"boolean",autohide:"boolean",delay:"number"},po={animation:!0,autohide:!0,delay:5e3};class Fi extends Rt{constructor(t,v){super(t,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return po}static get DefaultType(){return fo}static get NAME(){return"toast"}show(){tt.trigger(this._element,co).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Er),o(this._element),this._element.classList.add(Ki,Qi),this._queueCallback(()=>{this._element.classList.remove(Qi),tt.trigger(this._element,uo),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(tt.trigger(this._element,ho).defaultPrevented||(this._element.classList.add(Qi),this._queueCallback(()=>{this._element.classList.add(Er),this._element.classList.remove(Qi,Ki),tt.trigger(this._element,lo)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ki),super.dispose()}isShown(){return this._element.classList.contains(Ki)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,v){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const F=t.relatedTarget;this._element===F||this._element.contains(F)||this._maybeScheduleHide()}_setListeners(){tt.on(this._element,ro,t=>this._onInteraction(t,!0)),tt.on(this._element,so,t=>this._onInteraction(t,!1)),tt.on(this._element,oo,t=>this._onInteraction(t,!0)),tt.on(this._element,ao,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){const v=Fi.getOrCreateInstance(this,t);if(typeof t=="string"){if(v[t]===void 0)throw new TypeError(`No method named "${t}"`);v[t](this)}})}}return It(Fi),b(Fi),{Alert:u,Button:A,Carousel:Ae,Collapse:Ye,Dropdown:Fe,Modal:ui,Offcanvas:ti,Popover:Gi,ScrollSpy:Bi,Tab:mi,Toast:Fi,Tooltip:di}}),function(Z,Y){typeof exports=="object"&&typeof module=="object"?module.exports=Y():typeof define=="function"&&define.amd?define([],Y):typeof exports=="object"?exports.stringSimilarity=Y():Z.stringSimilarity=Y()}(self,function(){return Z={138:P=>{function g(x,y){if((x=x.replace(/\s+/g,""))===(y=y.replace(/\s+/g,"")))return 1;if(x.length<2||y.length<2)return 0;let h=new Map;for(let s=0;s<x.length-1;s++){const d=x.substring(s,s+2),l=h.has(d)?h.get(d)+1:1;h.set(d,l)}let p=0;for(let s=0;s<y.length-1;s++){const d=y.substring(s,s+2),l=h.has(d)?h.get(d):0;l>0&&(h.set(d,l-1),p++)}return 2*p/(x.length+y.length-2)}P.exports={compareTwoStrings:g,findBestMatch:function(x,y){if(!function(s,d){return typeof s=="string"&&!!Array.isArray(d)&&!!d.length&&!d.find(function(l){return typeof l!="string"})}(x,y))throw new Error("Bad arguments: First argument should be a string, second should be an array of strings");const h=[];let p=0;for(let s=0;s<y.length;s++){const d=y[s],l=g(x,d);h.push({target:d,rating:l}),l>h[p].rating&&(p=s)}return{ratings:h,bestMatch:h[p],bestMatchIndex:p}}}}},Y={},function P(g){if(Y[g])return Y[g].exports;var x=Y[g]={exports:{}};return Z[g](x,x.exports,P),x.exports}(138);var Z,Y});/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(Z){typeof exports=="object"&&typeof module<"u"?module.exports=Z():typeof define=="function"&&define.amd?define([],Z):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=Z()})(function(){return function Z(Y,P,g){function x(p,s){if(!P[p]){if(!Y[p]){var d=typeof require=="function"&&require;if(!s&&d)return d(p,!0);if(y)return y(p,!0);var l=new Error("Cannot find module '"+p+"'");throw l.code="MODULE_NOT_FOUND",l}var o=P[p]={exports:{}};Y[p][0].call(o.exports,function(E){var r=Y[p][1][E];return x(r||E)},o,o.exports,Z,Y,P,g)}return P[p].exports}for(var y=typeof require=="function"&&require,h=0;h<g.length;h++)x(g[h]);return x}({1:[function(Z,Y,P){"use strict";var g=Z("./utils"),x=Z("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";P.encode=function(h){for(var p,s,d,l,o,E,r,c=[],b=0,n=h.length,i=n,a=g.getTypeOf(h)!=="string";b<h.length;)i=n-b,d=a?(p=h[b++],s=b<n?h[b++]:0,b<n?h[b++]:0):(p=h.charCodeAt(b++),s=b<n?h.charCodeAt(b++):0,b<n?h.charCodeAt(b++):0),l=p>>2,o=(3&p)<<4|s>>4,E=1<i?(15&s)<<2|d>>6:64,r=2<i?63&d:64,c.push(y.charAt(l)+y.charAt(o)+y.charAt(E)+y.charAt(r));return c.join("")},P.decode=function(h){var p,s,d,l,o,E,r=0,c=0,b="data:";if(h.substr(0,b.length)===b)throw new Error("Invalid base64 input, it looks like a data url.");var n,i=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===y.charAt(64)&&i--,h.charAt(h.length-2)===y.charAt(64)&&i--,i%1!=0)throw new Error("Invalid base64 input, bad content length.");for(n=x.uint8array?new Uint8Array(0|i):new Array(0|i);r<h.length;)p=y.indexOf(h.charAt(r++))<<2|(l=y.indexOf(h.charAt(r++)))>>4,s=(15&l)<<4|(o=y.indexOf(h.charAt(r++)))>>2,d=(3&o)<<6|(E=y.indexOf(h.charAt(r++))),n[c++]=p,o!==64&&(n[c++]=s),E!==64&&(n[c++]=d);return n}},{"./support":30,"./utils":32}],2:[function(Z,Y,P){"use strict";var g=Z("./external"),x=Z("./stream/DataWorker"),y=Z("./stream/Crc32Probe"),h=Z("./stream/DataLengthProbe");function p(s,d,l,o,E){this.compressedSize=s,this.uncompressedSize=d,this.crc32=l,this.compression=o,this.compressedContent=E}p.prototype={getContentWorker:function(){var s=new x(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),d=this;return s.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),s},getCompressedWorker:function(){return new x(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(s,d,l){return s.pipe(new y).pipe(new h("uncompressedSize")).pipe(d.compressWorker(l)).pipe(new h("compressedSize")).withStreamInfo("compression",d)},Y.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(Z,Y,P){"use strict";var g=Z("./stream/GenericWorker");P.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},P.DEFLATE=Z("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(Z,Y,P){"use strict";var g=Z("./utils"),x=function(){for(var y,h=[],p=0;p<256;p++){y=p;for(var s=0;s<8;s++)y=1&y?3988292384^y>>>1:y>>>1;h[p]=y}return h}();Y.exports=function(y,h){return y!==void 0&&y.length?g.getTypeOf(y)!=="string"?function(p,s,d,l){var o=x,E=l+d;p^=-1;for(var r=l;r<E;r++)p=p>>>8^o[255&(p^s[r])];return-1^p}(0|h,y,y.length,0):function(p,s,d,l){var o=x,E=l+d;p^=-1;for(var r=l;r<E;r++)p=p>>>8^o[255&(p^s.charCodeAt(r))];return-1^p}(0|h,y,y.length,0):0}},{"./utils":32}],5:[function(Z,Y,P){"use strict";P.base64=!1,P.binary=!1,P.dir=!1,P.createFolders=!0,P.date=null,P.compression=null,P.compressionOptions=null,P.comment=null,P.unixPermissions=null,P.dosPermissions=null},{}],6:[function(Z,Y,P){"use strict";var g=null;g=typeof Promise<"u"?Promise:Z("lie"),Y.exports={Promise:g}},{lie:37}],7:[function(Z,Y,P){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",x=Z("pako"),y=Z("./utils"),h=Z("./stream/GenericWorker"),p=g?"uint8array":"array";function s(d,l){h.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=l,this.meta={}}P.magic="\b\0",y.inherits(s,h),s.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(p,d.data),!1)},s.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},s.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},s.prototype._createPako=function(){this._pako=new x[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(l){d.push({data:l,meta:d.meta})}},P.compressWorker=function(d){return new s("Deflate",d)},P.uncompressWorker=function(){return new s("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(Z,Y,P){"use strict";function g(o,E){var r,c="";for(r=0;r<E;r++)c+=String.fromCharCode(255&o),o>>>=8;return c}function x(o,E,r,c,b,n){var i,a,m=o.file,_=o.compression,S=n!==p.utf8encode,f=y.transformTo("string",n(m.name)),k=y.transformTo("string",p.utf8encode(m.name)),M=m.comment,X=y.transformTo("string",n(M)),B=y.transformTo("string",p.utf8encode(M)),V=k.length!==m.name.length,w=B.length!==M.length,Q="",dt="",ht="",St=m.dir,ut=m.date,tt={crc32:0,compressedSize:0,uncompressedSize:0};E&&!r||(tt.crc32=o.crc32,tt.compressedSize=o.compressedSize,tt.uncompressedSize=o.uncompressedSize);var st=0;E&&(st|=8),S||!V&&!w||(st|=2048);var rt=0,xt=0;St&&(rt|=16),b==="UNIX"?(xt=798,rt|=function(wt,Rt){var Lt=wt;return wt||(Lt=Rt?16893:33204),(65535&Lt)<<16}(m.unixPermissions,St)):(xt=20,rt|=function(wt){return 63&(wt||0)}(m.dosPermissions)),i=ut.getUTCHours(),i<<=6,i|=ut.getUTCMinutes(),i<<=5,i|=ut.getUTCSeconds()/2,a=ut.getUTCFullYear()-1980,a<<=4,a|=ut.getUTCMonth()+1,a<<=5,a|=ut.getUTCDate(),V&&(dt=g(1,1)+g(s(f),4)+k,Q+="up"+g(dt.length,2)+dt),w&&(ht=g(1,1)+g(s(X),4)+B,Q+="uc"+g(ht.length,2)+ht);var bt="";return bt+=`
\0`,bt+=g(st,2),bt+=_.magic,bt+=g(i,2),bt+=g(a,2),bt+=g(tt.crc32,4),bt+=g(tt.compressedSize,4),bt+=g(tt.uncompressedSize,4),bt+=g(f.length,2),bt+=g(Q.length,2),{fileRecord:d.LOCAL_FILE_HEADER+bt+f+Q,dirRecord:d.CENTRAL_FILE_HEADER+g(xt,2)+bt+g(X.length,2)+"\0\0\0\0"+g(rt,4)+g(c,4)+f+Q+X}}var y=Z("../utils"),h=Z("../stream/GenericWorker"),p=Z("../utf8"),s=Z("../crc32"),d=Z("../signature");function l(o,E,r,c){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=r,this.encodeFileName=c,this.streamFiles=o,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(l,h),l.prototype.push=function(o){var E=o.meta.percent||0,r=this.entriesCount,c=this._sources.length;this.accumulate?this.contentBuffer.push(o):(this.bytesWritten+=o.data.length,h.prototype.push.call(this,{data:o.data,meta:{currentFile:this.currentFile,percent:r?(E+100*(r-c-1))/r:100}}))},l.prototype.openedSource=function(o){this.currentSourceOffset=this.bytesWritten,this.currentFile=o.file.name;var E=this.streamFiles&&!o.file.dir;if(E){var r=x(o,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},l.prototype.closedSource=function(o){this.accumulate=!1;var E=this.streamFiles&&!o.file.dir,r=x(o,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),E)this.push({data:function(c){return d.DATA_DESCRIPTOR+g(c.crc32,4)+g(c.compressedSize,4)+g(c.uncompressedSize,4)}(o),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},l.prototype.flush=function(){for(var o=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var r=this.bytesWritten-o,c=function(b,n,i,a,m){var _=y.transformTo("string",m(a));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(b,2)+g(b,2)+g(n,4)+g(i,4)+g(_.length,2)+_}(this.dirRecords.length,r,o,this.zipComment,this.encodeFileName);this.push({data:c,meta:{percent:100}})},l.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},l.prototype.registerPrevious=function(o){this._sources.push(o);var E=this;return o.on("data",function(r){E.processChunk(r)}),o.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),o.on("error",function(r){E.error(r)}),this},l.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},l.prototype.error=function(o){var E=this._sources;if(!h.prototype.error.call(this,o))return!1;for(var r=0;r<E.length;r++)try{E[r].error(o)}catch{}return!0},l.prototype.lock=function(){h.prototype.lock.call(this);for(var o=this._sources,E=0;E<o.length;E++)o[E].lock()},Y.exports=l},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(Z,Y,P){"use strict";var g=Z("../compressions"),x=Z("./ZipFileWorker");P.generateWorker=function(y,h,p){var s=new x(h.streamFiles,p,h.platform,h.encodeFileName),d=0;try{y.forEach(function(l,o){d++;var E=function(n,i){var a=n||i,m=g[a];if(!m)throw new Error(a+" is not a valid compression method !");return m}(o.options.compression,h.compression),r=o.options.compressionOptions||h.compressionOptions||{},c=o.dir,b=o.date;o._compressWorker(E,r).withStreamInfo("file",{name:l,dir:c,date:b,comment:o.comment||"",unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions}).pipe(s)}),s.entriesCount=d}catch(l){s.error(l)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(Z,Y,P){"use strict";function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var x=new g;for(var y in this)typeof this[y]!="function"&&(x[y]=this[y]);return x}}(g.prototype=Z("./object")).loadAsync=Z("./load"),g.support=Z("./support"),g.defaults=Z("./defaults"),g.version="3.10.1",g.loadAsync=function(x,y){return new g().loadAsync(x,y)},g.external=Z("./external"),Y.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(Z,Y,P){"use strict";var g=Z("./utils"),x=Z("./external"),y=Z("./utf8"),h=Z("./zipEntries"),p=Z("./stream/Crc32Probe"),s=Z("./nodejsUtils");function d(l){return new x.Promise(function(o,E){var r=l.decompressed.getContentWorker().pipe(new p);r.on("error",function(c){E(c)}).on("end",function(){r.streamInfo.crc32!==l.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):o()}).resume()})}Y.exports=function(l,o){var E=this;return o=g.extend(o||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),s.isNode&&s.isStream(l)?x.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",l,!0,o.optimizedBinaryString,o.base64).then(function(r){var c=new h(o);return c.load(r),c}).then(function(r){var c=[x.Promise.resolve(r)],b=r.files;if(o.checkCRC32)for(var n=0;n<b.length;n++)c.push(d(b[n]));return x.Promise.all(c)}).then(function(r){for(var c=r.shift(),b=c.files,n=0;n<b.length;n++){var i=b[n],a=i.fileNameStr,m=g.resolve(i.fileNameStr);E.file(m,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:o.createFolders}),i.dir||(E.file(m).unsafeOriginalName=a)}return c.zipComment.length&&(E.comment=c.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(Z,Y,P){"use strict";var g=Z("../utils"),x=Z("../stream/GenericWorker");function y(h,p){x.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(p)}g.inherits(y,x),y.prototype._bindStream=function(h){var p=this;(this._stream=h).pause(),h.on("data",function(s){p.push({data:s,meta:{percent:0}})}).on("error",function(s){p.isPaused?this.generatedError=s:p.error(s)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},y.prototype.pause=function(){return!!x.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Y.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(Z,Y,P){"use strict";var g=Z("readable-stream").Readable;function x(y,h,p){g.call(this,h),this._helper=y;var s=this;y.on("data",function(d,l){s.push(d)||s._helper.pause(),p&&p(l)}).on("error",function(d){s.emit("error",d)}).on("end",function(){s.push(null)})}Z("../utils").inherits(x,g),x.prototype._read=function(){this._helper.resume()},Y.exports=x},{"../utils":32,"readable-stream":16}],14:[function(Z,Y,P){"use strict";Y.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,x){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,x);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,x)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var x=new Buffer(g);return x.fill(0),x},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(Z,Y,P){"use strict";function g(m,_,S){var f,k=y.getTypeOf(_),M=y.extend(S||{},s);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(m=b(m)),M.createFolders&&(f=c(m))&&n.call(this,f,!0);var X=k==="string"&&M.binary===!1&&M.base64===!1;S&&S.binary!==void 0||(M.binary=!X),(_ instanceof d&&_.uncompressedSize===0||M.dir||!_||_.length===0)&&(M.base64=!1,M.binary=!0,_="",M.compression="STORE",k="string");var B=null;B=_ instanceof d||_ instanceof h?_:E.isNode&&E.isStream(_)?new r(m,_):y.prepareContent(m,_,M.binary,M.optimizedBinaryString,M.base64);var V=new l(m,B,M);this.files[m]=V}var x=Z("./utf8"),y=Z("./utils"),h=Z("./stream/GenericWorker"),p=Z("./stream/StreamHelper"),s=Z("./defaults"),d=Z("./compressedObject"),l=Z("./zipObject"),o=Z("./generate"),E=Z("./nodejsUtils"),r=Z("./nodejs/NodejsStreamInputAdapter"),c=function(m){m.slice(-1)==="/"&&(m=m.substring(0,m.length-1));var _=m.lastIndexOf("/");return 0<_?m.substring(0,_):""},b=function(m){return m.slice(-1)!=="/"&&(m+="/"),m},n=function(m,_){return _=_!==void 0?_:s.createFolders,m=b(m),this.files[m]||g.call(this,m,null,{dir:!0,createFolders:_}),this.files[m]};function i(m){return Object.prototype.toString.call(m)==="[object RegExp]"}var a={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(m){var _,S,f;for(_ in this.files)f=this.files[_],(S=_.slice(this.root.length,_.length))&&_.slice(0,this.root.length)===this.root&&m(S,f)},filter:function(m){var _=[];return this.forEach(function(S,f){m(S,f)&&_.push(f)}),_},file:function(m,_,S){if(arguments.length!==1)return m=this.root+m,g.call(this,m,_,S),this;if(i(m)){var f=m;return this.filter(function(M,X){return!X.dir&&f.test(M)})}var k=this.files[this.root+m];return k&&!k.dir?k:null},folder:function(m){if(!m)return this;if(i(m))return this.filter(function(k,M){return M.dir&&m.test(k)});var _=this.root+m,S=n.call(this,_),f=this.clone();return f.root=S.name,f},remove:function(m){m=this.root+m;var _=this.files[m];if(_||(m.slice(-1)!=="/"&&(m+="/"),_=this.files[m]),_&&!_.dir)delete this.files[m];else for(var S=this.filter(function(k,M){return M.name.slice(0,m.length)===m}),f=0;f<S.length;f++)delete this.files[S[f].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(m){var _,S={};try{if((S=y.extend(m||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:x.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");y.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var f=S.comment||this.comment||"";_=o.generateWorker(this,S,f)}catch(k){(_=new h("error")).error(k)}return new p(_,S.type||"string",S.mimeType)},generateAsync:function(m,_){return this.generateInternalStream(m).accumulate(_)},generateNodeStream:function(m,_){return(m=m||{}).type||(m.type="nodebuffer"),this.generateInternalStream(m).toNodejsStream(_)}};Y.exports=a},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(Z,Y,P){"use strict";Y.exports=Z("stream")},{stream:void 0}],17:[function(Z,Y,P){"use strict";var g=Z("./DataReader");function x(y){g.call(this,y);for(var h=0;h<this.data.length;h++)y[h]=255&y[h]}Z("../utils").inherits(x,g),x.prototype.byteAt=function(y){return this.data[this.zero+y]},x.prototype.lastIndexOfSignature=function(y){for(var h=y.charCodeAt(0),p=y.charCodeAt(1),s=y.charCodeAt(2),d=y.charCodeAt(3),l=this.length-4;0<=l;--l)if(this.data[l]===h&&this.data[l+1]===p&&this.data[l+2]===s&&this.data[l+3]===d)return l-this.zero;return-1},x.prototype.readAndCheckSignature=function(y){var h=y.charCodeAt(0),p=y.charCodeAt(1),s=y.charCodeAt(2),d=y.charCodeAt(3),l=this.readData(4);return h===l[0]&&p===l[1]&&s===l[2]&&d===l[3]},x.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,h},Y.exports=x},{"../utils":32,"./DataReader":18}],18:[function(Z,Y,P){"use strict";var g=Z("../utils");function x(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}x.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var h,p=0;for(this.checkOffset(y),h=this.index+y-1;h>=this.index;h--)p=(p<<8)+this.byteAt(h);return this.index+=y,p},readString:function(y){return g.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},Y.exports=x},{"../utils":32}],19:[function(Z,Y,P){"use strict";var g=Z("./Uint8ArrayReader");function x(y){g.call(this,y)}Z("../utils").inherits(x,g),x.prototype.readData=function(y){this.checkOffset(y);var h=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,h},Y.exports=x},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(Z,Y,P){"use strict";var g=Z("./DataReader");function x(y){g.call(this,y)}Z("../utils").inherits(x,g),x.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},x.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},x.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},x.prototype.readData=function(y){this.checkOffset(y);var h=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,h},Y.exports=x},{"../utils":32,"./DataReader":18}],21:[function(Z,Y,P){"use strict";var g=Z("./ArrayReader");function x(y){g.call(this,y)}Z("../utils").inherits(x,g),x.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,h},Y.exports=x},{"../utils":32,"./ArrayReader":17}],22:[function(Z,Y,P){"use strict";var g=Z("../utils"),x=Z("../support"),y=Z("./ArrayReader"),h=Z("./StringReader"),p=Z("./NodeBufferReader"),s=Z("./Uint8ArrayReader");Y.exports=function(d){var l=g.getTypeOf(d);return g.checkSupport(l),l!=="string"||x.uint8array?l==="nodebuffer"?new p(d):x.uint8array?new s(g.transformTo("uint8array",d)):new y(g.transformTo("array",d)):new h(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(Z,Y,P){"use strict";P.LOCAL_FILE_HEADER="PK",P.CENTRAL_FILE_HEADER="PK",P.CENTRAL_DIRECTORY_END="PK",P.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",P.ZIP64_CENTRAL_DIRECTORY_END="PK",P.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(Z,Y,P){"use strict";var g=Z("./GenericWorker"),x=Z("../utils");function y(h){g.call(this,"ConvertWorker to "+h),this.destType=h}x.inherits(y,g),y.prototype.processChunk=function(h){this.push({data:x.transformTo(this.destType,h.data),meta:h.meta})},Y.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(Z,Y,P){"use strict";var g=Z("./GenericWorker"),x=Z("../crc32");function y(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}Z("../utils").inherits(y,g),y.prototype.processChunk=function(h){this.streamInfo.crc32=x(h.data,this.streamInfo.crc32||0),this.push(h)},Y.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(Z,Y,P){"use strict";var g=Z("../utils"),x=Z("./GenericWorker");function y(h){x.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}g.inherits(y,x),y.prototype.processChunk=function(h){if(h){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+h.data.length}x.prototype.processChunk.call(this,h)},Y.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(Z,Y,P){"use strict";var g=Z("../utils"),x=Z("./GenericWorker");function y(h){x.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(s){p.dataIsReady=!0,p.data=s,p.max=s&&s.length||0,p.type=g.getTypeOf(s),p.isPaused||p._tickAndRepeat()},function(s){p.error(s)})}g.inherits(y,x),y.prototype.cleanUp=function(){x.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!x.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,p);break;case"uint8array":h=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":h=this.data.slice(this.index,p)}return this.index=p,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},Y.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(Z,Y,P){"use strict";function g(x){this.name=x||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(x){this.emit("data",x)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(x){this.emit("error",x)}return!0},error:function(x){return!this.isFinished&&(this.isPaused?this.generatedError=x:(this.isFinished=!0,this.emit("error",x),this.previous&&this.previous.error(x),this.cleanUp()),!0)},on:function(x,y){return this._listeners[x].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(x,y){if(this._listeners[x])for(var h=0;h<this._listeners[x].length;h++)this._listeners[x][h].call(this,y)},pipe:function(x){return x.registerPrevious(this)},registerPrevious:function(x){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=x.streamInfo,this.mergeStreamInfo(),this.previous=x;var y=this;return x.on("data",function(h){y.processChunk(h)}),x.on("end",function(){y.end()}),x.on("error",function(h){y.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var x=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),x=!0),this.previous&&this.previous.resume(),!x},flush:function(){},processChunk:function(x){this.push(x)},withStreamInfo:function(x,y){return this.extraStreamInfo[x]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var x in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,x)&&(this.streamInfo[x]=this.extraStreamInfo[x])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var x="Worker "+this.name;return this.previous?this.previous+" -> "+x:x}},Y.exports=g},{}],29:[function(Z,Y,P){"use strict";var g=Z("../utils"),x=Z("./ConvertWorker"),y=Z("./GenericWorker"),h=Z("../base64"),p=Z("../support"),s=Z("../external"),d=null;if(p.nodestream)try{d=Z("../nodejs/NodejsStreamOutputAdapter")}catch{}function l(E,r){return new s.Promise(function(c,b){var n=[],i=E._internalType,a=E._outputType,m=E._mimeType;E.on("data",function(_,S){n.push(_),r&&r(S)}).on("error",function(_){n=[],b(_)}).on("end",function(){try{var _=function(S,f,k){switch(S){case"blob":return g.newBlob(g.transformTo("arraybuffer",f),k);case"base64":return h.encode(f);default:return g.transformTo(S,f)}}(a,function(S,f){var k,M=0,X=null,B=0;for(k=0;k<f.length;k++)B+=f[k].length;switch(S){case"string":return f.join("");case"array":return Array.prototype.concat.apply([],f);case"uint8array":for(X=new Uint8Array(B),k=0;k<f.length;k++)X.set(f[k],M),M+=f[k].length;return X;case"nodebuffer":return Buffer.concat(f);default:throw new Error("concat : unsupported type '"+S+"'")}}(i,n),m);c(_)}catch(S){b(S)}n=[]}).resume()})}function o(E,r,c){var b=r;switch(r){case"blob":case"arraybuffer":b="uint8array";break;case"base64":b="string"}try{this._internalType=b,this._outputType=r,this._mimeType=c,g.checkSupport(b),this._worker=E.pipe(new x(b)),E.lock()}catch(n){this._worker=new y("error"),this._worker.error(n)}}o.prototype={accumulate:function(E){return l(this,E)},on:function(E,r){var c=this;return E==="data"?this._worker.on(E,function(b){r.call(c,b.data,b.meta)}):this._worker.on(E,function(){g.delay(r,arguments,c)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},E)}},Y.exports=o},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(Z,Y,P){"use strict";if(P.base64=!0,P.array=!0,P.string=!0,P.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",P.nodebuffer=typeof Buffer<"u",P.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")P.blob=!1;else{var g=new ArrayBuffer(0);try{P.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);x.append(g),P.blob=x.getBlob("application/zip").size===0}catch{P.blob=!1}}}try{P.nodestream=!!Z("readable-stream").Readable}catch{P.nodestream=!1}},{"readable-stream":16}],31:[function(Z,Y,P){"use strict";for(var g=Z("./utils"),x=Z("./support"),y=Z("./nodejsUtils"),h=Z("./stream/GenericWorker"),p=new Array(256),s=0;s<256;s++)p[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;p[254]=p[254]=1;function d(){h.call(this,"utf-8 decode"),this.leftOver=null}function l(){h.call(this,"utf-8 encode")}P.utf8encode=function(o){return x.nodebuffer?y.newBufferFrom(o,"utf-8"):function(E){var r,c,b,n,i,a=E.length,m=0;for(n=0;n<a;n++)(64512&(c=E.charCodeAt(n)))==55296&&n+1<a&&(64512&(b=E.charCodeAt(n+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),n++),m+=c<128?1:c<2048?2:c<65536?3:4;for(r=x.uint8array?new Uint8Array(m):new Array(m),n=i=0;i<m;n++)(64512&(c=E.charCodeAt(n)))==55296&&n+1<a&&(64512&(b=E.charCodeAt(n+1)))==56320&&(c=65536+(c-55296<<10)+(b-56320),n++),c<128?r[i++]=c:(c<2048?r[i++]=192|c>>>6:(c<65536?r[i++]=224|c>>>12:(r[i++]=240|c>>>18,r[i++]=128|c>>>12&63),r[i++]=128|c>>>6&63),r[i++]=128|63&c);return r}(o)},P.utf8decode=function(o){return x.nodebuffer?g.transformTo("nodebuffer",o).toString("utf-8"):function(E){var r,c,b,n,i=E.length,a=new Array(2*i);for(r=c=0;r<i;)if((b=E[r++])<128)a[c++]=b;else if(4<(n=p[b]))a[c++]=65533,r+=n-1;else{for(b&=n===2?31:n===3?15:7;1<n&&r<i;)b=b<<6|63&E[r++],n--;1<n?a[c++]=65533:b<65536?a[c++]=b:(b-=65536,a[c++]=55296|b>>10&1023,a[c++]=56320|1023&b)}return a.length!==c&&(a.subarray?a=a.subarray(0,c):a.length=c),g.applyFromCharCode(a)}(o=g.transformTo(x.uint8array?"uint8array":"array",o))},g.inherits(d,h),d.prototype.processChunk=function(o){var E=g.transformTo(x.uint8array?"uint8array":"array",o.data);if(this.leftOver&&this.leftOver.length){if(x.uint8array){var r=E;(E=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),E.set(r,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var c=function(n,i){var a;for((i=i||n.length)>n.length&&(i=n.length),a=i-1;0<=a&&(192&n[a])==128;)a--;return a<0||a===0?i:a+p[n[a]]>i?a:i}(E),b=E;c!==E.length&&(x.uint8array?(b=E.subarray(0,c),this.leftOver=E.subarray(c,E.length)):(b=E.slice(0,c),this.leftOver=E.slice(c,E.length))),this.push({data:P.utf8decode(b),meta:o.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:P.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},P.Utf8DecodeWorker=d,g.inherits(l,h),l.prototype.processChunk=function(o){this.push({data:P.utf8encode(o.data),meta:o.meta})},P.Utf8EncodeWorker=l},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(Z,Y,P){"use strict";var g=Z("./support"),x=Z("./base64"),y=Z("./nodejsUtils"),h=Z("./external");function p(r){return r}function s(r,c){for(var b=0;b<r.length;++b)c[b]=255&r.charCodeAt(b);return c}Z("setimmediate"),P.newBlob=function(r,c){P.checkSupport("blob");try{return new Blob([r],{type:c})}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return b.append(r),b.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(r,c,b){var n=[],i=0,a=r.length;if(a<=b)return String.fromCharCode.apply(null,r);for(;i<a;)c==="array"||c==="nodebuffer"?n.push(String.fromCharCode.apply(null,r.slice(i,Math.min(i+b,a)))):n.push(String.fromCharCode.apply(null,r.subarray(i,Math.min(i+b,a)))),i+=b;return n.join("")},stringifyByChar:function(r){for(var c="",b=0;b<r.length;b++)c+=String.fromCharCode(r[b]);return c},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function l(r){var c=65536,b=P.getTypeOf(r),n=!0;if(b==="uint8array"?n=d.applyCanBeUsed.uint8array:b==="nodebuffer"&&(n=d.applyCanBeUsed.nodebuffer),n)for(;1<c;)try{return d.stringifyByChunk(r,b,c)}catch{c=Math.floor(c/2)}return d.stringifyByChar(r)}function o(r,c){for(var b=0;b<r.length;b++)c[b]=r[b];return c}P.applyFromCharCode=l;var E={};E.string={string:p,array:function(r){return s(r,new Array(r.length))},arraybuffer:function(r){return E.string.uint8array(r).buffer},uint8array:function(r){return s(r,new Uint8Array(r.length))},nodebuffer:function(r){return s(r,y.allocBuffer(r.length))}},E.array={string:l,array:p,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return y.newBufferFrom(r)}},E.arraybuffer={string:function(r){return l(new Uint8Array(r))},array:function(r){return o(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:p,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return y.newBufferFrom(new Uint8Array(r))}},E.uint8array={string:l,array:function(r){return o(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:p,nodebuffer:function(r){return y.newBufferFrom(r)}},E.nodebuffer={string:l,array:function(r){return o(r,new Array(r.length))},arraybuffer:function(r){return E.nodebuffer.uint8array(r).buffer},uint8array:function(r){return o(r,new Uint8Array(r.length))},nodebuffer:p},P.transformTo=function(r,c){if(c=c||"",!r)return c;P.checkSupport(r);var b=P.getTypeOf(c);return E[b][r](c)},P.resolve=function(r){for(var c=r.split("/"),b=[],n=0;n<c.length;n++){var i=c[n];i==="."||i===""&&n!==0&&n!==c.length-1||(i===".."?b.pop():b.push(i))}return b.join("/")},P.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":g.nodebuffer&&y.isBuffer(r)?"nodebuffer":g.uint8array&&r instanceof Uint8Array?"uint8array":g.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},P.checkSupport=function(r){if(!g[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},P.MAX_VALUE_16BITS=65535,P.MAX_VALUE_32BITS=-1,P.pretty=function(r){var c,b,n="";for(b=0;b<(r||"").length;b++)n+="\\x"+((c=r.charCodeAt(b))<16?"0":"")+c.toString(16).toUpperCase();return n},P.delay=function(r,c,b){setImmediate(function(){r.apply(b||null,c||[])})},P.inherits=function(r,c){function b(){}b.prototype=c.prototype,r.prototype=new b},P.extend=function(){var r,c,b={};for(r=0;r<arguments.length;r++)for(c in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],c)&&b[c]===void 0&&(b[c]=arguments[r][c]);return b},P.prepareContent=function(r,c,b,n,i){return h.Promise.resolve(c).then(function(a){return g.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1)&&typeof FileReader<"u"?new h.Promise(function(m,_){var S=new FileReader;S.onload=function(f){m(f.target.result)},S.onerror=function(f){_(f.target.error)},S.readAsArrayBuffer(a)}):a}).then(function(a){var m=P.getTypeOf(a);return m?(m==="arraybuffer"?a=P.transformTo("uint8array",a):m==="string"&&(i?a=x.decode(a):b&&n!==!0&&(a=function(_){return s(_,g.uint8array?new Uint8Array(_.length):new Array(_.length))}(a))),a):h.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(Z,Y,P){"use strict";var g=Z("./reader/readerFor"),x=Z("./utils"),y=Z("./signature"),h=Z("./zipEntry"),p=Z("./support");function s(d){this.files=[],this.loadOptions=d}s.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var l=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+x.pretty(l)+", expected "+x.pretty(d)+")")}},isSignature:function(d,l){var o=this.reader.index;this.reader.setIndex(d);var E=this.reader.readString(4)===l;return this.reader.setIndex(o),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),l=p.uint8array?"uint8array":"array",o=x.transformTo(l,d);this.zipComment=this.loadOptions.decodeFileName(o)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,l,o,E=this.zip64EndOfCentralSize-44;0<E;)d=this.reader.readInt(2),l=this.reader.readInt(4),o=this.reader.readData(l),this.zip64ExtensibleData[d]={id:d,length:l,value:o}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,l;for(d=0;d<this.files.length;d++)l=this.files[d],this.reader.setIndex(l.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),l.readLocalPart(this.reader),l.handleUTF8(),l.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(d=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var l=d;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===x.MAX_VALUE_16BITS||this.diskWithCentralDirStart===x.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===x.MAX_VALUE_16BITS||this.centralDirRecords===x.MAX_VALUE_16BITS||this.centralDirSize===x.MAX_VALUE_32BITS||this.centralDirOffset===x.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var o=this.centralDirOffset+this.centralDirSize;this.zip64&&(o+=20,o+=12+this.zip64EndOfCentralSize);var E=l-o;if(0<E)this.isSignature(l,y.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(d){this.reader=g(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Y.exports=s},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(Z,Y,P){"use strict";var g=Z("./reader/readerFor"),x=Z("./utils"),y=Z("./compressedObject"),h=Z("./crc32"),p=Z("./utf8"),s=Z("./compressions"),d=Z("./support");function l(o,E){this.options=o,this.loadOptions=E}l.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(o){var E,r;if(o.skip(22),this.fileNameLength=o.readInt(2),r=o.readInt(2),this.fileName=o.readData(this.fileNameLength),o.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=function(c){for(var b in s)if(Object.prototype.hasOwnProperty.call(s,b)&&s[b].magic===c)return s[b];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+x.pretty(this.compressionMethod)+" unknown (inner file : "+x.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,E,o.readData(this.compressedSize))},readCentralPart:function(o){this.versionMadeBy=o.readInt(2),o.skip(2),this.bitFlag=o.readInt(2),this.compressionMethod=o.readString(2),this.date=o.readDate(),this.crc32=o.readInt(4),this.compressedSize=o.readInt(4),this.uncompressedSize=o.readInt(4);var E=o.readInt(2);if(this.extraFieldsLength=o.readInt(2),this.fileCommentLength=o.readInt(2),this.diskNumberStart=o.readInt(2),this.internalFileAttributes=o.readInt(2),this.externalFileAttributes=o.readInt(4),this.localHeaderOffset=o.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");o.skip(E),this.readExtraFields(o),this.parseZIP64ExtraField(o),this.fileComment=o.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var o=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),o==0&&(this.dosPermissions=63&this.externalFileAttributes),o==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var o=g(this.extraFields[1].value);this.uncompressedSize===x.MAX_VALUE_32BITS&&(this.uncompressedSize=o.readInt(8)),this.compressedSize===x.MAX_VALUE_32BITS&&(this.compressedSize=o.readInt(8)),this.localHeaderOffset===x.MAX_VALUE_32BITS&&(this.localHeaderOffset=o.readInt(8)),this.diskNumberStart===x.MAX_VALUE_32BITS&&(this.diskNumberStart=o.readInt(4))}},readExtraFields:function(o){var E,r,c,b=o.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});o.index+4<b;)E=o.readInt(2),r=o.readInt(2),c=o.readData(r),this.extraFields[E]={id:E,length:r,value:c};o.setIndex(b)},handleUTF8:function(){var o=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var r=x.transformTo(o,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var c=this.findExtraFieldUnicodeComment();if(c!==null)this.fileCommentStr=c;else{var b=x.transformTo(o,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(b)}}},findExtraFieldUnicodePath:function(){var o=this.extraFields[28789];if(o){var E=g(o.value);return E.readInt(1)!==1||h(this.fileName)!==E.readInt(4)?null:p.utf8decode(E.readData(o.length-5))}return null},findExtraFieldUnicodeComment:function(){var o=this.extraFields[25461];if(o){var E=g(o.value);return E.readInt(1)!==1||h(this.fileComment)!==E.readInt(4)?null:p.utf8decode(E.readData(o.length-5))}return null}},Y.exports=l},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(Z,Y,P){"use strict";function g(E,r,c){this.name=E,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=r,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}}var x=Z("./stream/StreamHelper"),y=Z("./stream/DataWorker"),h=Z("./utf8"),p=Z("./compressedObject"),s=Z("./stream/GenericWorker");g.prototype={internalStream:function(E){var r=null,c="string";try{if(!E)throw new Error("No output type specified.");var b=(c=E.toLowerCase())==="string"||c==="text";c!=="binarystring"&&c!=="text"||(c="string"),r=this._decompressWorker();var n=!this._dataBinary;n&&!b&&(r=r.pipe(new h.Utf8EncodeWorker)),!n&&b&&(r=r.pipe(new h.Utf8DecodeWorker))}catch(i){(r=new s("error")).error(i)}return new x(r,c,"")},async:function(E,r){return this.internalStream(E).accumulate(r)},nodeStream:function(E,r){return this.internalStream(E||"nodebuffer").toNodejsStream(r)},_compressWorker:function(E,r){if(this._data instanceof p&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new h.Utf8EncodeWorker)),p.createWorkerFrom(c,E,r)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof s?this._data:new y(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],l=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},o=0;o<d.length;o++)g.prototype[d[o]]=l;Y.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(Z,Y,P){(function(g){"use strict";var x,y,h=g.MutationObserver||g.WebKitMutationObserver;if(h){var p=0,s=new h(E),d=g.document.createTextNode("");s.observe(d,{characterData:!0}),x=function(){d.data=p=++p%2}}else if(g.setImmediate||g.MessageChannel===void 0)x="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var r=g.document.createElement("script");r.onreadystatechange=function(){E(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},g.document.documentElement.appendChild(r)}:function(){setTimeout(E,0)};else{var l=new g.MessageChannel;l.port1.onmessage=E,x=function(){l.port2.postMessage(0)}}var o=[];function E(){var r,c;y=!0;for(var b=o.length;b;){for(c=o,o=[],r=-1;++r<b;)c[r]();b=o.length}y=!1}Y.exports=function(r){o.push(r)!==1||y||x()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(Z,Y,P){"use strict";var g=Z("immediate");function x(){}var y={},h=["REJECTED"],p=["FULFILLED"],s=["PENDING"];function d(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,b!==x&&r(this,b)}function l(b,n,i){this.promise=b,typeof n=="function"&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),typeof i=="function"&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function o(b,n,i){g(function(){var a;try{a=n(i)}catch(m){return y.reject(b,m)}a===b?y.reject(b,new TypeError("Cannot resolve promise with itself")):y.resolve(b,a)})}function E(b){var n=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof n=="function")return function(){n.apply(b,arguments)}}function r(b,n){var i=!1;function a(S){i||(i=!0,y.reject(b,S))}function m(S){i||(i=!0,y.resolve(b,S))}var _=c(function(){n(m,a)});_.status==="error"&&a(_.value)}function c(b,n){var i={};try{i.value=b(n),i.status="success"}catch(a){i.status="error",i.value=a}return i}(Y.exports=d).prototype.finally=function(b){if(typeof b!="function")return this;var n=this.constructor;return this.then(function(i){return n.resolve(b()).then(function(){return i})},function(i){return n.resolve(b()).then(function(){throw i})})},d.prototype.catch=function(b){return this.then(null,b)},d.prototype.then=function(b,n){if(typeof b!="function"&&this.state===p||typeof n!="function"&&this.state===h)return this;var i=new this.constructor(x);return this.state!==s?o(i,this.state===p?b:n,this.outcome):this.queue.push(new l(i,b,n)),i},l.prototype.callFulfilled=function(b){y.resolve(this.promise,b)},l.prototype.otherCallFulfilled=function(b){o(this.promise,this.onFulfilled,b)},l.prototype.callRejected=function(b){y.reject(this.promise,b)},l.prototype.otherCallRejected=function(b){o(this.promise,this.onRejected,b)},y.resolve=function(b,n){var i=c(E,n);if(i.status==="error")return y.reject(b,i.value);var a=i.value;if(a)r(b,a);else{b.state=p,b.outcome=n;for(var m=-1,_=b.queue.length;++m<_;)b.queue[m].callFulfilled(n)}return b},y.reject=function(b,n){b.state=h,b.outcome=n;for(var i=-1,a=b.queue.length;++i<a;)b.queue[i].callRejected(n);return b},d.resolve=function(b){return b instanceof this?b:y.resolve(new this(x),b)},d.reject=function(b){var n=new this(x);return y.reject(n,b)},d.all=function(b){var n=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var i=b.length,a=!1;if(!i)return this.resolve([]);for(var m=new Array(i),_=0,S=-1,f=new this(x);++S<i;)k(b[S],S);return f;function k(M,X){n.resolve(M).then(function(B){m[X]=B,++_!==i||a||(a=!0,y.resolve(f,m))},function(B){a||(a=!0,y.reject(f,B))})}},d.race=function(b){var n=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var i=b.length,a=!1;if(!i)return this.resolve([]);for(var m=-1,_=new this(x);++m<i;)S=b[m],n.resolve(S).then(function(f){a||(a=!0,y.resolve(_,f))},function(f){a||(a=!0,y.reject(_,f))});var S;return _}},{immediate:36}],38:[function(Z,Y,P){"use strict";var g={};(0,Z("./lib/utils/common").assign)(g,Z("./lib/deflate"),Z("./lib/inflate"),Z("./lib/zlib/constants")),Y.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(Z,Y,P){"use strict";var g=Z("./zlib/deflate"),x=Z("./utils/common"),y=Z("./utils/strings"),h=Z("./zlib/messages"),p=Z("./zlib/zstream"),s=Object.prototype.toString,d=0,l=-1,o=0,E=8;function r(b){if(!(this instanceof r))return new r(b);this.options=x.assign({level:l,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:o,to:""},b||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var i=g.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==d)throw new Error(h[i]);if(n.header&&g.deflateSetHeader(this.strm,n.header),n.dictionary){var a;if(a=typeof n.dictionary=="string"?y.string2buf(n.dictionary):s.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,(i=g.deflateSetDictionary(this.strm,a))!==d)throw new Error(h[i]);this._dict_set=!0}}function c(b,n){var i=new r(n);if(i.push(b,!0),i.err)throw i.msg||h[i.err];return i.result}r.prototype.push=function(b,n){var i,a,m=this.strm,_=this.options.chunkSize;if(this.ended)return!1;a=n===~~n?n:n===!0?4:0,typeof b=="string"?m.input=y.string2buf(b):s.call(b)==="[object ArrayBuffer]"?m.input=new Uint8Array(b):m.input=b,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new x.Buf8(_),m.next_out=0,m.avail_out=_),(i=g.deflate(m,a))!==1&&i!==d)return this.onEnd(i),!(this.ended=!0);m.avail_out!==0&&(m.avail_in!==0||a!==4&&a!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(x.shrinkBuf(m.output,m.next_out))):this.onData(x.shrinkBuf(m.output,m.next_out)))}while((0<m.avail_in||m.avail_out===0)&&i!==1);return a===4?(i=g.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d):a!==2||(this.onEnd(d),!(m.avail_out=0))},r.prototype.onData=function(b){this.chunks.push(b)},r.prototype.onEnd=function(b){b===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},P.Deflate=r,P.deflate=c,P.deflateRaw=function(b,n){return(n=n||{}).raw=!0,c(b,n)},P.gzip=function(b,n){return(n=n||{}).gzip=!0,c(b,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(Z,Y,P){"use strict";var g=Z("./zlib/inflate"),x=Z("./utils/common"),y=Z("./utils/strings"),h=Z("./zlib/constants"),p=Z("./zlib/messages"),s=Z("./zlib/zstream"),d=Z("./zlib/gzheader"),l=Object.prototype.toString;function o(r){if(!(this instanceof o))return new o(r);this.options=x.assign({chunkSize:16384,windowBits:0,to:""},r||{});var c=this.options;c.raw&&0<=c.windowBits&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),!(0<=c.windowBits&&c.windowBits<16)||r&&r.windowBits||(c.windowBits+=32),15<c.windowBits&&c.windowBits<48&&!(15&c.windowBits)&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var b=g.inflateInit2(this.strm,c.windowBits);if(b!==h.Z_OK)throw new Error(p[b]);this.header=new d,g.inflateGetHeader(this.strm,this.header)}function E(r,c){var b=new o(c);if(b.push(r,!0),b.err)throw b.msg||p[b.err];return b.result}o.prototype.push=function(r,c){var b,n,i,a,m,_,S=this.strm,f=this.options.chunkSize,k=this.options.dictionary,M=!1;if(this.ended)return!1;n=c===~~c?c:c===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof r=="string"?S.input=y.binstring2buf(r):l.call(r)==="[object ArrayBuffer]"?S.input=new Uint8Array(r):S.input=r,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new x.Buf8(f),S.next_out=0,S.avail_out=f),(b=g.inflate(S,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&k&&(_=typeof k=="string"?y.string2buf(k):l.call(k)==="[object ArrayBuffer]"?new Uint8Array(k):k,b=g.inflateSetDictionary(this.strm,_)),b===h.Z_BUF_ERROR&&M===!0&&(b=h.Z_OK,M=!1),b!==h.Z_STREAM_END&&b!==h.Z_OK)return this.onEnd(b),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&b!==h.Z_STREAM_END&&(S.avail_in!==0||n!==h.Z_FINISH&&n!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(i=y.utf8border(S.output,S.next_out),a=S.next_out-i,m=y.buf2string(S.output,i),S.next_out=a,S.avail_out=f-a,a&&x.arraySet(S.output,S.output,i,a,0),this.onData(m)):this.onData(x.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(M=!0)}while((0<S.avail_in||S.avail_out===0)&&b!==h.Z_STREAM_END);return b===h.Z_STREAM_END&&(n=h.Z_FINISH),n===h.Z_FINISH?(b=g.inflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===h.Z_OK):n!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(S.avail_out=0))},o.prototype.onData=function(r){this.chunks.push(r)},o.prototype.onEnd=function(r){r===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=x.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},P.Inflate=o,P.inflate=E,P.inflateRaw=function(r,c){return(c=c||{}).raw=!0,E(r,c)},P.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(Z,Y,P){"use strict";var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";P.assign=function(h){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var s=p.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var d in s)s.hasOwnProperty(d)&&(h[d]=s[d])}}return h},P.shrinkBuf=function(h,p){return h.length===p?h:h.subarray?h.subarray(0,p):(h.length=p,h)};var x={arraySet:function(h,p,s,d,l){if(p.subarray&&h.subarray)h.set(p.subarray(s,s+d),l);else for(var o=0;o<d;o++)h[l+o]=p[s+o]},flattenChunks:function(h){var p,s,d,l,o,E;for(p=d=0,s=h.length;p<s;p++)d+=h[p].length;for(E=new Uint8Array(d),p=l=0,s=h.length;p<s;p++)o=h[p],E.set(o,l),l+=o.length;return E}},y={arraySet:function(h,p,s,d,l){for(var o=0;o<d;o++)h[l+o]=p[s+o]},flattenChunks:function(h){return[].concat.apply([],h)}};P.setTyped=function(h){h?(P.Buf8=Uint8Array,P.Buf16=Uint16Array,P.Buf32=Int32Array,P.assign(P,x)):(P.Buf8=Array,P.Buf16=Array,P.Buf32=Array,P.assign(P,y))},P.setTyped(g)},{}],42:[function(Z,Y,P){"use strict";var g=Z("./common"),x=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{x=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var h=new g.Buf8(256),p=0;p<256;p++)h[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function s(d,l){if(l<65537&&(d.subarray&&y||!d.subarray&&x))return String.fromCharCode.apply(null,g.shrinkBuf(d,l));for(var o="",E=0;E<l;E++)o+=String.fromCharCode(d[E]);return o}h[254]=h[254]=1,P.string2buf=function(d){var l,o,E,r,c,b=d.length,n=0;for(r=0;r<b;r++)(64512&(o=d.charCodeAt(r)))==55296&&r+1<b&&(64512&(E=d.charCodeAt(r+1)))==56320&&(o=65536+(o-55296<<10)+(E-56320),r++),n+=o<128?1:o<2048?2:o<65536?3:4;for(l=new g.Buf8(n),r=c=0;c<n;r++)(64512&(o=d.charCodeAt(r)))==55296&&r+1<b&&(64512&(E=d.charCodeAt(r+1)))==56320&&(o=65536+(o-55296<<10)+(E-56320),r++),o<128?l[c++]=o:(o<2048?l[c++]=192|o>>>6:(o<65536?l[c++]=224|o>>>12:(l[c++]=240|o>>>18,l[c++]=128|o>>>12&63),l[c++]=128|o>>>6&63),l[c++]=128|63&o);return l},P.buf2binstring=function(d){return s(d,d.length)},P.binstring2buf=function(d){for(var l=new g.Buf8(d.length),o=0,E=l.length;o<E;o++)l[o]=d.charCodeAt(o);return l},P.buf2string=function(d,l){var o,E,r,c,b=l||d.length,n=new Array(2*b);for(o=E=0;o<b;)if((r=d[o++])<128)n[E++]=r;else if(4<(c=h[r]))n[E++]=65533,o+=c-1;else{for(r&=c===2?31:c===3?15:7;1<c&&o<b;)r=r<<6|63&d[o++],c--;1<c?n[E++]=65533:r<65536?n[E++]=r:(r-=65536,n[E++]=55296|r>>10&1023,n[E++]=56320|1023&r)}return s(n,E)},P.utf8border=function(d,l){var o;for((l=l||d.length)>d.length&&(l=d.length),o=l-1;0<=o&&(192&d[o])==128;)o--;return o<0||o===0?l:o+h[d[o]]>l?o:l}},{"./common":41}],43:[function(Z,Y,P){"use strict";Y.exports=function(g,x,y,h){for(var p=65535&g|0,s=g>>>16&65535|0,d=0;y!==0;){for(y-=d=2e3<y?2e3:y;s=s+(p=p+x[h++]|0)|0,--d;);p%=65521,s%=65521}return p|s<<16|0}},{}],44:[function(Z,Y,P){"use strict";Y.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(Z,Y,P){"use strict";var g=function(){for(var x,y=[],h=0;h<256;h++){x=h;for(var p=0;p<8;p++)x=1&x?3988292384^x>>>1:x>>>1;y[h]=x}return y}();Y.exports=function(x,y,h,p){var s=g,d=p+h;x^=-1;for(var l=p;l<d;l++)x=x>>>8^s[255&(x^y[l])];return-1^x}},{}],46:[function(Z,Y,P){"use strict";var g,x=Z("../utils/common"),y=Z("./trees"),h=Z("./adler32"),p=Z("./crc32"),s=Z("./messages"),d=0,l=4,o=0,E=-2,r=-1,c=4,b=2,n=8,i=9,a=286,m=30,_=19,S=2*a+1,f=15,k=3,M=258,X=M+k+1,B=42,V=113,w=1,Q=2,dt=3,ht=4;function St(e,A){return e.msg=s[A],A}function ut(e){return(e<<1)-(4<e?9:0)}function tt(e){for(var A=e.length;0<=--A;)e[A]=0}function st(e){var A=e.state,R=A.pending;R>e.avail_out&&(R=e.avail_out),R!==0&&(x.arraySet(e.output,A.pending_buf,A.pending_out,R,e.next_out),e.next_out+=R,A.pending_out+=R,e.total_out+=R,e.avail_out-=R,A.pending-=R,A.pending===0&&(A.pending_out=0))}function rt(e,A){y._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,A),e.block_start=e.strstart,st(e.strm)}function xt(e,A){e.pending_buf[e.pending++]=A}function bt(e,A){e.pending_buf[e.pending++]=A>>>8&255,e.pending_buf[e.pending++]=255&A}function wt(e,A){var R,I,D=e.max_chain_length,H=e.strstart,J=e.prev_length,at=e.nice_match,et=e.strstart>e.w_size-X?e.strstart-(e.w_size-X):0,gt=e.window,Et=e.w_mask,mt=e.prev,L=e.strstart+M,U=gt[H+J-1],q=gt[H+J];e.prev_length>=e.good_match&&(D>>=2),at>e.lookahead&&(at=e.lookahead);do if(gt[(R=A)+J]===q&&gt[R+J-1]===U&&gt[R]===gt[H]&&gt[++R]===gt[H+1]){H+=2,R++;do;while(gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&gt[++H]===gt[++R]&&H<L);if(I=M-(L-H),H=L-M,J<I){if(e.match_start=A,at<=(J=I))break;U=gt[H+J-1],q=gt[H+J]}}while((A=mt[A&Et])>et&&--D!=0);return J<=e.lookahead?J:e.lookahead}function Rt(e){var A,R,I,D,H,J,at,et,gt,Et,mt=e.w_size;do{if(D=e.window_size-e.lookahead-e.strstart,e.strstart>=mt+(mt-X)){for(x.arraySet(e.window,e.window,mt,mt,0),e.match_start-=mt,e.strstart-=mt,e.block_start-=mt,A=R=e.hash_size;I=e.head[--A],e.head[A]=mt<=I?I-mt:0,--R;);for(A=R=mt;I=e.prev[--A],e.prev[A]=mt<=I?I-mt:0,--R;);D+=mt}if(e.strm.avail_in===0)break;if(J=e.strm,at=e.window,et=e.strstart+e.lookahead,gt=D,Et=void 0,Et=J.avail_in,gt<Et&&(Et=gt),R=Et===0?0:(J.avail_in-=Et,x.arraySet(at,J.input,J.next_in,Et,et),J.state.wrap===1?J.adler=h(J.adler,at,Et,et):J.state.wrap===2&&(J.adler=p(J.adler,at,Et,et)),J.next_in+=Et,J.total_in+=Et,Et),e.lookahead+=R,e.lookahead+e.insert>=k)for(H=e.strstart-e.insert,e.ins_h=e.window[H],e.ins_h=(e.ins_h<<e.hash_shift^e.window[H+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[H+k-1])&e.hash_mask,e.prev[H&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=H,H++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<X&&e.strm.avail_in!==0)}function Lt(e,A){for(var R,I;;){if(e.lookahead<X){if(Rt(e),e.lookahead<X&&A===d)return w;if(e.lookahead===0)break}if(R=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),R!==0&&e.strstart-R<=e.w_size-X&&(e.match_length=wt(e,R)),e.match_length>=k)if(I=y._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else I=y._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(I&&(rt(e,!1),e.strm.avail_out===0))return w}return e.insert=e.strstart<k-1?e.strstart:k-1,A===l?(rt(e,!0),e.strm.avail_out===0?dt:ht):e.last_lit&&(rt(e,!1),e.strm.avail_out===0)?w:Q}function vt(e,A){for(var R,I,D;;){if(e.lookahead<X){if(Rt(e),e.lookahead<X&&A===d)return w;if(e.lookahead===0)break}if(R=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,R!==0&&e.prev_length<e.max_lazy_match&&e.strstart-R<=e.w_size-X&&(e.match_length=wt(e,R),e.match_length<=5&&(e.strategy===1||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(D=e.strstart+e.lookahead-k,I=y._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=D&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,R=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=k-1,e.strstart++,I&&(rt(e,!1),e.strm.avail_out===0))return w}else if(e.match_available){if((I=y._tr_tally(e,0,e.window[e.strstart-1]))&&rt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return w}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(I=y._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,A===l?(rt(e,!0),e.strm.avail_out===0?dt:ht):e.last_lit&&(rt(e,!1),e.strm.avail_out===0)?w:Q}function It(e,A,R,I,D){this.good_length=e,this.max_lazy=A,this.nice_length=R,this.max_chain=I,this.func=D}function Vt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=n,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(2*S),this.dyn_dtree=new x.Buf16(2*(2*m+1)),this.bl_tree=new x.Buf16(2*(2*_+1)),tt(this.dyn_ltree),tt(this.dyn_dtree),tt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(f+1),this.heap=new x.Buf16(2*a+1),tt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(2*a+1),tt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ft(e){var A;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=b,(A=e.state).pending=0,A.pending_out=0,A.wrap<0&&(A.wrap=-A.wrap),A.status=A.wrap?B:V,e.adler=A.wrap===2?0:1,A.last_flush=d,y._tr_init(A),o):St(e,E)}function C(e){var A=Ft(e);return A===o&&function(R){R.window_size=2*R.w_size,tt(R.head),R.max_lazy_match=g[R.level].max_lazy,R.good_match=g[R.level].good_length,R.nice_match=g[R.level].nice_length,R.max_chain_length=g[R.level].max_chain,R.strstart=0,R.block_start=0,R.lookahead=0,R.insert=0,R.match_length=R.prev_length=k-1,R.match_available=0,R.ins_h=0}(e.state),A}function u(e,A,R,I,D,H){if(!e)return E;var J=1;if(A===r&&(A=6),I<0?(J=0,I=-I):15<I&&(J=2,I-=16),D<1||i<D||R!==n||I<8||15<I||A<0||9<A||H<0||c<H)return St(e,E);I===8&&(I=9);var at=new Vt;return(e.state=at).strm=e,at.wrap=J,at.gzhead=null,at.w_bits=I,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=D+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+k-1)/k),at.window=new x.Buf8(2*at.w_size),at.head=new x.Buf16(at.hash_size),at.prev=new x.Buf16(at.w_size),at.lit_bufsize=1<<D+6,at.pending_buf_size=4*at.lit_bufsize,at.pending_buf=new x.Buf8(at.pending_buf_size),at.d_buf=1*at.lit_bufsize,at.l_buf=3*at.lit_bufsize,at.level=A,at.strategy=H,at.method=R,C(e)}g=[new It(0,0,0,0,function(e,A){var R=65535;for(R>e.pending_buf_size-5&&(R=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Rt(e),e.lookahead===0&&A===d)return w;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var I=e.block_start+R;if((e.strstart===0||e.strstart>=I)&&(e.lookahead=e.strstart-I,e.strstart=I,rt(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-X&&(rt(e,!1),e.strm.avail_out===0))return w}return e.insert=0,A===l?(rt(e,!0),e.strm.avail_out===0?dt:ht):(e.strstart>e.block_start&&(rt(e,!1),e.strm.avail_out),w)}),new It(4,4,8,4,Lt),new It(4,5,16,8,Lt),new It(4,6,32,32,Lt),new It(4,4,16,16,vt),new It(8,16,32,32,vt),new It(8,16,128,128,vt),new It(8,32,128,256,vt),new It(32,128,258,1024,vt),new It(32,258,258,4096,vt)],P.deflateInit=function(e,A){return u(e,A,n,15,8,0)},P.deflateInit2=u,P.deflateReset=C,P.deflateResetKeep=Ft,P.deflateSetHeader=function(e,A){return e&&e.state?e.state.wrap!==2?E:(e.state.gzhead=A,o):E},P.deflate=function(e,A){var R,I,D,H;if(!e||!e.state||5<A||A<0)return e?St(e,E):E;if(I=e.state,!e.output||!e.input&&e.avail_in!==0||I.status===666&&A!==l)return St(e,e.avail_out===0?-5:E);if(I.strm=e,R=I.last_flush,I.last_flush=A,I.status===B)if(I.wrap===2)e.adler=0,xt(I,31),xt(I,139),xt(I,8),I.gzhead?(xt(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),xt(I,255&I.gzhead.time),xt(I,I.gzhead.time>>8&255),xt(I,I.gzhead.time>>16&255),xt(I,I.gzhead.time>>24&255),xt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),xt(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(xt(I,255&I.gzhead.extra.length),xt(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(e.adler=p(e.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(xt(I,0),xt(I,0),xt(I,0),xt(I,0),xt(I,0),xt(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),xt(I,3),I.status=V);else{var J=n+(I.w_bits-8<<4)<<8;J|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(J|=32),J+=31-J%31,I.status=V,bt(I,J),I.strstart!==0&&(bt(I,e.adler>>>16),bt(I,65535&e.adler)),e.adler=1}if(I.status===69)if(I.gzhead.extra){for(D=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),st(e),D=I.pending,I.pending!==I.pending_buf_size));)xt(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){D=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),st(e),D=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,xt(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),H===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){D=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),st(e),D=I.pending,I.pending===I.pending_buf_size)){H=1;break}H=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,xt(I,H)}while(H!==0);I.gzhead.hcrc&&I.pending>D&&(e.adler=p(e.adler,I.pending_buf,I.pending-D,D)),H===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&st(e),I.pending+2<=I.pending_buf_size&&(xt(I,255&e.adler),xt(I,e.adler>>8&255),e.adler=0,I.status=V)):I.status=V),I.pending!==0){if(st(e),e.avail_out===0)return I.last_flush=-1,o}else if(e.avail_in===0&&ut(A)<=ut(R)&&A!==l)return St(e,-5);if(I.status===666&&e.avail_in!==0)return St(e,-5);if(e.avail_in!==0||I.lookahead!==0||A!==d&&I.status!==666){var at=I.strategy===2?function(et,gt){for(var Et;;){if(et.lookahead===0&&(Rt(et),et.lookahead===0)){if(gt===d)return w;break}if(et.match_length=0,Et=y._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++,Et&&(rt(et,!1),et.strm.avail_out===0))return w}return et.insert=0,gt===l?(rt(et,!0),et.strm.avail_out===0?dt:ht):et.last_lit&&(rt(et,!1),et.strm.avail_out===0)?w:Q}(I,A):I.strategy===3?function(et,gt){for(var Et,mt,L,U,q=et.window;;){if(et.lookahead<=M){if(Rt(et),et.lookahead<=M&&gt===d)return w;if(et.lookahead===0)break}if(et.match_length=0,et.lookahead>=k&&0<et.strstart&&(mt=q[L=et.strstart-1])===q[++L]&&mt===q[++L]&&mt===q[++L]){U=et.strstart+M;do;while(mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&mt===q[++L]&&L<U);et.match_length=M-(U-L),et.match_length>et.lookahead&&(et.match_length=et.lookahead)}if(et.match_length>=k?(Et=y._tr_tally(et,1,et.match_length-k),et.lookahead-=et.match_length,et.strstart+=et.match_length,et.match_length=0):(Et=y._tr_tally(et,0,et.window[et.strstart]),et.lookahead--,et.strstart++),Et&&(rt(et,!1),et.strm.avail_out===0))return w}return et.insert=0,gt===l?(rt(et,!0),et.strm.avail_out===0?dt:ht):et.last_lit&&(rt(et,!1),et.strm.avail_out===0)?w:Q}(I,A):g[I.level].func(I,A);if(at!==dt&&at!==ht||(I.status=666),at===w||at===dt)return e.avail_out===0&&(I.last_flush=-1),o;if(at===Q&&(A===1?y._tr_align(I):A!==5&&(y._tr_stored_block(I,0,0,!1),A===3&&(tt(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),st(e),e.avail_out===0))return I.last_flush=-1,o}return A!==l?o:I.wrap<=0?1:(I.wrap===2?(xt(I,255&e.adler),xt(I,e.adler>>8&255),xt(I,e.adler>>16&255),xt(I,e.adler>>24&255),xt(I,255&e.total_in),xt(I,e.total_in>>8&255),xt(I,e.total_in>>16&255),xt(I,e.total_in>>24&255)):(bt(I,e.adler>>>16),bt(I,65535&e.adler)),st(e),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?o:1)},P.deflateEnd=function(e){var A;return e&&e.state?(A=e.state.status)!==B&&A!==69&&A!==73&&A!==91&&A!==103&&A!==V&&A!==666?St(e,E):(e.state=null,A===V?St(e,-3):o):E},P.deflateSetDictionary=function(e,A){var R,I,D,H,J,at,et,gt,Et=A.length;if(!e||!e.state||(H=(R=e.state).wrap)===2||H===1&&R.status!==B||R.lookahead)return E;for(H===1&&(e.adler=h(e.adler,A,Et,0)),R.wrap=0,Et>=R.w_size&&(H===0&&(tt(R.head),R.strstart=0,R.block_start=0,R.insert=0),gt=new x.Buf8(R.w_size),x.arraySet(gt,A,Et-R.w_size,R.w_size,0),A=gt,Et=R.w_size),J=e.avail_in,at=e.next_in,et=e.input,e.avail_in=Et,e.next_in=0,e.input=A,Rt(R);R.lookahead>=k;){for(I=R.strstart,D=R.lookahead-(k-1);R.ins_h=(R.ins_h<<R.hash_shift^R.window[I+k-1])&R.hash_mask,R.prev[I&R.w_mask]=R.head[R.ins_h],R.head[R.ins_h]=I,I++,--D;);R.strstart=I,R.lookahead=k-1,Rt(R)}return R.strstart+=R.lookahead,R.block_start=R.strstart,R.insert=R.lookahead,R.lookahead=0,R.match_length=R.prev_length=k-1,R.match_available=0,e.next_in=at,e.input=et,e.avail_in=J,R.wrap=H,o},P.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(Z,Y,P){"use strict";Y.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(Z,Y,P){"use strict";Y.exports=function(g,x){var y,h,p,s,d,l,o,E,r,c,b,n,i,a,m,_,S,f,k,M,X,B,V,w,Q;y=g.state,h=g.next_in,w=g.input,p=h+(g.avail_in-5),s=g.next_out,Q=g.output,d=s-(x-g.avail_out),l=s+(g.avail_out-257),o=y.dmax,E=y.wsize,r=y.whave,c=y.wnext,b=y.window,n=y.hold,i=y.bits,a=y.lencode,m=y.distcode,_=(1<<y.lenbits)-1,S=(1<<y.distbits)-1;t:do{i<15&&(n+=w[h++]<<i,i+=8,n+=w[h++]<<i,i+=8),f=a[n&_];e:for(;;){if(n>>>=k=f>>>24,i-=k,(k=f>>>16&255)===0)Q[s++]=65535&f;else{if(!(16&k)){if(!(64&k)){f=a[(65535&f)+(n&(1<<k)-1)];continue e}if(32&k){y.mode=12;break t}g.msg="invalid literal/length code",y.mode=30;break t}M=65535&f,(k&=15)&&(i<k&&(n+=w[h++]<<i,i+=8),M+=n&(1<<k)-1,n>>>=k,i-=k),i<15&&(n+=w[h++]<<i,i+=8,n+=w[h++]<<i,i+=8),f=m[n&S];i:for(;;){if(n>>>=k=f>>>24,i-=k,!(16&(k=f>>>16&255))){if(!(64&k)){f=m[(65535&f)+(n&(1<<k)-1)];continue i}g.msg="invalid distance code",y.mode=30;break t}if(X=65535&f,i<(k&=15)&&(n+=w[h++]<<i,(i+=8)<k&&(n+=w[h++]<<i,i+=8)),o<(X+=n&(1<<k)-1)){g.msg="invalid distance too far back",y.mode=30;break t}if(n>>>=k,i-=k,(k=s-d)<X){if(r<(k=X-k)&&y.sane){g.msg="invalid distance too far back",y.mode=30;break t}if(V=b,(B=0)===c){if(B+=E-k,k<M){for(M-=k;Q[s++]=b[B++],--k;);B=s-X,V=Q}}else if(c<k){if(B+=E+c-k,(k-=c)<M){for(M-=k;Q[s++]=b[B++],--k;);if(B=0,c<M){for(M-=k=c;Q[s++]=b[B++],--k;);B=s-X,V=Q}}}else if(B+=c-k,k<M){for(M-=k;Q[s++]=b[B++],--k;);B=s-X,V=Q}for(;2<M;)Q[s++]=V[B++],Q[s++]=V[B++],Q[s++]=V[B++],M-=3;M&&(Q[s++]=V[B++],1<M&&(Q[s++]=V[B++]))}else{for(B=s-X;Q[s++]=Q[B++],Q[s++]=Q[B++],Q[s++]=Q[B++],2<(M-=3););M&&(Q[s++]=Q[B++],1<M&&(Q[s++]=Q[B++]))}break}}break}}while(h<p&&s<l);h-=M=i>>3,n&=(1<<(i-=M<<3))-1,g.next_in=h,g.next_out=s,g.avail_in=h<p?p-h+5:5-(h-p),g.avail_out=s<l?l-s+257:257-(s-l),y.hold=n,y.bits=i}},{}],49:[function(Z,Y,P){"use strict";var g=Z("../utils/common"),x=Z("./adler32"),y=Z("./crc32"),h=Z("./inffast"),p=Z("./inftrees"),s=1,d=2,l=0,o=-2,E=1,r=852,c=592;function b(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(B){var V;return B&&B.state?(V=B.state,B.total_in=B.total_out=V.total=0,B.msg="",V.wrap&&(B.adler=1&V.wrap),V.mode=E,V.last=0,V.havedict=0,V.dmax=32768,V.head=null,V.hold=0,V.bits=0,V.lencode=V.lendyn=new g.Buf32(r),V.distcode=V.distdyn=new g.Buf32(c),V.sane=1,V.back=-1,l):o}function a(B){var V;return B&&B.state?((V=B.state).wsize=0,V.whave=0,V.wnext=0,i(B)):o}function m(B,V){var w,Q;return B&&B.state?(Q=B.state,V<0?(w=0,V=-V):(w=1+(V>>4),V<48&&(V&=15)),V&&(V<8||15<V)?o:(Q.window!==null&&Q.wbits!==V&&(Q.window=null),Q.wrap=w,Q.wbits=V,a(B))):o}function _(B,V){var w,Q;return B?(Q=new n,(B.state=Q).window=null,(w=m(B,V))!==l&&(B.state=null),w):o}var S,f,k=!0;function M(B){if(k){var V;for(S=new g.Buf32(512),f=new g.Buf32(32),V=0;V<144;)B.lens[V++]=8;for(;V<256;)B.lens[V++]=9;for(;V<280;)B.lens[V++]=7;for(;V<288;)B.lens[V++]=8;for(p(s,B.lens,0,288,S,0,B.work,{bits:9}),V=0;V<32;)B.lens[V++]=5;p(d,B.lens,0,32,f,0,B.work,{bits:5}),k=!1}B.lencode=S,B.lenbits=9,B.distcode=f,B.distbits=5}function X(B,V,w,Q){var dt,ht=B.state;return ht.window===null&&(ht.wsize=1<<ht.wbits,ht.wnext=0,ht.whave=0,ht.window=new g.Buf8(ht.wsize)),Q>=ht.wsize?(g.arraySet(ht.window,V,w-ht.wsize,ht.wsize,0),ht.wnext=0,ht.whave=ht.wsize):(Q<(dt=ht.wsize-ht.wnext)&&(dt=Q),g.arraySet(ht.window,V,w-Q,dt,ht.wnext),(Q-=dt)?(g.arraySet(ht.window,V,w-Q,Q,0),ht.wnext=Q,ht.whave=ht.wsize):(ht.wnext+=dt,ht.wnext===ht.wsize&&(ht.wnext=0),ht.whave<ht.wsize&&(ht.whave+=dt))),0}P.inflateReset=a,P.inflateReset2=m,P.inflateResetKeep=i,P.inflateInit=function(B){return _(B,15)},P.inflateInit2=_,P.inflate=function(B,V){var w,Q,dt,ht,St,ut,tt,st,rt,xt,bt,wt,Rt,Lt,vt,It,Vt,Ft,C,u,e,A,R,I,D=0,H=new g.Buf8(4),J=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return o;(w=B.state).mode===12&&(w.mode=13),St=B.next_out,dt=B.output,tt=B.avail_out,ht=B.next_in,Q=B.input,ut=B.avail_in,st=w.hold,rt=w.bits,xt=ut,bt=tt,A=l;t:for(;;)switch(w.mode){case E:if(w.wrap===0){w.mode=13;break}for(;rt<16;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(2&w.wrap&&st===35615){H[w.check=0]=255&st,H[1]=st>>>8&255,w.check=y(w.check,H,2,0),rt=st=0,w.mode=2;break}if(w.flags=0,w.head&&(w.head.done=!1),!(1&w.wrap)||(((255&st)<<8)+(st>>8))%31){B.msg="incorrect header check",w.mode=30;break}if((15&st)!=8){B.msg="unknown compression method",w.mode=30;break}if(rt-=4,e=8+(15&(st>>>=4)),w.wbits===0)w.wbits=e;else if(e>w.wbits){B.msg="invalid window size",w.mode=30;break}w.dmax=1<<e,B.adler=w.check=1,w.mode=512&st?10:12,rt=st=0;break;case 2:for(;rt<16;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(w.flags=st,(255&w.flags)!=8){B.msg="unknown compression method",w.mode=30;break}if(57344&w.flags){B.msg="unknown header flags set",w.mode=30;break}w.head&&(w.head.text=st>>8&1),512&w.flags&&(H[0]=255&st,H[1]=st>>>8&255,w.check=y(w.check,H,2,0)),rt=st=0,w.mode=3;case 3:for(;rt<32;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.head&&(w.head.time=st),512&w.flags&&(H[0]=255&st,H[1]=st>>>8&255,H[2]=st>>>16&255,H[3]=st>>>24&255,w.check=y(w.check,H,4,0)),rt=st=0,w.mode=4;case 4:for(;rt<16;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.head&&(w.head.xflags=255&st,w.head.os=st>>8),512&w.flags&&(H[0]=255&st,H[1]=st>>>8&255,w.check=y(w.check,H,2,0)),rt=st=0,w.mode=5;case 5:if(1024&w.flags){for(;rt<16;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.length=st,w.head&&(w.head.extra_len=st),512&w.flags&&(H[0]=255&st,H[1]=st>>>8&255,w.check=y(w.check,H,2,0)),rt=st=0}else w.head&&(w.head.extra=null);w.mode=6;case 6:if(1024&w.flags&&(ut<(wt=w.length)&&(wt=ut),wt&&(w.head&&(e=w.head.extra_len-w.length,w.head.extra||(w.head.extra=new Array(w.head.extra_len)),g.arraySet(w.head.extra,Q,ht,wt,e)),512&w.flags&&(w.check=y(w.check,Q,wt,ht)),ut-=wt,ht+=wt,w.length-=wt),w.length))break t;w.length=0,w.mode=7;case 7:if(2048&w.flags){if(ut===0)break t;for(wt=0;e=Q[ht+wt++],w.head&&e&&w.length<65536&&(w.head.name+=String.fromCharCode(e)),e&&wt<ut;);if(512&w.flags&&(w.check=y(w.check,Q,wt,ht)),ut-=wt,ht+=wt,e)break t}else w.head&&(w.head.name=null);w.length=0,w.mode=8;case 8:if(4096&w.flags){if(ut===0)break t;for(wt=0;e=Q[ht+wt++],w.head&&e&&w.length<65536&&(w.head.comment+=String.fromCharCode(e)),e&&wt<ut;);if(512&w.flags&&(w.check=y(w.check,Q,wt,ht)),ut-=wt,ht+=wt,e)break t}else w.head&&(w.head.comment=null);w.mode=9;case 9:if(512&w.flags){for(;rt<16;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(st!==(65535&w.check)){B.msg="header crc mismatch",w.mode=30;break}rt=st=0}w.head&&(w.head.hcrc=w.flags>>9&1,w.head.done=!0),B.adler=w.check=0,w.mode=12;break;case 10:for(;rt<32;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}B.adler=w.check=b(st),rt=st=0,w.mode=11;case 11:if(w.havedict===0)return B.next_out=St,B.avail_out=tt,B.next_in=ht,B.avail_in=ut,w.hold=st,w.bits=rt,2;B.adler=w.check=1,w.mode=12;case 12:if(V===5||V===6)break t;case 13:if(w.last){st>>>=7&rt,rt-=7&rt,w.mode=27;break}for(;rt<3;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}switch(w.last=1&st,rt-=1,3&(st>>>=1)){case 0:w.mode=14;break;case 1:if(M(w),w.mode=20,V!==6)break;st>>>=2,rt-=2;break t;case 2:w.mode=17;break;case 3:B.msg="invalid block type",w.mode=30}st>>>=2,rt-=2;break;case 14:for(st>>>=7&rt,rt-=7&rt;rt<32;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if((65535&st)!=(st>>>16^65535)){B.msg="invalid stored block lengths",w.mode=30;break}if(w.length=65535&st,rt=st=0,w.mode=15,V===6)break t;case 15:w.mode=16;case 16:if(wt=w.length){if(ut<wt&&(wt=ut),tt<wt&&(wt=tt),wt===0)break t;g.arraySet(dt,Q,ht,wt,St),ut-=wt,ht+=wt,tt-=wt,St+=wt,w.length-=wt;break}w.mode=12;break;case 17:for(;rt<14;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(w.nlen=257+(31&st),st>>>=5,rt-=5,w.ndist=1+(31&st),st>>>=5,rt-=5,w.ncode=4+(15&st),st>>>=4,rt-=4,286<w.nlen||30<w.ndist){B.msg="too many length or distance symbols",w.mode=30;break}w.have=0,w.mode=18;case 18:for(;w.have<w.ncode;){for(;rt<3;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.lens[J[w.have++]]=7&st,st>>>=3,rt-=3}for(;w.have<19;)w.lens[J[w.have++]]=0;if(w.lencode=w.lendyn,w.lenbits=7,R={bits:w.lenbits},A=p(0,w.lens,0,19,w.lencode,0,w.work,R),w.lenbits=R.bits,A){B.msg="invalid code lengths set",w.mode=30;break}w.have=0,w.mode=19;case 19:for(;w.have<w.nlen+w.ndist;){for(;It=(D=w.lencode[st&(1<<w.lenbits)-1])>>>16&255,Vt=65535&D,!((vt=D>>>24)<=rt);){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(Vt<16)st>>>=vt,rt-=vt,w.lens[w.have++]=Vt;else{if(Vt===16){for(I=vt+2;rt<I;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(st>>>=vt,rt-=vt,w.have===0){B.msg="invalid bit length repeat",w.mode=30;break}e=w.lens[w.have-1],wt=3+(3&st),st>>>=2,rt-=2}else if(Vt===17){for(I=vt+3;rt<I;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}rt-=vt,e=0,wt=3+(7&(st>>>=vt)),st>>>=3,rt-=3}else{for(I=vt+7;rt<I;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}rt-=vt,e=0,wt=11+(127&(st>>>=vt)),st>>>=7,rt-=7}if(w.have+wt>w.nlen+w.ndist){B.msg="invalid bit length repeat",w.mode=30;break}for(;wt--;)w.lens[w.have++]=e}}if(w.mode===30)break;if(w.lens[256]===0){B.msg="invalid code -- missing end-of-block",w.mode=30;break}if(w.lenbits=9,R={bits:w.lenbits},A=p(s,w.lens,0,w.nlen,w.lencode,0,w.work,R),w.lenbits=R.bits,A){B.msg="invalid literal/lengths set",w.mode=30;break}if(w.distbits=6,w.distcode=w.distdyn,R={bits:w.distbits},A=p(d,w.lens,w.nlen,w.ndist,w.distcode,0,w.work,R),w.distbits=R.bits,A){B.msg="invalid distances set",w.mode=30;break}if(w.mode=20,V===6)break t;case 20:w.mode=21;case 21:if(6<=ut&&258<=tt){B.next_out=St,B.avail_out=tt,B.next_in=ht,B.avail_in=ut,w.hold=st,w.bits=rt,h(B,bt),St=B.next_out,dt=B.output,tt=B.avail_out,ht=B.next_in,Q=B.input,ut=B.avail_in,st=w.hold,rt=w.bits,w.mode===12&&(w.back=-1);break}for(w.back=0;It=(D=w.lencode[st&(1<<w.lenbits)-1])>>>16&255,Vt=65535&D,!((vt=D>>>24)<=rt);){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(It&&!(240&It)){for(Ft=vt,C=It,u=Vt;It=(D=w.lencode[u+((st&(1<<Ft+C)-1)>>Ft)])>>>16&255,Vt=65535&D,!(Ft+(vt=D>>>24)<=rt);){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}st>>>=Ft,rt-=Ft,w.back+=Ft}if(st>>>=vt,rt-=vt,w.back+=vt,w.length=Vt,It===0){w.mode=26;break}if(32&It){w.back=-1,w.mode=12;break}if(64&It){B.msg="invalid literal/length code",w.mode=30;break}w.extra=15&It,w.mode=22;case 22:if(w.extra){for(I=w.extra;rt<I;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.length+=st&(1<<w.extra)-1,st>>>=w.extra,rt-=w.extra,w.back+=w.extra}w.was=w.length,w.mode=23;case 23:for(;It=(D=w.distcode[st&(1<<w.distbits)-1])>>>16&255,Vt=65535&D,!((vt=D>>>24)<=rt);){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(!(240&It)){for(Ft=vt,C=It,u=Vt;It=(D=w.distcode[u+((st&(1<<Ft+C)-1)>>Ft)])>>>16&255,Vt=65535&D,!(Ft+(vt=D>>>24)<=rt);){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}st>>>=Ft,rt-=Ft,w.back+=Ft}if(st>>>=vt,rt-=vt,w.back+=vt,64&It){B.msg="invalid distance code",w.mode=30;break}w.offset=Vt,w.extra=15&It,w.mode=24;case 24:if(w.extra){for(I=w.extra;rt<I;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}w.offset+=st&(1<<w.extra)-1,st>>>=w.extra,rt-=w.extra,w.back+=w.extra}if(w.offset>w.dmax){B.msg="invalid distance too far back",w.mode=30;break}w.mode=25;case 25:if(tt===0)break t;if(wt=bt-tt,w.offset>wt){if((wt=w.offset-wt)>w.whave&&w.sane){B.msg="invalid distance too far back",w.mode=30;break}Rt=wt>w.wnext?(wt-=w.wnext,w.wsize-wt):w.wnext-wt,wt>w.length&&(wt=w.length),Lt=w.window}else Lt=dt,Rt=St-w.offset,wt=w.length;for(tt<wt&&(wt=tt),tt-=wt,w.length-=wt;dt[St++]=Lt[Rt++],--wt;);w.length===0&&(w.mode=21);break;case 26:if(tt===0)break t;dt[St++]=w.length,tt--,w.mode=21;break;case 27:if(w.wrap){for(;rt<32;){if(ut===0)break t;ut--,st|=Q[ht++]<<rt,rt+=8}if(bt-=tt,B.total_out+=bt,w.total+=bt,bt&&(B.adler=w.check=w.flags?y(w.check,dt,bt,St-bt):x(w.check,dt,bt,St-bt)),bt=tt,(w.flags?st:b(st))!==w.check){B.msg="incorrect data check",w.mode=30;break}rt=st=0}w.mode=28;case 28:if(w.wrap&&w.flags){for(;rt<32;){if(ut===0)break t;ut--,st+=Q[ht++]<<rt,rt+=8}if(st!==(4294967295&w.total)){B.msg="incorrect length check",w.mode=30;break}rt=st=0}w.mode=29;case 29:A=1;break t;case 30:A=-3;break t;case 31:return-4;case 32:default:return o}return B.next_out=St,B.avail_out=tt,B.next_in=ht,B.avail_in=ut,w.hold=st,w.bits=rt,(w.wsize||bt!==B.avail_out&&w.mode<30&&(w.mode<27||V!==4))&&X(B,B.output,B.next_out,bt-B.avail_out)?(w.mode=31,-4):(xt-=B.avail_in,bt-=B.avail_out,B.total_in+=xt,B.total_out+=bt,w.total+=bt,w.wrap&&bt&&(B.adler=w.check=w.flags?y(w.check,dt,bt,B.next_out-bt):x(w.check,dt,bt,B.next_out-bt)),B.data_type=w.bits+(w.last?64:0)+(w.mode===12?128:0)+(w.mode===20||w.mode===15?256:0),(xt==0&&bt===0||V===4)&&A===l&&(A=-5),A)},P.inflateEnd=function(B){if(!B||!B.state)return o;var V=B.state;return V.window&&(V.window=null),B.state=null,l},P.inflateGetHeader=function(B,V){var w;return B&&B.state&&2&(w=B.state).wrap?((w.head=V).done=!1,l):o},P.inflateSetDictionary=function(B,V){var w,Q=V.length;return B&&B.state?(w=B.state).wrap!==0&&w.mode!==11?o:w.mode===11&&x(1,V,Q,0)!==w.check?-3:X(B,V,Q,Q)?(w.mode=31,-4):(w.havedict=1,l):o},P.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(Z,Y,P){"use strict";var g=Z("../utils/common"),x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Y.exports=function(s,d,l,o,E,r,c,b){var n,i,a,m,_,S,f,k,M,X=b.bits,B=0,V=0,w=0,Q=0,dt=0,ht=0,St=0,ut=0,tt=0,st=0,rt=null,xt=0,bt=new g.Buf16(16),wt=new g.Buf16(16),Rt=null,Lt=0;for(B=0;B<=15;B++)bt[B]=0;for(V=0;V<o;V++)bt[d[l+V]]++;for(dt=X,Q=15;1<=Q&&bt[Q]===0;Q--);if(Q<dt&&(dt=Q),Q===0)return E[r++]=20971520,E[r++]=20971520,b.bits=1,0;for(w=1;w<Q&&bt[w]===0;w++);for(dt<w&&(dt=w),B=ut=1;B<=15;B++)if(ut<<=1,(ut-=bt[B])<0)return-1;if(0<ut&&(s===0||Q!==1))return-1;for(wt[1]=0,B=1;B<15;B++)wt[B+1]=wt[B]+bt[B];for(V=0;V<o;V++)d[l+V]!==0&&(c[wt[d[l+V]]++]=V);if(S=s===0?(rt=Rt=c,19):s===1?(rt=x,xt-=257,Rt=y,Lt-=257,256):(rt=h,Rt=p,-1),B=w,_=r,St=V=st=0,a=-1,m=(tt=1<<(ht=dt))-1,s===1&&852<tt||s===2&&592<tt)return 1;for(;;){for(f=B-St,M=c[V]<S?(k=0,c[V]):c[V]>S?(k=Rt[Lt+c[V]],rt[xt+c[V]]):(k=96,0),n=1<<B-St,w=i=1<<ht;E[_+(st>>St)+(i-=n)]=f<<24|k<<16|M|0,i!==0;);for(n=1<<B-1;st&n;)n>>=1;if(n!==0?(st&=n-1,st+=n):st=0,V++,--bt[B]==0){if(B===Q)break;B=d[l+c[V]]}if(dt<B&&(st&m)!==a){for(St===0&&(St=dt),_+=w,ut=1<<(ht=B-St);ht+St<Q&&!((ut-=bt[ht+St])<=0);)ht++,ut<<=1;if(tt+=1<<ht,s===1&&852<tt||s===2&&592<tt)return 1;E[a=st&m]=dt<<24|ht<<16|_-r|0}}return st!==0&&(E[_+st]=B-St<<24|64<<16|0),b.bits=dt,0}},{"../utils/common":41}],51:[function(Z,Y,P){"use strict";Y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(Z,Y,P){"use strict";var g=Z("../utils/common"),x=0,y=1;function h(D){for(var H=D.length;0<=--H;)D[H]=0}var p=0,s=29,d=256,l=d+1+s,o=30,E=19,r=2*l+1,c=15,b=16,n=7,i=256,a=16,m=17,_=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],f=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=new Array(2*(l+2));h(X);var B=new Array(2*o);h(B);var V=new Array(512);h(V);var w=new Array(256);h(w);var Q=new Array(s);h(Q);var dt,ht,St,ut=new Array(o);function tt(D,H,J,at,et){this.static_tree=D,this.extra_bits=H,this.extra_base=J,this.elems=at,this.max_length=et,this.has_stree=D&&D.length}function st(D,H){this.dyn_tree=D,this.max_code=0,this.stat_desc=H}function rt(D){return D<256?V[D]:V[256+(D>>>7)]}function xt(D,H){D.pending_buf[D.pending++]=255&H,D.pending_buf[D.pending++]=H>>>8&255}function bt(D,H,J){D.bi_valid>b-J?(D.bi_buf|=H<<D.bi_valid&65535,xt(D,D.bi_buf),D.bi_buf=H>>b-D.bi_valid,D.bi_valid+=J-b):(D.bi_buf|=H<<D.bi_valid&65535,D.bi_valid+=J)}function wt(D,H,J){bt(D,J[2*H],J[2*H+1])}function Rt(D,H){for(var J=0;J|=1&D,D>>>=1,J<<=1,0<--H;);return J>>>1}function Lt(D,H,J){var at,et,gt=new Array(c+1),Et=0;for(at=1;at<=c;at++)gt[at]=Et=Et+J[at-1]<<1;for(et=0;et<=H;et++){var mt=D[2*et+1];mt!==0&&(D[2*et]=Rt(gt[mt]++,mt))}}function vt(D){var H;for(H=0;H<l;H++)D.dyn_ltree[2*H]=0;for(H=0;H<o;H++)D.dyn_dtree[2*H]=0;for(H=0;H<E;H++)D.bl_tree[2*H]=0;D.dyn_ltree[2*i]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function It(D){8<D.bi_valid?xt(D,D.bi_buf):0<D.bi_valid&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function Vt(D,H,J,at){var et=2*H,gt=2*J;return D[et]<D[gt]||D[et]===D[gt]&&at[H]<=at[J]}function Ft(D,H,J){for(var at=D.heap[J],et=J<<1;et<=D.heap_len&&(et<D.heap_len&&Vt(H,D.heap[et+1],D.heap[et],D.depth)&&et++,!Vt(H,at,D.heap[et],D.depth));)D.heap[J]=D.heap[et],J=et,et<<=1;D.heap[J]=at}function C(D,H,J){var at,et,gt,Et,mt=0;if(D.last_lit!==0)for(;at=D.pending_buf[D.d_buf+2*mt]<<8|D.pending_buf[D.d_buf+2*mt+1],et=D.pending_buf[D.l_buf+mt],mt++,at===0?wt(D,et,H):(wt(D,(gt=w[et])+d+1,H),(Et=S[gt])!==0&&bt(D,et-=Q[gt],Et),wt(D,gt=rt(--at),J),(Et=f[gt])!==0&&bt(D,at-=ut[gt],Et)),mt<D.last_lit;);wt(D,i,H)}function u(D,H){var J,at,et,gt=H.dyn_tree,Et=H.stat_desc.static_tree,mt=H.stat_desc.has_stree,L=H.stat_desc.elems,U=-1;for(D.heap_len=0,D.heap_max=r,J=0;J<L;J++)gt[2*J]!==0?(D.heap[++D.heap_len]=U=J,D.depth[J]=0):gt[2*J+1]=0;for(;D.heap_len<2;)gt[2*(et=D.heap[++D.heap_len]=U<2?++U:0)]=1,D.depth[et]=0,D.opt_len--,mt&&(D.static_len-=Et[2*et+1]);for(H.max_code=U,J=D.heap_len>>1;1<=J;J--)Ft(D,gt,J);for(et=L;J=D.heap[1],D.heap[1]=D.heap[D.heap_len--],Ft(D,gt,1),at=D.heap[1],D.heap[--D.heap_max]=J,D.heap[--D.heap_max]=at,gt[2*et]=gt[2*J]+gt[2*at],D.depth[et]=(D.depth[J]>=D.depth[at]?D.depth[J]:D.depth[at])+1,gt[2*J+1]=gt[2*at+1]=et,D.heap[1]=et++,Ft(D,gt,1),2<=D.heap_len;);D.heap[--D.heap_max]=D.heap[1],function(q,T){var O,z,$,G,ot,lt,pt=T.dyn_tree,kt=T.max_code,Nt=T.stat_desc.static_tree,Mt=T.stat_desc.has_stree,zt=T.stat_desc.extra_bits,$t=T.stat_desc.extra_base,ie=T.stat_desc.max_length,re=0;for(G=0;G<=c;G++)q.bl_count[G]=0;for(pt[2*q.heap[q.heap_max]+1]=0,O=q.heap_max+1;O<r;O++)ie<(G=pt[2*pt[2*(z=q.heap[O])+1]+1]+1)&&(G=ie,re++),pt[2*z+1]=G,kt<z||(q.bl_count[G]++,ot=0,$t<=z&&(ot=zt[z-$t]),lt=pt[2*z],q.opt_len+=lt*(G+ot),Mt&&(q.static_len+=lt*(Nt[2*z+1]+ot)));if(re!==0){do{for(G=ie-1;q.bl_count[G]===0;)G--;q.bl_count[G]--,q.bl_count[G+1]+=2,q.bl_count[ie]--,re-=2}while(0<re);for(G=ie;G!==0;G--)for(z=q.bl_count[G];z!==0;)kt<($=q.heap[--O])||(pt[2*$+1]!==G&&(q.opt_len+=(G-pt[2*$+1])*pt[2*$],pt[2*$+1]=G),z--)}}(D,H),Lt(gt,U,D.bl_count)}function e(D,H,J){var at,et,gt=-1,Et=H[1],mt=0,L=7,U=4;for(Et===0&&(L=138,U=3),H[2*(J+1)+1]=65535,at=0;at<=J;at++)et=Et,Et=H[2*(at+1)+1],++mt<L&&et===Et||(mt<U?D.bl_tree[2*et]+=mt:et!==0?(et!==gt&&D.bl_tree[2*et]++,D.bl_tree[2*a]++):mt<=10?D.bl_tree[2*m]++:D.bl_tree[2*_]++,gt=et,U=(mt=0)===Et?(L=138,3):et===Et?(L=6,3):(L=7,4))}function A(D,H,J){var at,et,gt=-1,Et=H[1],mt=0,L=7,U=4;for(Et===0&&(L=138,U=3),at=0;at<=J;at++)if(et=Et,Et=H[2*(at+1)+1],!(++mt<L&&et===Et)){if(mt<U)for(;wt(D,et,D.bl_tree),--mt!=0;);else et!==0?(et!==gt&&(wt(D,et,D.bl_tree),mt--),wt(D,a,D.bl_tree),bt(D,mt-3,2)):mt<=10?(wt(D,m,D.bl_tree),bt(D,mt-3,3)):(wt(D,_,D.bl_tree),bt(D,mt-11,7));gt=et,U=(mt=0)===Et?(L=138,3):et===Et?(L=6,3):(L=7,4)}}h(ut);var R=!1;function I(D,H,J,at){bt(D,(p<<1)+(at?1:0),3),function(et,gt,Et,mt){It(et),mt&&(xt(et,Et),xt(et,~Et)),g.arraySet(et.pending_buf,et.window,gt,Et,et.pending),et.pending+=Et}(D,H,J,!0)}P._tr_init=function(D){R||(function(){var H,J,at,et,gt,Et=new Array(c+1);for(et=at=0;et<s-1;et++)for(Q[et]=at,H=0;H<1<<S[et];H++)w[at++]=et;for(w[at-1]=et,et=gt=0;et<16;et++)for(ut[et]=gt,H=0;H<1<<f[et];H++)V[gt++]=et;for(gt>>=7;et<o;et++)for(ut[et]=gt<<7,H=0;H<1<<f[et]-7;H++)V[256+gt++]=et;for(J=0;J<=c;J++)Et[J]=0;for(H=0;H<=143;)X[2*H+1]=8,H++,Et[8]++;for(;H<=255;)X[2*H+1]=9,H++,Et[9]++;for(;H<=279;)X[2*H+1]=7,H++,Et[7]++;for(;H<=287;)X[2*H+1]=8,H++,Et[8]++;for(Lt(X,l+1,Et),H=0;H<o;H++)B[2*H+1]=5,B[2*H]=Rt(H,5);dt=new tt(X,S,d+1,l,c),ht=new tt(B,f,0,o,c),St=new tt(new Array(0),k,0,E,n)}(),R=!0),D.l_desc=new st(D.dyn_ltree,dt),D.d_desc=new st(D.dyn_dtree,ht),D.bl_desc=new st(D.bl_tree,St),D.bi_buf=0,D.bi_valid=0,vt(D)},P._tr_stored_block=I,P._tr_flush_block=function(D,H,J,at){var et,gt,Et=0;0<D.level?(D.strm.data_type===2&&(D.strm.data_type=function(mt){var L,U=4093624447;for(L=0;L<=31;L++,U>>>=1)if(1&U&&mt.dyn_ltree[2*L]!==0)return x;if(mt.dyn_ltree[18]!==0||mt.dyn_ltree[20]!==0||mt.dyn_ltree[26]!==0)return y;for(L=32;L<d;L++)if(mt.dyn_ltree[2*L]!==0)return y;return x}(D)),u(D,D.l_desc),u(D,D.d_desc),Et=function(mt){var L;for(e(mt,mt.dyn_ltree,mt.l_desc.max_code),e(mt,mt.dyn_dtree,mt.d_desc.max_code),u(mt,mt.bl_desc),L=E-1;3<=L&&mt.bl_tree[2*M[L]+1]===0;L--);return mt.opt_len+=3*(L+1)+5+5+4,L}(D),et=D.opt_len+3+7>>>3,(gt=D.static_len+3+7>>>3)<=et&&(et=gt)):et=gt=J+5,J+4<=et&&H!==-1?I(D,H,J,at):D.strategy===4||gt===et?(bt(D,2+(at?1:0),3),C(D,X,B)):(bt(D,4+(at?1:0),3),function(mt,L,U,q){var T;for(bt(mt,L-257,5),bt(mt,U-1,5),bt(mt,q-4,4),T=0;T<q;T++)bt(mt,mt.bl_tree[2*M[T]+1],3);A(mt,mt.dyn_ltree,L-1),A(mt,mt.dyn_dtree,U-1)}(D,D.l_desc.max_code+1,D.d_desc.max_code+1,Et+1),C(D,D.dyn_ltree,D.dyn_dtree)),vt(D),at&&It(D)},P._tr_tally=function(D,H,J){return D.pending_buf[D.d_buf+2*D.last_lit]=H>>>8&255,D.pending_buf[D.d_buf+2*D.last_lit+1]=255&H,D.pending_buf[D.l_buf+D.last_lit]=255&J,D.last_lit++,H===0?D.dyn_ltree[2*J]++:(D.matches++,H--,D.dyn_ltree[2*(w[J]+d+1)]++,D.dyn_dtree[2*rt(H)]++),D.last_lit===D.lit_bufsize-1},P._tr_align=function(D){bt(D,2,3),wt(D,i,X),function(H){H.bi_valid===16?(xt(H,H.bi_buf),H.bi_buf=0,H.bi_valid=0):8<=H.bi_valid&&(H.pending_buf[H.pending++]=255&H.bi_buf,H.bi_buf>>=8,H.bi_valid-=8)}(D)}},{"../utils/common":41}],53:[function(Z,Y,P){"use strict";Y.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(Z,Y,P){(function(g){(function(x,y){"use strict";if(!x.setImmediate){var h,p,s,d,l=1,o={},E=!1,r=x.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(x);c=c&&c.setTimeout?c:x,h={}.toString.call(x.process)==="[object process]"?function(a){process.nextTick(function(){n(a)})}:function(){if(x.postMessage&&!x.importScripts){var a=!0,m=x.onmessage;return x.onmessage=function(){a=!1},x.postMessage("","*"),x.onmessage=m,a}}()?(d="setImmediate$"+Math.random()+"$",x.addEventListener?x.addEventListener("message",i,!1):x.attachEvent("onmessage",i),function(a){x.postMessage(d+a,"*")}):x.MessageChannel?((s=new MessageChannel).port1.onmessage=function(a){n(a.data)},function(a){s.port2.postMessage(a)}):r&&"onreadystatechange"in r.createElement("script")?(p=r.documentElement,function(a){var m=r.createElement("script");m.onreadystatechange=function(){n(a),m.onreadystatechange=null,p.removeChild(m),m=null},p.appendChild(m)}):function(a){setTimeout(n,0,a)},c.setImmediate=function(a){typeof a!="function"&&(a=new Function(""+a));for(var m=new Array(arguments.length-1),_=0;_<m.length;_++)m[_]=arguments[_+1];var S={callback:a,args:m};return o[l]=S,h(l),l++},c.clearImmediate=b}function b(a){delete o[a]}function n(a){if(E)setTimeout(n,0,a);else{var m=o[a];if(m){E=!0;try{(function(_){var S=_.callback,f=_.args;switch(f.length){case 0:S();break;case 1:S(f[0]);break;case 2:S(f[0],f[1]);break;case 3:S(f[0],f[1],f[2]);break;default:S.apply(y,f)}})(m)}finally{b(a),E=!1}}}}function i(a){a.source===x&&typeof a.data=="string"&&a.data.indexOf(d)===0&&n(+a.data.slice(d.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)}),function(Z,Y){typeof exports=="object"&&typeof module=="object"?module.exports=Y(require("JSZip")):typeof define=="function"&&define.amd?define(["JSZip"],Y):typeof exports=="object"?exports.ePub=Y(require("JSZip")):Z.ePub=Y(Z.JSZip)}(window,function(Z){return function(Y){var P={};function g(x){if(P[x])return P[x].exports;var y=P[x]={i:x,l:!1,exports:{}};return Y[x].call(y.exports,y,y.exports,g),y.l=!0,y.exports}return g.m=Y,g.c=P,g.d=function(x,y,h){g.o(x,y)||Object.defineProperty(x,y,{enumerable:!0,get:h})},g.r=function(x){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(x,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(x,"__esModule",{value:!0})},g.t=function(x,y){if(1&y&&(x=g(x)),8&y||4&y&&typeof x=="object"&&x&&x.__esModule)return x;var h=Object.create(null);if(g.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:x}),2&y&&typeof x!="string")for(var p in x)g.d(h,p,(function(s){return x[s]}).bind(null,p));return h},g.n=function(x){var y=x&&x.__esModule?function(){return x.default}:function(){return x};return g.d(y,"a",y),y},g.o=function(x,y){return Object.prototype.hasOwnProperty.call(x,y)},g.p="/dist/",g(g.s=30)}([function(Y,P,g){"use strict";g.r(P),g.d(P,"requestAnimationFrame",function(){return y}),g.d(P,"uuid",function(){return p}),g.d(P,"documentHeight",function(){return s}),g.d(P,"isElement",function(){return d}),g.d(P,"isNumber",function(){return l}),g.d(P,"isFloat",function(){return o}),g.d(P,"prefixed",function(){return E}),g.d(P,"defaults",function(){return r}),g.d(P,"extend",function(){return c}),g.d(P,"insert",function(){return b}),g.d(P,"locationOf",function(){return n}),g.d(P,"indexOfSorted",function(){return i}),g.d(P,"bounds",function(){return a}),g.d(P,"borders",function(){return m}),g.d(P,"nodeBounds",function(){return _}),g.d(P,"windowBounds",function(){return S}),g.d(P,"indexOfNode",function(){return f}),g.d(P,"indexOfTextNode",function(){return k}),g.d(P,"indexOfElementNode",function(){return M}),g.d(P,"isXml",function(){return X}),g.d(P,"createBlob",function(){return B}),g.d(P,"createBlobUrl",function(){return V}),g.d(P,"revokeBlobUrl",function(){return w}),g.d(P,"createBase64Url",function(){return Q}),g.d(P,"type",function(){return dt}),g.d(P,"parse",function(){return ht}),g.d(P,"qs",function(){return St}),g.d(P,"qsa",function(){return ut}),g.d(P,"qsp",function(){return tt}),g.d(P,"sprint",function(){return st}),g.d(P,"treeWalker",function(){return rt}),g.d(P,"walk",function(){return xt}),g.d(P,"blob2base64",function(){return bt}),g.d(P,"defer",function(){return wt}),g.d(P,"querySelectorByType",function(){return Rt}),g.d(P,"findChildren",function(){return Lt}),g.d(P,"parents",function(){return vt}),g.d(P,"filterChildren",function(){return It}),g.d(P,"getParentByTagName",function(){return Vt}),g.d(P,"RangeObject",function(){return Ft});var x=g(15);const y=typeof window<"u"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),h=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function p(){var C=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var e=(C+16*Math.random())%16|0;return C=Math.floor(C/16),(u=="x"?e:7&e|8).toString(16)})}function s(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function d(C){return!(!C||C.nodeType!=1)}function l(C){return!isNaN(parseFloat(C))&&isFinite(C)}function o(C){let u=parseFloat(C);return l(C)!==!1&&(typeof C=="string"&&C.indexOf(".")>-1||Math.floor(u)!==u)}function E(C){var u=["-webkit-","-webkit-","-moz-","-o-","-ms-"],e=C.toLowerCase(),A=["Webkit","webkit","Moz","O","ms"].length;if(typeof document>"u"||document.body.style[e]!==void 0)return C;for(var R=0;R<A;R++)if(document.body.style[u[R]+e]!==void 0)return u[R]+e;return C}function r(C){for(var u=1,e=arguments.length;u<e;u++){var A=arguments[u];for(var R in A)C[R]===void 0&&(C[R]=A[R])}return C}function c(C){var u=[].slice.call(arguments,1);return u.forEach(function(e){e&&Object.getOwnPropertyNames(e).forEach(function(A){Object.defineProperty(C,A,Object.getOwnPropertyDescriptor(e,A))})}),C}function b(C,u,e){var A=n(C,u,e);return u.splice(A,0,C),A}function n(C,u,e,A,R){var I,D=A||0,H=R||u.length,J=parseInt(D+(H-D)/2);return e||(e=function(at,et){return at>et?1:at<et?-1:at==et?0:void 0}),H-D<=0?J:(I=e(u[J],C),H-D==1?I>=0?J:J+1:I===0?J:I===-1?n(C,u,e,J,H):n(C,u,e,D,J))}function i(C,u,e,A,R){var I,D=A||0,H=R||u.length,J=parseInt(D+(H-D)/2);return e||(e=function(at,et){return at>et?1:at<et?-1:at==et?0:void 0}),H-D<=0?-1:(I=e(u[J],C),H-D==1?I===0?J:-1:I===0?J:I===-1?i(C,u,e,J,H):i(C,u,e,D,J))}function a(C){var u=window.getComputedStyle(C),e=0,A=0;return["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(R){e+=parseFloat(u[R])||0}),["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(R){A+=parseFloat(u[R])||0}),{height:A,width:e}}function m(C){var u=window.getComputedStyle(C),e=0,A=0;return["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"].forEach(function(R){e+=parseFloat(u[R])||0}),["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"].forEach(function(R){A+=parseFloat(u[R])||0}),{height:A,width:e}}function _(C){let u,e=C.ownerDocument;if(C.nodeType==Node.TEXT_NODE){let A=e.createRange();A.selectNodeContents(C),u=A.getBoundingClientRect()}else u=C.getBoundingClientRect();return u}function S(){var C=window.innerWidth,u=window.innerHeight;return{top:0,left:0,right:C,bottom:u,width:C,height:u}}function f(C,u){for(var e,A=C.parentNode.childNodes,R=-1,I=0;I<A.length&&((e=A[I]).nodeType===u&&R++,e!=C);I++);return R}function k(C){return f(C,3)}function M(C){return f(C,1)}function X(C){return["xml","opf","ncx"].indexOf(C)>-1}function B(C,u){return new Blob([C],{type:u})}function V(C,u){var e=B(C,u);return h.createObjectURL(e)}function w(C){return h.revokeObjectURL(C)}function Q(C,u){if(typeof C=="string")return"data:"+u+";base64,"+btoa(C)}function dt(C){return Object.prototype.toString.call(C).slice(8,-1)}function ht(C,u,e){var A;return A=typeof DOMParser>"u"||e?x.DOMParser:DOMParser,C.charCodeAt(0)===65279&&(C=C.slice(1)),new A().parseFromString(C,u)}function St(C,u){var e;if(!C)throw new Error("No Element Provided");return C.querySelector!==void 0?C.querySelector(u):(e=C.getElementsByTagName(u)).length?e[0]:void 0}function ut(C,u){return C.querySelector!==void 0?C.querySelectorAll(u):C.getElementsByTagName(u)}function tt(C,u,e){var A,R;if(C.querySelector!==void 0){for(var I in u+="[",e)u+=I+"~='"+e[I]+"'";return u+="]",C.querySelector(u)}if(A=C.getElementsByTagName(u),R=Array.prototype.slice.call(A,0).filter(function(D){for(var H in e)if(D.getAttribute(H)===e[H])return!0;return!1}))return R[0]}function st(C,u){(C.ownerDocument||C).createTreeWalker!==void 0?rt(C,u,NodeFilter.SHOW_TEXT):xt(C,function(e){e&&e.nodeType===3&&u(e)})}function rt(C,u,e){var A=document.createTreeWalker(C,e,null,!1);let R;for(;R=A.nextNode();)u(R)}function xt(C,u){if(u(C))return!0;if(C=C.firstChild)do{if(xt(C,u))return!0;C=C.nextSibling}while(C)}function bt(C){return new Promise(function(u,e){var A=new FileReader;A.readAsDataURL(C),A.onloadend=function(){u(A.result)}})}function wt(){this.resolve=null,this.reject=null,this.id=p(),this.promise=new Promise((C,u)=>{this.resolve=C,this.reject=u}),Object.freeze(this)}function Rt(C,u,e){var A;if(C.querySelector!==void 0&&(A=C.querySelector(`${u}[*|type="${e}"]`)),A&&A.length!==0)return A;A=ut(C,u);for(var R=0;R<A.length;R++)if(A[R].getAttributeNS("http://www.idpf.org/2007/ops","type")===e||A[R].getAttribute("epub:type")===e)return A[R]}function Lt(C){for(var u=[],e=C.childNodes,A=0;A<e.length;A++){let R=e[A];R.nodeType===1&&u.push(R)}return u}function vt(C){for(var u=[C];C;C=C.parentNode)u.unshift(C);return u}function It(C,u,e){for(var A=[],R=C.childNodes,I=0;I<R.length;I++){let D=R[I];if(D.nodeType===1&&D.nodeName.toLowerCase()===u){if(e)return D;A.push(D)}}if(!e)return A}function Vt(C,u){let e;if(C!==null&&u!=="")for(e=C.parentNode;e.nodeType===1;){if(e.tagName.toLowerCase()===u)return e;e=e.parentNode}}class Ft{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(u,e){this.startContainer=u,this.startOffset=e,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(u,e){this.endContainer=u,this.endOffset=e,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(u){this.collapsed=!0,u?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(u){let e=u.parentNode,A=Array.prototype.indexOf.call(e.childNodes,u);this.setStart(e,A),this.setEnd(e,A+1)}selectNodeContents(u){u.childNodes[u.childNodes-1];let e=u.nodeType===3?u.textContent.length:parent.childNodes.length;this.setStart(u,0),this.setEnd(u,e)}_commonAncestorContainer(u,e){var A=vt(u||this.startContainer),R=vt(e||this.endContainer);if(A[0]==R[0]){for(var I=0;I<A.length;I++)if(A[I]!=R[I])return A[I-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}},function(Y,P,g){"use strict";g.d(P,"b",function(){return x}),g.d(P,"a",function(){return y}),g.d(P,"c",function(){return h});const x="0.3",y=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],h={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}}},function(Y,P,g){"use strict";var x=g(0);class y{constructor(p,s,d){var l;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof y))return new y(p,s,d);if(typeof s=="string"?this.base=this.parseComponent(s):typeof s=="object"&&s.steps&&(this.base=s),(l=this.checkType(p))==="string")return this.str=p,Object(x.extend)(this,this.parse(p));if(l==="range")return Object(x.extend)(this,this.fromRange(p,this.base,d));if(l==="node")return Object(x.extend)(this,this.fromNode(p,this.base,d));if(l==="EpubCFI"&&p.path)return p;if(p)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(p){return this.isCfiString(p)?"string":!p||typeof p!="object"||Object(x.type)(p)!=="Range"&&p.startContainer===void 0?p&&typeof p=="object"&&p.nodeType!==void 0?"node":!!(p&&typeof p=="object"&&p instanceof y)&&"EpubCFI":"range"}parse(p){var s,d,l,o={spinePos:-1,range:!1,base:{},path:{},start:null,end:null};return typeof p!="string"?{spinePos:-1}:(p.indexOf("epubcfi(")===0&&p[p.length-1]===")"&&(p=p.slice(8,p.length-1)),(s=this.getChapterComponent(p))?(o.base=this.parseComponent(s),d=this.getPathComponent(p),o.path=this.parseComponent(d),(l=this.getRange(p))&&(o.range=!0,o.start=this.parseComponent(l[0]),o.end=this.parseComponent(l[1])),o.spinePos=o.base.steps[1].index,o):{spinePos:-1})}parseComponent(p){var s,d={steps:[],terminal:{offset:null,assertion:null}},l=p.split(":"),o=l[0].split("/");return l.length>1&&(s=l[1],d.terminal=this.parseTerminal(s)),o[0]===""&&o.shift(),d.steps=o.map((function(E){return this.parseStep(E)}).bind(this)),d}parseStep(p){var s,d,l,o,E;if((o=p.match(/\[(.*)\]/))&&o[1]&&(E=o[1]),d=parseInt(p),!isNaN(d))return d%2==0?(s="element",l=d/2-1):(s="text",l=(d-1)/2),{type:s,index:l,id:E||null}}parseTerminal(p){var s,d,l=p.match(/\[(.*)\]/);return l&&l[1]?(s=parseInt(p.split("[")[0]),d=l[1]):s=parseInt(p),Object(x.isNumber)(s)||(s=null),{offset:s,assertion:d}}getChapterComponent(p){return p.split("!")[0]}getPathComponent(p){var s=p.split("!");if(s[1])return s[1].split(",")[0]}getRange(p){var s=p.split(",");return s.length===3&&[s[1],s[2]]}getCharecterOffsetComponent(p){return p.split(":")[1]||""}joinSteps(p){return p?p.map(function(s){var d="";return s.type==="element"&&(d+=2*(s.index+1)),s.type==="text"&&(d+=1+2*s.index),s.id&&(d+="["+s.id+"]"),d}).join("/"):""}segmentString(p){var s="/";return s+=this.joinSteps(p.steps),p.terminal&&p.terminal.offset!=null&&(s+=":"+p.terminal.offset),p.terminal&&p.terminal.assertion!=null&&(s+="["+p.terminal.assertion+"]"),s}toString(){var p="epubcfi(";return p+=this.segmentString(this.base),p+="!",p+=this.segmentString(this.path),this.range&&this.start&&(p+=",",p+=this.segmentString(this.start)),this.range&&this.end&&(p+=",",p+=this.segmentString(this.end)),p+=")"}compare(p,s){var d,l,o,E;if(typeof p=="string"&&(p=new y(p)),typeof s=="string"&&(s=new y(s)),p.spinePos>s.spinePos)return 1;if(p.spinePos<s.spinePos)return-1;p.range?(d=p.path.steps.concat(p.start.steps),o=p.start.terminal):(d=p.path.steps,o=p.path.terminal),s.range?(l=s.path.steps.concat(s.start.steps),E=s.start.terminal):(l=s.path.steps,E=s.path.terminal);for(var r=0;r<d.length;r++){if(!d[r])return-1;if(!l[r]||d[r].index>l[r].index)return 1;if(d[r].index<l[r].index)return-1}return d.length<l.length?-1:o.offset>E.offset?1:o.offset<E.offset?-1:0}step(p){var s=p.nodeType===3?"text":"element";return{id:p.id,tagName:p.tagName,type:s,index:this.position(p)}}filteredStep(p,s){var d,l=this.filter(p,s);if(l)return d=l.nodeType===3?"text":"element",{id:l.id,tagName:l.tagName,type:d,index:this.filteredPosition(l,s)}}pathTo(p,s,d){for(var l,o={steps:[],terminal:{offset:null,assertion:null}},E=p;E&&E.parentNode&&E.parentNode.nodeType!=9;)(l=d?this.filteredStep(E,d):this.step(E))&&o.steps.unshift(l),E=E.parentNode;return s!=null&&s>=0&&(o.terminal.offset=s,o.steps[o.steps.length-1].type!="text"&&o.steps.push({type:"text",index:0})),o}equalStep(p,s){return!(!p||!s)&&p.index===s.index&&p.id===s.id&&p.type===s.type}fromRange(p,s,d){var l={range:!1,base:{},path:{},start:null,end:null},o=p.startContainer,E=p.endContainer,r=p.startOffset,c=p.endOffset,b=!1;if(d&&(b=o.ownerDocument.querySelector("."+d)!=null),typeof s=="string"?(l.base=this.parseComponent(s),l.spinePos=l.base.steps[1].index):typeof s=="object"&&(l.base=s),p.collapsed)b&&(r=this.patchOffset(o,r,d)),l.path=this.pathTo(o,r,d);else{l.range=!0,b&&(r=this.patchOffset(o,r,d)),l.start=this.pathTo(o,r,d),b&&(c=this.patchOffset(E,c,d)),l.end=this.pathTo(E,c,d),l.path={steps:[],terminal:null};var n,i=l.start.steps.length;for(n=0;n<i&&this.equalStep(l.start.steps[n],l.end.steps[n]);n++)n===i-1?l.start.terminal===l.end.terminal&&(l.path.steps.push(l.start.steps[n]),l.range=!1):l.path.steps.push(l.start.steps[n]);l.start.steps=l.start.steps.slice(l.path.steps.length),l.end.steps=l.end.steps.slice(l.path.steps.length)}return l}fromNode(p,s,d){var l={range:!1,base:{},path:{},start:null,end:null};return typeof s=="string"?(l.base=this.parseComponent(s),l.spinePos=l.base.steps[1].index):typeof s=="object"&&(l.base=s),l.path=this.pathTo(p,null,d),l}filter(p,s){var d,l,o,E,r,c=!1;return p.nodeType===3?(c=!0,o=p.parentNode,d=p.parentNode.classList.contains(s)):(c=!1,d=p.classList.contains(s)),d&&c?(E=o.previousSibling,r=o.nextSibling,E&&E.nodeType===3?l=E:r&&r.nodeType===3&&(l=r),l||p):!(d&&!c)&&p}patchOffset(p,s,d){if(p.nodeType!=3)throw new Error("Anchor must be a text node");var l=p,o=s;for(p.parentNode.classList.contains(d)&&(l=p.parentNode);l.previousSibling;){if(l.previousSibling.nodeType===1){if(!l.previousSibling.classList.contains(d))break;o+=l.previousSibling.textContent.length}else o+=l.previousSibling.textContent.length;l=l.previousSibling}return o}normalizedMap(p,s,d){var l,o,E,r={},c=-1,b=p.length;for(l=0;l<b;l++)(o=p[l].nodeType)===1&&p[l].classList.contains(d)&&(o=3),l>0&&o===3&&E===3?r[l]=c:s===o&&(c+=1,r[l]=c),E=o;return r}position(p){var s,d;return p.nodeType===1?((s=p.parentNode.children)||(s=Object(x.findChildren)(p.parentNode)),d=Array.prototype.indexOf.call(s,p)):d=(s=this.textNodes(p.parentNode)).indexOf(p),d}filteredPosition(p,s){var d,l;return p.nodeType===1?(d=p.parentNode.children,l=this.normalizedMap(d,1,s)):(d=p.parentNode.childNodes,p.parentNode.classList.contains(s)&&(d=(p=p.parentNode).parentNode.childNodes),l=this.normalizedMap(d,3,s)),l[Array.prototype.indexOf.call(d,p)]}stepsToXpath(p){var s=[".","*"];return p.forEach(function(d){var l=d.index+1;d.id?s.push("*[position()="+l+" and @id='"+d.id+"']"):d.type==="text"?s.push("text()["+l+"]"):s.push("*["+l+"]")}),s.join("/")}stepsToQuerySelector(p){var s=["html"];return p.forEach(function(d){var l=d.index+1;d.id?s.push("#"+d.id):d.type==="text"||s.push("*:nth-child("+l+")")}),s.join(">")}textNodes(p,s){return Array.prototype.slice.call(p.childNodes).filter(function(d){return d.nodeType===3||!(!s||!d.classList.contains(s))})}walkToNode(p,s,d){var l,o,E=s||document,r=E.documentElement,c=p.length;for(o=0;o<c&&((l=p[o]).type==="element"?r=l.id?E.getElementById(l.id):(r.children||Object(x.findChildren)(r))[l.index]:l.type==="text"&&(r=this.textNodes(r,d)[l.index]),r);o++);return r}findNode(p,s,d){var l,o,E=s||document;return d||E.evaluate===void 0?l=d?this.walkToNode(p,E,d):this.walkToNode(p,E):(o=this.stepsToXpath(p),l=E.evaluate(o,E,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),l}fixMiss(p,s,d,l){var o,E,r=this.findNode(p.slice(0,-1),d,l),c=r.childNodes,b=this.normalizedMap(c,3,l),n=p[p.length-1].index;for(let i in b){if(!b.hasOwnProperty(i))return;if(b[i]===n){if(!(s>(E=(o=c[i]).textContent.length))){r=o.nodeType===1?o.childNodes[0]:o;break}s-=E}}return{container:r,offset:s}}toRange(p,s){var d,l,o,E,r,c,b,n,i=p||document,a=!!s&&i.querySelector("."+s)!=null;if(d=i.createRange!==void 0?i.createRange():new x.RangeObject,this.range?(l=this.start,c=this.path.steps.concat(l.steps),E=this.findNode(c,i,a?s:null),o=this.end,b=this.path.steps.concat(o.steps),r=this.findNode(b,i,a?s:null)):(l=this.path,c=this.path.steps,E=this.findNode(this.path.steps,i,a?s:null)),!E)return console.log("No startContainer found for",this.toString()),null;try{l.terminal.offset!=null?d.setStart(E,l.terminal.offset):d.setStart(E,0)}catch{n=this.fixMiss(c,l.terminal.offset,i,a?s:null),d.setStart(n.container,n.offset)}if(r)try{o.terminal.offset!=null?d.setEnd(r,o.terminal.offset):d.setEnd(r,0)}catch{n=this.fixMiss(b,this.end.terminal.offset,i,a?s:null),d.setEnd(n.container,n.offset)}return d}isCfiString(p){return typeof p=="string"&&p.indexOf("epubcfi(")===0&&p[p.length-1]===")"}generateChapterComponent(p,s,d){var l="/"+2*(p+1)+"/";return l+=2*(parseInt(s)+1),d&&(l+="["+d+"]"),l}collapse(p){this.range&&(this.range=!1,p?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}P.a=y},function(Y,P,g){"use strict";var x,y,h,p,s,d,l,o=g(31),E=g(45),r=Function.prototype.apply,c=Function.prototype.call,b=Object.create,n=Object.defineProperty,i=Object.defineProperties,a=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};y=function(_,S){var f,k;return E(S),k=this,x.call(this,_,f=function(){h.call(k,_,f),r.call(S,this,arguments)}),f.__eeOnceListener__=S,this},s={on:x=function(_,S){var f;return E(S),a.call(this,"__ee__")?f=this.__ee__:(f=m.value=b(null),n(this,"__ee__",m),m.value=null),f[_]?typeof f[_]=="object"?f[_].push(S):f[_]=[f[_],S]:f[_]=S,this},once:y,off:h=function(_,S){var f,k,M,X;if(E(S),!a.call(this,"__ee__"))return this;if(!(f=this.__ee__)[_])return this;if(typeof(k=f[_])=="object")for(X=0;M=k[X];++X)M!==S&&M.__eeOnceListener__!==S||(k.length===2?f[_]=k[X?0:1]:k.splice(X,1));else k!==S&&k.__eeOnceListener__!==S||delete f[_];return this},emit:p=function(_){var S,f,k,M,X;if(a.call(this,"__ee__")&&(M=this.__ee__[_]))if(typeof M=="object"){for(f=arguments.length,X=new Array(f-1),S=1;S<f;++S)X[S-1]=arguments[S];for(M=M.slice(),S=0;k=M[S];++S)r.call(k,this,X)}else switch(arguments.length){case 1:c.call(M,this);break;case 2:c.call(M,this,arguments[1]);break;case 3:c.call(M,this,arguments[1],arguments[2]);break;default:for(f=arguments.length,X=new Array(f-1),S=1;S<f;++S)X[S-1]=arguments[S];r.call(M,this,X)}}},d={on:o(x),once:o(y),off:o(h),emit:o(p)},l=i({},d),Y.exports=P=function(_){return _==null?b(l):i(Object(_),d)},P.methods=s},function(Y,P,g){"use strict";var x=g(7),y=g.n(x);P.a=class{constructor(h){var p;h.indexOf("://")>-1&&(h=new URL(h).pathname),p=this.parse(h),this.path=h,this.isDirectory(h)?this.directory=h:this.directory=p.dir+"/",this.filename=p.base,this.extension=p.ext.slice(1)}parse(h){return y.a.parse(h)}isAbsolute(h){return y.a.isAbsolute(h||this.path)}isDirectory(h){return h.charAt(h.length-1)==="/"}resolve(h){return y.a.resolve(this.directory,h)}relative(h){return h&&h.indexOf("://")>-1?h:y.a.relative(this.directory,h)}splitPath(h){return this.splitPathRe.exec(h).slice(1)}toString(){return this.path}}},function(Y,P,g){"use strict";var x=g(4),y=g(7),h=g.n(y);P.a=class{constructor(p,s){var d=p.indexOf("://")>-1,l=p;if(this.Url=void 0,this.href=p,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=s,!d&&s!==!1&&typeof s!="string"&&window&&window.location&&(this.base=window.location.href),d||this.base)try{this.base?this.Url=new URL(p,this.base):this.Url=new URL(p),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,l=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(l=new x.a(this.base).resolve(l))}this.Path=new x.a(l),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(p){var s;return p.indexOf("://")>-1?p:(s=h.a.resolve(this.directory,p),this.origin+s)}relative(p){return h.a.relative(p,this.directory)}toString(){return this.href}}},function(Y,P,g){"use strict";P.a=class{constructor(x){this.context=x||this,this.hooks=[]}register(){for(var x=0;x<arguments.length;++x)if(typeof arguments[x]=="function")this.hooks.push(arguments[x]);else for(var y=0;y<arguments[x].length;++y)this.hooks.push(arguments[x][y])}deregister(x){let y;for(let h=0;h<this.hooks.length;h++)if(y=this.hooks[h],y===x){this.hooks.splice(h,1);break}}trigger(){var x=arguments,y=this.context,h=[];return this.hooks.forEach(function(p){try{var s=p.apply(y,x)}catch(d){console.log(d)}s&&typeof s.then=="function"&&h.push(s)}),Promise.all(h)}list(){return this.hooks}clear(){return this.hooks=[]}}},function(Y,P,g){"use strict";if(!x)var x={cwd:function(){return"/"}};function y(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+s)}function h(s,d){for(var l,o="",E=-1,r=0,c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(l===47)break;l=47}if(l===47){if(!(E===c-1||r===1))if(E!==c-1&&r===2){if(o.length<2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){for(var b=o.length-1,n=b;n>=0&&o.charCodeAt(n)!==47;--n);if(n!==b){o=n===-1?"":o.slice(0,n),E=c,r=0;continue}}else if(o.length===2||o.length===1){o="",E=c,r=0;continue}}d&&(o.length>0?o+="/..":o="..")}else o.length>0?o+="/"+s.slice(E+1,c):o=s.slice(E+1,c);E=c,r=0}else l===46&&r!==-1?++r:r=-1}return o}var p={resolve:function(){for(var s,d="",l=!1,o=arguments.length-1;o>=-1&&!l;o--){var E;o>=0?E=arguments[o]:(s===void 0&&(s=x.cwd()),E=s),y(E),E.length!==0&&(d=E+"/"+d,l=E.charCodeAt(0)===47)}return d=h(d,!l),l?d.length>0?"/"+d:"/":d.length>0?d:"."},normalize:function(s){if(y(s),s.length===0)return".";var d=s.charCodeAt(0)===47,l=s.charCodeAt(s.length-1)===47;return(s=h(s,!d)).length!==0||d||(s="."),s.length>0&&l&&(s+="/"),d?"/"+s:s},isAbsolute:function(s){return y(s),s.length>0&&s.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var s,d=0;d<arguments.length;++d){var l=arguments[d];y(l),l.length>0&&(s===void 0?s=l:s+="/"+l)}return s===void 0?".":p.normalize(s)},relative:function(s,d){if(y(s),y(d),s===d||(s=p.resolve(s))===(d=p.resolve(d)))return"";for(var l=1;l<s.length&&s.charCodeAt(l)===47;++l);for(var o=s.length,E=o-l,r=1;r<d.length&&d.charCodeAt(r)===47;++r);for(var c=d.length-r,b=E<c?E:c,n=-1,i=0;i<=b;++i){if(i===b){if(c>b){if(d.charCodeAt(r+i)===47)return d.slice(r+i+1);if(i===0)return d.slice(r+i)}else E>b&&(s.charCodeAt(l+i)===47?n=i:i===0&&(n=0));break}var a=s.charCodeAt(l+i);if(a!==d.charCodeAt(r+i))break;a===47&&(n=i)}var m="";for(i=l+n+1;i<=o;++i)i!==o&&s.charCodeAt(i)!==47||(m.length===0?m+="..":m+="/..");return m.length>0?m+d.slice(r+n):(r+=n,d.charCodeAt(r)===47&&++r,d.slice(r))},_makeLong:function(s){return s},dirname:function(s){if(y(s),s.length===0)return".";for(var d=s.charCodeAt(0),l=d===47,o=-1,E=!0,r=s.length-1;r>=1;--r)if((d=s.charCodeAt(r))===47){if(!E){o=r;break}}else E=!1;return o===-1?l?"/":".":l&&o===1?"//":s.slice(0,o)},basename:function(s,d){if(d!==void 0&&typeof d!="string")throw new TypeError('"ext" argument must be a string');y(s);var l,o=0,E=-1,r=!0;if(d!==void 0&&d.length>0&&d.length<=s.length){if(d.length===s.length&&d===s)return"";var c=d.length-1,b=-1;for(l=s.length-1;l>=0;--l){var n=s.charCodeAt(l);if(n===47){if(!r){o=l+1;break}}else b===-1&&(r=!1,b=l+1),c>=0&&(n===d.charCodeAt(c)?--c==-1&&(E=l):(c=-1,E=b))}return o===E?E=b:E===-1&&(E=s.length),s.slice(o,E)}for(l=s.length-1;l>=0;--l)if(s.charCodeAt(l)===47){if(!r){o=l+1;break}}else E===-1&&(r=!1,E=l+1);return E===-1?"":s.slice(o,E)},extname:function(s){y(s);for(var d=-1,l=0,o=-1,E=!0,r=0,c=s.length-1;c>=0;--c){var b=s.charCodeAt(c);if(b!==47)o===-1&&(E=!1,o=c+1),b===46?d===-1?d=c:r!==1&&(r=1):d!==-1&&(r=-1);else if(!E){l=c+1;break}}return d===-1||o===-1||r===0||r===1&&d===o-1&&d===l+1?"":s.slice(d,o)},format:function(s){if(s===null||typeof s!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof s);return function(d,l){var o=l.dir||l.root,E=l.base||(l.name||"")+(l.ext||"");return o?o===l.root?o+E:o+d+E:E}("/",s)},parse:function(s){y(s);var d={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return d;var l,o=s.charCodeAt(0),E=o===47;E?(d.root="/",l=1):l=0;for(var r=-1,c=0,b=-1,n=!0,i=s.length-1,a=0;i>=l;--i)if((o=s.charCodeAt(i))!==47)b===-1&&(n=!1,b=i+1),o===46?r===-1?r=i:a!==1&&(a=1):r!==-1&&(a=-1);else if(!n){c=i+1;break}return r===-1||b===-1||a===0||a===1&&r===b-1&&r===c+1?b!==-1&&(d.base=d.name=c===0&&E?s.slice(1,b):s.slice(c,b)):(c===0&&E?(d.name=s.slice(1,r),d.base=s.slice(1,b)):(d.name=s.slice(c,r),d.base=s.slice(c,b)),d.ext=s.slice(r,b)),c>0?d.dir=s.slice(0,c-1):E&&(d.dir="/"),d},sep:"/",delimiter:":",posix:null};Y.exports=p},function(Y,P,g){"use strict";g.d(P,"a",function(){return h}),g.d(P,"b",function(){return p}),g.d(P,"d",function(){return s}),g.d(P,"c",function(){return d}),g.d(P,"e",function(){return l});var x=g(0),y=g(5);g(4);function h(o,E){var r,c,b=E.url,n=b.indexOf("://")>-1;o&&(c=Object(x.qs)(o,"head"),(r=Object(x.qs)(c,"base"))||(r=o.createElement("base"),c.insertBefore(r,c.firstChild)),!n&&window&&window.location&&(b=window.location.origin+b),r.setAttribute("href",b))}function p(o,E){var r,c,b=E.canonical;o&&(r=Object(x.qs)(o,"head"),(c=Object(x.qs)(r,"link[rel='canonical']"))?c.setAttribute("href",b):((c=o.createElement("link")).setAttribute("rel","canonical"),c.setAttribute("href",b),r.appendChild(c)))}function s(o,E){var r,c,b=E.idref;o&&(r=Object(x.qs)(o,"head"),(c=Object(x.qs)(r,"link[property='dc.identifier']"))?c.setAttribute("content",b):((c=o.createElement("meta")).setAttribute("name","dc.identifier"),c.setAttribute("content",b),r.appendChild(c)))}function d(o,E){var r=o.querySelectorAll("a[href]");if(r.length)for(var c=Object(x.qs)(o.ownerDocument,"base"),b=c?c.getAttribute("href"):void 0,n=(function(a){var m=a.getAttribute("href");if(m.indexOf("mailto:")!==0)if(m.indexOf("://")>-1)a.setAttribute("target","_blank");else{var _;try{_=new y.a(m,b)}catch{}a.onclick=function(){return _&&_.hash?E(_.Path.path+_.hash):E(_?_.Path.path:m),!1}}}).bind(this),i=0;i<r.length;i++)n(r[i])}function l(o,E,r){return E.forEach(function(c,b){c&&r[b]&&(c=c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),o=o.replace(new RegExp(c,"g"),r[b]))}),o}},function(Y,P,g){"use strict";var x=g(0);P.a=class{constructor(y){this._q=[],this.context=y,this.tick=x.requestAnimationFrame,this.running=!1,this.paused=!1}enqueue(){var y,h,p=[].shift.call(arguments),s=arguments;if(!p)throw new Error("No Task Provided");return h=typeof p=="function"?{task:p,args:s,deferred:y=new x.defer,promise:y.promise}:{promise:p},this._q.push(h),this.paused!=0||this.running||this.run(),h.promise}dequeue(){var y,h,p;return!this._q.length||this.paused?((y=new x.defer).deferred.resolve(),y.promise):(h=(y=this._q.shift()).task)?(p=h.apply(this.context,y.args))&&typeof p.then=="function"?p.then((function(){y.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){y.deferred.reject.apply(this.context,arguments)}).bind(this)):(y.deferred.resolve.apply(this.context,p),y.promise):y.promise?y.promise:void 0}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new x.defer),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==1&&(this.paused=!1),this.defered.promise}flush(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running):void 0}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}},function(Y,P,g){"use strict";var x=g(3),y=g.n(x),h=g(0);function p(){var n="reverse",i=function(){var a=document.createElement("div");a.dir="rtl",a.style.position="fixed",a.style.width="1px",a.style.height="1px",a.style.top="0px",a.style.left="0px",a.style.overflow="hidden";var m=document.createElement("div");m.style.width="2px";var _=document.createElement("span");_.style.width="1px",_.style.display="inline-block";var S=document.createElement("span");return S.style.width="1px",S.style.display="inline-block",m.appendChild(_),m.appendChild(S),a.appendChild(m),a}();return document.body.appendChild(i),i.scrollLeft>0?n="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(i.children[0].children[1].scrollIntoView(),i.scrollLeft<0&&(n="negative")):(i.scrollLeft=1,i.scrollLeft===0&&(n="negative")),document.body.removeChild(i),n}var s=g(11),d=g(9),l=g(28),o=g.n(l),E=class{constructor(n){this.settings=n||{},this.id="epubjs-container-"+Object(h.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(n){let i=n.height,a=n.width,m=n.overflow||!1,_=n.axis||"vertical",S=n.direction;Object(h.extend)(this.settings,n),n.height&&Object(h.isNumber)(n.height)&&(i=n.height+"px"),n.width&&Object(h.isNumber)(n.width)&&(a=n.width+"px");let f=document.createElement("div");return f.id=this.id,f.classList.add("epub-container"),f.style.wordSpacing="0",f.style.lineHeight="0",f.style.verticalAlign="top",f.style.position="relative",_==="horizontal"&&(f.style.display="flex",f.style.flexDirection="row",f.style.flexWrap="nowrap"),a&&(f.style.width=a),i&&(f.style.height=i),m&&(m==="scroll"&&_==="vertical"?(f.style["overflow-y"]=m,f.style["overflow-x"]="hidden"):m==="scroll"&&_==="horizontal"?(f.style["overflow-y"]="hidden",f.style["overflow-x"]=m):f.style.overflow=m),S&&(f.dir=S,f.style.direction=S),S&&this.settings.fullsize&&(document.body.style.direction=S),f}wrap(n){var i=document.createElement("div");return i.style.visibility="hidden",i.style.overflow="hidden",i.style.width="0",i.style.height="0",i.appendChild(n),i}getElement(n){var i;if(Object(h.isElement)(n)?i=n:typeof n=="string"&&(i=document.getElementById(n)),!i)throw new Error("Not an Element");return i}attachTo(n){var i,a=this.getElement(n);if(a)return i=this.settings.hidden?this.wrapper:this.container,a.appendChild(i),this.element=a,a}getContainer(){return this.container}onResize(n){Object(h.isNumber)(this.settings.width)&&Object(h.isNumber)(this.settings.height)||(this.resizeFunc=o()(n,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(n){this.orientationChangeFunc=n,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(n,i){var a;let m=n||this.settings.width,_=i||this.settings.height;n===null?(a=this.element.getBoundingClientRect()).width&&(n=Math.floor(a.width),this.container.style.width=n+"px"):Object(h.isNumber)(n)?this.container.style.width=n+"px":this.container.style.width=n,i===null?(a=a||this.element.getBoundingClientRect()).height&&(i=a.height,this.container.style.height=i+"px"):Object(h.isNumber)(i)?this.container.style.height=i+"px":this.container.style.height=i,Object(h.isNumber)(n)||(n=this.container.clientWidth),Object(h.isNumber)(i)||(i=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let S=Object(h.windowBounds)(),f=window.getComputedStyle(document.body),k=parseFloat(f["padding-left"])||0,M=parseFloat(f["padding-right"])||0,X=parseFloat(f["padding-top"])||0,B=parseFloat(f["padding-bottom"])||0;return m||(n=S.width-k-M),(this.settings.fullsize&&!_||!_)&&(i=S.height-X-B),{width:n-this.containerPadding.left-this.containerPadding.right,height:i-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let n;return this.container.style.overflow!=="visible"&&(n=this.container&&this.container.getBoundingClientRect()),n&&n.width&&n.height?n:Object(h.windowBounds)()}getSheet(){var n=document.createElement("style");return n.appendChild(document.createTextNode("")),document.head.appendChild(n),n.sheet}addStyleRules(n,i){var a="#"+this.id+" ",m="";this.sheet||(this.sheet=this.getSheet()),i.forEach(function(_){for(var S in _)_.hasOwnProperty(S)&&(m+=S+":"+_[S]+";")}),this.sheet.insertRule(a+n+" {"+m+"}",0)}axis(n){n==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=n}direction(n){this.container&&(this.container.dir=n,this.container.style.direction=n),this.settings.fullsize&&(document.body.style.direction=n),this.settings.dir=n}overflow(n){this.container&&(n==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=n,this.container.style["overflow-x"]="hidden"):n==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=n):this.container.style.overflow=n),this.settings.overflow=n}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}},r=class{constructor(n){this.container=n,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(n){return this._views.indexOf(n)}slice(){return this._views.slice.apply(this._views,arguments)}get(n){return this._views[n]}append(n){return this._views.push(n),this.container&&this.container.appendChild(n.element),this.length++,n}prepend(n){return this._views.unshift(n),this.container&&this.container.insertBefore(n.element,this.container.firstChild),this.length++,n}insert(n,i){return this._views.splice(i,0,n),this.container&&(i<this.container.children.length?this.container.insertBefore(n.element,this.container.children[i]):this.container.appendChild(n.element)),this.length++,n}remove(n){var i=this._views.indexOf(n);i>-1&&this._views.splice(i,1),this.destroy(n),this.length--}destroy(n){n.displayed&&n.destroy(),this.container&&this.container.removeChild(n.element),n=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var n,i=this.length;if(this.length){for(var a=0;a<i;a++)n=this._views[a],this.destroy(n);this._views=[],this.length=0}}find(n){for(var i,a=this.length,m=0;m<a;m++)if((i=this._views[m]).displayed&&i.section.index==n.index)return i}displayed(){for(var n,i=[],a=this.length,m=0;m<a;m++)(n=this._views[m]).displayed&&i.push(n);return i}show(){for(var n,i=this.length,a=0;a<i;a++)(n=this._views[a]).displayed&&n.show();this.hidden=!1}hide(){for(var n,i=this.length,a=0;a<i;a++)(n=this._views[a]).displayed&&n.hide();this.hidden=!0}},c=g(1);class b{constructor(i){this.name="default",this.optsSettings=i.settings,this.View=i.view,this.request=i.request,this.renditionQueue=i.queue,this.q=new d.a(this),this.settings=Object(h.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Object(h.extend)(this.settings,i.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(i,a){let m=i.tagName;this.settings.fullsize!==void 0||!m||m.toLowerCase()!="body"&&m.toLowerCase()!="html"||(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=a,this.settings.rtlScrollType=p(),this.stage=new E({width:a.width,height:a.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(i),this.container=this.stage.getContainer(),this.views=new r(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var i;window.addEventListener("unload",(function(a){this.destroy()}).bind(this)),i=this.settings.fullsize?window:this.container,this._onScroll=this.onScroll.bind(this),i.addEventListener("scroll",this._onScroll)}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(i){let{orientation:a}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(c.c.MANAGERS.ORIENTATION_CHANGE,a)}).bind(this),500)}onResized(i){this.resize()}resize(i,a,m){let _=this.stage.size(i,a);this.winBounds=Object(h.windowBounds)(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height?this._stageSize=void 0:this._stageSize&&this._stageSize.width===_.width&&this._stageSize.height===_.height||(this._stageSize=_,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(c.c.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},m))}createView(i,a){return new this.View(i,Object(h.extend)(this.viewSettings,{forceRight:a}))}handleNextPrePaginated(i,a,m){let _;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(i||a.index===0)return;if(_=a.next(),_&&!_.properties.includes("page-spread-left"))return m.call(this,_)}}display(i,a){var m=new h.defer,_=m.promise;(a===i.href||Object(h.isNumber)(a))&&(a=void 0);var S=this.views.find(i);if(S&&i&&this.layout.name!=="pre-paginated"){let k=S.offset();if(this.settings.direction==="ltr")this.scrollTo(k.left,k.top,!0);else{let M=S.width();this.scrollTo(k.left+M,k.top,!0)}if(a){let M=S.locationOf(a),X=S.width();this.moveTo(M,X)}return m.resolve(),_}this.clear();let f=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(f=!0),this.add(i,f).then((function(k){if(a){let M=k.locationOf(a),X=k.width();this.moveTo(M,X)}}).bind(this),k=>{m.reject(k)}).then((function(){return this.handleNextPrePaginated(f,i,this.add)}).bind(this)).then((function(){this.views.show(),m.resolve()}).bind(this)),_}afterDisplayed(i){this.emit(c.c.MANAGERS.ADDED,i)}afterResized(i){this.emit(c.c.MANAGERS.RESIZE,i.section)}moveTo(i,a){var m=0,_=0;this.isPaginated?((m=Math.floor(i.left/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollWidth&&(m=this.container.scrollWidth-this.layout.delta),(_=Math.floor(i.top/this.layout.delta)*this.layout.delta)+this.layout.delta>this.container.scrollHeight&&(_=this.container.scrollHeight-this.layout.delta)):_=i.top,this.settings.direction==="rtl"&&(m+=this.layout.delta,m-=a),this.scrollTo(m,_,!0)}add(i,a){var m=this.createView(i,a);return this.views.append(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,_=>{this.updateAxis(_)}),m.on(c.c.VIEWS.WRITING_MODE,_=>{this.updateWritingMode(_)}),m.display(this.request)}append(i,a){var m=this.createView(i,a);return this.views.append(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,_=>{this.updateAxis(_)}),m.on(c.c.VIEWS.WRITING_MODE,_=>{this.updateWritingMode(_)}),m.display(this.request)}prepend(i,a){var m=this.createView(i,a);return m.on(c.c.VIEWS.RESIZED,_=>{this.counter(_)}),this.views.prepend(m),m.onDisplayed=this.afterDisplayed.bind(this),m.onResize=this.afterResized.bind(this),m.on(c.c.VIEWS.AXIS,_=>{this.updateAxis(_)}),m.on(c.c.VIEWS.WRITING_MODE,_=>{this.updateWritingMode(_)}),m.display(this.request)}counter(i){this.settings.axis==="vertical"?this.scrollBy(0,i.heightDelta,!0):this.scrollBy(i.widthDelta,0,!0)}next(){var i;let a=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||a&&a!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&a==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft>0?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next():this.container.scrollLeft+-1*this.layout.delta>-1*this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):i=this.views.last().section.next()):i=this.views.last().section.next():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):i=this.views.last().section.next()),i)){this.clear(),this.updateLayout();let m=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&i.properties.includes("page-spread-right")&&(m=!0),this.append(i,m).then((function(){return this.handleNextPrePaginated(m,i,this.append)}).bind(this),_=>_).then((function(){this.isPaginated||this.settings.axis!=="horizontal"||this.settings.direction!=="rtl"||this.settings.rtlScrollType!=="default"||this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var i;let a=this.settings.direction;if(this.views.length&&(!this.isPaginated||this.settings.axis!=="horizontal"||a&&a!=="ltr"?this.isPaginated&&this.settings.axis==="horizontal"&&a==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?this.container.scrollLeft+this.container.offsetWidth<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev():this.container.scrollLeft<0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):i=this.views.first().section.prev()):i=this.views.first().section.prev():(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft>0?this.scrollBy(-this.layout.delta,0,!0):i=this.views.first().section.prev()),i)){this.clear(),this.updateLayout();let m=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof i.prev()!="object"&&(m=!0),this.prepend(i,m).then((function(){var _;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(_=i.prev()))return this.prepend(_)}).bind(this),_=>_).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(-1*this.container.scrollWidth+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var i=this.visible();return i.length?i[i.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let i=this.visible(),a=this.container.getBoundingClientRect(),m=a.height<window.innerHeight?a.height:window.innerHeight,_=a.width<window.innerWidth?a.width:window.innerWidth,S=this.settings.axis==="vertical",f=(this.settings.direction,0);return this.settings.fullsize&&(f=S?window.scrollY:window.scrollX),i.map(k=>{let M,X,B,V,{index:w,href:Q}=k.section,dt=k.position(),ht=k.width(),St=k.height();S?(M=f+a.top-dt.top+0,X=M+m-0,V=this.layout.count(St,m).pages,B=m):(M=f+a.left-dt.left+0,X=M+_-0,V=this.layout.count(ht,_).pages,B=_);let ut=Math.ceil(M/B),tt=[],st=Math.ceil(X/B);if(this.settings.direction==="rtl"&&!S){let xt=ut;ut=V-st,st=V-xt}tt=[];for(var rt=ut;rt<=st;rt++){let xt=rt+1;tt.push(xt)}return{index:w,href:Q,pages:tt,totalPages:V,mapping:this.mapping.page(k.contents,k.section.cfiBase,M,X)}})}paginatedLocation(){let i=this.visible(),a=this.container.getBoundingClientRect(),m=0,_=0;return this.settings.fullsize&&(m=window.scrollX),i.map(S=>{let f,k,M,X,{index:B,href:V}=S.section,w=S.position(),Q=S.width();this.settings.direction==="rtl"?(f=a.right-m,X=Math.min(Math.abs(f-w.left),this.layout.width)-_,M=w.width-(w.right-f)-_,k=M-X):(f=a.left+m,X=Math.min(w.right-f,this.layout.width)-_,k=f-w.left+_,M=k+X),_+=X;let dt=this.mapping.page(S.contents,S.section.cfiBase,k,M),ht=this.layout.count(Q).pages,St=Math.floor(k/this.layout.pageWidth),ut=[],tt=Math.floor(M/this.layout.pageWidth);if(St<0&&(St=0,tt+=1),this.settings.direction==="rtl"){let rt=St;St=ht-tt,tt=ht-rt}for(var st=St+1;st<=tt;st++){let rt=st;ut.push(rt)}return{index:B,href:V,pages:ut,totalPages:ht,mapping:dt}})}isVisible(i,a,m,_){var S=i.position(),f=_||this.bounds();return this.settings.axis==="horizontal"&&S.right>f.left-a&&S.left<f.right+m||this.settings.axis==="vertical"&&S.bottom>f.top-a&&S.top<f.bottom+m}visible(){for(var i,a=this.bounds(),m=this.views.displayed(),_=m.length,S=[],f=0;f<_;f++)i=m[f],this.isVisible(i,0,0,a)===!0&&S.push(i);return S}scrollBy(i,a,m){let _=this.settings.direction==="rtl"?-1:1;m&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(i*_,a*_):(i&&(this.container.scrollLeft+=i*_),a&&(this.container.scrollTop+=a)),this.scrolled=!0}scrollTo(i,a,m){m&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(i,a):(this.container.scrollLeft=i,this.container.scrollTop=a),this.scrolled=!0}onScroll(){let i,a;this.settings.fullsize?(i=window.scrollY,a=window.scrollX):(i=this.container.scrollTop,a=this.container.scrollLeft),this.scrollTop=i,this.scrollLeft=a,this.ignore?this.ignore=!1:(this.emit(c.c.MANAGERS.SCROLL,{top:i,left:a}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(c.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){return this.stage.bounds()}applyLayout(i){this.layout=i,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(i){this.viewSettings.layout=i,this.mapping=new s.a(i.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(a){a&&a.setLayout(i)})}updateWritingMode(i){this.writingMode=i}updateAxis(i,a){(a||i!==this.settings.axis)&&(this.settings.axis=i,this.stage&&this.stage.axis(i),this.viewSettings.axis=i,this.mapping&&(this.mapping=new s.a(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(i==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(i,a="auto"){let m=i==="paginated"||i==="auto";this.isPaginated=m,i==="scrolled-doc"||i==="scrolled-continuous"||i==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=i,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=m?"hidden":a,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var i=[];return this.views&&this.views.forEach(function(a){const m=a&&a.contents;m&&i.push(m)}),i}direction(i="ltr"){this.settings.direction=i,this.stage&&this.stage.direction(i),this.viewSettings.direction=i,this.updateLayout()}isRendered(){return this.rendered}}y()(b.prototype),P.a=b},function(Y,P,g){"use strict";var x=g(2),y=g(0);P.a=class{constructor(h,p,s,d=!1){this.layout=h,this.horizontal=s==="horizontal",this.direction=p||"ltr",this._dev=d}section(h){var p=this.findRanges(h);return this.rangeListToCfiList(h.section.cfiBase,p)}page(h,p,s,d){var l,o=!(!h||!h.document)&&h.document.body;if(o){if(l=this.rangePairToCfiPair(p,{start:this.findStart(o,s,d),end:this.findEnd(o,s,d)}),this._dev===!0){let E=h.document,r=new x.a(l.start).toRange(E),c=new x.a(l.end).toRange(E),b=E.defaultView.getSelection(),n=E.createRange();b.removeAllRanges(),n.setStart(r.startContainer,r.startOffset),n.setEnd(c.endContainer,c.endOffset),b.addRange(n)}return l}}walk(h,p){if(!h||h.nodeType!==Node.TEXT_NODE){var s=function(r){return r.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},d=s;d.acceptNode=s;for(var l,o,E=document.createTreeWalker(h,NodeFilter.SHOW_TEXT,d,!1);(l=E.nextNode())&&!(o=p(l)););return o}}findRanges(h){for(var p,s,d=[],l=h.contents.scrollWidth(),o=Math.ceil(l/this.layout.spreadWidth)*this.layout.divisor,E=this.layout.columnWidth,r=this.layout.gap,c=0;c<o.pages;c++)p=(E+r)*c,s=E*(c+1)+r*c,d.push({start:this.findStart(h.document.body,p,s),end:this.findEnd(h.document.body,p,s)});return d}findStart(h,p,s){for(var d,l,o=[h],E=h;o.length;)if(d=o.shift(),l=this.walk(d,r=>{var c,b,n,i,a;if(a=Object(y.nodeBounds)(r),this.horizontal&&this.direction==="ltr"){if(c=this.horizontal?a.left:a.top,b=this.horizontal?a.right:a.bottom,c>=p&&c<=s||b>p)return r;E=r,o.push(r)}else if(this.horizontal&&this.direction==="rtl"){if(c=a.left,(b=a.right)<=s&&b>=p||c<s)return r;E=r,o.push(r)}else{if(n=a.top,i=a.bottom,n>=p&&n<=s||i>p)return r;E=r,o.push(r)}}))return this.findTextStartRange(l,p,s);return this.findTextStartRange(E,p,s)}findEnd(h,p,s){for(var d,l,o=[h],E=h;o.length;)if(d=o.shift(),l=this.walk(d,r=>{var c,b,n,i,a;if(a=Object(y.nodeBounds)(r),this.horizontal&&this.direction==="ltr"){if(c=Math.round(a.left),b=Math.round(a.right),c>s&&E)return E;if(b>s)return r;E=r,o.push(r)}else if(this.horizontal&&this.direction==="rtl"){if(c=Math.round(this.horizontal?a.left:a.top),(b=Math.round(this.horizontal?a.right:a.bottom))<p&&E)return E;if(c<p)return r;E=r,o.push(r)}else{if(n=Math.round(a.top),i=Math.round(a.bottom),n>s&&E)return E;if(i>s)return r;E=r,o.push(r)}}))return this.findTextEndRange(l,p,s);return this.findTextEndRange(E,p,s)}findTextStartRange(h,p,s){for(var d,l,o=this.splitTextNodeIntoRanges(h),E=0;E<o.length;E++)if(l=(d=o[E]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l.left>=p)return d}else if(this.horizontal&&this.direction==="rtl"){if(l.right<=s)return d}else if(l.top>=p)return d;return o[0]}findTextEndRange(h,p,s){for(var d,l,o,E,r,c,b,n=this.splitTextNodeIntoRanges(h),i=0;i<n.length;i++){if(o=(l=n[i]).getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(E=o.left,r=o.right,E>s&&d)return d;if(r>s)return l}else if(this.horizontal&&this.direction==="rtl"){if(E=o.left,(r=o.right)<p&&d)return d;if(E<p)return l}else{if(c=o.top,b=o.bottom,c>s&&d)return d;if(b>s)return l}d=l}return n[n.length-1]}splitTextNodeIntoRanges(h,p){var s,d=[],l=(h.textContent||"").trim(),o=h.ownerDocument,E=p||" ",r=l.indexOf(E);if(r===-1||h.nodeType!=Node.TEXT_NODE)return(s=o.createRange()).selectNodeContents(h),[s];for((s=o.createRange()).setStart(h,0),s.setEnd(h,r),d.push(s),s=!1;r!=-1;)(r=l.indexOf(E,r+1))>0&&(s&&(s.setEnd(h,r),d.push(s)),(s=o.createRange()).setStart(h,r+1));return s&&(s.setEnd(h,l.length),d.push(s)),d}rangePairToCfiPair(h,p){var s=p.start,d=p.end;return s.collapse(!0),d.collapse(!1),{start:new x.a(s,h).toString(),end:new x.a(d,h).toString()}}rangeListToCfiList(h,p){for(var s,d=[],l=0;l<p.length;l++)s=this.rangePairToCfiPair(h,p[l]),d.push(s);return d}axis(h){return h&&(this.horizontal=h==="horizontal"),this.horizontal}}},function(Y,P,g){"use strict";var x=g(3),y=g.n(x),h=g(0),p=g(2),s=g(11),d=g(8),l=g(1);const o=typeof navigator<"u",E=o&&/Chrome/.test(navigator.userAgent),r=o&&!E&&/AppleWebKit/.test(navigator.userAgent);class c{constructor(n,i,a,m){this.epubcfi=new p.a,this.document=n,this.documentElement=this.document.documentElement,this.content=i||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=m||0,this.cfiBase=a||"",this.epubReadingSystem("epub.js",l.b),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return l.a}width(n){var i=this.content;return n&&Object(h.isNumber)(n)&&(n+="px"),n&&(i.style.width=n),parseInt(this.window.getComputedStyle(i).width)}height(n){var i=this.content;return n&&Object(h.isNumber)(n)&&(n+="px"),n&&(i.style.height=n),parseInt(this.window.getComputedStyle(i).height)}contentWidth(n){var i=this.content||this.document.body;return n&&Object(h.isNumber)(n)&&(n+="px"),n&&(i.style.width=n),parseInt(this.window.getComputedStyle(i).width)}contentHeight(n){var i=this.content||this.document.body;return n&&Object(h.isNumber)(n)&&(n+="px"),n&&(i.style.height=n),parseInt(this.window.getComputedStyle(i).height)}textWidth(){let n,i,a=this.document.createRange(),m=this.content||this.document.body,_=Object(h.borders)(m);return a.selectNodeContents(m),n=a.getBoundingClientRect(),i=n.width,_&&_.width&&(i+=_.width),Math.round(i)}textHeight(){let n,i,a=this.document.createRange(),m=this.content||this.document.body;return a.selectNodeContents(m),n=a.getBoundingClientRect(),i=n.bottom,Math.round(i)}scrollWidth(){return this.documentElement.scrollWidth}scrollHeight(){return this.documentElement.scrollHeight}overflow(n){return n&&(this.documentElement.style.overflow=n),this.window.getComputedStyle(this.documentElement).overflow}overflowX(n){return n&&(this.documentElement.style.overflowX=n),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(n){return n&&(this.documentElement.style.overflowY=n),this.window.getComputedStyle(this.documentElement).overflowY}css(n,i,a){var m=this.content||this.document.body;return i?m.style.setProperty(n,i,a?"important":""):m.style.removeProperty(n),this.window.getComputedStyle(m)[n]}viewport(n){var i,a=this.document.querySelector("meta[name='viewport']"),m={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},_=[];if(a&&a.hasAttribute("content")){let S=a.getAttribute("content"),f=S.match(/width\s*=\s*([^,]*)/),k=S.match(/height\s*=\s*([^,]*)/),M=S.match(/initial-scale\s*=\s*([^,]*)/),X=S.match(/minimum-scale\s*=\s*([^,]*)/),B=S.match(/maximum-scale\s*=\s*([^,]*)/),V=S.match(/user-scalable\s*=\s*([^,]*)/);f&&f.length&&f[1]!==void 0&&(m.width=f[1]),k&&k.length&&k[1]!==void 0&&(m.height=k[1]),M&&M.length&&M[1]!==void 0&&(m.scale=M[1]),X&&X.length&&X[1]!==void 0&&(m.minimum=X[1]),B&&B.length&&B[1]!==void 0&&(m.maximum=B[1]),V&&V.length&&V[1]!==void 0&&(m.scalable=V[1])}return i=Object(h.defaults)(n||{},m),n&&(i.width&&_.push("width="+i.width),i.height&&_.push("height="+i.height),i.scale&&_.push("initial-scale="+i.scale),i.scalable==="no"?(_.push("minimum-scale="+i.scale),_.push("maximum-scale="+i.scale),_.push("user-scalable="+i.scalable)):(i.scalable&&_.push("user-scalable="+i.scalable),i.minimum&&_.push("minimum-scale="+i.minimum),i.maximum&&_.push("minimum-scale="+i.maximum)),a||((a=this.document.createElement("meta")).setAttribute("name","viewport"),this.document.querySelector("head").appendChild(a)),a.setAttribute("content",_.join(", ")),this.window.scrollTo(0,0)),i}expand(){this.emit(l.c.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let n=this.textWidth(),i=this.textHeight();n==this._size.width&&i==this._size.height||(this._size={width:n,height:i},this.onResize&&this.onResize(this._size),this.emit(l.c.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let n=this.content;n.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",n.style.transitionDuration="0.001ms",n.style.transitionTimingFunction="linear",n.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var n=this.document.styleSheets,i=(function(S){S.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),a=0;a<n.length;a+=1){var m;try{m=n[a].cssRules}catch{return}if(!m)return;for(var _=0;_<m.length;_+=1)m[_].media&&this.window.matchMedia(m[_].media.mediaText).addListener(i)}}resizeObservers(){this.observer=new ResizeObserver(n=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(n=>{this.resizeCheck()}),this.observer.observe(this.document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}imageLoadListeners(){for(var n,i=this.document.querySelectorAll("img"),a=0;a<i.length;a++)(n=i[a]).naturalWidth!==void 0&&n.naturalWidth===0&&(n.onload=this.expand.bind(this))}fontLoadListeners(){this.document&&this.document.fonts&&this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(n,i){var a,m={left:0,top:0};if(!this.document)return m;if(this.epubcfi.isCfiString(n)){let _=new p.a(n).toRange(this.document,i);if(_){try{if(!_.endContainer||_.startContainer==_.endContainer&&_.startOffset==_.endOffset){let S=_.startContainer.textContent.indexOf(" ",_.startOffset);S==-1&&(S=_.startContainer.textContent.length),_.setEnd(_.startContainer,S)}}catch(S){console.error("setting end offset to start container length failed",S)}if(_.startContainer.nodeType===Node.ELEMENT_NODE)a=_.startContainer.getBoundingClientRect(),m.left=a.left,m.top=a.top;else if(r){let S=_.startContainer,f=new Range;try{S.nodeType===1?a=S.getBoundingClientRect():_.startOffset+2<S.length?(f.setStart(S,_.startOffset),f.setEnd(S,_.startOffset+2),a=f.getBoundingClientRect()):_.startOffset-2>0?(f.setStart(S,_.startOffset-2),f.setEnd(S,_.startOffset),a=f.getBoundingClientRect()):a=S.parentNode.getBoundingClientRect()}catch(k){console.error(k,k.stack)}}else a=_.getBoundingClientRect()}}else if(typeof n=="string"&&n.indexOf("#")>-1){let _=n.substring(n.indexOf("#")+1),S=this.document.getElementById(_);if(S)if(r){let f=new Range;f.selectNode(S),a=f.getBoundingClientRect()}else a=S.getBoundingClientRect()}return a&&(m.left=a.left,m.top=a.top),m}addStylesheet(n){return new Promise((function(i,a){var m,_=!1;this.document?(m=this.document.querySelector("link[href='"+n+"']"))?i(!0):((m=this.document.createElement("link")).type="text/css",m.rel="stylesheet",m.href=n,m.onload=m.onreadystatechange=function(){_||this.readyState&&this.readyState!="complete"||(_=!0,setTimeout(()=>{i(!0)},1))},this.document.head.appendChild(m)):i(!1)}).bind(this))}_getStylesheetNode(n){var i;return n="epubjs-inserted-css-"+(n||""),!!this.document&&((i=this.document.getElementById(n))||((i=this.document.createElement("style")).id=n,this.document.head.appendChild(i)),i)}addStylesheetCss(n,i){return!(!this.document||!n)&&(this._getStylesheetNode(i).innerHTML=n,!0)}addStylesheetRules(n,i){var a;if(this.document&&n&&n.length!==0)if(a=this._getStylesheetNode(i).sheet,Object.prototype.toString.call(n)==="[object Array]")for(var m=0,_=n.length;m<_;m++){var S=1,f=n[m],k=n[m][0],M="";Object.prototype.toString.call(f[1][0])==="[object Array]"&&(f=f[1],S=0);for(var X=f.length;S<X;S++){var B=f[S];M+=B[0]+":"+B[1]+(B[2]?" !important":"")+`;
`}a.insertRule(k+"{"+M+"}",a.cssRules.length)}else Object.keys(n).forEach(V=>{const w=n[V];if(Array.isArray(w))w.forEach(Q=>{const dt=Object.keys(Q).map(ht=>`${ht}:${Q[ht]}`).join(";");a.insertRule(`${V}{${dt}}`,a.cssRules.length)});else{const Q=Object.keys(w).map(dt=>`${dt}:${w[dt]}`).join(";");a.insertRule(`${V}{${Q}}`,a.cssRules.length)}})}addScript(n){return new Promise((function(i,a){var m,_=!1;this.document?((m=this.document.createElement("script")).type="text/javascript",m.async=!0,m.src=n,m.onload=m.onreadystatechange=function(){_||this.readyState&&this.readyState!="complete"||(_=!0,setTimeout(function(){i(!0)},1))},this.document.head.appendChild(m)):i(!1)}).bind(this))}addClass(n){var i;this.document&&(i=this.content||this.document.body)&&i.classList.add(n)}removeClass(n){var i;this.document&&(i=this.content||this.document.body)&&i.classList.remove(n)}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),l.a.forEach(function(n){this.document.addEventListener(n,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(l.a.forEach(function(n){this.document.removeEventListener(n,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(n){this.emit(n.type,n)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(n){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var i=this.window.getSelection();this.triggerSelectedEvent(i)}).bind(this),250)}triggerSelectedEvent(n){var i,a;n&&n.rangeCount>0&&((i=n.getRangeAt(0)).collapsed||(a=new p.a(i,this.cfiBase).toString(),this.emit(l.c.CONTENTS.SELECTED,a),this.emit(l.c.CONTENTS.SELECTED_RANGE,i)))}range(n,i){return new p.a(n).toRange(this.document,i)}cfiFromRange(n,i){return new p.a(n,this.cfiBase,i).toString()}cfiFromNode(n,i){return new p.a(n,this.cfiBase,i).toString()}map(n){return new s.a(n).section()}size(n,i){var a={scale:1,scalable:"no"};this.layoutStyle("scrolling"),n>=0&&(this.width(n),a.width=n,this.css("padding","0 "+n/12+"px")),i>=0&&(this.height(i),a.height=i),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(a)}columns(n,i,a,m,_){let S=Object(h.prefixed)("column-axis"),f=Object(h.prefixed)("column-gap"),k=Object(h.prefixed)("column-width"),M=Object(h.prefixed)("column-fill"),X=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),_==="rtl"&&X==="horizontal"&&this.direction(_),this.width(n),this.height(i),this.viewport({width:n,height:i,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),X==="vertical"?(this.css("padding-top",m/2+"px",!0),this.css("padding-bottom",m/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(S,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",m/2+"px",!0),this.css("padding-right",m/2+"px",!0),this.css(S,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(M,"auto"),this.css(f,m+"px"),this.css(k,a+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(n,i,a){var m="scale("+n+")",_="";this.css("transform-origin","top left"),(i>=0||a>=0)&&(_=" translate("+(i||0)+"px, "+(a||0)+"px )"),this.css("transform",m+_)}fit(n,i,a){var m=this.viewport(),_=parseInt(m.width),S=parseInt(m.height),f=n/_,k=i/S,M=f<k?f:k;if(this.layoutStyle("paginated"),this.width(_),this.height(S),this.overflow("hidden"),this.scaler(M,0,0),this.css("background-size",_*M+"px "+S*M+"px"),this.css("background-color","transparent"),a&&a.properties.includes("page-spread-left")){var X=n-_*M;this.css("margin-left",X+"px")}}direction(n){this.documentElement&&(this.documentElement.style.direction=n)}mapPage(n,i,a,m,_){return new s.a(i,_).page(this,n,a,m)}linksHandler(){Object(d.c)(this.content,n=>{this.emit(l.c.CONTENTS.LINK_CLICKED,n)})}writingMode(n){let i=Object(h.prefixed)("writing-mode");return n&&this.documentElement&&(this.documentElement.style[i]=n),this.window.getComputedStyle(this.documentElement)[i]||""}layoutStyle(n){return n&&(this._layoutStyle=n,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(n,i){return navigator.epubReadingSystem={name:n,version:i,layoutStyle:this.layoutStyle(),hasFeature:function(a){switch(a){case"dom-manipulation":case"layout-changes":case"touch-events":case"mouse-events":case"keyboard-events":return!0;case"spine-scripting":default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}y()(c.prototype),P.a=c},function(Y,P,g){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Underline=P.Highlight=P.Mark=P.Pane=void 0;var x=function(){function r(c,b){for(var n=0;n<b.length;n++){var i=b[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(c,i.key,i)}}return function(c,b,n){return b&&r(c.prototype,b),n&&r(c,n),c}}(),y=p(g(49)),h=p(g(50));function p(r){return r&&r.__esModule?r:{default:r}}function s(r,c){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||typeof c!="object"&&typeof c!="function"?r:c}function d(r,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);r.prototype=Object.create(c&&c.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(r,c):r.__proto__=c)}function l(r,c){if(!(r instanceof c))throw new TypeError("Cannot call a class as a function")}P.Pane=function(){function r(c){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;l(this,r),this.target=c,this.element=y.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),h.default.proxyMouse(this.target,this.marks),this.container=b,this.container.appendChild(this.element),this.render()}return x(r,[{key:"addMark",value:function(c){var b=y.default.createElement("g");return this.element.appendChild(b),c.bind(b,this.container),this.marks.push(c),c.render(),c}},{key:"removeMark",value:function(c){var b=this.marks.indexOf(c);if(b!==-1){var n=c.unbind();this.element.removeChild(n),this.marks.splice(b,1)}}},{key:"render",value:function(){var c,b,n,i;(function(k,M){k.style.setProperty("top",M.top+"px","important"),k.style.setProperty("left",M.left+"px","important"),k.style.setProperty("height",M.height+"px","important"),k.style.setProperty("width",M.width+"px","important")})(this.element,(c=this.target,b=this.container,n=b.getBoundingClientRect(),i=c.getBoundingClientRect(),{top:i.top-n.top,left:i.left-n.left,height:c.scrollHeight,width:c.scrollWidth}));var a=!0,m=!1,_=void 0;try{for(var S,f=this.marks[Symbol.iterator]();!(a=(S=f.next()).done);a=!0)S.value.render()}catch(k){m=!0,_=k}finally{try{!a&&f.return&&f.return()}finally{if(m)throw _}}}}]),r}();var o=P.Mark=function(){function r(){l(this,r),this.element=null}return x(r,[{key:"bind",value:function(c,b){this.element=c,this.container=b}},{key:"unbind",value:function(){var c=this.element;return this.element=null,c}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(c){this.element&&this.element.dispatchEvent(c)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var c=[],b=this.element.firstChild;b;)c.push(b.getBoundingClientRect()),b=b.nextSibling;return c}},{key:"filteredRanges",value:function(){var c=Array.from(this.range.getClientRects());return c.filter(function(b){for(var n=0;n<c.length;n++){if(c[n]===b)return!0;if(i=c[n],(a=b).right<=i.right&&a.left>=i.left&&a.top>=i.top&&a.bottom<=i.bottom)return!1}var i,a;return!0})}}]),r}(),E=P.Highlight=function(r){function c(b,n,i,a){l(this,c);var m=s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return m.range=b,m.className=n,m.data=i||{},m.attributes=a||{},m}return d(c,r),x(c,[{key:"bind",value:function(b,n){for(var i in function a(m,_,S){m===null&&(m=Function.prototype);var f=Object.getOwnPropertyDescriptor(m,_);if(f===void 0){var k=Object.getPrototypeOf(m);return k===null?void 0:a(k,_,S)}if("value"in f)return f.value;var M=f.get;return M!==void 0?M.call(S):void 0}(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"bind",this).call(this,b,n),this.data)this.data.hasOwnProperty(i)&&(this.element.dataset[i]=this.data[i]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&this.element.setAttribute(i,this.attributes[i]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var b=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),i=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),m=0,_=n.length;m<_;m++){var S=n[m],f=y.default.createElement("rect");f.setAttribute("x",S.left-i.left+a.left),f.setAttribute("y",S.top-i.top+a.top),f.setAttribute("height",S.height),f.setAttribute("width",S.width),b.appendChild(f)}this.element.appendChild(b)}}]),c}(o);P.Underline=function(r){function c(b,n,i,a){return l(this,c),s(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,b,n,i,a))}return d(c,r),x(c,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var b=this.element.ownerDocument.createDocumentFragment(),n=this.filteredRanges(),i=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),m=0,_=n.length;m<_;m++){var S=n[m],f=y.default.createElement("rect");f.setAttribute("x",S.left-i.left+a.left),f.setAttribute("y",S.top-i.top+a.top),f.setAttribute("height",S.height),f.setAttribute("width",S.width),f.setAttribute("fill","none");var k=y.default.createElement("line");k.setAttribute("x1",S.left-i.left+a.left),k.setAttribute("x2",S.left-i.left+a.left+S.width),k.setAttribute("y1",S.top-i.top+a.top+S.height-1),k.setAttribute("y2",S.top-i.top+a.top+S.height-1),k.setAttribute("stroke-width",1),k.setAttribute("stroke","black"),k.setAttribute("stroke-linecap","square"),b.appendChild(f),b.appendChild(k)}this.element.appendChild(b)}}]),c}(E)},function(Y,P,g){"use strict";function x(p,s){return s===void 0&&(s=Object),s&&typeof s.freeze=="function"?s.freeze(p):p}var y=x({HTML:"text/html",isHTML:function(p){return p===y.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),h=x({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(p){return p===h.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});P.freeze=x,P.MIME_TYPE=y,P.NAMESPACE=h},function(Y,P,g){var x=g(25);P.DOMImplementation=x.DOMImplementation,P.XMLSerializer=x.XMLSerializer,P.DOMParser=g(46).DOMParser},function(Y,P,g){"use strict";var x=g(3),y=g.n(x),h=g(0),p=g(6),s=g(2),d=g(9),l=g(1);class o{constructor(f){this.settings=f,this.name=f.layout||"reflowable",this._spread=f.spread!=="none",this._minSpreadWidth=f.minSpreadWidth||800,this._evenSpreads=f.evenSpreads||!1,f.flow==="scrolled"||f.flow==="scrolled-continuous"||f.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(f){return f!==void 0&&(this._flow=f==="scrolled"||f==="scrolled-continuous"||f==="scrolled-doc"?"scrolled":"paginated",this.update({flow:this._flow})),this._flow}spread(f,k){return f&&(this._spread=f!=="none",this.update({spread:this._spread})),k>=0&&(this._minSpreadWidth=k),this._spread}calculate(f,k,M){var X,B,V,w,Q=1,dt=M||0,ht=f,St=k,ut=Math.floor(ht/12);Q=this._spread&&ht>=this._minSpreadWidth?2:1,this.name!=="reflowable"||this._flow!=="paginated"||M>=0||(dt=ut%2==0?ut:ut-1),this.name==="pre-paginated"&&(dt=0),Q>1?V=(X=ht/Q-dt)+dt:(X=ht,V=ht),this.name==="pre-paginated"&&Q>1&&(ht=X),B=X*Q+dt,w=ht,this.width=ht,this.height=St,this.spreadWidth=B,this.pageWidth=V,this.delta=w,this.columnWidth=X,this.gap=dt,this.divisor=Q,this.update({width:ht,height:St,spreadWidth:B,pageWidth:V,delta:w,columnWidth:X,gap:dt,divisor:Q})}format(f,k,M){return this.name==="pre-paginated"?f.fit(this.columnWidth,this.height,k):this._flow==="paginated"?f.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):M&&M==="horizontal"?f.size(null,this.height):f.size(this.width,null)}count(f,k){let M,X;return this.name==="pre-paginated"?(M=1,X=1):this._flow==="paginated"?(k=k||this.delta,M=Math.ceil(f/k),X=M*this.divisor):(k=k||this.height,M=Math.ceil(f/k),X=M),{spreads:M,pages:X}}update(f){if(Object.keys(f).forEach(k=>{this.props[k]===f[k]&&delete f[k]}),Object.keys(f).length>0){let k=Object(h.extend)(this.props,f);this.emit(l.c.LAYOUT.UPDATED,k,f)}}}y()(o.prototype);var E=o,r=g(5),c=class{constructor(S){this.rendition=S,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0)return arguments.length===1&&typeof arguments[0]=="object"?this.registerThemes(arguments[0]):arguments.length===1&&typeof arguments[0]=="string"?this.default(arguments[0]):arguments.length===2&&typeof arguments[1]=="string"?this.registerUrl(arguments[0],arguments[1]):arguments.length===2&&typeof arguments[1]=="object"?this.registerRules(arguments[0],arguments[1]):void 0}default(S){if(S)return typeof S=="string"?this.registerUrl("default",S):typeof S=="object"?this.registerRules("default",S):void 0}registerThemes(S){for(var f in S)S.hasOwnProperty(f)&&(typeof S[f]=="string"?this.registerUrl(f,S[f]):this.registerRules(f,S[f]))}registerCss(S,f){this._themes[S]={serialized:f},(this._injected[S]||S=="default")&&this.update(S)}registerUrl(S,f){var k=new r.a(f);this._themes[S]={url:k.toString()},(this._injected[S]||S=="default")&&this.update(S)}registerRules(S,f){this._themes[S]={rules:f},(this._injected[S]||S=="default")&&this.update(S)}select(S){var f=this._current;this._current=S,this.update(S),this.rendition.getContents().forEach(k=>{k.removeClass(f),k.addClass(S)})}update(S){this.rendition.getContents().forEach(f=>{this.add(S,f)})}inject(S){var f,k=[],M=this._themes;for(var X in M)!M.hasOwnProperty(X)||X!==this._current&&X!=="default"||(((f=M[X]).rules&&Object.keys(f.rules).length>0||f.url&&k.indexOf(f.url)===-1)&&this.add(X,S),this._injected.push(X));this._current!="default"&&S.addClass(this._current)}add(S,f){var k=this._themes[S];k&&f&&(k.url?f.addStylesheet(k.url):k.serialized?(f.addStylesheetCss(k.serialized,S),k.injected=!0):k.rules&&(f.addStylesheetRules(k.rules,S),k.injected=!0))}override(S,f,k){var M=this.rendition.getContents();this._overrides[S]={value:f,priority:k===!0},M.forEach(X=>{X.css(S,this._overrides[S].value,this._overrides[S].priority)})}removeOverride(S){var f=this.rendition.getContents();delete this._overrides[S],f.forEach(k=>{k.css(S)})}overrides(S){var f=this._overrides;for(var k in f)f.hasOwnProperty(k)&&S.css(k,f[k].value,f[k].priority)}fontSize(S){this.override("font-size",S)}font(S){this.override("font-family",S,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}};g(12);class b{constructor({type:f,cfiRange:k,data:M,sectionIndex:X,cb:B,className:V,styles:w}){this.type=f,this.cfiRange=k,this.data=M,this.sectionIndex=X,this.mark=void 0,this.cb=B,this.className=V,this.styles=w}update(f){this.data=f}attach(f){let k,{cfiRange:M,data:X,type:B,mark:V,cb:w,className:Q,styles:dt}=this;return B==="highlight"?k=f.highlight(M,X,w,Q,dt):B==="underline"?k=f.underline(M,X,w,Q,dt):B==="mark"&&(k=f.mark(M,X,w)),this.mark=k,this.emit(l.c.ANNOTATION.ATTACH,k),k}detach(f){let k,{cfiRange:M,type:X}=this;return f&&(X==="highlight"?k=f.unhighlight(M):X==="underline"?k=f.ununderline(M):X==="mark"&&(k=f.unmark(M))),this.mark=void 0,this.emit(l.c.ANNOTATION.DETACH,k),k}text(){}}y()(b.prototype);var n=class{constructor(S){this.rendition=S,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(S,f,k,M,X,B){let V=encodeURI(f+S),w=new s.a(f).spinePos,Q=new b({type:S,cfiRange:f,data:k,sectionIndex:w,cb:M,className:X,styles:B});return this._annotations[V]=Q,w in this._annotationsBySectionIndex?this._annotationsBySectionIndex[w].push(V):this._annotationsBySectionIndex[w]=[V],this.rendition.views().forEach(dt=>{Q.sectionIndex===dt.index&&Q.attach(dt)}),Q}remove(S,f){let k=encodeURI(S+f);if(k in this._annotations){let M=this._annotations[k];if(f&&M.type!==f)return;this.rendition.views().forEach(X=>{this._removeFromAnnotationBySectionIndex(M.sectionIndex,k),M.sectionIndex===X.index&&M.detach(X)}),delete this._annotations[k]}}_removeFromAnnotationBySectionIndex(S,f){this._annotationsBySectionIndex[S]=this._annotationsAt(S).filter(k=>k!==f)}_annotationsAt(S){return this._annotationsBySectionIndex[S]}highlight(S,f,k,M,X){return this.add("highlight",S,f,k,M,X)}underline(S,f,k,M,X){return this.add("underline",S,f,k,M,X)}mark(S,f,k){return this.add("mark",S,f,k)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(S){let f=S.index;f in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[f].forEach(k=>{this._annotations[k].attach(S)})}clear(S){let f=S.index;f in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[f].forEach(k=>{this._annotations[k].detach(S)})}show(){}hide(){}},i=g(20),a=g(10),m=g(22);class _{constructor(f,k){this.settings=Object(h.extend)(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Object(h.extend)(this.settings,k),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=f,this.hooks={},this.hooks.display=new p.a(this),this.hooks.serialize=new p.a(this),this.hooks.content=new p.a(this),this.hooks.unloaded=new p.a(this),this.hooks.layout=new p.a(this),this.hooks.render=new p.a(this),this.hooks.show=new p.a(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new c(this),this.annotations=new n(this),this.epubcfi=new s.a,this.q=new d.a(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new h.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(f){this.manager=f}requireManager(f){return typeof f=="string"&&f==="default"?a.a:typeof f=="string"&&f==="continuous"?m.a:f}requireView(f){return typeof f=="string"&&f==="iframe"?i.a:f}start(){switch(this.settings.layout||this.book.package.metadata.layout!=="pre-paginated"&&this.book.displayOptions.fixedLayout!=="true"||(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(l.c.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(l.c.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(l.c.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(l.c.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(l.c.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(l.c.RENDITION.STARTED),this.starting.resolve()}attachTo(f){return this.q.enqueue((function(){this.manager.render(f,{width:this.settings.width,height:this.settings.height}),this.emit(l.c.RENDITION.ATTACHED)}).bind(this))}display(f){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,f)}_display(f){if(this.book){this.epubcfi.isCfiString(f);var k,M=new h.defer,X=M.promise;return this.displaying=M,this.book.locations.length()&&Object(h.isFloat)(f)&&(f=this.book.locations.cfiFromPercentage(parseFloat(f))),(k=this.book.spine.get(f))?(this.manager.display(k,f).then(()=>{M.resolve(k),this.displaying=void 0,this.emit(l.c.RENDITION.DISPLAYED,k),this.reportLocation()},B=>{this.emit(l.c.RENDITION.DISPLAY_ERROR,B)}),X):(M.reject(new Error("No Section Found")),X)}}afterDisplayed(f){f.on(l.c.VIEWS.MARK_CLICKED,(k,M)=>this.triggerMarkEvent(k,M,f.contents)),this.hooks.render.trigger(f,this).then(()=>{f.contents?this.hooks.content.trigger(f.contents,this).then(()=>{this.emit(l.c.RENDITION.RENDERED,f.section,f)}):this.emit(l.c.RENDITION.RENDERED,f.section,f)})}afterRemoved(f){this.hooks.unloaded.trigger(f,this).then(()=>{this.emit(l.c.RENDITION.REMOVED,f.section,f)})}onResized(f,k){this.emit(l.c.RENDITION.RESIZED,{width:f.width,height:f.height},k),this.location&&this.location.start&&this.display(k||this.location.start.cfi)}onOrientationChange(f){this.emit(l.c.RENDITION.ORIENTATION_CHANGE,f)}moveTo(f){this.manager.moveTo(f)}resize(f,k,M){f&&(this.settings.width=f),k&&(this.settings.height=k),this.manager.resize(f,k,M)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(f){var k=this.settings.layout||f.layout||"reflowable",M=this.settings.spread||f.spread||"auto",X=this.settings.orientation||f.orientation||"auto",B=this.settings.flow||f.flow||"auto",V=f.viewport||"",w=this.settings.minSpreadWidth||f.minSpreadWidth||800,Q=this.settings.direction||f.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height),{layout:k,spread:M,orientation:X,flow:B,viewport:V,minSpreadWidth:w,direction:Q}}flow(f){var k=f;f!=="scrolled"&&f!=="scrolled-doc"&&f!=="scrolled-continuous"||(k="scrolled"),f!=="auto"&&f!=="paginated"||(k="paginated"),this.settings.flow=f,this._layout&&this._layout.flow(k),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(k),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(f){return f&&(this._layout=new E(f),this._layout.spread(f.spread,this.settings.minSpreadWidth),this._layout.on(l.c.LAYOUT.UPDATED,(k,M)=>{this.emit(l.c.RENDITION.LAYOUT,k,M)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(f,k){this.settings.spread=f,k&&(this.settings.minSpreadWidth=k),this._layout&&this._layout.spread(f,k),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(f){this.settings.direction=f||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var f=this.manager.currentLocation();if(f&&f.then&&typeof f.then=="function")f.then((function(k){let M=this.located(k);M&&M.start&&M.end&&(this.location=M,this.emit(l.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(l.c.RENDITION.RELOCATED,this.location))}).bind(this));else if(f){let k=this.located(f);if(!k||!k.start||!k.end)return;this.location=k,this.emit(l.c.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(l.c.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var f=this.manager.currentLocation();if(f&&f.then&&typeof f.then=="function")f.then((function(k){return this.located(k)}).bind(this));else if(f)return this.located(f)}located(f){if(!f.length)return{};let k=f[0],M=f[f.length-1],X={start:{index:k.index,href:k.href,cfi:k.mapping.start,displayed:{page:k.pages[0]||1,total:k.totalPages}},end:{index:M.index,href:M.href,cfi:M.mapping.end,displayed:{page:M.pages[M.pages.length-1]||1,total:M.totalPages}}},B=this.book.locations.locationFromCfi(k.mapping.start),V=this.book.locations.locationFromCfi(M.mapping.end);B!=null&&(X.start.location=B,X.start.percentage=this.book.locations.percentageFromLocation(B)),V!=null&&(X.end.location=V,X.end.percentage=this.book.locations.percentageFromLocation(V));let w=this.book.pageList.pageFromCfi(k.mapping.start),Q=this.book.pageList.pageFromCfi(M.mapping.end);return w!=-1&&(X.start.page=w),Q!=-1&&(X.end.page=Q),M.index===this.book.spine.last().index&&X.end.displayed.page>=X.end.displayed.total&&(X.atEnd=!0),k.index===this.book.spine.first().index&&X.start.displayed.page===1&&(X.atStart=!0),X}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(f){l.a.forEach(k=>{f.on(k,M=>this.triggerViewEvent(M,f))}),f.on(l.c.CONTENTS.SELECTED,k=>this.triggerSelectedEvent(k,f))}triggerViewEvent(f,k){this.emit(f.type,f,k)}triggerSelectedEvent(f,k){this.emit(l.c.RENDITION.SELECTED,f,k)}triggerMarkEvent(f,k,M){this.emit(l.c.RENDITION.MARK_CLICKED,f,k,M)}getRange(f,k){var M=new s.a(f),X=this.manager.visible().filter(function(B){if(M.spinePos===B.index)return!0});if(X.length)return X[0].contents.range(M,k)}adjustImages(f){if(this._layout.name==="pre-paginated")return new Promise(function(B){B()});let k=f.window.getComputedStyle(f.content,null),M=.95*(f.content.offsetHeight-(parseFloat(k.paddingTop)+parseFloat(k.paddingBottom))),X=parseFloat(k.paddingLeft)+parseFloat(k.paddingRight);return f.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-X+"px":"100%")+"!important","max-height":M+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-X+"px":"100%")+"!important","max-height":M+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(B,V){setTimeout(function(){B()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(f){f&&f.on(l.c.CONTENTS.LINK_CLICKED,k=>{let M=this.book.path.relative(k);this.display(M)})}injectStylesheet(f,k){let M=f.createElement("link");M.setAttribute("type","text/css"),M.setAttribute("rel","stylesheet"),M.setAttribute("href",this.settings.stylesheet),f.getElementsByTagName("head")[0].appendChild(M)}injectScript(f,k){let M=f.createElement("script");M.setAttribute("type","text/javascript"),M.setAttribute("src",this.settings.script),M.textContent=" ",f.getElementsByTagName("head")[0].appendChild(M)}injectIdentifier(f,k){let M=this.book.packaging.metadata.identifier,X=f.createElement("meta");X.setAttribute("name","dc.relation.ispartof"),M&&X.setAttribute("content",M),f.getElementsByTagName("head")[0].appendChild(X)}}y()(_.prototype),P.a=_},function(Y,P){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch{typeof window=="object"&&(g=window)}Y.exports=g},function(Y,P,g){"use strict";var x=g(38)();Y.exports=function(y){return y!==x&&y!==null}},function(Y,P){Y.exports=function(g){var x=typeof g;return g!=null&&(x=="object"||x=="function")}},function(Y,P,g){"use strict";var x=g(3),y=g.n(x),h=g(0),p=g(2),s=g(12),d=g(1),l=g(13);class o{constructor(r,c){this.settings=Object(h.extend)({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},c||{}),this.id="epubjs-view-"+Object(h.uuid)(),this.section=r,this.index=r.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new p.a,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(r){var c=document.createElement("div");return c.classList.add("epub-view"),c.style.height="0px",c.style.width="0px",c.style.overflow="hidden",c.style.position="relative",c.style.display="block",c.style.flex=r&&r=="horizontal"?"none":"initial",c}create(){return this.iframe||(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Object(h.bounds)(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write")),this.iframe}render(r,c){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(r)),this.sectionRender.then((function(b){return this.load(b)}).bind(this)).then((function(){let b,n=this.contents.writingMode();return b=this.settings.flow==="scrolled"?n.indexOf("vertical")===0?"horizontal":"vertical":n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(b),this.emit(d.c.VIEWS.AXIS,b),this.setWritingMode(n),this.emit(d.c.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((i,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),i()})}).bind(this),(function(b){return this.emit(d.c.VIEWS.LOAD_ERROR,b),new Promise((n,i)=>{i(b)})}).bind(this)).then((function(){this.emit(d.c.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(r,c){var b=r||this.settings.width,n=c||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",b,n):this.settings.axis==="horizontal"?this.lock("height",b,n):this.lock("width",b,n),this.settings.width=b,this.settings.height=n}lock(r,c,b){var n,i=Object(h.borders)(this.element);n=this.iframe?Object(h.borders)(this.iframe):{width:0,height:0},r=="width"&&Object(h.isNumber)(c)&&(this.lockedWidth=c-i.width-n.width),r=="height"&&Object(h.isNumber)(b)&&(this.lockedHeight=b-i.height-n.height),r==="both"&&Object(h.isNumber)(c)&&Object(h.isNumber)(b)&&(this.lockedWidth=c-i.width-n.width,this.lockedHeight=b-i.height-n.height),this.displayed&&this.iframe&&this.expand()}expand(r){var c,b=this.lockedWidth,n=this.lockedHeight;this.iframe&&!this._expanding&&(this._expanding=!0,this.layout.name==="pre-paginated"?(b=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?((b=this.contents.textWidth())%this.layout.pageWidth>0&&(b=Math.ceil(b/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(c=b/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&c%2>0&&(b+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||b!=this._width||n!=this._height)&&this.reframe(b,n),this._expanding=!1)}reframe(r,c){var b;Object(h.isNumber)(r)&&(this.element.style.width=r+"px",this.iframe.style.width=r+"px",this._width=r),Object(h.isNumber)(c)&&(this.element.style.height=c+"px",this.iframe.style.height=c+"px",this._height=c),b={width:r,height:c,widthDelta:this.prevBounds?r-this.prevBounds.width:r,heightDelta:this.prevBounds?c-this.prevBounds.height:c},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let n;for(let i in this.marks)this.marks.hasOwnProperty(i)&&(n=this.marks[i],this.placeMark(n.element,n.range))}),this.onResize(this,b),this.emit(d.c.VIEWS.RESIZED,b),this.prevBounds=b,this.elementBounds=Object(h.bounds)(this.element)}load(r){var c=new h.defer,b=c.promise;if(!this.iframe)return c.reject(new Error("No Iframe Available")),b;if(this.iframe.onload=(function(i){this.onLoad(i,c)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=Object(h.createBlobUrl)(r,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=r,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return c.reject(new Error("No Document Available")),b;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var n=this;MSApp.execUnsafeLocalFunction(function(){n.iframe.contentDocument.write(r)})}else this.iframe.contentDocument.write(r);this.iframe.contentDocument.close()}return b}onLoad(r,c){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new s.a(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var b=this.document.querySelector("link[rel='canonical']");b?b.setAttribute("href",this.section.canonical):((b=this.document.createElement("link")).setAttribute("rel","canonical"),b.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(b)),this.contents.on(d.c.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(d.c.CONTENTS.RESIZE,n=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),c.resolve(this.contents)}setLayout(r){this.layout=r,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(r){this.settings.axis=r,this.element.style.flex=r=="horizontal"?"none":"initial",this.size()}setWritingMode(r){this.writingMode=r}addListeners(){}removeListeners(r){}display(r){var c=new h.defer;return this.displayed?c.resolve(this):this.render(r).then((function(){this.emit(d.c.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,c.resolve(this)}).bind(this),function(b){c.reject(b,this)}),c.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(d.c.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(d.c.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(r){this.iframe.getBoundingClientRect();var c=this.contents.locationOf(r,this.settings.ignoreClass);return{left:c.left,top:c.top}}onDisplayed(r){}onResize(r,c){}bounds(r){return!r&&this.elementBounds||(this.elementBounds=Object(h.bounds)(this.element)),this.elementBounds}highlight(r,c={},b,n="epubjs-hl",i={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},i);let m=this.contents.range(r),_=()=>{this.emit(d.c.VIEWS.MARK_CLICKED,r,c)};c.epubcfi=r,this.pane||(this.pane=new l.Pane(this.iframe,this.element));let S=new l.Highlight(m,n,c,a),f=this.pane.addMark(S);return this.highlights[r]={mark:f,element:f.element,listeners:[_,b]},f.element.setAttribute("ref",n),f.element.addEventListener("click",_),f.element.addEventListener("touchstart",_),b&&(f.element.addEventListener("click",b),f.element.addEventListener("touchstart",b)),f}underline(r,c={},b,n="epubjs-ul",i={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},i);let m=this.contents.range(r),_=()=>{this.emit(d.c.VIEWS.MARK_CLICKED,r,c)};c.epubcfi=r,this.pane||(this.pane=new l.Pane(this.iframe,this.element));let S=new l.Underline(m,n,c,a),f=this.pane.addMark(S);return this.underlines[r]={mark:f,element:f.element,listeners:[_,b]},f.element.setAttribute("ref",n),f.element.addEventListener("click",_),f.element.addEventListener("touchstart",_),b&&(f.element.addEventListener("click",b),f.element.addEventListener("touchstart",b)),f}mark(r,c={},b){if(!this.contents)return;if(r in this.marks)return this.marks[r];let n=this.contents.range(r);if(!n)return;let i=n.commonAncestorContainer,a=i.nodeType===1?i:i.parentNode,m=S=>{this.emit(d.c.VIEWS.MARK_CLICKED,r,c)};n.collapsed&&i.nodeType===1?(n=new Range,n.selectNodeContents(i)):n.collapsed&&(n=new Range,n.selectNodeContents(a));let _=this.document.createElement("a");return _.setAttribute("ref","epubjs-mk"),_.style.position="absolute",_.dataset.epubcfi=r,c&&Object.keys(c).forEach(S=>{_.dataset[S]=c[S]}),b&&(_.addEventListener("click",b),_.addEventListener("touchstart",b)),_.addEventListener("click",m),_.addEventListener("touchstart",m),this.placeMark(_,n),this.element.appendChild(_),this.marks[r]={element:_,range:n,listeners:[m,b]},a}placeMark(r,c){let b,n,i;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let m=c.getBoundingClientRect();b=m.top,n=m.right}else{let m,_=c.getClientRects();for(var a=0;a!=_.length;a++)m=_[a],(!i||m.left<i)&&(i=m.left,n=Math.ceil(i/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,b=m.top)}r.style.top=b+"px",r.style.left=n+"px"}unhighlight(r){let c;r in this.highlights&&(c=this.highlights[r],this.pane.removeMark(c.mark),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.highlights[r])}ununderline(r){let c;r in this.underlines&&(c=this.underlines[r],this.pane.removeMark(c.mark),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.underlines[r])}unmark(r){let c;r in this.marks&&(c=this.marks[r],this.element.removeChild(c.element),c.listeners.forEach(b=>{b&&(c.element.removeEventListener("click",b),c.element.removeEventListener("touchstart",b))}),delete this.marks[r])}destroy(){for(let r in this.highlights)this.unhighlight(r);for(let r in this.underlines)this.ununderline(r);for(let r in this.marks)this.unmark(r);this.blobUrl&&Object(h.revokeBlobUrl)(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}y()(o.prototype),P.a=o},function(Y,P,g){var x=g(19),y=g(51),h=g(53),p=Math.max,s=Math.min;Y.exports=function(d,l,o){var E,r,c,b,n,i,a=0,m=!1,_=!1,S=!0;if(typeof d!="function")throw new TypeError("Expected a function");function f(w){var Q=E,dt=r;return E=r=void 0,a=w,b=d.apply(dt,Q)}function k(w){return a=w,n=setTimeout(X,l),m?f(w):b}function M(w){var Q=w-i;return i===void 0||Q>=l||Q<0||_&&w-a>=c}function X(){var w=y();if(M(w))return B(w);n=setTimeout(X,function(Q){var dt=l-(Q-i);return _?s(dt,c-(Q-a)):dt}(w))}function B(w){return n=void 0,S&&E?f(w):(E=r=void 0,b)}function V(){var w=y(),Q=M(w);if(E=arguments,r=this,i=w,Q){if(n===void 0)return k(i);if(_)return clearTimeout(n),n=setTimeout(X,l),f(i)}return n===void 0&&(n=setTimeout(X,l)),b}return l=h(l)||0,x(o)&&(m=!!o.leading,c=(_="maxWait"in o)?p(h(o.maxWait)||0,l):c,S="trailing"in o?!!o.trailing:S),V.cancel=function(){n!==void 0&&clearTimeout(n),a=0,E=i=r=n=void 0},V.flush=function(){return n===void 0?b:B(y())},V}},function(Y,P,g){"use strict";var x=g(0),y=g(10),h=g(1),p=g(3),s=g.n(p);const d=Math.PI/2,l={easeOutSine:function(n){return Math.sin(n*d)},easeInOutSine:function(n){return-.5*(Math.cos(Math.PI*n)-1)},easeInOutQuint:function(n){return(n/=.5)<1?.5*Math.pow(n,5):.5*(Math.pow(n-2,5)+2)},easeInCubic:function(n){return Math.pow(n,3)}};class o{constructor(i,a){this.settings=Object(x.extend)({duration:80,minVelocity:.2,minDistance:10,easing:l.easeInCubic},a||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(i)}setup(i){this.manager=i,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=2*this.settings.duration,this.isVertical=this.manager.settings.axis==="vertical",this.manager.isPaginated&&!this.isVertical&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(h.c.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(h.c.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(i){let a=i.contents;["touchstart","touchmove","touchend"].forEach(m=>{a.on(m,_=>this.triggerViewEvent(_,a))})}triggerViewEvent(i,a){this.emit(i.type,i,a)}onScroll(i){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(i){this.resizeCanceler=!0}onTouchStart(i){let{screenX:a,screenY:m}=i.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=a,this.startTouchY=m,this.startTime=this.now()),this.endTouchX=a,this.endTouchY=m,this.endTime=this.now()}onTouchMove(i){let{screenX:a,screenY:m}=i.touches[0],_=Math.abs(m-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&_<10&&(this.element.scrollLeft-=a-this.endTouchX),this.endTouchX=a,this.endTouchY=m,this.endTime=this.now()}onTouchEnd(i){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let a=this.wasSwiped();a!==0?this.snap(a):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let i=this.layout.pageWidth*this.layout.divisor,a=this.endTouchX-this.startTouchX,m=Math.abs(a),_=a/(this.endTime-this.startTime),S=this.settings.minVelocity;return m<=this.settings.minDistance||m>=i?0:_>S?-1:_<-S?1:void 0}needsSnap(){return this.scrollLeft%(this.layout.pageWidth*this.layout.divisor)!=0}snap(i=0){let a=this.scrollLeft,m=this.layout.pageWidth*this.layout.divisor,_=Math.round(a/m)*m;return i&&(_+=i*m),this.smoothScrollTo(_)}smoothScrollTo(i){const a=new x.defer,m=this.scrollLeft,_=this.now(),S=this.settings.duration,f=this.settings.easing;return this.snapping=!0,(function k(){const M=this.now(),X=Math.min(1,(M-_)/S);if(f(X),this.touchCanceler||this.resizeCanceler)return this.resizeCanceler=!1,this.snapping=!1,void a.resolve();X<1?(window.requestAnimationFrame(k.bind(this)),this.scrollTo(m+(i-m)*X,0)):(this.scrollTo(i,0),this.snapping=!1,a.resolve())}).call(this),a.promise}scrollTo(i=0,a=0){this.fullsize?window.scroll(i,a):(this.scroller.scrollLeft=i,this.scroller.scrollTop=a)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}s()(o.prototype);var E=o,r=g(21),c=g.n(r);class b extends y.a{constructor(i){super(i),this.name="continuous",this.settings=Object(x.extend)(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Object(x.extend)(this.settings,i.settings||{}),i.settings.gap!="undefined"&&i.settings.gap===0&&(this.settings.gap=i.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(i,a){return y.a.prototype.display.call(this,i,a).then((function(){return this.fill()}).bind(this))}fill(i){var a=i||new x.defer;return this.q.enqueue(()=>this.check()).then(m=>{m?this.fill(a):a.resolve()}),a.promise}moveTo(i){var a=0,m=0;this.isPaginated?(a=Math.floor(i.left/this.layout.delta)*this.layout.delta,this.settings.offsetDelta):(m=i.top,i.top,this.settings.offsetDelta),(a>0||m>0)&&this.scrollBy(a,m,!0)}afterResized(i){this.emit(h.c.MANAGERS.RESIZE,i.section)}removeShownListeners(i){i.onDisplayed=function(){}}add(i){var a=this.createView(i);return this.views.append(a),a.on(h.c.VIEWS.RESIZED,m=>{a.expanded=!0}),a.on(h.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),a.on(h.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),a.onDisplayed=this.afterDisplayed.bind(this),a.onResize=this.afterResized.bind(this),a.display(this.request)}append(i){var a=this.createView(i);return a.on(h.c.VIEWS.RESIZED,m=>{a.expanded=!0}),a.on(h.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),a.on(h.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),this.views.append(a),a.onDisplayed=this.afterDisplayed.bind(this),a}prepend(i){var a=this.createView(i);return a.on(h.c.VIEWS.RESIZED,m=>{this.counter(m),a.expanded=!0}),a.on(h.c.VIEWS.AXIS,m=>{this.updateAxis(m)}),a.on(h.c.VIEWS.WRITING_MODE,m=>{this.updateWritingMode(m)}),this.views.prepend(a),a.onDisplayed=this.afterDisplayed.bind(this),a}counter(i){this.settings.axis==="vertical"?this.scrollBy(0,i.heightDelta,!0):this.scrollBy(i.widthDelta,0,!0)}update(i){for(var a,m=this.bounds(),_=this.views.all(),S=_.length,f=[],k=i!==void 0?i:this.settings.offset||0,M=new x.defer,X=[],B=0;B<S;B++)if(a=_[B],this.isVisible(a,k,k,m)===!0){if(a.displayed)a.show();else{let V=a.display(this.request).then(function(w){w.show()},w=>{a.hide()});X.push(V)}f.push(a)}else this.q.enqueue(a.destroy.bind(a)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return X.length?Promise.all(X).catch(V=>{M.reject(V)}):(M.resolve(),M.promise)}check(i,a){var m=new x.defer,_=[],S=this.settings.axis==="horizontal",f=this.settings.offset||0;i&&S&&(f=i),a&&!S&&(f=a);var k=this._bounds;let M=S?this.scrollLeft:this.scrollTop,X=S?Math.floor(k.width):k.height,B=S?this.container.scrollWidth:this.container.scrollHeight,V=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",w=this.settings.rtlScrollType,Q=this.settings.direction==="rtl";this.settings.fullsize?(S&&Q&&w==="negative"||!S&&Q&&w==="default")&&(M*=-1):(Q&&w==="default"&&V==="horizontal"&&(M=B-X-M),Q&&w==="negative"&&V==="horizontal"&&(M*=-1));let dt=()=>{let ut=this.views.first(),tt=ut&&ut.section.prev();tt&&_.push(this.prepend(tt))},ht=M-f;M+X+f>=B&&(()=>{let ut=this.views.last(),tt=ut&&ut.section.next();tt&&_.push(this.append(tt))})(),ht<0&&dt();let St=_.map(ut=>ut.display(this.request));return _.length?Promise.all(St).then(()=>this.check()).then(()=>this.update(f),ut=>ut):(this.q.enqueue((function(){this.update()}).bind(this)),m.resolve(!1),m.promise)}trim(){for(var i=new x.defer,a=this.views.displayed(),m=a[0],_=a[a.length-1],S=this.views.indexOf(m),f=this.views.indexOf(_),k=this.views.slice(0,S),M=this.views.slice(f+1),X=0;X<k.length-1;X++)this.erase(k[X],k);for(var B=1;B<M.length;B++)this.erase(M[B]);return i.resolve(),i.promise}erase(i,a){var m,_;this.settings.fullsize?(m=window.scrollY,_=window.scrollX):(m=this.container.scrollTop,_=this.container.scrollLeft);var S=i.bounds();this.views.remove(i),a&&(this.settings.axis==="vertical"?this.scrollTo(0,m-S.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(_+Math.floor(S.width),0,!0):this.scrollTo(_,0,!0):this.scrollTo(_-Math.floor(S.width),0,!0))}addEventListeners(i){window.addEventListener("unload",(function(a){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new E(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var i;this.tick=x.requestAnimationFrame;let a=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(i=window,this.scrollTop=window.scrollY*a,this.scrollLeft=window.scrollX*a):(i=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),i.addEventListener("scroll",this._onScroll),this._scrolled=c()(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){(this.settings.fullsize?window:this.container).removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let i,a,m=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(i=window.scrollY*m,a=window.scrollX*m):(i=this.container.scrollTop,a=this.container.scrollLeft),this.scrollTop=i,this.scrollLeft=a,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(i-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(a-this.prevScrollLeft),this.prevScrollTop=i,this.prevScrollLeft=a,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(h.c.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(h.c.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let i=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(i,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let i=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?2*this.layout.props.delta:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-i,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(i){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(i,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new E(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}P.a=b},function(Y,P,g){(function(x){Y.exports=function y(h,p,s){function d(E,r){if(!p[E]){if(!h[E]){if(l)return l(E,!0);var c=new Error("Cannot find module '"+E+"'");throw c.code="MODULE_NOT_FOUND",c}var b=p[E]={exports:{}};h[E][0].call(b.exports,function(n){var i=h[E][1][n];return d(i||n)},b,b.exports,y,h,p,s)}return p[E].exports}for(var l=!1,o=0;o<s.length;o++)d(s[o]);return d}({1:[function(y,h,p){(function(s){"use strict";var d,l,o=s.MutationObserver||s.WebKitMutationObserver;if(o){var E=0,r=new o(i),c=s.document.createTextNode("");r.observe(c,{characterData:!0}),d=function(){c.data=E=++E%2}}else if(s.setImmediate||s.MessageChannel===void 0)d="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var a=s.document.createElement("script");a.onreadystatechange=function(){i(),a.onreadystatechange=null,a.parentNode.removeChild(a),a=null},s.document.documentElement.appendChild(a)}:function(){setTimeout(i,0)};else{var b=new s.MessageChannel;b.port1.onmessage=i,d=function(){b.port2.postMessage(0)}}var n=[];function i(){var a,m;l=!0;for(var _=n.length;_;){for(m=n,n=[],a=-1;++a<_;)m[a]();_=n.length}l=!1}h.exports=function(a){n.push(a)!==1||l||d()}}).call(this,x!==void 0?x:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(y,h,p){"use strict";var s=y(1);function d(){}var l={},o=["REJECTED"],E=["FULFILLED"],r=["PENDING"];function c(_){if(typeof _!="function")throw new TypeError("resolver must be a function");this.state=r,this.queue=[],this.outcome=void 0,_!==d&&a(this,_)}function b(_,S,f){this.promise=_,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof f=="function"&&(this.onRejected=f,this.callRejected=this.otherCallRejected)}function n(_,S,f){s(function(){var k;try{k=S(f)}catch(M){return l.reject(_,M)}k===_?l.reject(_,new TypeError("Cannot resolve promise with itself")):l.resolve(_,k)})}function i(_){var S=_&&_.then;if(_&&(typeof _=="object"||typeof _=="function")&&typeof S=="function")return function(){S.apply(_,arguments)}}function a(_,S){var f=!1;function k(B){f||(f=!0,l.reject(_,B))}function M(B){f||(f=!0,l.resolve(_,B))}var X=m(function(){S(M,k)});X.status==="error"&&k(X.value)}function m(_,S){var f={};try{f.value=_(S),f.status="success"}catch(k){f.status="error",f.value=k}return f}h.exports=c,c.prototype.catch=function(_){return this.then(null,_)},c.prototype.then=function(_,S){if(typeof _!="function"&&this.state===E||typeof S!="function"&&this.state===o)return this;var f=new this.constructor(d);return this.state!==r?n(f,this.state===E?_:S,this.outcome):this.queue.push(new b(f,_,S)),f},b.prototype.callFulfilled=function(_){l.resolve(this.promise,_)},b.prototype.otherCallFulfilled=function(_){n(this.promise,this.onFulfilled,_)},b.prototype.callRejected=function(_){l.reject(this.promise,_)},b.prototype.otherCallRejected=function(_){n(this.promise,this.onRejected,_)},l.resolve=function(_,S){var f=m(i,S);if(f.status==="error")return l.reject(_,f.value);var k=f.value;if(k)a(_,k);else{_.state=E,_.outcome=S;for(var M=-1,X=_.queue.length;++M<X;)_.queue[M].callFulfilled(S)}return _},l.reject=function(_,S){_.state=o,_.outcome=S;for(var f=-1,k=_.queue.length;++f<k;)_.queue[f].callRejected(S);return _},c.resolve=function(_){return _ instanceof this?_:l.resolve(new this(d),_)},c.reject=function(_){var S=new this(d);return l.reject(S,_)},c.all=function(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var f=_.length,k=!1;if(!f)return this.resolve([]);for(var M=new Array(f),X=0,B=-1,V=new this(d);++B<f;)w(_[B],B);return V;function w(Q,dt){S.resolve(Q).then(function(ht){M[dt]=ht,++X!==f||k||(k=!0,l.resolve(V,M))},function(ht){k||(k=!0,l.reject(V,ht))})}},c.race=function(_){var S=this;if(Object.prototype.toString.call(_)!=="[object Array]")return this.reject(new TypeError("must be an array"));var f=_.length,k=!1;if(!f)return this.resolve([]);for(var M,X=-1,B=new this(d);++X<f;)M=_[X],S.resolve(M).then(function(V){k||(k=!0,l.resolve(B,V))},function(V){k||(k=!0,l.reject(B,V))});return B}},{1:1}],3:[function(y,h,p){(function(s){"use strict";typeof s.Promise!="function"&&(s.Promise=y(2))}).call(this,x!==void 0?x:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(y,h,p){"use strict";var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},d=function(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}();function l(L,U){L=L||[],U=U||{};try{return new Blob(L,U)}catch(O){if(O.name!=="TypeError")throw O;for(var q=new(typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder),T=0;T<L.length;T+=1)q.append(L[T]);return q.getBlob(U.type)}}typeof Promise>"u"&&y(3);var o=Promise;function E(L,U){U&&L.then(function(q){U(null,q)},function(q){U(q)})}function r(L,U,q){typeof U=="function"&&L.then(U),typeof q=="function"&&L.catch(q)}function c(L){return typeof L!="string"&&(console.warn(L+" used as a key, but it is not a string."),L=String(L)),L}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var n=void 0,i={},a=Object.prototype.toString;function m(L){return typeof n=="boolean"?o.resolve(n):function(U){return new o(function(q){var T=U.transaction("local-forage-detect-blob-support","readwrite"),O=l([""]);T.objectStore("local-forage-detect-blob-support").put(O,"key"),T.onabort=function(z){z.preventDefault(),z.stopPropagation(),q(!1)},T.oncomplete=function(){var z=navigator.userAgent.match(/Chrome\/(\d+)/),$=navigator.userAgent.match(/Edge\//);q($||!z||parseInt(z[1],10)>=43)}}).catch(function(){return!1})}(L).then(function(U){return n=U})}function _(L){var U=i[L.name],q={};q.promise=new o(function(T,O){q.resolve=T,q.reject=O}),U.deferredOperations.push(q),U.dbReady?U.dbReady=U.dbReady.then(function(){return q.promise}):U.dbReady=q.promise}function S(L){var U=i[L.name].deferredOperations.pop();if(U)return U.resolve(),U.promise}function f(L,U){var q=i[L.name].deferredOperations.pop();if(q)return q.reject(U),q.promise}function k(L,U){return new o(function(q,T){if(i[L.name]=i[L.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},L.db){if(!U)return q(L.db);_(L),L.db.close()}var O=[L.name];U&&O.push(L.version);var z=d.open.apply(d,O);U&&(z.onupgradeneeded=function($){var G=z.result;try{G.createObjectStore(L.storeName),$.oldVersion<=1&&G.createObjectStore("local-forage-detect-blob-support")}catch(ot){if(ot.name!=="ConstraintError")throw ot;console.warn('The database "'+L.name+'" has been upgraded from version '+$.oldVersion+" to version "+$.newVersion+', but the storage "'+L.storeName+'" already exists.')}}),z.onerror=function($){$.preventDefault(),T(z.error)},z.onsuccess=function(){var $=z.result;$.onversionchange=function(G){G.target.close()},q($),S(L)}})}function M(L){return k(L,!1)}function X(L){return k(L,!0)}function B(L,U){if(!L.db)return!0;var q=!L.db.objectStoreNames.contains(L.storeName),T=L.version<L.db.version,O=L.version>L.db.version;if(T&&(L.version!==U&&console.warn('The database "'+L.name+`" can't be downgraded from version `+L.db.version+" to version "+L.version+"."),L.version=L.db.version),O||q){if(q){var z=L.db.version+1;z>L.version&&(L.version=z)}return!0}return!1}function V(L){return l([function(U){for(var q=U.length,T=new ArrayBuffer(q),O=new Uint8Array(T),z=0;z<q;z++)O[z]=U.charCodeAt(z);return T}(atob(L.data))],{type:L.type})}function w(L){return L&&L.__local_forage_encoded_blob}function Q(L){var U=this,q=U._initReady().then(function(){var T=i[U._dbInfo.name];if(T&&T.dbReady)return T.dbReady});return r(q,L,L),q}function dt(L,U,q,T){T===void 0&&(T=1);try{var O=L.db.transaction(L.storeName,U);q(null,O)}catch(z){if(T>0&&(!L.db||z.name==="InvalidStateError"||z.name==="NotFoundError"))return o.resolve().then(function(){if(!L.db||z.name==="NotFoundError"&&!L.db.objectStoreNames.contains(L.storeName)&&L.version<=L.db.version)return L.db&&(L.version=L.db.version+1),X(L)}).then(function(){return function($){_($);for(var G=i[$.name],ot=G.forages,lt=0;lt<ot.length;lt++){var pt=ot[lt];pt._dbInfo.db&&(pt._dbInfo.db.close(),pt._dbInfo.db=null)}return $.db=null,M($).then(function(kt){return $.db=kt,B($)?X($):kt}).then(function(kt){$.db=G.db=kt;for(var Nt=0;Nt<ot.length;Nt++)ot[Nt]._dbInfo.db=kt}).catch(function(kt){throw f($,kt),kt})}(L).then(function(){dt(L,U,q,T-1)})}).catch(q);q(z)}}var ht={_driver:"asyncStorage",_initStorage:function(L){var U=this,q={db:null};if(L)for(var T in L)q[T]=L[T];var O=i[q.name];O||(O={forages:[],db:null,dbReady:null,deferredOperations:[]},i[q.name]=O),O.forages.push(U),U._initReady||(U._initReady=U.ready,U.ready=Q);var z=[];function $(){return o.resolve()}for(var G=0;G<O.forages.length;G++){var ot=O.forages[G];ot!==U&&z.push(ot._initReady().catch($))}var lt=O.forages.slice(0);return o.all(z).then(function(){return q.db=O.db,M(q)}).then(function(pt){return q.db=pt,B(q,U._defaultConfig.version)?X(q):pt}).then(function(pt){q.db=O.db=pt,U._dbInfo=q;for(var kt=0;kt<lt.length;kt++){var Nt=lt[kt];Nt!==U&&(Nt._dbInfo.db=q.db,Nt._dbInfo.version=q.version)}})},_support:function(){try{if(!d||!d.open)return!1;var L=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),U=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!L||U)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}(),iterate:function(L,U){var q=this,T=new o(function(O,z){q.ready().then(function(){dt(q._dbInfo,"readonly",function($,G){if($)return z($);try{var ot=G.objectStore(q._dbInfo.storeName).openCursor(),lt=1;ot.onsuccess=function(){var pt=ot.result;if(pt){var kt=pt.value;w(kt)&&(kt=V(kt));var Nt=L(kt,pt.key,lt++);Nt!==void 0?O(Nt):pt.continue()}else O()},ot.onerror=function(){z(ot.error)}}catch(pt){z(pt)}})}).catch(z)});return E(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,z){q.ready().then(function(){dt(q._dbInfo,"readonly",function($,G){if($)return z($);try{var ot=G.objectStore(q._dbInfo.storeName).get(L);ot.onsuccess=function(){var lt=ot.result;lt===void 0&&(lt=null),w(lt)&&(lt=V(lt)),O(lt)},ot.onerror=function(){z(ot.error)}}catch(lt){z(lt)}})}).catch(z)});return E(T,U),T},setItem:function(L,U,q){var T=this;L=c(L);var O=new o(function(z,$){var G;T.ready().then(function(){return G=T._dbInfo,a.call(U)==="[object Blob]"?m(G.db).then(function(ot){return ot?U:(lt=U,new o(function(pt,kt){var Nt=new FileReader;Nt.onerror=kt,Nt.onloadend=function(Mt){var zt=btoa(Mt.target.result||"");pt({__local_forage_encoded_blob:!0,data:zt,type:lt.type})},Nt.readAsBinaryString(lt)}));var lt}):U}).then(function(ot){dt(T._dbInfo,"readwrite",function(lt,pt){if(lt)return $(lt);try{var kt=pt.objectStore(T._dbInfo.storeName);ot===null&&(ot=void 0);var Nt=kt.put(ot,L);pt.oncomplete=function(){ot===void 0&&(ot=null),z(ot)},pt.onabort=pt.onerror=function(){var Mt=Nt.error?Nt.error:Nt.transaction.error;$(Mt)}}catch(Mt){$(Mt)}})}).catch($)});return E(O,q),O},removeItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,z){q.ready().then(function(){dt(q._dbInfo,"readwrite",function($,G){if($)return z($);try{var ot=G.objectStore(q._dbInfo.storeName).delete(L);G.oncomplete=function(){O()},G.onerror=function(){z(ot.error)},G.onabort=function(){var lt=ot.error?ot.error:ot.transaction.error;z(lt)}}catch(lt){z(lt)}})}).catch(z)});return E(T,U),T},clear:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){dt(U._dbInfo,"readwrite",function(z,$){if(z)return O(z);try{var G=$.objectStore(U._dbInfo.storeName).clear();$.oncomplete=function(){T()},$.onabort=$.onerror=function(){var ot=G.error?G.error:G.transaction.error;O(ot)}}catch(ot){O(ot)}})}).catch(O)});return E(q,L),q},length:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){dt(U._dbInfo,"readonly",function(z,$){if(z)return O(z);try{var G=$.objectStore(U._dbInfo.storeName).count();G.onsuccess=function(){T(G.result)},G.onerror=function(){O(G.error)}}catch(ot){O(ot)}})}).catch(O)});return E(q,L),q},key:function(L,U){var q=this,T=new o(function(O,z){L<0?O(null):q.ready().then(function(){dt(q._dbInfo,"readonly",function($,G){if($)return z($);try{var ot=G.objectStore(q._dbInfo.storeName),lt=!1,pt=ot.openKeyCursor();pt.onsuccess=function(){var kt=pt.result;kt?L===0||lt?O(kt.key):(lt=!0,kt.advance(L)):O(null)},pt.onerror=function(){z(pt.error)}}catch(kt){z(kt)}})}).catch(z)});return E(T,U),T},keys:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){dt(U._dbInfo,"readonly",function(z,$){if(z)return O(z);try{var G=$.objectStore(U._dbInfo.storeName).openKeyCursor(),ot=[];G.onsuccess=function(){var lt=G.result;lt?(ot.push(lt.key),lt.continue()):T(ot)},G.onerror=function(){O(G.error)}}catch(lt){O(lt)}})}).catch(O)});return E(q,L),q},dropInstance:function(L,U){U=b.apply(this,arguments);var q=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||q.name,L.storeName=L.storeName||q.storeName);var T,O=this;if(L.name){var z=L.name===q.name&&O._dbInfo.db,$=z?o.resolve(O._dbInfo.db):M(L).then(function(G){var ot=i[L.name],lt=ot.forages;ot.db=G;for(var pt=0;pt<lt.length;pt++)lt[pt]._dbInfo.db=G;return G});T=L.storeName?$.then(function(G){if(G.objectStoreNames.contains(L.storeName)){var ot=G.version+1;_(L);var lt=i[L.name],pt=lt.forages;G.close();for(var kt=0;kt<pt.length;kt++){var Nt=pt[kt];Nt._dbInfo.db=null,Nt._dbInfo.version=ot}return new o(function(Mt,zt){var $t=d.open(L.name,ot);$t.onerror=function(ie){$t.result.close(),zt(ie)},$t.onupgradeneeded=function(){$t.result.deleteObjectStore(L.storeName)},$t.onsuccess=function(){var ie=$t.result;ie.close(),Mt(ie)}}).then(function(Mt){lt.db=Mt;for(var zt=0;zt<pt.length;zt++){var $t=pt[zt];$t._dbInfo.db=Mt,S($t._dbInfo)}}).catch(function(Mt){throw(f(L,Mt)||o.resolve()).catch(function(){}),Mt})}}):$.then(function(G){_(L);var ot=i[L.name],lt=ot.forages;G.close();for(var pt=0;pt<lt.length;pt++)lt[pt]._dbInfo.db=null;return new o(function(kt,Nt){var Mt=d.deleteDatabase(L.name);Mt.onerror=function(){var zt=Mt.result;zt&&zt.close(),Nt(Mt.error)},Mt.onblocked=function(){console.warn('dropInstance blocked for database "'+L.name+'" until all open connections are closed')},Mt.onsuccess=function(){var zt=Mt.result;zt&&zt.close(),kt(zt)}}).then(function(kt){ot.db=kt;for(var Nt=0;Nt<lt.length;Nt++)S(lt[Nt]._dbInfo)}).catch(function(kt){throw(f(L,kt)||o.resolve()).catch(function(){}),kt})})}else T=o.reject("Invalid arguments");return E(T,U),T}},St="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=/^~~local_forage_type~([^~]+)~/,tt=9,st=tt+4,rt=Object.prototype.toString;function xt(L){var U,q,T,O,z,$=.75*L.length,G=L.length,ot=0;L[L.length-1]==="="&&($--,L[L.length-2]==="="&&$--);var lt=new ArrayBuffer($),pt=new Uint8Array(lt);for(U=0;U<G;U+=4)q=St.indexOf(L[U]),T=St.indexOf(L[U+1]),O=St.indexOf(L[U+2]),z=St.indexOf(L[U+3]),pt[ot++]=q<<2|T>>4,pt[ot++]=(15&T)<<4|O>>2,pt[ot++]=(3&O)<<6|63&z;return lt}function bt(L){var U,q=new Uint8Array(L),T="";for(U=0;U<q.length;U+=3)T+=St[q[U]>>2],T+=St[(3&q[U])<<4|q[U+1]>>4],T+=St[(15&q[U+1])<<2|q[U+2]>>6],T+=St[63&q[U+2]];return q.length%3==2?T=T.substring(0,T.length-1)+"=":q.length%3==1&&(T=T.substring(0,T.length-2)+"=="),T}var wt={serialize:function(L,U){var q="";if(L&&(q=rt.call(L)),L&&(q==="[object ArrayBuffer]"||L.buffer&&rt.call(L.buffer)==="[object ArrayBuffer]")){var T,O="__lfsc__:";L instanceof ArrayBuffer?(T=L,O+="arbf"):(T=L.buffer,q==="[object Int8Array]"?O+="si08":q==="[object Uint8Array]"?O+="ui08":q==="[object Uint8ClampedArray]"?O+="uic8":q==="[object Int16Array]"?O+="si16":q==="[object Uint16Array]"?O+="ur16":q==="[object Int32Array]"?O+="si32":q==="[object Uint32Array]"?O+="ui32":q==="[object Float32Array]"?O+="fl32":q==="[object Float64Array]"?O+="fl64":U(new Error("Failed to get type for BinaryArray"))),U(O+bt(T))}else if(q==="[object Blob]"){var z=new FileReader;z.onload=function(){var $="~~local_forage_type~"+L.type+"~"+bt(this.result);U("__lfsc__:blob"+$)},z.readAsArrayBuffer(L)}else try{U(JSON.stringify(L))}catch($){console.error("Couldn't convert value into a JSON string: ",L),U(null,$)}},deserialize:function(L){if(L.substring(0,tt)!=="__lfsc__:")return JSON.parse(L);var U,q=L.substring(st),T=L.substring(tt,st);if(T==="blob"&&ut.test(q)){var O=q.match(ut);U=O[1],q=q.substring(O[0].length)}var z=xt(q);switch(T){case"arbf":return z;case"blob":return l([z],{type:U});case"si08":return new Int8Array(z);case"ui08":return new Uint8Array(z);case"uic8":return new Uint8ClampedArray(z);case"si16":return new Int16Array(z);case"ur16":return new Uint16Array(z);case"si32":return new Int32Array(z);case"ui32":return new Uint32Array(z);case"fl32":return new Float32Array(z);case"fl64":return new Float64Array(z);default:throw new Error("Unkown type: "+T)}},stringToBuffer:xt,bufferToString:bt};function Rt(L,U,q,T){L.executeSql("CREATE TABLE IF NOT EXISTS "+U.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],q,T)}function Lt(L,U,q,T,O,z){L.executeSql(q,T,O,function($,G){G.code===G.SYNTAX_ERR?$.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[U.storeName],function(ot,lt){lt.rows.length?z(ot,G):Rt(ot,U,function(){ot.executeSql(q,T,O,z)},z)},z):z($,G)},z)}function vt(L,U,q,T){var O=this;L=c(L);var z=new o(function($,G){O.ready().then(function(){U===void 0&&(U=null);var ot=U,lt=O._dbInfo;lt.serializer.serialize(U,function(pt,kt){kt?G(kt):lt.db.transaction(function(Nt){Lt(Nt,lt,"INSERT OR REPLACE INTO "+lt.storeName+" (key, value) VALUES (?, ?)",[L,pt],function(){$(ot)},function(Mt,zt){G(zt)})},function(Nt){if(Nt.code===Nt.QUOTA_ERR){if(T>0)return void $(vt.apply(O,[L,ot,q,T-1]));G(Nt)}})})}).catch(G)});return E(z,q),z}function It(L){return new o(function(U,q){L.transaction(function(T){T.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,z){for(var $=[],G=0;G<z.rows.length;G++)$.push(z.rows.item(G).name);U({db:L,storeNames:$})},function(O,z){q(z)})},function(T){q(T)})})}var Vt={_driver:"webSQLStorage",_initStorage:function(L){var U=this,q={db:null};if(L)for(var T in L)q[T]=typeof L[T]!="string"?L[T].toString():L[T];var O=new o(function(z,$){try{q.db=openDatabase(q.name,String(q.version),q.description,q.size)}catch(G){return $(G)}q.db.transaction(function(G){Rt(G,q,function(){U._dbInfo=q,z()},function(ot,lt){$(lt)})},$)});return q.serializer=wt,O},_support:typeof openDatabase=="function",iterate:function(L,U){var q=this,T=new o(function(O,z){q.ready().then(function(){var $=q._dbInfo;$.db.transaction(function(G){Lt(G,$,"SELECT * FROM "+$.storeName,[],function(ot,lt){for(var pt=lt.rows,kt=pt.length,Nt=0;Nt<kt;Nt++){var Mt=pt.item(Nt),zt=Mt.value;if(zt&&(zt=$.serializer.deserialize(zt)),(zt=L(zt,Mt.key,Nt+1))!==void 0)return void O(zt)}O()},function(ot,lt){z(lt)})})}).catch(z)});return E(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,z){q.ready().then(function(){var $=q._dbInfo;$.db.transaction(function(G){Lt(G,$,"SELECT * FROM "+$.storeName+" WHERE key = ? LIMIT 1",[L],function(ot,lt){var pt=lt.rows.length?lt.rows.item(0).value:null;pt&&(pt=$.serializer.deserialize(pt)),O(pt)},function(ot,lt){z(lt)})})}).catch(z)});return E(T,U),T},setItem:function(L,U,q){return vt.apply(this,[L,U,q,1])},removeItem:function(L,U){var q=this;L=c(L);var T=new o(function(O,z){q.ready().then(function(){var $=q._dbInfo;$.db.transaction(function(G){Lt(G,$,"DELETE FROM "+$.storeName+" WHERE key = ?",[L],function(){O()},function(ot,lt){z(lt)})})}).catch(z)});return E(T,U),T},clear:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function($){Lt($,z,"DELETE FROM "+z.storeName,[],function(){T()},function(G,ot){O(ot)})})}).catch(O)});return E(q,L),q},length:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function($){Lt($,z,"SELECT COUNT(key) as c FROM "+z.storeName,[],function(G,ot){var lt=ot.rows.item(0).c;T(lt)},function(G,ot){O(ot)})})}).catch(O)});return E(q,L),q},key:function(L,U){var q=this,T=new o(function(O,z){q.ready().then(function(){var $=q._dbInfo;$.db.transaction(function(G){Lt(G,$,"SELECT key FROM "+$.storeName+" WHERE id = ? LIMIT 1",[L+1],function(ot,lt){var pt=lt.rows.length?lt.rows.item(0).key:null;O(pt)},function(ot,lt){z(lt)})})}).catch(z)});return E(T,U),T},keys:function(L){var U=this,q=new o(function(T,O){U.ready().then(function(){var z=U._dbInfo;z.db.transaction(function($){Lt($,z,"SELECT key FROM "+z.storeName,[],function(G,ot){for(var lt=[],pt=0;pt<ot.rows.length;pt++)lt.push(ot.rows.item(pt).key);T(lt)},function(G,ot){O(ot)})})}).catch(O)});return E(q,L),q},dropInstance:function(L,U){U=b.apply(this,arguments);var q=this.config();(L=typeof L!="function"&&L||{}).name||(L.name=L.name||q.name,L.storeName=L.storeName||q.storeName);var T,O=this;return E(T=L.name?new o(function(z){var $;$=L.name===q.name?O._dbInfo.db:openDatabase(L.name,"","",0),L.storeName?z({db:$,storeNames:[L.storeName]}):z(It($))}).then(function(z){return new o(function($,G){z.db.transaction(function(ot){function lt(Mt){return new o(function(zt,$t){ot.executeSql("DROP TABLE IF EXISTS "+Mt,[],function(){zt()},function(ie,re){$t(re)})})}for(var pt=[],kt=0,Nt=z.storeNames.length;kt<Nt;kt++)pt.push(lt(z.storeNames[kt]));o.all(pt).then(function(){$()}).catch(function(Mt){G(Mt)})},function(ot){G(ot)})})}):o.reject("Invalid arguments"),U),T}};function Ft(L,U){var q=L.name+"/";return L.storeName!==U.storeName&&(q+=L.storeName+"/"),q}function C(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch{return!0}}()||localStorage.length>0}var u={_driver:"localStorageWrapper",_initStorage:function(L){var U={};if(L)for(var q in L)U[q]=L[q];return U.keyPrefix=Ft(L,this._defaultConfig),C()?(this._dbInfo=U,U.serializer=wt,o.resolve()):o.reject()},_support:function(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}(),iterate:function(L,U){var q=this,T=q.ready().then(function(){for(var O=q._dbInfo,z=O.keyPrefix,$=z.length,G=localStorage.length,ot=1,lt=0;lt<G;lt++){var pt=localStorage.key(lt);if(pt.indexOf(z)===0){var kt=localStorage.getItem(pt);if(kt&&(kt=O.serializer.deserialize(kt)),(kt=L(kt,pt.substring($),ot++))!==void 0)return kt}}});return E(T,U),T},getItem:function(L,U){var q=this;L=c(L);var T=q.ready().then(function(){var O=q._dbInfo,z=localStorage.getItem(O.keyPrefix+L);return z&&(z=O.serializer.deserialize(z)),z});return E(T,U),T},setItem:function(L,U,q){var T=this;L=c(L);var O=T.ready().then(function(){U===void 0&&(U=null);var z=U;return new o(function($,G){var ot=T._dbInfo;ot.serializer.serialize(U,function(lt,pt){if(pt)G(pt);else try{localStorage.setItem(ot.keyPrefix+L,lt),$(z)}catch(kt){kt.name!=="QuotaExceededError"&&kt.name!=="NS_ERROR_DOM_QUOTA_REACHED"||G(kt),G(kt)}})})});return E(O,q),O},removeItem:function(L,U){var q=this;L=c(L);var T=q.ready().then(function(){var O=q._dbInfo;localStorage.removeItem(O.keyPrefix+L)});return E(T,U),T},clear:function(L){var U=this,q=U.ready().then(function(){for(var T=U._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var z=localStorage.key(O);z.indexOf(T)===0&&localStorage.removeItem(z)}});return E(q,L),q},length:function(L){var U=this.keys().then(function(q){return q.length});return E(U,L),U},key:function(L,U){var q=this,T=q.ready().then(function(){var O,z=q._dbInfo;try{O=localStorage.key(L)}catch{O=null}return O&&(O=O.substring(z.keyPrefix.length)),O});return E(T,U),T},keys:function(L){var U=this,q=U.ready().then(function(){for(var T=U._dbInfo,O=localStorage.length,z=[],$=0;$<O;$++){var G=localStorage.key($);G.indexOf(T.keyPrefix)===0&&z.push(G.substring(T.keyPrefix.length))}return z});return E(q,L),q},dropInstance:function(L,U){if(U=b.apply(this,arguments),!(L=typeof L!="function"&&L||{}).name){var q=this.config();L.name=L.name||q.name,L.storeName=L.storeName||q.storeName}var T,O=this;return E(T=L.name?new o(function(z){L.storeName?z(Ft(L,O._defaultConfig)):z(L.name+"/")}).then(function(z){for(var $=localStorage.length-1;$>=0;$--){var G=localStorage.key($);G.indexOf(z)===0&&localStorage.removeItem(G)}}):o.reject("Invalid arguments"),U),T}},e=function(L,U){for(var q,T,O=L.length,z=0;z<O;){if((q=L[z])===(T=U)||typeof q=="number"&&typeof T=="number"&&isNaN(q)&&isNaN(T))return!0;z++}return!1},A=Array.isArray||function(L){return Object.prototype.toString.call(L)==="[object Array]"},R={},I={},D={INDEXEDDB:ht,WEBSQL:Vt,LOCALSTORAGE:u},H=[D.INDEXEDDB._driver,D.WEBSQL._driver,D.LOCALSTORAGE._driver],J=["dropInstance"],at=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(J),et={description:"",driver:H.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function gt(L,U){L[U]=function(){var q=arguments;return L.ready().then(function(){return L[U].apply(L,q)})}}function Et(){for(var L=1;L<arguments.length;L++){var U=arguments[L];if(U)for(var q in U)U.hasOwnProperty(q)&&(A(U[q])?arguments[0][q]=U[q].slice():arguments[0][q]=U[q])}return arguments[0]}var mt=new(function(){function L(U){for(var q in function(z,$){if(!(z instanceof $))throw new TypeError("Cannot call a class as a function")}(this,L),D)if(D.hasOwnProperty(q)){var T=D[q],O=T._driver;this[q]=O,R[O]||this.defineDriver(T)}this._defaultConfig=Et({},et),this._config=Et({},this._defaultConfig,U),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return L.prototype.config=function(U){if((U===void 0?"undefined":s(U))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var q in U){if(q==="storeName"&&(U[q]=U[q].replace(/\W/g,"_")),q==="version"&&typeof U[q]!="number")return new Error("Database version must be a number.");this._config[q]=U[q]}return!("driver"in U)||!U.driver||this.setDriver(this._config.driver)}return typeof U=="string"?this._config[U]:this._config},L.prototype.defineDriver=function(U,q,T){var O=new o(function(z,$){try{var G=U._driver,ot=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!U._driver)return void $(ot);for(var lt=at.concat("_initStorage"),pt=0,kt=lt.length;pt<kt;pt++){var Nt=lt[pt];if((!e(J,Nt)||U[Nt])&&typeof U[Nt]!="function")return void $(ot)}(function(){for(var zt=function(we){return function(){var be=new Error("Method "+we+" is not implemented by the current driver"),Be=o.reject(be);return E(Be,arguments[arguments.length-1]),Be}},$t=0,ie=J.length;$t<ie;$t++){var re=J[$t];U[re]||(U[re]=zt(re))}})();var Mt=function(zt){R[G]&&console.info("Redefining LocalForage driver: "+G),R[G]=U,I[G]=zt,z()};"_support"in U?U._support&&typeof U._support=="function"?U._support().then(Mt,$):Mt(!!U._support):Mt(!0)}catch(zt){$(zt)}});return r(O,q,T),O},L.prototype.driver=function(){return this._driver||null},L.prototype.getDriver=function(U,q,T){var O=R[U]?o.resolve(R[U]):o.reject(new Error("Driver not found."));return r(O,q,T),O},L.prototype.getSerializer=function(U){var q=o.resolve(wt);return r(q,U),q},L.prototype.ready=function(U){var q=this,T=q._driverSet.then(function(){return q._ready===null&&(q._ready=q._initDriver()),q._ready});return r(T,U,U),T},L.prototype.setDriver=function(U,q,T){var O=this;A(U)||(U=[U]);var z=this._getSupportedDrivers(U);function $(){O._config.driver=O.driver()}function G(lt){return O._extend(lt),$(),O._ready=O._initStorage(O._config),O._ready}var ot=this._driverSet!==null?this._driverSet.catch(function(){return o.resolve()}):o.resolve();return this._driverSet=ot.then(function(){var lt=z[0];return O._dbInfo=null,O._ready=null,O.getDriver(lt).then(function(pt){O._driver=pt._driver,$(),O._wrapLibraryMethodsWithReady(),O._initDriver=function(kt){return function(){var Nt=0;return function Mt(){for(;Nt<kt.length;){var zt=kt[Nt];return Nt++,O._dbInfo=null,O._ready=null,O.getDriver(zt).then(G).catch(Mt)}$();var $t=new Error("No available storage method found.");return O._driverSet=o.reject($t),O._driverSet}()}}(z)})}).catch(function(){$();var lt=new Error("No available storage method found.");return O._driverSet=o.reject(lt),O._driverSet}),r(this._driverSet,q,T),this._driverSet},L.prototype.supports=function(U){return!!I[U]},L.prototype._extend=function(U){Et(this,U)},L.prototype._getSupportedDrivers=function(U){for(var q=[],T=0,O=U.length;T<O;T++){var z=U[T];this.supports(z)&&q.push(z)}return q},L.prototype._wrapLibraryMethodsWithReady=function(){for(var U=0,q=at.length;U<q;U++)gt(this,at[U])},L.prototype.createInstance=function(U){return new L(U)},L}());h.exports=mt},{3:3}]},{},[4])(4)}).call(this,g(17))},function(Y,P,g){"use strict";var x=g(3),y=g.n(x),h=g(0),p=g(5),s=g(4),d=g(2),l=g(6),o=g(8),E=function(C,u,e,A){var R,I=typeof window<"u"&&window.URL,D=I?"blob":"arraybuffer",H=new h.defer,J=new XMLHttpRequest,at=XMLHttpRequest.prototype;for(R in"overrideMimeType"in at||Object.defineProperty(at,"overrideMimeType",{value:function(){}}),e&&(J.withCredentials=!0),J.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var et=!1;if(this.responseType!==""&&this.responseType!=="document"||(et=this.responseXML),this.status===200||this.status===0||et){var gt;if(!this.response&&!et)return H.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),H.promise;if(this.status===403)return H.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),H.promise;gt=et?this.responseXML:Object(h.isXml)(u)?Object(h.parse)(this.response,"text/xml"):u=="xhtml"?Object(h.parse)(this.response,"application/xhtml+xml"):u=="html"||u=="htm"?Object(h.parse)(this.response,"text/html"):u=="json"?JSON.parse(this.response):u=="blob"?I?this.response:new Blob([this.response]):this.response,H.resolve(gt)}else H.reject({status:this.status,message:this.response,stack:new Error().stack})}},J.onerror=function(et){H.reject(et)},J.open("GET",C,!0),A)J.setRequestHeader(R,A[R]);return u=="json"&&J.setRequestHeader("Accept","application/json"),u||(u=new s.a(C).extension),u=="blob"&&(J.responseType=D),Object(h.isXml)(u)&&J.overrideMimeType("text/xml"),u=="binary"&&(J.responseType="arraybuffer"),J.send(),H.promise},r=g(15),c=class{constructor(C,u){this.idref=C.idref,this.linear=C.linear==="yes",this.properties=C.properties,this.index=C.index,this.href=C.href,this.url=C.url,this.canonical=C.canonical,this.next=C.next,this.prev=C.prev,this.cfiBase=C.cfiBase,u?this.hooks=u:(this.hooks={},this.hooks.serialize=new l.a(this),this.hooks.content=new l.a(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(C){var u=C||this.request||E,e=new h.defer,A=e.promise;return this.contents?e.resolve(this.contents):u(this.url).then((function(R){return this.document=R,this.contents=R.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){e.resolve(this.contents)}).bind(this)).catch(function(R){e.reject(R)}),A}base(){return Object(o.a)(this.document,this)}render(C){var u=new h.defer,e=u.promise;return this.output,this.load(C).then((function(A){var R=(typeof navigator<"u"&&navigator.userAgent||"").indexOf("Trident")>=0,I=new(typeof XMLSerializer>"u"||R?r.DOMParser:XMLSerializer);return this.output=I.serializeToString(A),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){u.resolve(this.output)}).bind(this)).catch(function(A){u.reject(A)}),e}find(C){var u=this,e=[],A=C.toLowerCase();return Object(h.sprint)(u.document,function(R){(function(I){for(var D,H,J,at=I.textContent.toLowerCase(),et=u.document.createRange(),gt=-1;H!=-1;)(H=at.indexOf(A,gt+1))!=-1&&((et=u.document.createRange()).setStart(I,H),et.setEnd(I,H+A.length),D=u.cfiFromRange(et),J=I.textContent.length<150?I.textContent:"..."+(J=I.textContent.substring(H-75,H+75))+"...",e.push({cfi:D,excerpt:J})),gt=H})(R)}),e}search(C,u=5){if(document.createTreeWalker===void 0)return this.find(C);let e=[];const A=this,R=C.toLowerCase(),I=function(at){const et=at.reduce((gt,Et)=>gt+Et.textContent,"").toLowerCase().indexOf(R);if(et!=-1){const Et=et+R.length;let mt=0,L=0;if(et<at[0].length){let U;for(;mt<at.length-1&&(L+=at[mt].length,!(Et<=L));)mt+=1;let q=at[0],T=at[mt],O=A.document.createRange();O.setStart(q,et);let z=at.slice(0,mt).reduce((G,ot)=>G+ot.textContent.length,0);O.setEnd(T,z>Et?Et:Et-z),U=A.cfiFromRange(O);let $=at.slice(0,mt+1).reduce((G,ot)=>G+ot.textContent,"");$.length>150&&($=$.substring(et-75,et+75),$="..."+$+"..."),e.push({cfi:U,excerpt:$})}}},D=document.createTreeWalker(A.document,NodeFilter.SHOW_TEXT,null,!1);let H,J=[];for(;H=D.nextNode();)J.push(H),J.length==u&&(I(J.slice(0,u)),J=J.slice(1,u));return J.length>0&&I(J),e}reconcileLayoutSettings(C){var u={layout:C.layout,spread:C.spread,orientation:C.orientation};return this.properties.forEach(function(e){var A,R,I=e.replace("rendition:",""),D=I.indexOf("-");D!=-1&&(A=I.slice(0,D),R=I.slice(D+1),u[A]=R)}),u}cfiFromRange(C){return new d.a(C,this.cfiBase).toString()}cfiFromElement(C){return new d.a(C,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}},b=class{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new l.a,this.hooks.content=new l.a,this.hooks.content.register(o.a),this.hooks.content.register(o.b),this.hooks.content.register(o.d),this.epubcfi=new d.a,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(C,u,e){this.items=C.spine,this.manifest=C.manifest,this.spineNodeIndex=C.spineNodeIndex,this.baseUrl=C.baseUrl||C.basePath||"",this.length=this.items.length,this.items.forEach((A,R)=>{var I,D=this.manifest[A.idref];A.index=R,A.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,A.index,A.id),A.href&&(A.url=u(A.href,!0),A.canonical=e(A.href)),D&&(A.href=D.href,A.url=u(A.href,!0),A.canonical=e(A.href),D.properties.length&&A.properties.push.apply(A.properties,D.properties)),A.linear==="yes"?(A.prev=(function(){let H=A.index;for(;H>0;){let J=this.get(H-1);if(J&&J.linear)return J;H-=1}}).bind(this),A.next=(function(){let H=A.index;for(;H<this.spineItems.length-1;){let J=this.get(H+1);if(J&&J.linear)return J;H+=1}}).bind(this)):(A.prev=function(){},A.next=function(){}),I=new c(A,this.hooks),this.append(I)}),this.loaded=!0}get(C){var u=0;if(C===void 0)for(;u<this.spineItems.length;){let e=this.spineItems[u];if(e&&e.linear)break;u+=1}else this.epubcfi.isCfiString(C)?u=new d.a(C).spinePos:typeof C=="number"||isNaN(C)===!1?u=C:typeof C=="string"&&C.indexOf("#")===0?u=this.spineById[C.substring(1)]:typeof C=="string"&&(C=C.split("#")[0],u=this.spineByHref[C]||this.spineByHref[encodeURI(C)]);return this.spineItems[u]||null}append(C){var u=this.spineItems.length;return C.index=u,this.spineItems.push(C),this.spineByHref[decodeURI(C.href)]=u,this.spineByHref[encodeURI(C.href)]=u,this.spineByHref[C.href]=u,this.spineById[C.idref]=u,u}prepend(C){return this.spineByHref[C.href]=0,this.spineById[C.idref]=0,this.spineItems.forEach(function(u,e){u.index=e}),0}remove(C){var u=this.spineItems.indexOf(C);if(u>-1)return delete this.spineByHref[C.href],delete this.spineById[C.idref],this.spineItems.splice(u,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let C=0;do{let u=this.get(C);if(u&&u.linear)return u;C+=1}while(C<this.spineItems.length)}last(){let C=this.spineItems.length-1;do{let u=this.get(C);if(u&&u.linear)return u;C-=1}while(C>=0)}destroy(){this.each(C=>C.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}},n=g(9),i=g(1);class a{constructor(u,e,A){this.spine=u,this.request=e,this.pause=A||100,this.q=new n.a(this),this.epubcfi=new d.a,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(u){return u&&(this.break=u),this.q.pause(),this.spine.each((function(e){e.linear&&this.q.enqueue(this.process.bind(this),e)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(u){return u.load(this.request).then((function(e){var A=new h.defer,R=this.parse(e,u.cfiBase);return this._locations=this._locations.concat(R),u.unload(),this.processingTimeout=setTimeout(()=>A.resolve(R),this.pause),A.promise}).bind(this))}parse(u,e,A){var R,I,D=[],H=u.ownerDocument,J=Object(h.qs)(H,"body"),at=0,et=A||this.break;if(Object(h.sprint)(J,(function(gt){var Et,mt=gt.length,L=0;if(gt.textContent.trim().length===0)return!1;for(at==0&&((R=this.createRange()).startContainer=gt,R.startOffset=0),(Et=et-at)>mt&&(at+=mt,L=mt);L<mt;)if(Et=et-at,at===0&&(L+=1,(R=this.createRange()).startContainer=gt,R.startOffset=L),L+Et>=mt)at+=mt-L,L=mt;else{L+=Et,R.endContainer=gt,R.endOffset=L;let U=new d.a(R,e).toString();D.push(U),at=0}I=gt}).bind(this)),R&&R.startContainer&&I){R.endContainer=I,R.endOffset=I.length;let gt=new d.a(R,e).toString();D.push(gt),at=0}return D}generateFromWords(u,e,A){var R=u?new d.a(u):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(I){I.linear&&(R?I.index>=R.spinePos&&this.q.enqueue(this.processWords.bind(this),I,e,R,A):this.q.enqueue(this.processWords.bind(this),I,e,R,A))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(u,e,A,R){return R&&this._locationsWords.length>=R?Promise.resolve():u.load(this.request).then((function(I){var D=new h.defer,H=this.parseWords(I,u,e,A),J=R-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(H.length>=R?H.slice(0,J):H),u.unload(),this.processingTimeout=setTimeout(()=>D.resolve(H),this.pause),D.promise}).bind(this))}countWords(u){return(u=(u=(u=u.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[ ]{2,}/gi," ")).replace(/\n /,`
`)).split(" ").length}parseWords(u,e,A,R){var I,D=e.cfiBase,H=[],J=u.ownerDocument,at=Object(h.qs)(J,"body"),et=A,gt=!R||R.spinePos!==e.index;return R&&e.index===R.spinePos&&(I=R.findNode(R.range?R.path.steps.concat(R.start.steps):R.path.steps,u.ownerDocument)),Object(h.sprint)(at,(function(Et){if(!gt){if(Et!==I)return!1;gt=!0}if(Et.textContent.length<10&&Et.textContent.trim().length===0)return!1;var mt,L=this.countWords(Et.textContent),U=0;if(L===0)return!1;for((mt=et-this._wordCounter)>L&&(this._wordCounter+=L,U=L);U<L;)if(U+(mt=et-this._wordCounter)>=L)this._wordCounter+=L-U,U=L;else{U+=mt;let q=new d.a(Et,D);H.push({cfi:q.toString(),wordCount:this._wordCounter}),this._wordCounter=0}}).bind(this)),H}locationFromCfi(u){let e;return d.a.prototype.isCfiString(u)&&(u=new d.a(u)),this._locations.length===0?-1:(e=Object(h.locationOf)(u,this._locations,this.epubcfi.compare),e>this.total?this.total:e)}percentageFromCfi(u){if(this._locations.length===0)return null;var e=this.locationFromCfi(u);return this.percentageFromLocation(e)}percentageFromLocation(u){return u&&this.total?u/this.total:0}cfiFromLocation(u){var e=-1;return typeof u!="number"&&(u=parseInt(u)),u>=0&&u<this._locations.length&&(e=this._locations[u]),e}cfiFromPercentage(u){let e;if(u>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),u>=1){let A=new d.a(this._locations[this.total]);return A.collapse(),A.toString()}return e=Math.ceil(this.total*u),this.cfiFromLocation(e)}load(u){return this._locations=typeof u=="string"?JSON.parse(u):u,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(u){var e;if(typeof u=="string")this._currentCfi=u;else{if(typeof u!="number")return;this._current=u}this._locations.length!==0&&(typeof u=="string"?(e=this.locationFromCfi(u),this._current=e):e=u,this.emit(i.c.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(e)}))}get currentLocation(){return this._current}set currentLocation(u){this.setCurrent(u)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}y()(a.prototype);var m=a,_=g(7),S=g.n(_),f=class{constructor(C){this.packagePath="",this.directory="",this.encoding="",C&&this.parse(C)}parse(C){var u;if(!C)throw new Error("Container File Not Found");if(!(u=Object(h.qs)(C,"rootfile")))throw new Error("No RootFile Found");this.packagePath=u.getAttribute("full-path"),this.directory=S.a.dirname(this.packagePath),this.encoding=C.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}},k=class{constructor(C){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},C&&this.parse(C)}parse(C){var u,e,A;if(!C)throw new Error("Package File Not Found");if(!(u=Object(h.qs)(C,"metadata")))throw new Error("No Metadata Found");if(!(e=Object(h.qs)(C,"manifest")))throw new Error("No Manifest Found");if(!(A=Object(h.qs)(C,"spine")))throw new Error("No Spine Found");return this.manifest=this.parseManifest(e),this.navPath=this.findNavPath(e),this.ncxPath=this.findNcxPath(e,A),this.coverPath=this.findCoverPath(C),this.spineNodeIndex=Object(h.indexOfElementNode)(A),this.spine=this.parseSpine(A,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(C),this.metadata=this.parseMetadata(u),this.metadata.direction=A.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(C){var u={};return u.title=this.getElementText(C,"title"),u.creator=this.getElementText(C,"creator"),u.description=this.getElementText(C,"description"),u.pubdate=this.getElementText(C,"date"),u.publisher=this.getElementText(C,"publisher"),u.identifier=this.getElementText(C,"identifier"),u.language=this.getElementText(C,"language"),u.rights=this.getElementText(C,"rights"),u.modified_date=this.getPropertyText(C,"dcterms:modified"),u.layout=this.getPropertyText(C,"rendition:layout"),u.orientation=this.getPropertyText(C,"rendition:orientation"),u.flow=this.getPropertyText(C,"rendition:flow"),u.viewport=this.getPropertyText(C,"rendition:viewport"),u.media_active_class=this.getPropertyText(C,"media:active-class"),u.spread=this.getPropertyText(C,"rendition:spread"),u}parseManifest(C){var u={},e=Object(h.qsa)(C,"item");return Array.prototype.slice.call(e).forEach(function(A){var R=A.getAttribute("id"),I=A.getAttribute("href")||"",D=A.getAttribute("media-type")||"",H=A.getAttribute("media-overlay")||"",J=A.getAttribute("properties")||"";u[R]={href:I,type:D,overlay:H,properties:J.length?J.split(" "):[]}}),u}parseSpine(C,u){var e=[],A=Object(h.qsa)(C,"itemref");return Array.prototype.slice.call(A).forEach(function(R,I){var D=R.getAttribute("idref"),H=R.getAttribute("properties")||"",J=H.length?H.split(" "):[],at={id:R.getAttribute("id"),idref:D,linear:R.getAttribute("linear")||"yes",properties:J,index:I};e.push(at)}),e}findUniqueIdentifier(C){var u=C.documentElement.getAttribute("unique-identifier");if(!u)return"";var e=C.getElementById(u);return e&&e.localName==="identifier"&&e.namespaceURI==="http://purl.org/dc/elements/1.1/"&&e.childNodes.length>0?e.childNodes[0].nodeValue.trim():""}findNavPath(C){var u=Object(h.qsp)(C,"item",{properties:"nav"});return!!u&&u.getAttribute("href")}findNcxPath(C,u){var e,A=Object(h.qsp)(C,"item",{"media-type":"application/x-dtbncx+xml"});return A||(e=u.getAttribute("toc"))&&(A=C.querySelector("#"+e)),!!A&&A.getAttribute("href")}findCoverPath(C){Object(h.qs)(C,"package").getAttribute("version");var u=Object(h.qsp)(C,"item",{properties:"cover-image"});if(u)return u.getAttribute("href");var e=Object(h.qsp)(C,"meta",{name:"cover"});if(e){var A=e.getAttribute("content"),R=C.getElementById(A);return R?R.getAttribute("href"):""}return!1}getElementText(C,u){var e,A=C.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",u);return A&&A.length!==0&&(e=A[0]).childNodes.length?e.childNodes[0].nodeValue:""}getPropertyText(C,u){var e=Object(h.qsp)(C,"meta",{property:u});return e&&e.childNodes.length?e.childNodes[0].nodeValue:""}load(C){this.metadata=C.metadata;let u=C.readingOrder||C.spine;return this.spine=u.map((e,A)=>(e.index=A,e.linear=e.linear||"yes",e)),C.resources.forEach((e,A)=>{this.manifest[A]=e,e.rel&&e.rel[0]==="cover"&&(this.coverPath=e.href)}),this.spineNodeIndex=0,this.toc=C.toc.map((e,A)=>(e.label=e.title,e)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}},M=class{constructor(C){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,C&&this.parse(C)}parse(C){let u,e,A=C.nodeType;A&&(u=Object(h.qs)(C,"html"),e=Object(h.qs)(C,"ncx")),A?u?(this.toc=this.parseNav(C),this.landmarks=this.parseLandmarks(C)):e&&(this.toc=this.parseNcx(C)):this.toc=this.load(C),this.length=0,this.unpack(this.toc)}unpack(C){for(var u,e=0;e<C.length;e++)(u=C[e]).href&&(this.tocByHref[u.href]=e),u.id&&(this.tocById[u.id]=e),this.length++,u.subitems.length&&this.unpack(u.subitems)}get(C){var u;return C?(C.indexOf("#")===0?u=this.tocById[C.substring(1)]:C in this.tocByHref&&(u=this.tocByHref[C]),this.getByIndex(C,u,this.toc)):this.toc}getByIndex(C,u,e){if(e.length===0)return;const A=e[u];if(!A||C!==A.id&&C!==A.href){let R;for(let I=0;I<e.length&&(R=this.getByIndex(C,u,e[I].subitems),!R);++I);return R}return A}landmark(C){var u;return C?(u=this.landmarksByType[C],this.landmarks[u]):this.landmarks}parseNav(C){var u=Object(h.querySelectorByType)(C,"nav","toc"),e=[];if(!u)return e;let A=Object(h.filterChildren)(u,"ol",!0);return A?e=this.parseNavList(A):e}parseNavList(C,u){const e=[];if(!C||!C.children)return e;for(let A=0;A<C.children.length;A++){const R=this.navItem(C.children[A],u);R&&e.push(R)}return e}navItem(C,u){let e=C.getAttribute("id")||void 0,A=Object(h.filterChildren)(C,"a",!0)||Object(h.filterChildren)(C,"span",!0);if(!A)return;let R=A.getAttribute("href")||"";e||(e=R);let I=A.textContent||"",D=[],H=Object(h.filterChildren)(C,"ol",!0);return H&&(D=this.parseNavList(H,e)),{id:e,href:R,label:I,subitems:D,parent:u}}parseLandmarks(C){var u,e,A=Object(h.querySelectorByType)(C,"nav","landmarks"),R=A?Object(h.qsa)(A,"li"):[],I=R.length,D=[];if(!R||I===0)return D;for(u=0;u<I;++u)(e=this.landmarkItem(R[u]))&&(D.push(e),this.landmarksByType[e.type]=u);return D}landmarkItem(C){let u=Object(h.filterChildren)(C,"a",!0);if(!u)return;let e=u.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0;return{href:u.getAttribute("href")||"",label:u.textContent||"",type:e}}parseNcx(C){var u,e,A=Object(h.qsa)(C,"navPoint"),R=A.length,I={},D=[];if(!A||R===0)return D;for(u=0;u<R;++u)I[(e=this.ncxItem(A[u])).id]=e,e.parent?I[e.parent].subitems.push(e):D.push(e);return D}ncxItem(C){var u,e=C.getAttribute("id")||!1,A=Object(h.qs)(C,"content").getAttribute("src"),R=Object(h.qs)(C,"navLabel"),I=R.textContent?R.textContent:"",D=C.parentNode;return!D||D.nodeName!=="navPoint"&&D.nodeName.split(":").slice(-1)[0]!=="navPoint"||(u=D.getAttribute("id")),{id:e,href:A,label:I,subitems:[],parent:u}}load(C){return C.map(u=>(u.label=u.title,u.subitems=u.children?this.load(u.children):[],u))}forEach(C){return this.toc.forEach(C)}},X={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},B=function(){var C,u,e,A,R={};for(C in X)if(X.hasOwnProperty(C)){for(u in X[C])if(X[C].hasOwnProperty(u))if(typeof(e=X[C][u])=="string")R[e]=C+"/"+u;else for(A=0;A<e.length;A++)R[e[A]]=C+"/"+u}return R}(),V={lookup:function(C){return C&&B[C.split(".").pop().toLowerCase()]||"text/plain"}},w=class{constructor(C,u){this.settings={replacements:u&&u.replacements||"base64",archive:u&&u.archive,resolver:u&&u.resolver,request:u&&u.request},this.process(C)}process(C){this.manifest=C,this.resources=Object.keys(C).map(function(u){return C[u]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(C){if(C.type==="application/xhtml+xml"||C.type==="text/html")return!0}),this.assets=this.resources.filter(function(C){if(C.type!=="application/xhtml+xml"&&C.type!=="text/html")return!0}),this.css=this.resources.filter(function(C){if(C.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(C){return C.href}).bind(this)),this.cssUrls=this.css.map(function(C){return C.href})}createUrl(C){var u=new p.a(C),e=V.lookup(u.filename);return this.settings.archive?this.settings.archive.createUrl(C,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(C,"blob").then(A=>Object(h.blob2base64)(A)).then(A=>Object(h.createBase64Url)(A,e)):this.settings.request(C,"blob").then(A=>Object(h.createBlobUrl)(A,e))}replacements(){if(this.settings.replacements==="none")return new Promise((function(u){u(this.urls)}).bind(this));var C=this.urls.map(u=>{var e=this.settings.resolver(u);return this.createUrl(e).catch(A=>(console.error(A),null))});return Promise.all(C).then(u=>(this.replacementUrls=u.filter(e=>typeof e=="string"),u))}replaceCss(C,u){var e=[];return C=C||this.settings.archive,u=u||this.settings.resolver,this.cssUrls.forEach((function(A){var R=this.createCssFile(A,C,u).then((function(I){var D=this.urls.indexOf(A);D>-1&&(this.replacementUrls[D]=I)}).bind(this));e.push(R)}).bind(this)),Promise.all(e)}createCssFile(C){if(S.a.isAbsolute(C))return new Promise(function(R){R()});var u,e=this.settings.resolver(C);u=this.settings.archive?this.settings.archive.getText(e):this.settings.request(e,"text");var A=this.urls.map(R=>{var I=this.settings.resolver(R);return new s.a(e).relative(I)});return u?u.then(R=>(R=Object(o.e)(R,A,this.replacementUrls),this.settings.replacements==="base64"?Object(h.createBase64Url)(R,"text/css"):Object(h.createBlobUrl)(R,"text/css")),R=>new Promise(function(I){I()})):new Promise(function(R){R()})}relativeTo(C,u){return u=u||this.settings.resolver,this.urls.map((function(e){var A=u(e);return new s.a(C).relative(A)}).bind(this))}get(C){var u=this.urls.indexOf(C);if(u!==-1)return this.replacementUrls.length?new Promise((function(e,A){e(this.replacementUrls[u])}).bind(this)):this.createUrl(C)}substitute(C,u){var e;return e=u?this.relativeTo(u):this.urls,Object(o.e)(C,e,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}},Q=class{constructor(C){this.pages=[],this.locations=[],this.epubcfi=new d.a,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,C&&(this.pageList=this.parse(C)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(C){var u=Object(h.qs)(C,"html"),e=Object(h.qs)(C,"ncx");return u?this.parseNav(C):e?this.parseNcx(C):void 0}parseNav(C){var u,e,A=Object(h.querySelectorByType)(C,"nav","page-list"),R=A?Object(h.qsa)(A,"li"):[],I=R.length,D=[];if(!R||I===0)return D;for(u=0;u<I;++u)e=this.item(R[u]),D.push(e);return D}parseNcx(C){var u,e,A,R,I=[],D=0;if(!(e=Object(h.qs)(C,"pageList"))||(R=(A=Object(h.qsa)(e,"pageTarget")).length,!A||A.length===0))return I;for(D=0;D<R;++D)u=this.ncxItem(A[D]),I.push(u);return I}ncxItem(C){var u=Object(h.qs)(C,"navLabel"),e=Object(h.qs)(u,"text").textContent;return{href:Object(h.qs)(C,"content").getAttribute("src"),page:parseInt(e,10)}}item(C){var u,e,A=Object(h.qs)(C,"a"),R=A.getAttribute("href")||"",I=A.textContent||"",D=parseInt(I);return R.indexOf("epubcfi")!=-1?(e=(u=R.split("#"))[0],{cfi:u.length>1&&u[1],href:R,packageUrl:e,page:D}):{href:R,page:D}}process(C){C.forEach(function(u){this.pages.push(u.page),u.cfi&&this.locations.push(u.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(C){var u=-1;if(this.locations.length===0)return-1;var e=Object(h.indexOfSorted)(C,this.locations,this.epubcfi.compare);return e!=-1?u=this.pages[e]:(u=(e=Object(h.locationOf)(C,this.locations,this.epubcfi.compare))-1>=0?this.pages[e-1]:this.pages[0])!==void 0||(u=-1),u}cfiFromPage(C){var u=-1;typeof C!="number"&&(C=parseInt(C));var e=this.pages.indexOf(C);return e!=-1&&(u=this.locations[e]),u}pageFromPercentage(C){return Math.round(this.totalPages*C)}percentageFromPage(C){var u=(C-this.firstPage)/this.totalPages;return Math.round(1e3*u)/1e3}percentageFromCfi(C){var u=this.pageFromCfi(C);return this.percentageFromPage(u)}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}},dt=g(16),ht=g(29),St=g.n(ht),ut=class{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new St.a}catch{throw new Error("JSZip lib not loaded")}}open(C,u){return this.zip.loadAsync(C,{base64:u})}openUrl(C,u){return E(C,"binary").then((function(e){return this.zip.loadAsync(e,{base64:u})}).bind(this))}request(C,u){var e,A=new h.defer,R=new s.a(C);return u||(u=R.extension),(e=u=="blob"?this.getBlob(C):this.getText(C))?e.then((function(I){let D=this.handleResponse(I,u);A.resolve(D)}).bind(this)):A.reject({message:"File not found in the epub: "+C,stack:new Error().stack}),A.promise}handleResponse(C,u){return u=="json"?JSON.parse(C):Object(h.isXml)(u)?Object(h.parse)(C,"text/xml"):u=="xhtml"?Object(h.parse)(C,"application/xhtml+xml"):u=="html"||u=="htm"?Object(h.parse)(C,"text/html"):C}getBlob(C,u){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return u=u||V.lookup(A.name),A.async("uint8array").then(function(R){return new Blob([R],{type:u})})}getText(C,u){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return A.async("string").then(function(R){return R})}getBase64(C,u){var e=window.decodeURIComponent(C.substr(1)),A=this.zip.file(e);if(A)return u=u||V.lookup(A.name),A.async("base64").then(function(R){return"data:"+u+";base64,"+R})}createUrl(C,u){var e,A,R=new h.defer,I=window.URL||window.webkitURL||window.mozURL,D=u&&u.base64;return C in this.urlCache?(R.resolve(this.urlCache[C]),R.promise):(D?(A=this.getBase64(C))&&A.then((function(H){this.urlCache[C]=H,R.resolve(H)}).bind(this)):(A=this.getBlob(C))&&A.then((function(H){e=I.createObjectURL(H),this.urlCache[C]=e,R.resolve(e)}).bind(this)),A||R.reject({message:"File not found in the epub: "+C,stack:new Error().stack}),R.promise)}revokeUrl(C){var u=window.URL||window.webkitURL||window.mozURL,e=this.urlCache[C];e&&u.revokeObjectURL(e)}destroy(){var C=window.URL||window.webkitURL||window.mozURL;for(let u in this.urlCache)C.revokeObjectURL(u);this.zip=void 0,this.urlCache={}}},tt=g(23),st=g.n(tt);class rt{constructor(u,e,A){this.urlCache={},this.storage=void 0,this.name=u,this.requester=e||E,this.resolver=A,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let u;st.a===void 0&&(u=st.a),this.storage=u.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(u){let e=navigator.onLine;this.online=e,e?this.emit("online",this):this.emit("offline",this)}add(u,e){let A=u.resources.map(R=>{let{href:I}=R,D=this.resolver(I),H=window.encodeURIComponent(D);return this.storage.getItem(H).then(J=>!J||e?this.requester(D,"binary").then(at=>this.storage.setItem(H,at)):J)});return Promise.all(A)}put(u,e,A){let R=window.encodeURIComponent(u);return this.storage.getItem(R).then(I=>I||this.requester(u,"binary",e,A).then(D=>this.storage.setItem(R,D)))}request(u,e,A,R){return this.online?this.requester(u,e,A,R).then(I=>(this.put(u),I)):this.retrieve(u,e)}retrieve(u,e){new h.defer;var A=new s.a(u);return e||(e=A.extension),(e=="blob"?this.getBlob(u):this.getText(u)).then(R=>{var I,D=new h.defer;return R?(I=this.handleResponse(R,e),D.resolve(I)):D.reject({message:"File not found in storage: "+u,stack:new Error().stack}),D.promise})}handleResponse(u,e){return e=="json"?JSON.parse(u):Object(h.isXml)(e)?Object(h.parse)(u,"text/xml"):e=="xhtml"?Object(h.parse)(u,"application/xhtml+xml"):e=="html"||e=="htm"?Object(h.parse)(u,"text/html"):u}getBlob(u,e){let A=window.encodeURIComponent(u);return this.storage.getItem(A).then(function(R){if(R)return e=e||V.lookup(u),new Blob([R],{type:e})})}getText(u,e){let A=window.encodeURIComponent(u);return e=e||V.lookup(u),this.storage.getItem(A).then(function(R){var I,D=new h.defer,H=new FileReader;if(R)return I=new Blob([R],{type:e}),H.addEventListener("loadend",()=>{D.resolve(H.result)}),H.readAsText(I,e),D.promise})}getBase64(u,e){let A=window.encodeURIComponent(u);return e=e||V.lookup(u),this.storage.getItem(A).then(R=>{var I,D=new h.defer,H=new FileReader;if(R)return I=new Blob([R],{type:e}),H.addEventListener("loadend",()=>{D.resolve(H.result)}),H.readAsDataURL(I,e),D.promise})}createUrl(u,e){var A,R,I=new h.defer,D=window.URL||window.webkitURL||window.mozURL,H=e&&e.base64;return u in this.urlCache?(I.resolve(this.urlCache[u]),I.promise):(H?(R=this.getBase64(u))&&R.then((function(J){this.urlCache[u]=J,I.resolve(J)}).bind(this)):(R=this.getBlob(u))&&R.then((function(J){A=D.createObjectURL(J),this.urlCache[u]=A,I.resolve(A)}).bind(this)),R||I.reject({message:"File not found in storage: "+u,stack:new Error().stack}),I.promise)}revokeUrl(u){var e=window.URL||window.webkitURL||window.mozURL,A=this.urlCache[u];A&&e.revokeObjectURL(A)}destroy(){var u=window.URL||window.webkitURL||window.mozURL;for(let e in this.urlCache)u.revokeObjectURL(e);this.urlCache={},this.removeListeners()}}y()(rt.prototype);var xt=rt,bt=class{constructor(C){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",C&&this.parse(C)}parse(C){if(!C)return this;const u=Object(h.qs)(C,"display_options");return u?(Object(h.qsa)(u,"option").forEach(e=>{let A="";switch(e.childNodes.length&&(A=e.childNodes[0].nodeValue),e.attributes.name.value){case"interactive":this.interactive=A;break;case"fixed-layout":this.fixedLayout=A;break;case"open-to-spread":this.openToSpread=A;break;case"orientation-lock":this.orientationLock=A}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}};const wt="binary",Rt="base64",Lt="epub",vt="opf",It="json",Vt="directory";class Ft{constructor(u,e){e===void 0&&typeof u!="string"&&!(u instanceof Blob)&&!(u instanceof ArrayBuffer)&&(e=u,u=void 0),this.settings=Object(h.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Object(h.extend)(this.settings,e),this.opening=new h.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new h.defer,spine:new h.defer,metadata:new h.defer,cover:new h.defer,navigation:new h.defer,pageList:new h.defer,resources:new h.defer,displayOptions:new h.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||E,this.spine=new b,this.locations=new m(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),u&&this.open(u,this.settings.openAs).catch(A=>{var R=new Error("Cannot load book at "+u);this.emit(i.c.BOOK.OPEN_FAILED,R)})}open(u,e){var A,R=e||this.determineType(u);return R===wt?(this.archived=!0,this.url=new p.a("/",""),A=this.openEpub(u)):R===Rt?(this.archived=!0,this.url=new p.a("/",""),A=this.openEpub(u,R)):R===Lt?(this.archived=!0,this.url=new p.a("/",""),A=this.request(u,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):R==vt?(this.url=new p.a(u),A=this.openPackaging(this.url.Path.toString())):R==It?(this.url=new p.a(u),A=this.openManifest(this.url.Path.toString())):(this.url=new p.a(u),A=this.openContainer("META-INF/container.xml").then(this.openPackaging.bind(this))),A}openEpub(u,e){return this.unarchive(u,e||this.settings.encoding).then(()=>this.openContainer("META-INF/container.xml")).then(A=>this.openPackaging(A))}openContainer(u){return this.load(u).then(e=>(this.container=new f(e),this.resolve(this.container.packagePath)))}openPackaging(u){return this.path=new s.a(u),this.load(u).then(e=>(this.packaging=new k(e),this.unpack(this.packaging)))}openManifest(u){return this.path=new s.a(u),this.load(u).then(e=>(this.packaging=new k,this.packaging.load(e),this.unpack(this.packaging)))}load(u){var e=this.resolve(u);return this.archived?this.archive.request(e):this.request(e,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(u,e){if(u){var A=u;return u.indexOf("://")>-1?u:(this.path&&(A=this.path.resolve(u)),e!=0&&this.url&&(A=this.url.resolve(A)),A)}}canonical(u){return u?this.settings.canonical?this.settings.canonical(u):this.resolve(u,!0):""}determineType(u){var e;return this.settings.encoding==="base64"?Rt:typeof u!="string"?wt:((e=new p.a(u).path().extension)&&(e=e.replace(/\?.*$/,"")),e?e==="epub"?Lt:e==="opf"?vt:e==="json"?It:void 0:Vt)}unpack(u){this.package=u,this.packaging.metadata.layout===""?this.load(this.url.resolve("META-INF/com.apple.ibooks.display-options.xml")).then(e=>{this.displayOptions=new bt(e),this.loading.displayOptions.resolve(this.displayOptions)}).catch(e=>{this.displayOptions=new bt,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new bt,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new w(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(e=>{console.error(e)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(u){let e=u.navPath||u.ncxPath,A=u.toc;return A?new Promise((R,I)=>{this.navigation=new M(A),u.pageList&&(this.pageList=new Q(u.pageList)),R(this.navigation)}):e?this.load(e,"xml").then(R=>(this.navigation=new M(R),this.pageList=new Q(R),this.navigation)):new Promise((R,I)=>{this.navigation=new M,this.pageList=new Q,R(this.navigation)})}section(u){return this.spine.get(u)}renderTo(u,e){return this.rendition=new dt.a(this,e),this.rendition.attachTo(u),this.rendition}setRequestCredentials(u){this.settings.requestCredentials=u}setRequestHeaders(u){this.settings.requestHeaders=u}unarchive(u,e){return this.archive=new ut,this.archive.open(u,e)}store(u){let e=this.settings.replacements&&this.settings.replacements!=="none",A=this.url,R=this.settings.requestMethod||E.bind(this);return this.storage=new xt(u,R,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let I=(D,H)=>{H.output=this.resources.substitute(D,H.url)};this.resources.settings.replacements=e||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new p.a("/",""),this.spine.hooks.serialize.register(I)}),this.storage.on("online",()=>{this.url=A,this.spine.hooks.serialize.deregister(I)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((u,e)=>{e.output=this.resources.substitute(u,e.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(u){var e=new d.a(u),A=this.spine.get(e.spinePos),R=this.load.bind(this);return A?A.load(R).then(function(I){return e.toRange(A.document)}):new Promise((I,D)=>{D("CFI could not be found")})}key(u){var e=u||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${i.b}:${e}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}y()(Ft.prototype),P.a=Ft},function(Y,P,g){var x=g(14).NAMESPACE;function y(T){return T!==""}function h(T,O){return T.hasOwnProperty(O)||(T[O]=!0),T}function p(T){if(!T)return[];var O=function(z){return z?z.split(/[\t\n\f\r ]+/).filter(y):[]}(T);return Object.keys(O.reduce(h,{}))}function s(T,O){for(var z in T)O[z]=T[z]}function d(T,O){var z=T.prototype;if(!(z instanceof O)){let G=function(){};var $=G;G.prototype=O.prototype,s(z,G=new G),T.prototype=z=G}z.constructor!=T&&(typeof T!="function"&&console.error("unknown Class:"+T),z.constructor=T)}var l={},o=l.ELEMENT_NODE=1,E=l.ATTRIBUTE_NODE=2,r=l.TEXT_NODE=3,c=l.CDATA_SECTION_NODE=4,b=l.ENTITY_REFERENCE_NODE=5,n=l.ENTITY_NODE=6,i=l.PROCESSING_INSTRUCTION_NODE=7,a=l.COMMENT_NODE=8,m=l.DOCUMENT_NODE=9,_=l.DOCUMENT_TYPE_NODE=10,S=l.DOCUMENT_FRAGMENT_NODE=11,f=l.NOTATION_NODE=12,k={},M={},X=(k.INDEX_SIZE_ERR=(M[1]="Index size error",1),k.DOMSTRING_SIZE_ERR=(M[2]="DOMString size error",2),k.HIERARCHY_REQUEST_ERR=(M[3]="Hierarchy request error",3)),B=(k.WRONG_DOCUMENT_ERR=(M[4]="Wrong document",4),k.INVALID_CHARACTER_ERR=(M[5]="Invalid character",5),k.NO_DATA_ALLOWED_ERR=(M[6]="No data allowed",6),k.NO_MODIFICATION_ALLOWED_ERR=(M[7]="No modification allowed",7),k.NOT_FOUND_ERR=(M[8]="Not found",8)),V=(k.NOT_SUPPORTED_ERR=(M[9]="Not supported",9),k.INUSE_ATTRIBUTE_ERR=(M[10]="Attribute in use",10));k.INVALID_STATE_ERR=(M[11]="Invalid state",11),k.SYNTAX_ERR=(M[12]="Syntax error",12),k.INVALID_MODIFICATION_ERR=(M[13]="Invalid modification",13),k.NAMESPACE_ERR=(M[14]="Invalid namespace",14),k.INVALID_ACCESS_ERR=(M[15]="Invalid access",15);function w(T,O){if(O instanceof Error)var z=O;else z=this,Error.call(this,M[T]),this.message=M[T],Error.captureStackTrace&&Error.captureStackTrace(this,w);return z.code=T,O&&(this.message=this.message+": "+O),z}function Q(){}function dt(T,O){this._node=T,this._refresh=O,ht(this)}function ht(T){var O=T._node._inc||T._node.ownerDocument._inc;if(T._inc!=O){var z=T._refresh(T._node);q(T,"length",z.length),s(z,T),T._inc=O}}function St(){}function ut(T,O){for(var z=T.length;z--;)if(T[z]===O)return z}function tt(T,O,z,$){if($?O[ut(O,$)]=z:O[O.length++]=z,T){z.ownerElement=T;var G=T.ownerDocument;G&&($&&Lt(G,T,$),function(ot,lt,pt){ot&&ot._inc++,pt.namespaceURI===x.XMLNS&&(lt._nsMap[pt.prefix?pt.localName:""]=pt.value)}(G,T,z))}}function st(T,O,z){var $=ut(O,z);if(!($>=0))throw w(B,new Error(T.tagName+"@"+z));for(var G=O.length-1;$<G;)O[$]=O[++$];if(O.length=G,T){var ot=T.ownerDocument;ot&&(Lt(ot,T,z),z.ownerElement=null)}}function rt(){}function xt(){}function bt(T){return(T=="<"?"&lt;":T==">"&&"&gt;")||T=="&"&&"&amp;"||T=='"'&&"&quot;"||"&#"+T.charCodeAt()+";"}function wt(T,O){if(O(T))return!0;if(T=T.firstChild)do if(wt(T,O))return!0;while(T=T.nextSibling)}function Rt(){}function Lt(T,O,z,$){T&&T._inc++,z.namespaceURI===x.XMLNS&&delete O._nsMap[z.prefix?z.localName:""]}function vt(T,O,z){if(T&&T._inc){T._inc++;var $=O.childNodes;if(z)$[$.length++]=z;else{for(var G=O.firstChild,ot=0;G;)$[ot++]=G,G=G.nextSibling;$.length=ot}}}function It(T,O){var z=O.previousSibling,$=O.nextSibling;return z?z.nextSibling=$:T.firstChild=$,$?$.previousSibling=z:T.lastChild=z,vt(T.ownerDocument,T),O}function Vt(T,O,z){var $=O.parentNode;if($&&$.removeChild(O),O.nodeType===S){var G=O.firstChild;if(G==null)return O;var ot=O.lastChild}else G=ot=O;var lt=z?z.previousSibling:T.lastChild;G.previousSibling=lt,ot.nextSibling=z,lt?lt.nextSibling=G:T.firstChild=G,z==null?T.lastChild=ot:z.previousSibling=ot;do G.parentNode=T;while(G!==ot&&(G=G.nextSibling));return vt(T.ownerDocument||T,T),O.nodeType==S&&(O.firstChild=O.lastChild=null),O}function Ft(){this._nsMap={}}function C(){}function u(){}function e(){}function A(){}function R(){}function I(){}function D(){}function H(){}function J(){}function at(){}function et(){}function gt(){}function Et(T,O){var z=[],$=this.nodeType==9&&this.documentElement||this,G=$.prefix,ot=$.namespaceURI;if(ot&&G==null&&(G=$.lookupPrefix(ot))==null)var lt=[{namespace:ot,prefix:null}];return U(this,z,T,O,lt),z.join("")}function mt(T,O,z){var $=T.prefix||"",G=T.namespaceURI;if(!G||$==="xml"&&G===x.XML||G===x.XMLNS)return!1;for(var ot=z.length;ot--;){var lt=z[ot];if(lt.prefix===$)return lt.namespace!==G}return!0}function L(T,O,z){T.push(" ",O,'="',z.replace(/[<&"]/g,bt),'"')}function U(T,O,z,$,G){if(G||(G=[]),$){if(!(T=$(T)))return;if(typeof T=="string")return void O.push(T)}switch(T.nodeType){case o:var ot=T.attributes,lt=ot.length,pt=T.firstChild,kt=T.tagName,Nt=kt;if(!(z=x.isHTML(T.namespaceURI)||z)&&!T.prefix&&T.namespaceURI){for(var Mt,zt=0;zt<ot.length;zt++)if(ot.item(zt).name==="xmlns"){Mt=ot.item(zt).value;break}if(!Mt){for(var $t=G.length-1;$t>=0;$t--)if((ie=G[$t]).prefix===""&&ie.namespace===T.namespaceURI){Mt=ie.namespace;break}}if(Mt!==T.namespaceURI)for($t=G.length-1;$t>=0;$t--){var ie;if((ie=G[$t]).namespace===T.namespaceURI){ie.prefix&&(Nt=ie.prefix+":"+kt);break}}}O.push("<",Nt);for(var re=0;re<lt;re++)(we=ot.item(re)).prefix=="xmlns"?G.push({prefix:we.localName,namespace:we.value}):we.nodeName=="xmlns"&&G.push({prefix:"",namespace:we.value});for(re=0;re<lt;re++){var we,be,Be;mt(we=ot.item(re),0,G)&&(L(O,(be=we.prefix||"")?"xmlns:"+be:"xmlns",Be=we.namespaceURI),G.push({prefix:be,namespace:Be})),U(we,O,z,$,G)}if(kt===Nt&&mt(T,0,G)&&(L(O,(be=T.prefix||"")?"xmlns:"+be:"xmlns",Be=T.namespaceURI),G.push({prefix:be,namespace:Be})),pt||z&&!/^(?:meta|link|img|br|hr|input)$/i.test(kt)){if(O.push(">"),z&&/^script$/i.test(kt))for(;pt;)pt.data?O.push(pt.data):U(pt,O,z,$,G.slice()),pt=pt.nextSibling;else for(;pt;)U(pt,O,z,$,G.slice()),pt=pt.nextSibling;O.push("</",Nt,">")}else O.push("/>");return;case m:case S:for(pt=T.firstChild;pt;)U(pt,O,z,$,G.slice()),pt=pt.nextSibling;return;case E:return L(O,T.name,T.value);case r:return O.push(T.data.replace(/[<&]/g,bt).replace(/]]>/g,"]]&gt;"));case c:return O.push("<![CDATA[",T.data,"]]>");case a:return O.push("<!--",T.data,"-->");case _:var Ae=T.publicId,Te=T.systemId;if(O.push("<!DOCTYPE ",T.name),Ae)O.push(" PUBLIC ",Ae),Te&&Te!="."&&O.push(" ",Te),O.push(">");else if(Te&&Te!=".")O.push(" SYSTEM ",Te,">");else{var vi=T.internalSubset;vi&&O.push(" [",vi,"]"),O.push(">")}return;case i:return O.push("<?",T.target," ",T.data,"?>");case b:return O.push("&",T.nodeName,";");default:O.push("??",T.nodeName)}}function q(T,O,z){T[O]=z}w.prototype=Error.prototype,s(k,w),Q.prototype={length:0,item:function(T){return this[T]||null},toString:function(T,O){for(var z=[],$=0;$<this.length;$++)U(this[$],z,T,O);return z.join("")}},dt.prototype.item=function(T){return ht(this),this[T]},d(dt,Q),St.prototype={length:0,item:Q.prototype.item,getNamedItem:function(T){for(var O=this.length;O--;){var z=this[O];if(z.nodeName==T)return z}},setNamedItem:function(T){var O=T.ownerElement;if(O&&O!=this._ownerElement)throw new w(V);var z=this.getNamedItem(T.nodeName);return tt(this._ownerElement,this,T,z),z},setNamedItemNS:function(T){var O,z=T.ownerElement;if(z&&z!=this._ownerElement)throw new w(V);return O=this.getNamedItemNS(T.namespaceURI,T.localName),tt(this._ownerElement,this,T,O),O},removeNamedItem:function(T){var O=this.getNamedItem(T);return st(this._ownerElement,this,O),O},removeNamedItemNS:function(T,O){var z=this.getNamedItemNS(T,O);return st(this._ownerElement,this,z),z},getNamedItemNS:function(T,O){for(var z=this.length;z--;){var $=this[z];if($.localName==O&&$.namespaceURI==T)return $}return null}},rt.prototype={hasFeature:function(T,O){return!0},createDocument:function(T,O,z){var $=new Rt;if($.implementation=this,$.childNodes=new Q,$.doctype=z||null,z&&$.appendChild(z),O){var G=$.createElementNS(T,O);$.appendChild(G)}return $},createDocumentType:function(T,O,z){var $=new I;return $.name=T,$.nodeName=T,$.publicId=O||"",$.systemId=z||"",$}},xt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(T,O){return Vt(this,T,O)},replaceChild:function(T,O){this.insertBefore(T,O),O&&this.removeChild(O)},removeChild:function(T){return It(this,T)},appendChild:function(T){return this.insertBefore(T,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(T){return function O(z,$,G){var ot=new $.constructor;for(var lt in $){var pt=$[lt];typeof pt!="object"&&pt!=ot[lt]&&(ot[lt]=pt)}switch($.childNodes&&(ot.childNodes=new Q),ot.ownerDocument=z,ot.nodeType){case o:var kt=$.attributes,Nt=ot.attributes=new St,Mt=kt.length;Nt._ownerElement=ot;for(var zt=0;zt<Mt;zt++)ot.setAttributeNode(O(z,kt.item(zt),!0));break;case E:G=!0}if(G)for(var $t=$.firstChild;$t;)ot.appendChild(O(z,$t,G)),$t=$t.nextSibling;return ot}(this.ownerDocument||this,this,T)},normalize:function(){for(var T=this.firstChild;T;){var O=T.nextSibling;O&&O.nodeType==r&&T.nodeType==r?(this.removeChild(O),T.appendData(O.data)):(T.normalize(),T=O)}},isSupported:function(T,O){return this.ownerDocument.implementation.hasFeature(T,O)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(T){for(var O=this;O;){var z=O._nsMap;if(z){for(var $ in z)if(z[$]==T)return $}O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},lookupNamespaceURI:function(T){for(var O=this;O;){var z=O._nsMap;if(z&&T in z)return z[T];O=O.nodeType==E?O.ownerDocument:O.parentNode}return null},isDefaultNamespace:function(T){return this.lookupPrefix(T)==null}},s(l,xt),s(l,xt.prototype),Rt.prototype={nodeName:"#document",nodeType:m,doctype:null,documentElement:null,_inc:1,insertBefore:function(T,O){if(T.nodeType==S){for(var z=T.firstChild;z;){var $=z.nextSibling;this.insertBefore(z,O),z=$}return T}return this.documentElement==null&&T.nodeType==o&&(this.documentElement=T),Vt(this,T,O),T.ownerDocument=this,T},removeChild:function(T){return this.documentElement==T&&(this.documentElement=null),It(this,T)},importNode:function(T,O){return function z($,G,ot){var lt;switch(G.nodeType){case o:(lt=G.cloneNode(!1)).ownerDocument=$;case S:break;case E:ot=!0}if(lt||(lt=G.cloneNode(!1)),lt.ownerDocument=$,lt.parentNode=null,ot)for(var pt=G.firstChild;pt;)lt.appendChild(z($,pt,ot)),pt=pt.nextSibling;return lt}(this,T,O)},getElementById:function(T){var O=null;return wt(this.documentElement,function(z){if(z.nodeType==o&&z.getAttribute("id")==T)return O=z,!0}),O},getElementsByClassName:function(T){var O=p(T);return new dt(this,function(z){var $=[];return O.length>0&&wt(z.documentElement,function(G){if(G!==z&&G.nodeType===o){var ot=G.getAttribute("class");if(ot){var lt=T===ot;if(!lt){var pt=p(ot);lt=O.every((kt=pt,function(Nt){return kt&&kt.indexOf(Nt)!==-1}))}lt&&$.push(G)}}var kt}),$})},createElement:function(T){var O=new Ft;return O.ownerDocument=this,O.nodeName=T,O.tagName=T,O.localName=T,O.childNodes=new Q,(O.attributes=new St)._ownerElement=O,O},createDocumentFragment:function(){var T=new at;return T.ownerDocument=this,T.childNodes=new Q,T},createTextNode:function(T){var O=new e;return O.ownerDocument=this,O.appendData(T),O},createComment:function(T){var O=new A;return O.ownerDocument=this,O.appendData(T),O},createCDATASection:function(T){var O=new R;return O.ownerDocument=this,O.appendData(T),O},createProcessingInstruction:function(T,O){var z=new et;return z.ownerDocument=this,z.tagName=z.target=T,z.nodeValue=z.data=O,z},createAttribute:function(T){var O=new C;return O.ownerDocument=this,O.name=T,O.nodeName=T,O.localName=T,O.specified=!0,O},createEntityReference:function(T){var O=new J;return O.ownerDocument=this,O.nodeName=T,O},createElementNS:function(T,O){var z=new Ft,$=O.split(":"),G=z.attributes=new St;return z.childNodes=new Q,z.ownerDocument=this,z.nodeName=O,z.tagName=O,z.namespaceURI=T,$.length==2?(z.prefix=$[0],z.localName=$[1]):z.localName=O,G._ownerElement=z,z},createAttributeNS:function(T,O){var z=new C,$=O.split(":");return z.ownerDocument=this,z.nodeName=O,z.name=O,z.namespaceURI=T,z.specified=!0,$.length==2?(z.prefix=$[0],z.localName=$[1]):z.localName=O,z}},d(Rt,xt),Ft.prototype={nodeType:o,hasAttribute:function(T){return this.getAttributeNode(T)!=null},getAttribute:function(T){var O=this.getAttributeNode(T);return O&&O.value||""},getAttributeNode:function(T){return this.attributes.getNamedItem(T)},setAttribute:function(T,O){var z=this.ownerDocument.createAttribute(T);z.value=z.nodeValue=""+O,this.setAttributeNode(z)},removeAttribute:function(T){var O=this.getAttributeNode(T);O&&this.removeAttributeNode(O)},appendChild:function(T){return T.nodeType===S?this.insertBefore(T,null):function(O,z){var $=z.parentNode;if($){var G=O.lastChild;$.removeChild(z),G=O.lastChild}return G=O.lastChild,z.parentNode=O,z.previousSibling=G,z.nextSibling=null,G?G.nextSibling=z:O.firstChild=z,O.lastChild=z,vt(O.ownerDocument,O,z),z}(this,T)},setAttributeNode:function(T){return this.attributes.setNamedItem(T)},setAttributeNodeNS:function(T){return this.attributes.setNamedItemNS(T)},removeAttributeNode:function(T){return this.attributes.removeNamedItem(T.nodeName)},removeAttributeNS:function(T,O){var z=this.getAttributeNodeNS(T,O);z&&this.removeAttributeNode(z)},hasAttributeNS:function(T,O){return this.getAttributeNodeNS(T,O)!=null},getAttributeNS:function(T,O){var z=this.getAttributeNodeNS(T,O);return z&&z.value||""},setAttributeNS:function(T,O,z){var $=this.ownerDocument.createAttributeNS(T,O);$.value=$.nodeValue=""+z,this.setAttributeNode($)},getAttributeNodeNS:function(T,O){return this.attributes.getNamedItemNS(T,O)},getElementsByTagName:function(T){return new dt(this,function(O){var z=[];return wt(O,function($){$===O||$.nodeType!=o||T!=="*"&&$.tagName!=T||z.push($)}),z})},getElementsByTagNameNS:function(T,O){return new dt(this,function(z){var $=[];return wt(z,function(G){G===z||G.nodeType!==o||T!=="*"&&G.namespaceURI!==T||O!=="*"&&G.localName!=O||$.push(G)}),$})}},Rt.prototype.getElementsByTagName=Ft.prototype.getElementsByTagName,Rt.prototype.getElementsByTagNameNS=Ft.prototype.getElementsByTagNameNS,d(Ft,xt),C.prototype.nodeType=E,d(C,xt),u.prototype={data:"",substringData:function(T,O){return this.data.substring(T,T+O)},appendData:function(T){T=this.data+T,this.nodeValue=this.data=T,this.length=T.length},insertData:function(T,O){this.replaceData(T,0,O)},appendChild:function(T){throw new Error(M[X])},deleteData:function(T,O){this.replaceData(T,O,"")},replaceData:function(T,O,z){z=this.data.substring(0,T)+z+this.data.substring(T+O),this.nodeValue=this.data=z,this.length=z.length}},d(u,xt),e.prototype={nodeName:"#text",nodeType:r,splitText:function(T){var O=this.data,z=O.substring(T);O=O.substring(0,T),this.data=this.nodeValue=O,this.length=O.length;var $=this.ownerDocument.createTextNode(z);return this.parentNode&&this.parentNode.insertBefore($,this.nextSibling),$}},d(e,u),A.prototype={nodeName:"#comment",nodeType:a},d(A,u),R.prototype={nodeName:"#cdata-section",nodeType:c},d(R,u),I.prototype.nodeType=_,d(I,xt),D.prototype.nodeType=f,d(D,xt),H.prototype.nodeType=n,d(H,xt),J.prototype.nodeType=b,d(J,xt),at.prototype.nodeName="#document-fragment",at.prototype.nodeType=S,d(at,xt),et.prototype.nodeType=i,d(et,xt),gt.prototype.serializeToString=function(T,O,z){return Et.call(T,O,z)},xt.prototype.toString=Et;try{Object.defineProperty&&(Object.defineProperty(dt.prototype,"length",{get:function(){return ht(this),this.$$length}}),Object.defineProperty(xt.prototype,"textContent",{get:function(){return function T(O){switch(O.nodeType){case o:case S:var z=[];for(O=O.firstChild;O;)O.nodeType!==7&&O.nodeType!==8&&z.push(T(O)),O=O.nextSibling;return z.join("");default:return O.nodeValue}}(this)},set:function(T){switch(this.nodeType){case o:case S:for(;this.firstChild;)this.removeChild(this.firstChild);(T||String(T))&&this.appendChild(this.ownerDocument.createTextNode(T));break;default:this.data=T,this.value=T,this.nodeValue=T}}}),q=function(T,O,z){T["$$"+O]=z})}catch{}P.DocumentType=I,P.DOMException=w,P.DOMImplementation=rt,P.Element=Ft,P.Node=xt,P.NodeList=Q,P.XMLSerializer=gt},function(Y,P,g){var x=g(52),y=typeof self=="object"&&self&&self.Object===Object&&self,h=x||y||Function("return this")();Y.exports=h},function(Y,P,g){var x=g(26).Symbol;Y.exports=x},function(Y,P,g){var x=g(21),y=g(19);Y.exports=function(h,p,s){var d=!0,l=!0;if(typeof h!="function")throw new TypeError("Expected a function");return y(s)&&(d="leading"in s?!!s.leading:d,l="trailing"in s?!!s.trailing:l),x(h,p,{leading:d,maxWait:p,trailing:l})}},function(Y,P){Y.exports=Z},function(Y,P,g){"use strict";g.r(P),(function(x){var y=g(24),h=g(16),p=g(2),s=g(12),d=g(0),l=g(1);g(20),g(10),g(22);function o(E,r){return new y.a(E,r)}o.VERSION=l.b,x!==void 0&&(x.EPUBJS_VERSION=l.b),o.Book=y.a,o.Rendition=h.a,o.Contents=s.a,o.CFI=p.a,o.utils=d,P.default=o}).call(this,g(17))},function(Y,P,g){"use strict";var x=g(32),y=g(40),h=g(41),p=g(42);(Y.exports=function(s,d){var l,o,E,r,c;return arguments.length<2||typeof s!="string"?(r=d,d=s,s=null):r=arguments[2],s==null?(l=E=!0,o=!1):(l=p.call(s,"c"),o=p.call(s,"e"),E=p.call(s,"w")),c={value:d,configurable:l,enumerable:o,writable:E},r?x(y(r),c):c}).gs=function(s,d,l){var o,E,r,c;return typeof s!="string"?(r=l,l=d,d=s,s=null):r=arguments[3],d==null?d=void 0:h(d)?l==null?l=void 0:h(l)||(r=l,l=void 0):(r=d,d=l=void 0),s==null?(o=!0,E=!1):(o=p.call(s,"c"),E=p.call(s,"e")),c={get:d,set:l,configurable:o,enumerable:E},r?x(y(r),c):c}},function(Y,P,g){"use strict";Y.exports=g(33)()?Object.assign:g(34)},function(Y,P,g){"use strict";Y.exports=function(){var x,y=Object.assign;return typeof y=="function"&&(y(x={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),x.foo+x.bar+x.trzy==="razdwatrzy")}},function(Y,P,g){"use strict";var x=g(35),y=g(39),h=Math.max;Y.exports=function(p,s){var d,l,o,E=h(arguments.length,2);for(p=Object(y(p)),o=function(r){try{p[r]=s[r]}catch(c){d||(d=c)}},l=1;l<E;++l)x(s=arguments[l]).forEach(o);if(d!==void 0)throw d;return p}},function(Y,P,g){"use strict";Y.exports=g(36)()?Object.keys:g(37)},function(Y,P,g){"use strict";Y.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},function(Y,P,g){"use strict";var x=g(18),y=Object.keys;Y.exports=function(h){return y(x(h)?Object(h):h)}},function(Y,P,g){"use strict";Y.exports=function(){}},function(Y,P,g){"use strict";var x=g(18);Y.exports=function(y){if(!x(y))throw new TypeError("Cannot use null or undefined");return y}},function(Y,P,g){"use strict";var x=g(18),y=Array.prototype.forEach,h=Object.create,p=function(s,d){var l;for(l in s)d[l]=s[l]};Y.exports=function(s){var d=h(null);return y.call(arguments,function(l){x(l)&&p(Object(l),d)}),d}},function(Y,P,g){"use strict";Y.exports=function(x){return typeof x=="function"}},function(Y,P,g){"use strict";Y.exports=g(43)()?String.prototype.contains:g(44)},function(Y,P,g){"use strict";var x="razdwatrzy";Y.exports=function(){return typeof x.contains=="function"&&x.contains("dwa")===!0&&x.contains("foo")===!1}},function(Y,P,g){"use strict";var x=String.prototype.indexOf;Y.exports=function(y){return x.call(this,y,arguments[1])>-1}},function(Y,P,g){"use strict";Y.exports=function(x){if(typeof x!="function")throw new TypeError(x+" is not a function");return x}},function(Y,P,g){var x=g(14),y=g(25),h=g(47),p=g(48),s=y.DOMImplementation,d=x.NAMESPACE,l=p.ParseError,o=p.XMLReader;function E(a){this.options=a||{locator:{}}}function r(){this.cdata=!1}function c(a,m){m.lineNumber=a.lineNumber,m.columnNumber=a.columnNumber}function b(a){if(a)return`
@`+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function n(a,m,_){return typeof a=="string"?a.substr(m,_):a.length>=m+_||m?new java.lang.String(a,m,_)+"":a}function i(a,m){a.currentElement?a.currentElement.appendChild(m):a.doc.appendChild(m)}E.prototype.parseFromString=function(a,m){var _=this.options,S=new o,f=_.domBuilder||new r,k=_.errorHandler,M=_.locator,X=_.xmlns||{},B=/\/x?html?$/.test(m),V=B?h.HTML_ENTITIES:h.XML_ENTITIES;return M&&f.setDocumentLocator(M),S.errorHandler=function(w,Q,dt){if(!w){if(Q instanceof r)return Q;w=Q}var ht={},St=w instanceof Function;function ut(tt){var st=w[tt];!st&&St&&(st=w.length==2?function(rt){w(tt,rt)}:w),ht[tt]=st&&function(rt){st("[xmldom "+tt+"]	"+rt+b(dt))}||function(){}}return dt=dt||{},ut("warning"),ut("error"),ut("fatalError"),ht}(k,f,M),S.domBuilder=_.domBuilder||f,B&&(X[""]=d.HTML),X.xml=X.xml||d.XML,a&&typeof a=="string"?S.parse(a,X,V):S.errorHandler.error("invalid doc source"),f.doc},r.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,m,_,S){var f=this.doc,k=f.createElementNS(a,_||m),M=S.length;i(this,k),this.currentElement=k,this.locator&&c(this.locator,k);for(var X=0;X<M;X++){a=S.getURI(X);var B=S.getValue(X),V=(_=S.getQName(X),f.createAttributeNS(a,_));this.locator&&c(S.getLocator(X),V),V.value=V.nodeValue=B,k.setAttributeNode(V)}},endElement:function(a,m,_){var S=this.currentElement;S.tagName,this.currentElement=S.parentNode},startPrefixMapping:function(a,m){},endPrefixMapping:function(a){},processingInstruction:function(a,m){var _=this.doc.createProcessingInstruction(a,m);this.locator&&c(this.locator,_),i(this,_)},ignorableWhitespace:function(a,m,_){},characters:function(a,m,_){if(a=n.apply(this,arguments)){if(this.cdata)var S=this.doc.createCDATASection(a);else S=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(S):/^\s*$/.test(a)&&this.doc.appendChild(S),this.locator&&c(this.locator,S)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,m,_){a=n.apply(this,arguments);var S=this.doc.createComment(a);this.locator&&c(this.locator,S),i(this,S)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,m,_){var S=this.doc.implementation;if(S&&S.createDocumentType){var f=S.createDocumentType(a,m,_);this.locator&&c(this.locator,f),i(this,f),this.doc.doctype=f}},warning:function(a){console.warn("[xmldom warning]	"+a,b(this.locator))},error:function(a){console.error("[xmldom error]	"+a,b(this.locator))},fatalError:function(a){throw new l(a,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){r.prototype[a]=function(){return null}}),P.__DOMHandler=r,P.DOMParser=E,P.DOMImplementation=y.DOMImplementation,P.XMLSerializer=y.XMLSerializer},function(Y,P,g){var x=g(14).freeze;P.XML_ENTITIES=x({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),P.HTML_ENTITIES=x({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",times:"\xD7",divide:"\xF7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",euro:"\u20AC",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),P.entityMap=P.HTML_ENTITIES},function(Y,P,g){var x=g(14).NAMESPACE,y=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=new RegExp("[\\-\\.0-9"+y.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),p=new RegExp("^"+y.source+h.source+"*(?::"+y.source+h.source+"*)?$");function s(m,_){this.message=m,this.locator=_,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function d(){}function l(m,_){return _.lineNumber=m.lineNumber,_.columnNumber=m.columnNumber,_}function o(m,_,S,f,k,M){function X(ht,St,ut){S.attributeNames.hasOwnProperty(ht)&&M.fatalError("Attribute "+ht+" redefined"),S.addValue(ht,St,ut)}for(var B,V=++_,w=0;;){var Q=m.charAt(V);switch(Q){case"=":if(w===1)B=m.slice(_,V),w=3;else{if(w!==2)throw new Error("attribute equal must after attrName");w=3}break;case"'":case'"':if(w===3||w===1){if(w===1&&(M.warning('attribute value must after "="'),B=m.slice(_,V)),_=V+1,!((V=m.indexOf(Q,_))>0))throw new Error("attribute value no end '"+Q+"' match");X(B,dt=m.slice(_,V).replace(/&#?\w+;/g,k),_-1),w=5}else{if(w!=4)throw new Error('attribute value must after "="');X(B,dt=m.slice(_,V).replace(/&#?\w+;/g,k),_),M.warning('attribute "'+B+'" missed start quot('+Q+")!!"),_=V+1,w=5}break;case"/":switch(w){case 0:S.setTagName(m.slice(_,V));case 5:case 6:case 7:w=7,S.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return M.error("unexpected end of input"),w==0&&S.setTagName(m.slice(_,V)),V;case">":switch(w){case 0:S.setTagName(m.slice(_,V));case 5:case 6:case 7:break;case 4:case 1:(dt=m.slice(_,V)).slice(-1)==="/"&&(S.closed=!0,dt=dt.slice(0,-1));case 2:w===2&&(dt=B),w==4?(M.warning('attribute "'+dt+'" missed quot(")!'),X(B,dt.replace(/&#?\w+;/g,k),_)):(x.isHTML(f[""])&&dt.match(/^(?:disabled|checked|selected)$/i)||M.warning('attribute "'+dt+'" missed value!! "'+dt+'" instead!!'),X(dt,dt,_));break;case 3:throw new Error("attribute value missed!!")}return V;case"\x80":Q=" ";default:if(Q<=" ")switch(w){case 0:S.setTagName(m.slice(_,V)),w=6;break;case 1:B=m.slice(_,V),w=2;break;case 4:var dt=m.slice(_,V).replace(/&#?\w+;/g,k);M.warning('attribute "'+dt+'" missed quot(")!!'),X(B,dt,_);case 5:w=6}else switch(w){case 2:S.tagName,x.isHTML(f[""])&&B.match(/^(?:disabled|checked|selected)$/i)||M.warning('attribute "'+B+'" missed value!! "'+B+'" instead2!!'),X(B,B,_),_=V,w=1;break;case 5:M.warning('attribute space is required"'+B+'"!!');case 6:w=1,_=V;break;case 3:w=4,_=V;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}V++}}function E(m,_,S){for(var f=m.tagName,k=null,M=m.length;M--;){var X=m[M],B=X.qName,V=X.value;if((ht=B.indexOf(":"))>0)var w=X.prefix=B.slice(0,ht),Q=B.slice(ht+1),dt=w==="xmlns"&&Q;else Q=B,w=null,dt=B==="xmlns"&&"";X.localName=Q,dt!==!1&&(k==null&&(k={},b(S,S={})),S[dt]=k[dt]=V,X.uri=x.XMLNS,_.startPrefixMapping(dt,V))}for(M=m.length;M--;)(w=(X=m[M]).prefix)&&(w==="xml"&&(X.uri=x.XML),w!=="xmlns"&&(X.uri=S[w||""]));var ht;(ht=f.indexOf(":"))>0?(w=m.prefix=f.slice(0,ht),Q=m.localName=f.slice(ht+1)):(w=null,Q=m.localName=f);var St=m.uri=S[w||""];if(_.startElement(St,Q,f,m),!m.closed)return m.currentNSMap=S,m.localNSMap=k,!0;if(_.endElement(St,Q,f),k)for(w in k)_.endPrefixMapping(w)}function r(m,_,S,f,k){if(/^(?:script|textarea)$/i.test(S)){var M=m.indexOf("</"+S+">",_),X=m.substring(_+1,M);if(/[&<]/.test(X))return/^script$/i.test(S)?(k.characters(X,0,X.length),M):(X=X.replace(/&#?\w+;/g,f),k.characters(X,0,X.length),M)}return _+1}function c(m,_,S,f){var k=f[S];return k==null&&((k=m.lastIndexOf("</"+S+">"))<_&&(k=m.lastIndexOf("</"+S)),f[S]=k),k<_}function b(m,_){for(var S in m)_[S]=m[S]}function n(m,_,S,f){switch(m.charAt(_+2)){case"-":return m.charAt(_+3)==="-"?(k=m.indexOf("-->",_+4))>_?(S.comment(m,_+4,k-_-4),k+3):(f.error("Unclosed comment"),-1):-1;default:if(m.substr(_+3,6)=="CDATA["){var k=m.indexOf("]]>",_+9);return S.startCDATA(),S.characters(m,_+9,k-_-9),S.endCDATA(),k+3}var M=function(dt,ht){var St,ut=[],tt=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(tt.lastIndex=ht,tt.exec(dt);St=tt.exec(dt);)if(ut.push(St),St[1])return ut}(m,_),X=M.length;if(X>1&&/!doctype/i.test(M[0][0])){var B=M[1][0],V=!1,w=!1;X>3&&(/^public$/i.test(M[2][0])?(V=M[3][0],w=X>4&&M[4][0]):/^system$/i.test(M[2][0])&&(w=M[3][0]));var Q=M[X-1];return S.startDTD(B,V,w),S.endDTD(),Q.index+Q[0].length}}return-1}function i(m,_,S){var f=m.indexOf("?>",_);if(f){var k=m.substring(_,f).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return k?(k[0].length,S.processingInstruction(k[1],k[2]),f+2):-1}return-1}function a(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,d.prototype={parse:function(m,_,S){var f=this.domBuilder;f.startDocument(),b(_,_={}),function(k,M,X,B,V){function w(H){var J=H.slice(1,-1);return J in X?X[J]:J.charAt(0)==="#"?function(at){if(at>65535){var et=55296+((at-=65536)>>10),gt=56320+(1023&at);return String.fromCharCode(et,gt)}return String.fromCharCode(at)}(parseInt(J.substr(1).replace("x","0x"))):(V.error("entity not found:"+H),H)}function Q(H){if(H>xt){var J=k.substring(xt,H).replace(/&#?\w+;/g,w);tt&&dt(xt),B.characters(J,0,H-xt),xt=H}}function dt(H,J){for(;H>=St&&(J=ut.exec(k));)ht=J.index,St=ht+J[0].length,tt.lineNumber++;tt.columnNumber=H-ht+1}for(var ht=0,St=0,ut=/.*(?:\r\n?|\n)|.*$/g,tt=B.locator,st=[{currentNSMap:M}],rt={},xt=0;;){try{var bt=k.indexOf("<",xt);if(bt<0){if(!k.substr(xt).match(/^\s*$/)){var wt=B.doc,Rt=wt.createTextNode(k.substr(xt));wt.appendChild(Rt),B.currentElement=Rt}return}switch(bt>xt&&Q(bt),k.charAt(bt+1)){case"/":var Lt=k.indexOf(">",bt+3),vt=k.substring(bt+2,Lt).replace(/[ \t\n\r]+$/g,""),It=st.pop();Lt<0?(vt=k.substring(bt+2).replace(/[\s<].*/,""),V.error("end tag name: "+vt+" is not complete:"+It.tagName),Lt=bt+1+vt.length):vt.match(/\s</)&&(vt=vt.replace(/[\s<].*/,""),V.error("end tag name: "+vt+" maybe not complete"),Lt=bt+1+vt.length);var Vt=It.localNSMap,Ft=It.tagName==vt;if(Ft||It.tagName&&It.tagName.toLowerCase()==vt.toLowerCase()){if(B.endElement(It.uri,It.localName,vt),Vt)for(var C in Vt)B.endPrefixMapping(C);Ft||V.fatalError("end tag name: "+vt+" is not match the current start tagName:"+It.tagName)}else st.push(It);Lt++;break;case"?":tt&&dt(bt),Lt=i(k,bt,B);break;case"!":tt&&dt(bt),Lt=n(k,bt,B,V);break;default:tt&&dt(bt);var u=new a,e=st[st.length-1].currentNSMap,A=(Lt=o(k,bt,u,e,w,V),u.length);if(!u.closed&&c(k,Lt,u.tagName,rt)&&(u.closed=!0,X.nbsp||V.warning("unclosed xml attribute")),tt&&A){for(var R=l(tt,{}),I=0;I<A;I++){var D=u[I];dt(D.offset),D.locator=l(tt,{})}B.locator=R,E(u,B,e)&&st.push(u),B.locator=tt}else E(u,B,e)&&st.push(u);x.isHTML(u.uri)&&!u.closed?Lt=r(k,Lt,u.tagName,w,B):Lt++}}catch(H){if(H instanceof s)throw H;V.error("element parse error: "+H),Lt=-1}Lt>xt?xt=Lt:Q(Math.max(bt,xt)+1)}}(m,_,S,f,this.errorHandler),f.endDocument()}},a.prototype={setTagName:function(m){if(!p.test(m))throw new Error("invalid tagName:"+m);this.tagName=m},addValue:function(m,_,S){if(!p.test(m))throw new Error("invalid attribute:"+m);this.attributeNames[m]=this.length,this[this.length++]={qName:m,value:_,offset:S}},length:0,getLocalName:function(m){return this[m].localName},getLocator:function(m){return this[m].locator},getQName:function(m){return this[m].qName},getURI:function(m){return this[m].uri},getValue:function(m){return this[m].value}},P.XMLReader=d,P.ParseError=s},function(Y,P,g){"use strict";function x(y){return document.createElementNS("http://www.w3.org/2000/svg",y)}Object.defineProperty(P,"__esModule",{value:!0}),P.createElement=x,P.default={createElement:x}},function(Y,P,g){"use strict";function x(p,s){function d(r){for(var c=s.length-1;c>=0;c--){var b=s[c],n=r.clientX,i=r.clientY;if(r.touches&&r.touches.length&&(n=r.touches[0].clientX,i=r.touches[0].clientY),h(b,p,n,i)){b.dispatchEvent(y(r));break}}}if(p.nodeName==="iframe"||p.nodeName==="IFRAME")try{this.target=p.contentDocument}catch{this.target=p}else this.target=p;for(var l=["mouseup","mousedown","click","touchstart"],o=0;o<l.length;o++){var E=l[o];this.target.addEventListener(E,function(r){return d(r)},!1)}}function y(p){var s=Object.assign({},p,{bubbles:!1});try{return new MouseEvent(p.type,s)}catch{var d=document.createEvent("MouseEvents");return d.initMouseEvent(p.type,!1,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget),d}}function h(p,s,d,l){var o=s.getBoundingClientRect();function E(n,i,a){var m=n.top-o.top,_=n.left-o.left,S=m+n.height,f=_+n.width;return m<=a&&_<=i&&S>a&&f>i}if(!E(p.getBoundingClientRect(),d,l))return!1;for(var r=p.getClientRects(),c=0,b=r.length;c<b;c++)if(E(r[c],d,l))return!0;return!1}Object.defineProperty(P,"__esModule",{value:!0}),P.proxyMouse=x,P.clone=y,P.default={proxyMouse:x}},function(Y,P,g){var x=g(26);Y.exports=function(){return x.Date.now()}},function(Y,P,g){(function(x){var y=typeof x=="object"&&x&&x.Object===Object&&x;Y.exports=y}).call(this,g(17))},function(Y,P,g){var x=g(54),y=g(19),h=g(56),p=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,d=/^0o[0-7]+$/i,l=parseInt;Y.exports=function(o){if(typeof o=="number")return o;if(h(o))return NaN;if(y(o)){var E=typeof o.valueOf=="function"?o.valueOf():o;o=y(E)?E+"":E}if(typeof o!="string")return o===0?o:+o;o=x(o);var r=s.test(o);return r||d.test(o)?l(o.slice(2),r?2:8):p.test(o)?NaN:+o}},function(Y,P,g){var x=g(55),y=/^\s+/;Y.exports=function(h){return h&&h.slice(0,x(h)+1).replace(y,"")}},function(Y,P){var g=/\s/;Y.exports=function(x){for(var y=x.length;y--&&g.test(x.charAt(y)););return y}},function(Y,P,g){var x=g(57),y=g(60);Y.exports=function(h){return typeof h=="symbol"||y(h)&&x(h)=="[object Symbol]"}},function(Y,P,g){var x=g(27),y=g(58),h=g(59),p=x?x.toStringTag:void 0;Y.exports=function(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":p&&p in Object(s)?y(s):h(s)}},function(Y,P,g){var x=g(27),y=Object.prototype,h=y.hasOwnProperty,p=y.toString,s=x?x.toStringTag:void 0;Y.exports=function(d){var l=h.call(d,s),o=d[s];try{d[s]=void 0;var E=!0}catch{}var r=p.call(d);return E&&(l?d[s]=o:delete d[s]),r}},function(Y,P){var g=Object.prototype.toString;Y.exports=function(x){return g.call(x)}},function(Y,P){Y.exports=function(g){return g!=null&&typeof g=="object"}}]).default});/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(Z,Y,P,g){"use strict";function x(j,W,K){return setTimeout(d(j,K),W)}function y(j,W,K){return Array.isArray(j)?(h(j,K[W],K),!0):!1}function h(j,W,K){var ct;if(j)if(j.forEach)j.forEach(W,K);else if(j.length!==g)for(ct=0;ct<j.length;)W.call(K,j[ct],ct,j),ct++;else for(ct in j)j.hasOwnProperty(ct)&&W.call(K,j[ct],ct,j)}function p(j,W,K){var ct="DEPRECATED METHOD: "+W+`
`+K+` AT 
`;return function(){var yt=new Error("get-stack-trace"),Dt=yt&&yt.stack?yt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",jt=Z.console&&(Z.console.warn||Z.console.log);return jt&&jt.call(Z.console,ct,Dt),j.apply(this,arguments)}}function s(j,W,K){var ct,yt=W.prototype;ct=j.prototype=Object.create(yt),ct.constructor=j,ct._super=yt,K&&z(ct,K)}function d(j,W){return function(){return j.apply(W,arguments)}}function l(j,W){return typeof j==ot?j.apply(W&&W[0]||g,W):j}function o(j,W){return j===g?W:j}function E(j,W,K){h(n(W),function(ct){j.addEventListener(ct,K,!1)})}function r(j,W,K){h(n(W),function(ct){j.removeEventListener(ct,K,!1)})}function c(j,W){for(;j;){if(j==W)return!0;j=j.parentNode}return!1}function b(j,W){return j.indexOf(W)>-1}function n(j){return j.trim().split(/\s+/g)}function i(j,W,K){if(j.indexOf&&!K)return j.indexOf(W);for(var ct=0;ct<j.length;){if(K&&j[ct][K]==W||!K&&j[ct]===W)return ct;ct++}return-1}function a(j){return Array.prototype.slice.call(j,0)}function m(j,W,K){for(var ct=[],yt=[],Dt=0;Dt<j.length;){var jt=W?j[Dt][W]:j[Dt];i(yt,jt)<0&&ct.push(j[Dt]),yt[Dt]=jt,Dt++}return K&&(ct=W?ct.sort(function(te,Ce){return te[W]>Ce[W]}):ct.sort()),ct}function _(j,W){for(var K,ct,yt=W[0].toUpperCase()+W.slice(1),Dt=0;Dt<$.length;){if(K=$[Dt],ct=K?K+yt:W,ct in j)return ct;Dt++}return g}function S(){return zt++}function f(j){var W=j.ownerDocument||j;return W.defaultView||W.parentWindow||Z}function k(j,W){var K=this;this.manager=j,this.callback=W,this.element=j.element,this.target=j.options.inputTarget,this.domHandler=function(ct){l(j.options.enable,[j])&&K.handler(ct)},this.init()}function M(j){var W,K=j.options.inputClass;return new(W=K||(re?bt:we?Lt:ie?It:xt))(j,X)}function X(j,W,K){var ct=K.pointers.length,yt=K.changedPointers.length,Dt=W&ge&&ct-yt===0,jt=W&(se|ye)&&ct-yt===0;K.isFirst=!!Dt,K.isFinal=!!jt,Dt&&(j.session={}),K.eventType=W,B(j,K),j.emit("hammer.input",K),j.recognize(K),j.session.prevInput=K}function B(j,W){var K=j.session,ct=W.pointers,yt=ct.length;K.firstInput||(K.firstInput=Q(W)),yt>1&&!K.firstMultiple?K.firstMultiple=Q(W):yt===1&&(K.firstMultiple=!1);var Dt=K.firstInput,jt=K.firstMultiple,te=jt?jt.center:Dt.center,Ce=W.center=dt(ct);W.timeStamp=kt(),W.deltaTime=W.timeStamp-Dt.timeStamp,W.angle=tt(te,Ce),W.distance=ut(te,Ce),V(K,W),W.offsetDirection=St(W.deltaX,W.deltaY);var ce=ht(W.deltaTime,W.deltaX,W.deltaY);W.overallVelocityX=ce.x,W.overallVelocityY=ce.y,W.overallVelocity=pt(ce.x)>pt(ce.y)?ce.x:ce.y,W.scale=jt?rt(jt.pointers,ct):1,W.rotation=jt?st(jt.pointers,ct):0,W.maxPointers=K.prevInput?W.pointers.length>K.prevInput.maxPointers?W.pointers.length:K.prevInput.maxPointers:W.pointers.length,w(K,W);var Oe=j.element;c(W.srcEvent.target,Oe)&&(Oe=W.srcEvent.target),W.target=Oe}function V(j,W){var K=W.center,ct=j.offsetDelta||{},yt=j.prevDelta||{},Dt=j.prevInput||{};W.eventType!==ge&&Dt.eventType!==se||(yt=j.prevDelta={x:Dt.deltaX||0,y:Dt.deltaY||0},ct=j.offsetDelta={x:K.x,y:K.y}),W.deltaX=yt.x+(K.x-ct.x),W.deltaY=yt.y+(K.y-ct.y)}function w(j,W){var K,ct,yt,Dt,jt=j.lastInterval||W,te=W.timeStamp-jt.timeStamp;if(W.eventType!=ye&&(te>vi||jt.velocity===g)){var Ce=W.deltaX-jt.deltaX,ce=W.deltaY-jt.deltaY,Oe=ht(te,Ce,ce);ct=Oe.x,yt=Oe.y,K=pt(Oe.x)>pt(Oe.y)?Oe.x:Oe.y,Dt=St(Ce,ce),j.lastInterval=W}else K=jt.velocity,ct=jt.velocityX,yt=jt.velocityY,Dt=jt.direction;W.velocity=K,W.velocityX=ct,W.velocityY=yt,W.direction=Dt}function Q(j){for(var W=[],K=0;K<j.pointers.length;)W[K]={clientX:lt(j.pointers[K].clientX),clientY:lt(j.pointers[K].clientY)},K++;return{timeStamp:kt(),pointers:W,center:dt(W),deltaX:j.deltaX,deltaY:j.deltaY}}function dt(j){var W=j.length;if(W===1)return{x:lt(j[0].clientX),y:lt(j[0].clientY)};for(var K=0,ct=0,yt=0;W>yt;)K+=j[yt].clientX,ct+=j[yt].clientY,yt++;return{x:lt(K/W),y:lt(ct/W)}}function ht(j,W,K){return{x:W/j||0,y:K/j||0}}function St(j,W){return j===W?ei:pt(j)>=pt(W)?0>j?Le:We:0>W?hi:Ve}function ut(j,W,K){K||(K=ue);var ct=W[K[0]]-j[K[0]],yt=W[K[1]]-j[K[1]];return Math.sqrt(ct*ct+yt*yt)}function tt(j,W,K){K||(K=ue);var ct=W[K[0]]-j[K[0]],yt=W[K[1]]-j[K[1]];return 180*Math.atan2(yt,ct)/Math.PI}function st(j,W){return tt(W[1],W[0],de)+tt(j[1],j[0],de)}function rt(j,W){return ut(W[0],W[1],de)/ut(j[0],j[1],de)}function xt(){this.evEl=ve,this.evWin=bi,this.pressed=!1,k.apply(this,arguments)}function bt(){this.evEl=Ke,this.evWin=Ti,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function wt(){this.evTarget=ni,this.evWin=Ui,this.started=!1,k.apply(this,arguments)}function Rt(j,W){var K=a(j.touches),ct=a(j.changedTouches);return W&(se|ye)&&(K=m(K.concat(ct),"identifier",!0)),[K,ct]}function Lt(){this.evTarget=Ai,this.targetIds={},k.apply(this,arguments)}function vt(j,W){var K=a(j.touches),ct=this.targetIds;if(W&(ge|Xe)&&K.length===1)return ct[K[0].identifier]=!0,[K,K];var yt,Dt,jt=a(j.changedTouches),te=[],Ce=this.target;if(Dt=K.filter(function(ce){return c(ce.target,Ce)}),W===ge)for(yt=0;yt<Dt.length;)ct[Dt[yt].identifier]=!0,yt++;for(yt=0;yt<jt.length;)ct[jt[yt].identifier]&&te.push(jt[yt]),W&(se|ye)&&delete ct[jt[yt].identifier],yt++;return te.length?[m(Dt.concat(te),"identifier",!0),te]:void 0}function It(){k.apply(this,arguments);var j=d(this.handler,this);this.touch=new Lt(this.manager,j),this.mouse=new xt(this.manager,j),this.primaryTouch=null,this.lastTouches=[]}function Vt(j,W){j&ge?(this.primaryTouch=W.changedPointers[0].identifier,Ft.call(this,W)):j&(se|ye)&&Ft.call(this,W)}function Ft(j){var W=j.changedPointers[0];if(W.identifier===this.primaryTouch){var K={x:W.clientX,y:W.clientY};this.lastTouches.push(K);var ct=this.lastTouches,yt=function(){var Dt=ct.indexOf(K);Dt>-1&&ct.splice(Dt,1)};setTimeout(yt,Wi)}}function C(j){for(var W=j.srcEvent.clientX,K=j.srcEvent.clientY,ct=0;ct<this.lastTouches.length;ct++){var yt=this.lastTouches[ct],Dt=Math.abs(W-yt.x),jt=Math.abs(K-yt.y);if(Ni>=Dt&&Ni>=jt)return!0}return!1}function u(j,W){this.manager=j,this.set(W)}function e(j){if(b(j,qe))return qe;var W=b(j,ri),K=b(j,si);return W&&K?qe:W||K?W?ri:si:b(j,yi)?yi:Ri}function A(){if(!Li)return!1;var j={},W=Z.CSS&&Z.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(K){j[K]=W?Z.CSS.supports("touch-action",K):!0}),j}function R(j){this.options=z({},this.defaults,j||{}),this.id=S(),this.manager=null,this.options.enable=o(this.options.enable,!0),this.state=fe,this.simultaneous={},this.requireFail=[]}function I(j){return j&_e?"cancel":j&Re?"end":j&le?"move":j&he?"start":""}function D(j){return j==Ve?"down":j==hi?"up":j==Le?"left":j==We?"right":""}function H(j,W){var K=W.manager;return K?K.get(j):j}function J(){R.apply(this,arguments)}function at(){J.apply(this,arguments),this.pX=null,this.pY=null}function et(){J.apply(this,arguments)}function gt(){R.apply(this,arguments),this._timer=null,this._input=null}function Et(){J.apply(this,arguments)}function mt(){J.apply(this,arguments)}function L(){R.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function U(j,W){return W=W||{},W.recognizers=o(W.recognizers,U.defaults.preset),new q(j,W)}function q(j,W){this.options=z({},U.defaults,W||{}),this.options.inputTarget=this.options.inputTarget||j,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=j,this.input=M(this),this.touchAction=new u(this,this.options.touchAction),T(this,!0),h(this.options.recognizers,function(K){var ct=this.add(new K[0](K[1]));K[2]&&ct.recognizeWith(K[2]),K[3]&&ct.requireFailure(K[3])},this)}function T(j,W){var K=j.element;if(K.style){var ct;h(j.options.cssProps,function(yt,Dt){ct=_(K.style,Dt),W?(j.oldCssProps[ct]=K.style[ct],K.style[ct]=yt):K.style[ct]=j.oldCssProps[ct]||""}),W||(j.oldCssProps={})}}function O(j,W){var K=Y.createEvent("Event");K.initEvent(j,!0,!0),K.gesture=W,W.target.dispatchEvent(K)}var z,$=["","webkit","Moz","MS","ms","o"],G=Y.createElement("div"),ot="function",lt=Math.round,pt=Math.abs,kt=Date.now;z=typeof Object.assign!="function"?function(j){if(j===g||j===null)throw new TypeError("Cannot convert undefined or null to object");for(var W=Object(j),K=1;K<arguments.length;K++){var ct=arguments[K];if(ct!==g&&ct!==null)for(var yt in ct)ct.hasOwnProperty(yt)&&(W[yt]=ct[yt])}return W}:Object.assign;var Nt=p(function(j,W,K){for(var ct=Object.keys(W),yt=0;yt<ct.length;)(!K||K&&j[ct[yt]]===g)&&(j[ct[yt]]=W[ct[yt]]),yt++;return j},"extend","Use `assign`."),Mt=p(function(j,W){return Nt(j,W,!0)},"merge","Use `assign`."),zt=1,$t=/mobile|tablet|ip(ad|hone|od)|android/i,ie="ontouchstart"in Z,re=_(Z,"PointerEvent")!==g,we=ie&&$t.test(navigator.userAgent),be="touch",Be="pen",Ae="mouse",Te="kinect",vi=25,ge=1,Xe=2,se=4,ye=8,ei=1,Le=2,We=4,hi=8,Ve=16,De=Le|We,Ze=hi|Ve,Ye=De|Ze,ue=["x","y"],de=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(f(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&r(this.element,this.evEl,this.domHandler),this.evTarget&&r(this.target,this.evTarget,this.domHandler),this.evWin&&r(f(this.element),this.evWin,this.domHandler)}};var xe={mousedown:ge,mousemove:Xe,mouseup:se},ve="mousedown",bi="mousemove mouseup";s(xt,k,{handler:function(j){var W=xe[j.type];W&ge&&j.button===0&&(this.pressed=!0),W&Xe&&j.which!==1&&(W=se),this.pressed&&(W&se&&(this.pressed=!1),this.callback(this.manager,W,{pointers:[j],changedPointers:[j],pointerType:Ae,srcEvent:j}))}});var ii={pointerdown:ge,pointermove:Xe,pointerup:se,pointercancel:ye,pointerout:ye},Ge={2:be,3:Be,4:Ae,5:Te},Ke="pointerdown",Ti="pointermove pointerup pointercancel";Z.MSPointerEvent&&!Z.PointerEvent&&(Ke="MSPointerDown",Ti="MSPointerMove MSPointerUp MSPointerCancel"),s(bt,k,{handler:function(j){var W=this.store,K=!1,ct=j.type.toLowerCase().replace("ms",""),yt=ii[ct],Dt=Ge[j.pointerType]||j.pointerType,jt=Dt==be,te=i(W,j.pointerId,"pointerId");yt&ge&&(j.button===0||jt)?0>te&&(W.push(j),te=W.length-1):yt&(se|ye)&&(K=!0),0>te||(W[te]=j,this.callback(this.manager,yt,{pointers:W,changedPointers:[j],pointerType:Dt,srcEvent:j}),K&&W.splice(te,1))}});var Ci={touchstart:ge,touchmove:Xe,touchend:se,touchcancel:ye},ni="touchstart",Ui="touchstart touchmove touchend touchcancel";s(wt,k,{handler:function(j){var W=Ci[j.type];if(W===ge&&(this.started=!0),this.started){var K=Rt.call(this,j,W);W&(se|ye)&&K[0].length-K[1].length===0&&(this.started=!1),this.callback(this.manager,W,{pointers:K[0],changedPointers:K[1],pointerType:be,srcEvent:j})}}});var Oi={touchstart:ge,touchmove:Xe,touchend:se,touchcancel:ye},Ai="touchstart touchmove touchend touchcancel";s(Lt,k,{handler:function(j){var W=Oi[j.type],K=vt.call(this,j,W);K&&this.callback(this.manager,W,{pointers:K[0],changedPointers:K[1],pointerType:be,srcEvent:j})}});var Wi=2500,Ni=25;s(It,k,{handler:function(j,W,K){var ct=K.pointerType==be,yt=K.pointerType==Ae;if(!(yt&&K.sourceCapabilities&&K.sourceCapabilities.firesTouchEvents)){if(ct)Vt.call(this,W,K);else if(yt&&C.call(this,K))return;this.callback(j,W,K)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ii=_(G.style,"touchAction"),Li=Ii!==g,Di="compute",Ri="auto",yi="manipulation",qe="none",ri="pan-x",si="pan-y",Ee=A();u.prototype={set:function(j){j==Di&&(j=this.compute()),Li&&this.manager.element.style&&Ee[j]&&(this.manager.element.style[Ii]=j),this.actions=j.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var j=[];return h(this.manager.recognizers,function(W){l(W.options.enable,[W])&&(j=j.concat(W.getTouchAction()))}),e(j.join(" "))},preventDefaults:function(j){var W=j.srcEvent,K=j.offsetDirection;if(this.manager.session.prevented)return void W.preventDefault();var ct=this.actions,yt=b(ct,qe)&&!Ee[qe],Dt=b(ct,si)&&!Ee[si],jt=b(ct,ri)&&!Ee[ri];if(yt){var te=j.pointers.length===1,Ce=j.distance<2,ce=j.deltaTime<250;if(te&&Ce&&ce)return}return jt&&Dt?void 0:yt||Dt&&K&De||jt&&K&Ze?this.preventSrc(W):void 0},preventSrc:function(j){this.manager.session.prevented=!0,j.preventDefault()}};var fe=1,he=2,le=4,Re=8,Ne=Re,_e=16,pe=32;R.prototype={defaults:{},set:function(j){return z(this.options,j),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(j){if(y(j,"recognizeWith",this))return this;var W=this.simultaneous;return j=H(j,this),W[j.id]||(W[j.id]=j,j.recognizeWith(this)),this},dropRecognizeWith:function(j){return y(j,"dropRecognizeWith",this)?this:(j=H(j,this),delete this.simultaneous[j.id],this)},requireFailure:function(j){if(y(j,"requireFailure",this))return this;var W=this.requireFail;return j=H(j,this),i(W,j)===-1&&(W.push(j),j.requireFailure(this)),this},dropRequireFailure:function(j){if(y(j,"dropRequireFailure",this))return this;j=H(j,this);var W=i(this.requireFail,j);return W>-1&&this.requireFail.splice(W,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(j){return!!this.simultaneous[j.id]},emit:function(j){function W(yt){K.manager.emit(yt,j)}var K=this,ct=this.state;Re>ct&&W(K.options.event+I(ct)),W(K.options.event),j.additionalEvent&&W(j.additionalEvent),ct>=Re&&W(K.options.event+I(ct))},tryEmit:function(j){return this.canEmit()?this.emit(j):void(this.state=pe)},canEmit:function(){for(var j=0;j<this.requireFail.length;){if(!(this.requireFail[j].state&(pe|fe)))return!1;j++}return!0},recognize:function(j){var W=z({},j);return l(this.options.enable,[this,W])?(this.state&(Ne|_e|pe)&&(this.state=fe),this.state=this.process(W),void(this.state&(he|le|Re|_e)&&this.tryEmit(W))):(this.reset(),void(this.state=pe))},process:function(j){},getTouchAction:function(){},reset:function(){}},s(J,R,{defaults:{pointers:1},attrTest:function(j){var W=this.options.pointers;return W===0||j.pointers.length===W},process:function(j){var W=this.state,K=j.eventType,ct=W&(he|le),yt=this.attrTest(j);return ct&&(K&ye||!yt)?W|_e:ct||yt?K&se?W|Re:W&he?W|le:he:pe}}),s(at,J,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ye},getTouchAction:function(){var j=this.options.direction,W=[];return j&De&&W.push(si),j&Ze&&W.push(ri),W},directionTest:function(j){var W=this.options,K=!0,ct=j.distance,yt=j.direction,Dt=j.deltaX,jt=j.deltaY;return yt&W.direction||(W.direction&De?(yt=Dt===0?ei:0>Dt?Le:We,K=Dt!=this.pX,ct=Math.abs(j.deltaX)):(yt=jt===0?ei:0>jt?hi:Ve,K=jt!=this.pY,ct=Math.abs(j.deltaY))),j.direction=yt,K&&ct>W.threshold&&yt&W.direction},attrTest:function(j){return J.prototype.attrTest.call(this,j)&&(this.state&he||!(this.state&he)&&this.directionTest(j))},emit:function(j){this.pX=j.deltaX,this.pY=j.deltaY;var W=D(j.direction);W&&(j.additionalEvent=this.options.event+W),this._super.emit.call(this,j)}}),s(et,J,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qe]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.scale-1)>this.options.threshold||this.state&he)},emit:function(j){if(j.scale!==1){var W=j.scale<1?"in":"out";j.additionalEvent=this.options.event+W}this._super.emit.call(this,j)}}),s(gt,R,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ri]},process:function(j){var W=this.options,K=j.pointers.length===W.pointers,ct=j.distance<W.threshold,yt=j.deltaTime>W.time;if(this._input=j,!ct||!K||j.eventType&(se|ye)&&!yt)this.reset();else if(j.eventType&ge)this.reset(),this._timer=x(function(){this.state=Ne,this.tryEmit()},W.time,this);else if(j.eventType&se)return Ne;return pe},reset:function(){clearTimeout(this._timer)},emit:function(j){this.state===Ne&&(j&&j.eventType&se?this.manager.emit(this.options.event+"up",j):(this._input.timeStamp=kt(),this.manager.emit(this.options.event,this._input)))}}),s(Et,J,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qe]},attrTest:function(j){return this._super.attrTest.call(this,j)&&(Math.abs(j.rotation)>this.options.threshold||this.state&he)}}),s(mt,J,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:De|Ze,pointers:1},getTouchAction:function(){return at.prototype.getTouchAction.call(this)},attrTest:function(j){var W,K=this.options.direction;return K&(De|Ze)?W=j.overallVelocity:K&De?W=j.overallVelocityX:K&Ze&&(W=j.overallVelocityY),this._super.attrTest.call(this,j)&&K&j.offsetDirection&&j.distance>this.options.threshold&&j.maxPointers==this.options.pointers&&pt(W)>this.options.velocity&&j.eventType&se},emit:function(j){var W=D(j.offsetDirection);W&&this.manager.emit(this.options.event+W,j),this.manager.emit(this.options.event,j)}}),s(L,R,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yi]},process:function(j){var W=this.options,K=j.pointers.length===W.pointers,ct=j.distance<W.threshold,yt=j.deltaTime<W.time;if(this.reset(),j.eventType&ge&&this.count===0)return this.failTimeout();if(ct&&yt&&K){if(j.eventType!=se)return this.failTimeout();var Dt=this.pTime?j.timeStamp-this.pTime<W.interval:!0,jt=!this.pCenter||ut(this.pCenter,j.center)<W.posThreshold;this.pTime=j.timeStamp,this.pCenter=j.center,jt&&Dt?this.count+=1:this.count=1,this._input=j;var te=this.count%W.taps;if(te===0)return this.hasRequireFailures()?(this._timer=x(function(){this.state=Ne,this.tryEmit()},W.interval,this),he):Ne}return pe},failTimeout:function(){return this._timer=x(function(){this.state=pe},this.options.interval,this),pe},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ne&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),U.VERSION="2.0.7",U.defaults={domEvents:!1,touchAction:Di,enable:!0,inputTarget:null,inputClass:null,preset:[[Et,{enable:!1}],[et,{enable:!1},["rotate"]],[mt,{direction:De}],[at,{direction:De},["swipe"]],[L],[L,{event:"doubletap",taps:2},["tap"]],[gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _i=1,Qe=2;q.prototype={set:function(j){return z(this.options,j),j.touchAction&&this.touchAction.update(),j.inputTarget&&(this.input.destroy(),this.input.target=j.inputTarget,this.input.init()),this},stop:function(j){this.session.stopped=j?Qe:_i},recognize:function(j){var W=this.session;if(!W.stopped){this.touchAction.preventDefaults(j);var K,ct=this.recognizers,yt=W.curRecognizer;(!yt||yt&&yt.state&Ne)&&(yt=W.curRecognizer=null);for(var Dt=0;Dt<ct.length;)K=ct[Dt],W.stopped===Qe||yt&&K!=yt&&!K.canRecognizeWith(yt)?K.reset():K.recognize(j),!yt&&K.state&(he|le|Re)&&(yt=W.curRecognizer=K),Dt++}},get:function(j){if(j instanceof R)return j;for(var W=this.recognizers,K=0;K<W.length;K++)if(W[K].options.event==j)return W[K];return null},add:function(j){if(y(j,"add",this))return this;var W=this.get(j.options.event);return W&&this.remove(W),this.recognizers.push(j),j.manager=this,this.touchAction.update(),j},remove:function(j){if(y(j,"remove",this))return this;if(j=this.get(j)){var W=this.recognizers,K=i(W,j);K!==-1&&(W.splice(K,1),this.touchAction.update())}return this},on:function(j,W){if(j!==g&&W!==g){var K=this.handlers;return h(n(j),function(ct){K[ct]=K[ct]||[],K[ct].push(W)}),this}},off:function(j,W){if(j!==g){var K=this.handlers;return h(n(j),function(ct){W?K[ct]&&K[ct].splice(i(K[ct],W),1):delete K[ct]}),this}},emit:function(j,W){this.options.domEvents&&O(j,W);var K=this.handlers[j]&&this.handlers[j].slice();if(K&&K.length){W.type=j,W.preventDefault=function(){W.srcEvent.preventDefault()};for(var ct=0;ct<K.length;)K[ct](W),ct++}},destroy:function(){this.element&&T(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},z(U,{INPUT_START:ge,INPUT_MOVE:Xe,INPUT_END:se,INPUT_CANCEL:ye,STATE_POSSIBLE:fe,STATE_BEGAN:he,STATE_CHANGED:le,STATE_ENDED:Re,STATE_RECOGNIZED:Ne,STATE_CANCELLED:_e,STATE_FAILED:pe,DIRECTION_NONE:ei,DIRECTION_LEFT:Le,DIRECTION_RIGHT:We,DIRECTION_UP:hi,DIRECTION_DOWN:Ve,DIRECTION_HORIZONTAL:De,DIRECTION_VERTICAL:Ze,DIRECTION_ALL:Ye,Manager:q,Input:k,TouchAction:u,TouchInput:Lt,MouseInput:xt,PointerEventInput:bt,TouchMouseInput:It,SingleTouchInput:wt,Recognizer:R,AttrRecognizer:J,Tap:L,Pan:at,Swipe:mt,Pinch:et,Rotate:Et,Press:gt,on:E,off:r,each:h,merge:Mt,extend:Nt,assign:z,inherit:s,bindFn:d,prefixed:_});var zi=typeof Z<"u"?Z:typeof self<"u"?self:{};zi.Hammer=U,typeof define=="function"&&define.amd?define(function(){return U}):typeof module<"u"&&module.exports?module.exports=U:Z[P]=U})(window,document,"Hammer");
